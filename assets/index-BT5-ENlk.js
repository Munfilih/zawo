(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function Pw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v0={exports:{}},Rl={};/**
* @license React
* react-jsx-runtime.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var y0;function cI(){if(y0)return Rl;y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Rl.Fragment=e,Rl.jsx=t,Rl.jsxs=t,Rl}var b0;function dI(){return b0||(b0=1,v0.exports=cI()),v0.exports}var R=dI(),E0={exports:{}},Te={};/**
* @license React
* react.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var w0;function hI(){if(w0)return Te;w0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function N(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function $(j,ee,ue){this.props=j,this.context=ee,this.refs=V,this.updater=ue||H}$.prototype.isReactComponent={},$.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},$.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function X(){}X.prototype=$.prototype;function se(j,ee,ue){this.props=j,this.context=ee,this.refs=V,this.updater=ue||H}var oe=se.prototype=new X;oe.constructor=se,L(oe,$.prototype),oe.isPureReactComponent=!0;var pe=Array.isArray;function ie(){}var O={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(j,ee,ue){var he=ue.ref;return{$$typeof:n,type:j,key:ee,ref:he!==void 0?he:null,props:ue}}function M(j,ee){return k(j.type,ee,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function F(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ue){return ee[ue]})}var x=/\/+/g;function We(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):ee.toString(36)}function pt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ie,ie):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,ee,ue,he,Ce){var ke=typeof j;(ke==="undefined"||ke==="boolean")&&(j=null);var je=!1;if(j===null)je=!0;else switch(ke){case"bigint":case"string":case"number":je=!0;break;case"object":switch(j.$$typeof){case n:case e:je=!0;break;case b:return je=j._init,Y(je(j._payload),ee,ue,he,Ce)}}if(je)return Ce=Ce(j),je=he===""?"."+We(j,0):he,pe(Ce)?(ue="",je!=null&&(ue=je.replace(x,"$&/")+"/"),Y(Ce,ee,ue,"",function(pr){return pr})):Ce!=null&&(D(Ce)&&(Ce=M(Ce,ue+(Ce.key==null||j&&j.key===Ce.key?"":(""+Ce.key).replace(x,"$&/")+"/")+je)),ee.push(Ce)),1;je=0;var Dt=he===""?".":he+":";if(pe(j))for(var ut=0;ut<j.length;ut++)he=j[ut],ke=Dt+We(he,ut),je+=Y(he,ee,ue,ke,Ce);else if(ut=N(j),typeof ut=="function")for(j=ut.call(j),ut=0;!(he=j.next()).done;)he=he.value,ke=Dt+We(he,ut++),je+=Y(he,ee,ue,ke,Ce);else if(ke==="object"){if(typeof j.then=="function")return Y(pt(j),ee,ue,he,Ce);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return je}function le(j,ee,ue){if(j==null)return j;var he=[],Ce=0;return Y(j,he,"","",function(ke){return ee.call(ue,ke,Ce++)}),he}function ye(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ue){(j._status===0||j._status===-1)&&(j._status=1,j._result=ue)},function(ue){(j._status===0||j._status===-1)&&(j._status=2,j._result=ue)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var He=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ke={map:le,forEach:function(j,ee,ue){le(j,function(){ee.apply(this,arguments)},ue)},count:function(j){var ee=0;return le(j,function(){ee++}),ee},toArray:function(j){return le(j,function(ee){return ee})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Te.Activity=w,Te.Children=Ke,Te.Component=$,Te.Fragment=t,Te.Profiler=o,Te.PureComponent=se,Te.StrictMode=s,Te.Suspense=m,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Te.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},Te.cache=function(j){return function(){return j.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(j,ee,ue){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var he=L({},j.props),Ce=j.key;if(ee!=null)for(ke in ee.key!==void 0&&(Ce=""+ee.key),ee)!A.call(ee,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ee.ref===void 0||(he[ke]=ee[ke]);var ke=arguments.length-2;if(ke===1)he.children=ue;else if(1<ke){for(var je=Array(ke),Dt=0;Dt<ke;Dt++)je[Dt]=arguments[Dt+2];he.children=je}return k(j.type,Ce,he)},Te.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Te.createElement=function(j,ee,ue){var he,Ce={},ke=null;if(ee!=null)for(he in ee.key!==void 0&&(ke=""+ee.key),ee)A.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ce[he]=ee[he]);var je=arguments.length-2;if(je===1)Ce.children=ue;else if(1<je){for(var Dt=Array(je),ut=0;ut<je;ut++)Dt[ut]=arguments[ut+2];Ce.children=Dt}if(j&&j.defaultProps)for(he in je=j.defaultProps,je)Ce[he]===void 0&&(Ce[he]=je[he]);return k(j,ke,Ce)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(j){return{$$typeof:f,render:j}},Te.isValidElement=D,Te.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:ye}},Te.memo=function(j,ee){return{$$typeof:v,type:j,compare:ee===void 0?null:ee}},Te.startTransition=function(j){var ee=O.T,ue={};O.T=ue;try{var he=j(),Ce=O.S;Ce!==null&&Ce(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ie,He)}catch(ke){He(ke)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),O.T=ee}},Te.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Te.use=function(j){return O.H.use(j)},Te.useActionState=function(j,ee,ue){return O.H.useActionState(j,ee,ue)},Te.useCallback=function(j,ee){return O.H.useCallback(j,ee)},Te.useContext=function(j){return O.H.useContext(j)},Te.useDebugValue=function(){},Te.useDeferredValue=function(j,ee){return O.H.useDeferredValue(j,ee)},Te.useEffect=function(j,ee){return O.H.useEffect(j,ee)},Te.useEffectEvent=function(j){return O.H.useEffectEvent(j)},Te.useId=function(){return O.H.useId()},Te.useImperativeHandle=function(j,ee,ue){return O.H.useImperativeHandle(j,ee,ue)},Te.useInsertionEffect=function(j,ee){return O.H.useInsertionEffect(j,ee)},Te.useLayoutEffect=function(j,ee){return O.H.useLayoutEffect(j,ee)},Te.useMemo=function(j,ee){return O.H.useMemo(j,ee)},Te.useOptimistic=function(j,ee){return O.H.useOptimistic(j,ee)},Te.useReducer=function(j,ee,ue){return O.H.useReducer(j,ee,ue)},Te.useRef=function(j){return O.H.useRef(j)},Te.useState=function(j){return O.H.useState(j)},Te.useSyncExternalStore=function(j,ee,ue){return O.H.useSyncExternalStore(j,ee,ue)},Te.useTransition=function(){return O.H.useTransition()},Te.version="19.2.0",Te}var _0;function Xp(){return _0||(_0=1,E0.exports=hI()),E0.exports}var Ve=Xp();const fI=Pw(Ve);var ip={exports:{}},Pl={},C0={exports:{}},S0={};/**
* @license React
* scheduler.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var T0;function pI(){return T0||(T0=1,(function(n){function e(Y,le){var ye=Y.length;Y.push(le);e:for(;0<ye;){var He=ye-1>>>1,Ke=Y[He];if(0<o(Ke,le))Y[He]=le,Y[ye]=Ke,ye=He;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var le=Y[0],ye=Y.pop();if(ye!==le){Y[0]=ye;e:for(var He=0,Ke=Y.length,j=Ke>>>1;He<j;){var ee=2*(He+1)-1,ue=Y[ee],he=ee+1,Ce=Y[he];if(0>o(ue,ye))he<Ke&&0>o(Ce,ue)?(Y[He]=Ce,Y[he]=ye,He=he):(Y[He]=ue,Y[ee]=ye,He=ee);else if(he<Ke&&0>o(Ce,ye))Y[He]=Ce,Y[he]=ye,He=he;else break e}}return le}function o(Y,le){var ye=Y.sortIndex-le.sortIndex;return ye!==0?ye:Y.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],v=[],b=1,w=null,S=3,N=!1,H=!1,L=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function oe(Y){for(var le=t(v);le!==null;){if(le.callback===null)s(v);else if(le.startTime<=Y)s(v),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(v)}}function pe(Y){if(L=!1,oe(Y),!H)if(t(m)!==null)H=!0,ie||(ie=!0,F());else{var le=t(v);le!==null&&pt(pe,le.startTime-Y)}}var ie=!1,O=-1,A=5,k=-1;function M(){return V?!0:!(n.unstable_now()-k<A)}function D(){if(V=!1,ie){var Y=n.unstable_now();k=Y;var le=!0;try{e:{H=!1,L&&(L=!1,X(O),O=-1),N=!0;var ye=S;try{t:{for(oe(Y),w=t(m);w!==null&&!(w.expirationTime>Y&&M());){var He=w.callback;if(typeof He=="function"){w.callback=null,S=w.priorityLevel;var Ke=He(w.expirationTime<=Y);if(Y=n.unstable_now(),typeof Ke=="function"){w.callback=Ke,oe(Y),le=!0;break t}w===t(m)&&s(m),oe(Y)}else s(m);w=t(m)}if(w!==null)le=!0;else{var j=t(v);j!==null&&pt(pe,j.startTime-Y),le=!1}}break e}finally{w=null,S=ye,N=!1}le=void 0}}finally{le?F():ie=!1}}}var F;if(typeof se=="function")F=function(){se(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,We=x.port2;x.port1.onmessage=D,F=function(){We.postMessage(null)}}else F=function(){$(D,0)};function pt(Y,le){O=$(function(){Y(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var ye=S;S=le;try{return Y()}finally{S=ye}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=S;S=Y;try{return le()}finally{S=ye}},n.unstable_scheduleCallback=function(Y,le,ye){var He=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?He+ye:He):ye=He,Y){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,Y={id:b++,callback:le,priorityLevel:Y,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>He?(Y.sortIndex=ye,e(v,Y),t(m)===null&&Y===t(v)&&(L?(X(O),O=-1):L=!0,pt(pe,ye-He))):(Y.sortIndex=Ke,e(m,Y),H||N||(H=!0,ie||(ie=!0,F()))),Y},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Y){var le=S;return function(){var ye=S;S=le;try{return Y.apply(this,arguments)}finally{S=ye}}}})(S0)),S0}var I0;function mI(){return I0||(I0=1,C0.exports=pI()),C0.exports}var sp={exports:{}},Xt={};/**
* @license React
* react-dom.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var A0;function gI(){if(A0)return Xt;A0=1;var n=Xp();function e(m){var v="https://react.dev/errors/"+m;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,v,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:m,containerInfo:v,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,v){if(m==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xt.createPortal=function(m,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(m,v,null,b)},Xt.flushSync=function(m){var v=c.T,b=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=v,s.p=b,s.d.f()}},Xt.preconnect=function(m,v){typeof m=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(m,v))},Xt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Xt.preinit=function(m,v){if(typeof m=="string"&&v&&typeof v.as=="string"){var b=v.as,w=f(b,v.crossOrigin),S=typeof v.integrity=="string"?v.integrity:void 0,N=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?s.d.S(m,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:N}):b==="script"&&s.d.X(m,{crossOrigin:w,integrity:S,fetchPriority:N,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Xt.preinitModule=function(m,v){if(typeof m=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=f(v.as,v.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(m)},Xt.preload=function(m,v){if(typeof m=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,w=f(b,v.crossOrigin);s.d.L(m,b,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Xt.preloadModule=function(m,v){if(typeof m=="string")if(v){var b=f(v.as,v.crossOrigin);s.d.m(m,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(m)},Xt.requestFormReset=function(m){s.d.r(m)},Xt.unstable_batchedUpdates=function(m,v){return m(v)},Xt.useFormState=function(m,v,b){return c.H.useFormState(m,v,b)},Xt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Xt.version="19.2.0",Xt}var k0;function vI(){if(k0)return sp.exports;k0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=gI(),sp.exports}/**
* @license React
* react-dom-client.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var N0;function yI(){if(N0)return Pl;N0=1;var n=mI(),e=Xp(),t=vI();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function v(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return m(g),i;if(y===u)return m(g),r;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var _=!1,T=g.child;T;){if(T===a){_=!0,a=g,u=y;break}if(T===u){_=!0,u=g,a=y;break}T=T.sibling}if(!_){for(T=y.child;T;){if(T===a){_=!0,a=y,u=g;break}if(T===u){_=!0,u=y,a=g;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),se=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function We(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case pe:return"Suspense";case ie:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case H:return"Portal";case se:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:We(i.type)||"Memo";case A:r=i._payload,i=i._init;try{return We(i(r))}catch{}}return null}var pt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},He=[],Ke=-1;function j(i){return{current:i}}function ee(i){0>Ke||(i.current=He[Ke],He[Ke]=null,Ke--)}function ue(i,r){Ke++,He[Ke]=i.current,i.current=r}var he=j(null),Ce=j(null),ke=j(null),je=j(null);function Dt(i,r){switch(ue(ke,r),ue(Ce,i),ue(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?qy(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=qy(r),i=Vy(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(he),ue(he,i)}function ut(){ee(he),ee(Ce),ee(ke)}function pr(i){i.memoizedState!==null&&ue(je,i);var r=he.current,a=Vy(r,i.type);r!==a&&(ue(Ce,i),ue(he,a))}function ro(i){Ce.current===i&&(ee(he),ee(Ce)),je.current===i&&(ee(je),kl._currentValue=ye)}var oo,ao;function oi(i){if(oo===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);oo=r&&r[1]||"",ao=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oo+i+ao}var ka=!1;function mr(i,r){if(!i||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var W=K}Reflect.construct(i,[],te)}else{try{te.call()}catch(K){W=K}i.call(te.prototype)}}else{try{throw Error()}catch(K){W=K}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&W&&typeof K.stack=="string")return[K.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],T=y[1];if(_&&T){var P=_.split(`
`),G=T.split(`
`);for(g=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;if(u===P.length||g===G.length)for(u=P.length-1,g=G.length-1;1<=u&&0<=g&&P[u]!==G[g];)g--;for(;1<=u&&0<=g;u--,g--)if(P[u]!==G[g]){if(u!==1||g!==1)do if(u--,g--,0>g||P[u]!==G[g]){var Q=`
`+P[u].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=u&&0<=g);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?oi(a):""}function Na(i,r){switch(i.tag){case 26:case 27:case 5:return oi(i.type);case 16:return oi("Lazy");case 13:return i.child!==r&&r!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return mr(i.type,!1);case 11:return mr(i.type.render,!1);case 1:return mr(i.type,!0);case 31:return oi("Activity");default:return""}}function Oa(i){try{var r="",a=null;do r+=Na(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ct=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,fs=n.unstable_cancelCallback,sh=n.unstable_shouldYield,vu=n.unstable_requestPaint,on=n.unstable_now,gr=n.unstable_getCurrentPriorityLevel,xa=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,ps=n.unstable_NormalPriority,rh=n.unstable_LowPriority,yu=n.unstable_IdlePriority,bu=n.log,Eu=n.unstable_setDisableYieldValue,Hn=null,Bt=null;function In(i){if(typeof bu=="function"&&Eu(i),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Hn,i)}catch{}}var vt=Math.clz32?Math.clz32:_u,wu=Math.log,lo=Math.LN2;function _u(i){return i>>>=0,i===0?32:31-(wu(i)/lo|0)|0}var ai=256,vr=262144,St=4194304;function li(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ui(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,y=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var T=u&134217727;return T!==0?(u=T&~y,u!==0?g=li(u):(_&=T,_!==0?g=li(_):a||(a=T&~i,a!==0&&(g=li(a))))):(T=u&~y,T!==0?g=li(T):_!==0?g=li(_):a||(a=u&~i,a!==0&&(g=li(a)))),g===0?0:r!==0&&r!==g&&(r&y)===0&&(y=g&-g,a=r&-r,y>=a||y===32&&(a&4194048)!==0)?r:g}function zn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function oh(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cu(){var i=St;return St<<=1,(St&62914560)===0&&(St=4194304),i}function ci(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function yr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ah(i,r,a,u,g,y){var _=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var T=i.entanglements,P=i.expirationTimes,G=i.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-vt(a),te=1<<Q;T[Q]=0,P[Q]=-1;var W=G[Q];if(W!==null)for(G[Q]=null,Q=0;Q<W.length;Q++){var K=W[Q];K!==null&&(K.lane&=-536870913)}a&=~te}u!==0&&br(i,u,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(_&~r))}function br(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-vt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Pa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-vt(a),g=1<<u;g&r|i[u]&r&&(i[u]|=r),a&=~g}}function Da(i,r){var a=r&-r;return a=(a&42)!==0?1:Er(a),(a&(i.suspendedLanes|r))!==0?0:a}function Er(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Li(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Su(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:c0(i.type))}function Bn(i,r){var a=le.p;try{return le.p=i,r()}finally{le.p=a}}var Gn=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Gn,jt="__reactProps$"+Gn,di="__reactContainer$"+Gn,uo="__reactEvents$"+Gn,lh="__reactListeners$"+Gn,Tu="__reactHandles$"+Gn,Iu="__reactResources$"+Gn,hi="__reactMarker$"+Gn;function co(i){delete i[Tt],delete i[jt],delete i[uo],delete i[lh],delete i[Tu]}function fi(i){var r=i[Tt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[di]||a[Tt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Jy(i);i!==null;){if(a=i[Tt])return a;i=Jy(i)}return r}i=a,a=i.parentNode}return null}function An(i){if(i=i[Tt]||i[di]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function gn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function pi(i){var r=i[Iu];return r||(r=i[Iu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(i){i[hi]=!0}var Ma=new Set,La={};function mi(i,r){gi(i,r),gi(i+"Capture",r)}function gi(i,r){for(La[i]=r,i=0;i<r.length;i++)Ma.add(r[i])}var Ua=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fa={},ja={};function Au(i){return Ct.call(ja,i)?!0:Ct.call(Fa,i)?!1:Ua.test(i)?ja[i]=!0:(Fa[i]=!0,!1)}function ho(i,r,a){if(Au(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function vn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function At(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ms(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function qa(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(_){a=""+_,y.call(this,_)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ye(i){if(!i._valueTracker){var r=ms(i)?"checked":"value";i._valueTracker=qa(i,r,""+i[r])}}function wr(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=ms(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _r=/[\n"\\]/g;function yn(i){return i.replace(_r,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function fo(i,r,a,u,g,y,_,T){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+qt(r)):i.value!==""+qt(r)&&(i.value=""+qt(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?Va(i,_,qt(r)):a!=null?Va(i,_,qt(a)):u!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+qt(T):i.removeAttribute("name")}function ku(i,r,a,u,g,y,_,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),r!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||r!=null)){Ye(i);return}a=a!=null?""+qt(a):"",r=r!=null?""+qt(r):a,T||r===i.value||(i.value=r),i.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=T?i.checked:!!u,i.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),Ye(i)}function Va(i,r,a){r==="number"&&vi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function gs(i,r,a,u){if(i=i.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=r.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+qt(a),r=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Nu(i,r,a){if(r!=null&&(r=""+qt(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+qt(a):""}function vs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(pt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=qt(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Ye(i)}function un(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Ou=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ha(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||Ou.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function za(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&a[g]!==u&&Ha(i,g,u)}else for(var y in r)r.hasOwnProperty(y)&&Ha(i,y,r[y])}function po(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(i){return ys.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wn(){}var Ba=null;function kn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var bs=null,yi=null;function Cr(i){var r=An(i);if(r&&(i=r.stateNode)){var a=i[jt]||null;e:switch(i=r.stateNode,r.type){case"input":if(fo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var g=u[jt]||null;if(!g)throw Error(s(90));fo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&wr(u)}break e;case"textarea":Nu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&gs(i,!!a.multiple,r,!1)}}}var go=!1;function Es(i,r,a){if(go)return i(r,a);go=!0;try{var u=i(r);return u}finally{if(go=!1,(bs!==null||yi!==null)&&(Sc(),bs&&(r=bs,i=yi,yi=bs=null,Cr(r),i)))for(r=0;r<i.length;r++)Cr(i[r])}}function $n(i,r){var a=i.stateNode;if(a===null)return null;var u=a[jt]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sr=!1;if(Nn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Sr=!1}var bi=null,Ga=null,Tr=null;function Wa(){if(Tr)return Tr;var i,r=Ga,a=r.length,u,g="value"in bi?bi.value:bi.textContent,y=g.length;for(i=0;i<a&&r[i]===g[i];i++);var _=a-i;for(u=1;u<=_&&r[a-u]===g[y-u];u++);return Tr=g.slice(i,1<u?1-u:void 0)}function Ir(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function Jn(){return!1}function Gt(i){function r(a,u,g,y,_){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(a=i[T],this[T]=a?a(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ui:Jn,this.isPropagationStopped=Jn,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),r}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Gt(Fi),ws=w({},Fi,{view:0,detail:0}),$a=Gt(ws),_s,vo,wi,yo=w({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(_s=i.screenX-wi.screenX,vo=i.screenY-wi.screenY):vo=_s=0,wi=i),_s)},movementY:function(i){return"movementY"in i?i.movementY:vo}}),Ja=Gt(yo),Ar=w({},yo,{dataTransfer:0}),Ru=Gt(Ar),Pu=w({},ws,{relatedTarget:0}),kr=Gt(Pu),Ka=w({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=Gt(Ka),bo=w({},Fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Mu=Gt(bo),Lu=w({},Fi,{data:0}),_i=Gt(Lu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=ju[i])?!!r[i]:!1}function Cs(){return qu}var an=w({},ws,{key:function(i){if(i.key){var r=Uu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ir(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(i){return i.type==="keypress"?Ir(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ir(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vu=Gt(an),Hu=w({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Gt(Hu),p=w({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),E=Gt(p),C=w({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Gt(C),z=w({},yo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Gt(z),ae=w({},Fi,{newState:0,oldState:0}),Ne=Gt(ae),yt=[9,13,27,32],Qe=Nn&&"CompositionEvent"in window,ct=null;Nn&&"documentMode"in document&&(ct=document.documentMode);var On=Nn&&"TextEvent"in window&&!ct,qi=Nn&&(!Qe||ct&&8<ct&&11>=ct),Kn=" ",Yn=!1;function Nr(i,r){switch(i){case"keyup":return yt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var wo=!1;function DS(i,r){switch(i){case"compositionend":return Eo(r);case"keypress":return r.which!==32?null:(Yn=!0,Kn);case"textInput":return i=r.data,i===Kn&&Yn?null:i;default:return null}}function MS(i,r){if(wo)return i==="compositionend"||!Qe&&Nr(i,r)?(i=Wa(),Tr=Ga=bi=null,wo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qi&&r.locale!=="ko"?null:r.data;default:return null}}var LS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!LS[i.type]:r==="textarea"}function Zm(i,r,a,u){bs?yi?yi.push(u):yi=[u]:bs=u,r=xc(r,"onChange"),0<r.length&&(a=new Ei("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Ya=null,Qa=null;function US(i){Dy(i,0)}function zu(i){var r=gn(i);if(wr(r))return i}function Xm(i,r){if(i==="change")return r}var eg=!1;if(Nn){var uh;if(Nn){var ch="oninput"in document;if(!ch){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),ch=typeof tg.oninput=="function"}uh=ch}else uh=!1;eg=uh&&(!document.documentMode||9<document.documentMode)}function ng(){Ya&&(Ya.detachEvent("onpropertychange",ig),Qa=Ya=null)}function ig(i){if(i.propertyName==="value"&&zu(Qa)){var r=[];Zm(r,Qa,i,kn(i)),Es(US,r)}}function FS(i,r,a){i==="focusin"?(ng(),Ya=r,Qa=a,Ya.attachEvent("onpropertychange",ig)):i==="focusout"&&ng()}function jS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zu(Qa)}function qS(i,r){if(i==="click")return zu(r)}function VS(i,r){if(i==="input"||i==="change")return zu(r)}function HS(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var bn=typeof Object.is=="function"?Object.is:HS;function Za(i,r){if(bn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ct.call(r,g)||!bn(i[g],r[g]))return!1}return!0}function sg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function rg(i,r){var a=sg(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sg(a)}}function og(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?og(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function ag(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=vi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=vi(i.document)}return r}function dh(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var zS=Nn&&"documentMode"in document&&11>=document.documentMode,_o=null,hh=null,Xa=null,fh=!1;function lg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||_o==null||_o!==vi(u)||(u=_o,"selectionStart"in u&&dh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xa&&Za(Xa,u)||(Xa=u,u=xc(hh,"onSelect"),0<u.length&&(r=new Ei("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=_o)))}function Or(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Co={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},ph={},ug={};Nn&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function xr(i){if(ph[i])return ph[i];if(!Co[i])return i;var r=Co[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in ug)return ph[i]=r[a];return i}var cg=xr("animationend"),dg=xr("animationiteration"),hg=xr("animationstart"),BS=xr("transitionrun"),GS=xr("transitionstart"),WS=xr("transitioncancel"),fg=xr("transitionend"),pg=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Qn(i,r){pg.set(i,r),mi(r,[i])}var Bu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},xn=[],So=0,gh=0;function Gu(){for(var i=So,r=gh=So=0;r<i;){var a=xn[r];xn[r++]=null;var u=xn[r];xn[r++]=null;var g=xn[r];xn[r++]=null;var y=xn[r];if(xn[r++]=null,u!==null&&g!==null){var _=u.pending;_===null?g.next=g:(g.next=_.next,_.next=g),u.pending=g}y!==0&&mg(a,g,y)}}function Wu(i,r,a,u){xn[So++]=i,xn[So++]=r,xn[So++]=a,xn[So++]=u,gh|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function vh(i,r,a,u){return Wu(i,r,a,u),$u(i)}function Rr(i,r){return Wu(i,null,null,r),$u(i)}function mg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=i.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&r!==null&&(g=31-vt(a),i=y.hiddenUpdates,u=i[g],u===null?i[g]=[r]:u.push(r),r.lane=a|536870912),y):null}function $u(i){if(50<wl)throw wl=0,Af=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var To={};function $S(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,r,a,u){return new $S(i,r,a,u)}function yh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Vi(i,r){var a=i.alternate;return a===null?(a=En(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function gg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Ju(i,r,a,u,g,y){var _=0;if(u=i,typeof i=="function")yh(i)&&(_=1);else if(typeof i=="string")_=ZT(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=En(31,a,r,g),i.elementType=k,i.lanes=y,i;case L:return Pr(a.children,g,y,r);case V:_=8,g|=24;break;case $:return i=En(12,a,r,g|2),i.elementType=$,i.lanes=y,i;case pe:return i=En(13,a,r,g),i.elementType=pe,i.lanes=y,i;case ie:return i=En(19,a,r,g),i.elementType=ie,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case se:_=10;break e;case X:_=9;break e;case oe:_=11;break e;case O:_=14;break e;case A:_=16,u=null;break e}_=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=En(_,a,r,g),r.elementType=i,r.type=u,r.lanes=y,r}function Pr(i,r,a,u){return i=En(7,i,u,r),i.lanes=a,i}function bh(i,r,a){return i=En(6,i,null,r),i.lanes=a,i}function vg(i){var r=En(18,null,null,0);return r.stateNode=i,r}function Eh(i,r,a){return r=En(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var yg=new WeakMap;function Rn(i,r){if(typeof i=="object"&&i!==null){var a=yg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Oa(r)},yg.set(i,r),r)}return{value:i,source:r,stack:Oa(r)}}var Io=[],Ao=0,Ku=null,el=0,Pn=[],Dn=0,Ss=null,Ci=1,Si="";function Hi(i,r){Io[Ao++]=el,Io[Ao++]=Ku,Ku=i,el=r}function bg(i,r,a){Pn[Dn++]=Ci,Pn[Dn++]=Si,Pn[Dn++]=Ss,Ss=i;var u=Ci;i=Si;var g=32-vt(u)-1;u&=~(1<<g),a+=1;var y=32-vt(r)+g;if(30<y){var _=g-g%5;y=(u&(1<<_)-1).toString(32),u>>=_,g-=_,Ci=1<<32-vt(r)+g|a<<g|u,Si=y+i}else Ci=1<<y|a<<g|u,Si=i}function wh(i){i.return!==null&&(Hi(i,1),bg(i,1,0))}function _h(i){for(;i===Ku;)Ku=Io[--Ao],Io[Ao]=null,el=Io[--Ao],Io[Ao]=null;for(;i===Ss;)Ss=Pn[--Dn],Pn[Dn]=null,Si=Pn[--Dn],Pn[Dn]=null,Ci=Pn[--Dn],Pn[Dn]=null}function Eg(i,r){Pn[Dn++]=Ci,Pn[Dn++]=Si,Pn[Dn++]=Ss,Ci=r.id,Si=r.overflow,Ss=i}var Wt=null,rt=null,Fe=!1,Ts=null,Mn=!1,Ch=Error(s(519));function Is(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Rn(r,i)),Ch}function wg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[Tt]=i,r[jt]=u,a){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(a=0;a<Cl.length;a++)Re(Cl[a],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),ku(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),vs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||Fy(r.textContent,a)?(u.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),u.onScroll!=null&&Re("scroll",r),u.onScrollEnd!=null&&Re("scrollend",r),u.onClick!=null&&(r.onclick=Wn),r=!0):r=!1,r||Is(i,!0)}function _g(i){for(Wt=i.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Wt=Wt.return}}function ko(i){if(i!==Wt)return!1;if(!Fe)return _g(i),Fe=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Hf(i.type,i.memoizedProps)),a=!a),a&&rt&&Is(i),_g(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=$y(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=$y(i)}else r===27?(r=rt,qs(i.type)?(i=$f,$f=null,rt=i):rt=r):rt=Wt?Ln(i.stateNode.nextSibling):null;return!0}function Dr(){rt=Wt=null,Fe=!1}function Sh(){var i=Ts;return i!==null&&(fn===null?fn=i:fn.push.apply(fn,i),Ts=null),i}function tl(i){Ts===null?Ts=[i]:Ts.push(i)}var Th=j(null),Mr=null,zi=null;function As(i,r,a){ue(Th,r._currentValue),r._currentValue=a}function Bi(i){i._currentValue=Th.current,ee(Th)}function Ih(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Ah(i,r,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=g;for(var P=0;P<r.length;P++)if(T.context===r[P]){y.lanes|=a,T=y.alternate,T!==null&&(T.lanes|=a),Ih(y.return,a,i),u||(_=null);break e}y=T.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(s(341));_.lanes|=a,y=_.alternate,y!==null&&(y.lanes|=a),Ih(_,a,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function No(i,r,a,u){i=null;for(var g=r,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=g.type;bn(g.pendingProps.value,_.value)||(i!==null?i.push(T):i=[T])}}else if(g===je.current){if(_=g.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(kl):i=[kl])}g=g.return}i!==null&&Ah(r,i,a,u),r.flags|=262144}function Yu(i){for(i=i.firstContext;i!==null;){if(!bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Lr(i){Mr=i,zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function $t(i){return Cg(Mr,i)}function Qu(i,r){return Mr===null&&Lr(i),Cg(i,r)}function Cg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},zi===null){if(i===null)throw Error(s(308));zi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else zi=zi.next=r;return a}var JS=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},KS=n.unstable_scheduleCallback,YS=n.unstable_NormalPriority,kt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new JS,data:new Map,refCount:0}}function nl(i){i.refCount--,i.refCount===0&&KS(YS,function(){i.controller.abort()})}var il=null,Nh=0,Oo=0,xo=null;function QS(i,r){if(il===null){var a=il=[];Nh=0,Oo=Pf(),xo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Nh++,r.then(Sg,Sg),r}function Sg(){if(--Nh===0&&il!==null){xo!==null&&(xo.status="fulfilled");var i=il;il=null,Oo=0,xo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function ZS(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Tg=Y.S;Y.S=function(i,r){ly=on(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&QS(i,r),Tg!==null&&Tg(i,r)};var Ur=j(null);function Oh(){var i=Ur.current;return i!==null?i:st.pooledCache}function Zu(i,r){r===null?ue(Ur,Ur.current):ue(Ur,r.pool)}function Ig(){var i=Oh();return i===null?null:{parent:kt._currentValue,pool:i}}var Ro=Error(s(460)),xh=Error(s(474)),Xu=Error(s(542)),ec={then:function(){}};function Ag(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Wn,Wn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Og(i),i;default:if(typeof r.status=="string")r.then(Wn,Wn);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Og(i),i}throw jr=r,Ro}}function Fr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jr=a,Ro):a}}var jr=null;function Ng(){if(jr===null)throw Error(s(459));var i=jr;return jr=null,i}function Og(i){if(i===Ro||i===Xu)throw Error(s(483))}var Po=null,sl=0;function tc(i){var r=sl;return sl+=1,Po===null&&(Po=[]),kg(Po,i,r)}function rl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function nc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function xg(i){function r(q,U){if(i){var B=q.deletions;B===null?(q.deletions=[U],q.flags|=16):B.push(U)}}function a(q,U){if(!i)return null;for(;U!==null;)r(q,U),U=U.sibling;return null}function u(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function g(q,U){return q=Vi(q,U),q.index=0,q.sibling=null,q}function y(q,U,B){return q.index=B,i?(B=q.alternate,B!==null?(B=B.index,B<U?(q.flags|=67108866,U):B):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function _(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function T(q,U,B,Z){return U===null||U.tag!==6?(U=bh(B,q.mode,Z),U.return=q,U):(U=g(U,B),U.return=q,U)}function P(q,U,B,Z){var ve=B.type;return ve===L?Q(q,U,B.props.children,Z,B.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&Fr(ve)===U.type)?(U=g(U,B.props),rl(U,B),U.return=q,U):(U=Ju(B.type,B.key,B.props,null,q.mode,Z),rl(U,B),U.return=q,U)}function G(q,U,B,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==B.containerInfo||U.stateNode.implementation!==B.implementation?(U=Eh(B,q.mode,Z),U.return=q,U):(U=g(U,B.children||[]),U.return=q,U)}function Q(q,U,B,Z,ve){return U===null||U.tag!==7?(U=Pr(B,q.mode,Z,ve),U.return=q,U):(U=g(U,B),U.return=q,U)}function te(q,U,B){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=bh(""+U,q.mode,B),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return B=Ju(U.type,U.key,U.props,null,q.mode,B),rl(B,U),B.return=q,B;case H:return U=Eh(U,q.mode,B),U.return=q,U;case A:return U=Fr(U),te(q,U,B)}if(pt(U)||F(U))return U=Pr(U,q.mode,B,null),U.return=q,U;if(typeof U.then=="function")return te(q,tc(U),B);if(U.$$typeof===se)return te(q,Qu(q,U),B);nc(q,U)}return null}function W(q,U,B,Z){var ve=U!==null?U.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ve!==null?null:T(q,U,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return B.key===ve?P(q,U,B,Z):null;case H:return B.key===ve?G(q,U,B,Z):null;case A:return B=Fr(B),W(q,U,B,Z)}if(pt(B)||F(B))return ve!==null?null:Q(q,U,B,Z,null);if(typeof B.then=="function")return W(q,U,tc(B),Z);if(B.$$typeof===se)return W(q,U,Qu(q,B),Z);nc(q,B)}return null}function K(q,U,B,Z,ve){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return q=q.get(B)||null,T(U,q,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return q=q.get(Z.key===null?B:Z.key)||null,P(U,q,Z,ve);case H:return q=q.get(Z.key===null?B:Z.key)||null,G(U,q,Z,ve);case A:return Z=Fr(Z),K(q,U,B,Z,ve)}if(pt(Z)||F(Z))return q=q.get(B)||null,Q(U,q,Z,ve,null);if(typeof Z.then=="function")return K(q,U,B,tc(Z),ve);if(Z.$$typeof===se)return K(q,U,B,Qu(U,Z),ve);nc(U,Z)}return null}function fe(q,U,B,Z){for(var ve=null,ze=null,me=U,Oe=U=0,De=null;me!==null&&Oe<B.length;Oe++){me.index>Oe?(De=me,me=null):De=me.sibling;var Be=W(q,me,B[Oe],Z);if(Be===null){me===null&&(me=De);break}i&&me&&Be.alternate===null&&r(q,me),U=y(Be,U,Oe),ze===null?ve=Be:ze.sibling=Be,ze=Be,me=De}if(Oe===B.length)return a(q,me),Fe&&Hi(q,Oe),ve;if(me===null){for(;Oe<B.length;Oe++)me=te(q,B[Oe],Z),me!==null&&(U=y(me,U,Oe),ze===null?ve=me:ze.sibling=me,ze=me);return Fe&&Hi(q,Oe),ve}for(me=u(me);Oe<B.length;Oe++)De=K(me,q,Oe,B[Oe],Z),De!==null&&(i&&De.alternate!==null&&me.delete(De.key===null?Oe:De.key),U=y(De,U,Oe),ze===null?ve=De:ze.sibling=De,ze=De);return i&&me.forEach(function(Gs){return r(q,Gs)}),Fe&&Hi(q,Oe),ve}function Ee(q,U,B,Z){if(B==null)throw Error(s(151));for(var ve=null,ze=null,me=U,Oe=U=0,De=null,Be=B.next();me!==null&&!Be.done;Oe++,Be=B.next()){me.index>Oe?(De=me,me=null):De=me.sibling;var Gs=W(q,me,Be.value,Z);if(Gs===null){me===null&&(me=De);break}i&&me&&Gs.alternate===null&&r(q,me),U=y(Gs,U,Oe),ze===null?ve=Gs:ze.sibling=Gs,ze=Gs,me=De}if(Be.done)return a(q,me),Fe&&Hi(q,Oe),ve;if(me===null){for(;!Be.done;Oe++,Be=B.next())Be=te(q,Be.value,Z),Be!==null&&(U=y(Be,U,Oe),ze===null?ve=Be:ze.sibling=Be,ze=Be);return Fe&&Hi(q,Oe),ve}for(me=u(me);!Be.done;Oe++,Be=B.next())Be=K(me,q,Oe,Be.value,Z),Be!==null&&(i&&Be.alternate!==null&&me.delete(Be.key===null?Oe:Be.key),U=y(Be,U,Oe),ze===null?ve=Be:ze.sibling=Be,ze=Be);return i&&me.forEach(function(uI){return r(q,uI)}),Fe&&Hi(q,Oe),ve}function it(q,U,B,Z){if(typeof B=="object"&&B!==null&&B.type===L&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case N:e:{for(var ve=B.key;U!==null;){if(U.key===ve){if(ve=B.type,ve===L){if(U.tag===7){a(q,U.sibling),Z=g(U,B.props.children),Z.return=q,q=Z;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&Fr(ve)===U.type){a(q,U.sibling),Z=g(U,B.props),rl(Z,B),Z.return=q,q=Z;break e}a(q,U);break}else r(q,U);U=U.sibling}B.type===L?(Z=Pr(B.props.children,q.mode,Z,B.key),Z.return=q,q=Z):(Z=Ju(B.type,B.key,B.props,null,q.mode,Z),rl(Z,B),Z.return=q,q=Z)}return _(q);case H:e:{for(ve=B.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===B.containerInfo&&U.stateNode.implementation===B.implementation){a(q,U.sibling),Z=g(U,B.children||[]),Z.return=q,q=Z;break e}else{a(q,U);break}else r(q,U);U=U.sibling}Z=Eh(B,q.mode,Z),Z.return=q,q=Z}return _(q);case A:return B=Fr(B),it(q,U,B,Z)}if(pt(B))return fe(q,U,B,Z);if(F(B)){if(ve=F(B),typeof ve!="function")throw Error(s(150));return B=ve.call(B),Ee(q,U,B,Z)}if(typeof B.then=="function")return it(q,U,tc(B),Z);if(B.$$typeof===se)return it(q,U,Qu(q,B),Z);nc(q,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,U!==null&&U.tag===6?(a(q,U.sibling),Z=g(U,B),Z.return=q,q=Z):(a(q,U),Z=bh(B,q.mode,Z),Z.return=q,q=Z),_(q)):a(q,U)}return function(q,U,B,Z){try{sl=0;var ve=it(q,U,B,Z);return Po=null,ve}catch(me){if(me===Ro||me===Xu)throw me;var ze=En(29,me,null,q.mode);return ze.lanes=Z,ze.return=q,ze}finally{}}}var qr=xg(!0),Rg=xg(!1),ks=!1;function Rh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ph(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=$u(i),mg(i,null,a),r}return Wu(i,u,r,a),$u(i)}function ol(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Pa(i,a)}}function Dh(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,a=a.next}while(a!==null);y===null?g=y=r:y=y.next=r}else g=y=r;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Mh=!1;function al(){if(Mh){var i=xo;if(i!==null)throw i}}function ll(i,r,a,u){Mh=!1;var g=i.updateQueue;ks=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var P=T,G=P.next;P.next=null,_===null?y=G:_.next=G,_=P;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==_&&(T===null?Q.firstBaseUpdate=G:T.next=G,Q.lastBaseUpdate=P))}if(y!==null){var te=g.baseState;_=0,Q=G=P=null,T=y;do{var W=T.lane&-536870913,K=W!==T.lane;if(K?(Pe&W)===W:(u&W)===W){W!==0&&W===Oo&&(Mh=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=i,Ee=T;W=r;var it=a;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){te=fe.call(it,te,W);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,W=typeof fe=="function"?fe.call(it,te,W):fe,W==null)break e;te=w({},te,W);break e;case 2:ks=!0}}W=T.callback,W!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[W]:K.push(W))}else K={lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(G=Q=K,P=te):Q=Q.next=K,_|=W;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;K=T,T=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(P=te),g.baseState=P,g.firstBaseUpdate=G,g.lastBaseUpdate=Q,y===null&&(g.shared.lanes=0),Ms|=_,i.lanes=_,i.memoizedState=te}}function Pg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Dg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Pg(a[i],r)}var Do=j(null),ic=j(0);function Mg(i,r){i=Xi,ue(ic,i),ue(Do,r),Xi=i|r.baseLanes}function Lh(){ue(ic,Xi),ue(Do,Do.current)}function Uh(){Xi=ic.current,ee(Do),ee(ic)}var wn=j(null),Zn=null;function xs(i){var r=i.alternate;ue(bt,bt.current&1),ue(wn,i),Zn===null&&(r===null||Do.current!==null||r.memoizedState!==null)&&(Zn=i)}function Fh(i){ue(bt,bt.current),ue(wn,i),Zn===null&&(Zn=i)}function Lg(i){i.tag===22?(ue(bt,bt.current),ue(wn,i),Zn===null&&(Zn=i)):Rs()}function Rs(){ue(bt,bt.current),ue(wn,wn.current)}function _n(i){ee(wn),Zn===i&&(Zn=null),ee(bt)}var bt=j(0);function sc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Wf(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Gi=0,Ae=null,tt=null,Nt=null,rc=!1,Mo=!1,Vr=!1,oc=0,ul=0,Lo=null,XS=0;function mt(){throw Error(s(321))}function jh(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!bn(i[a],r[a]))return!1;return!0}function qh(i,r,a,u,g,y){return Gi=y,Ae=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=i===null||i.memoizedState===null?bv:tf,Vr=!1,y=a(u,g),Vr=!1,Mo&&(y=Fg(r,a,u,g)),Ug(i),y}function Ug(i){Y.H=hl;var r=tt!==null&&tt.next!==null;if(Gi=0,Nt=tt=Ae=null,rc=!1,ul=0,Lo=null,r)throw Error(s(300));i===null||Ot||(i=i.dependencies,i!==null&&Yu(i)&&(Ot=!0))}function Fg(i,r,a,u){Ae=i;var g=0;do{if(Mo&&(Lo=null),ul=0,Mo=!1,25<=g)throw Error(s(301));if(g+=1,Nt=tt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=Ev,y=r(a,u)}while(Mo);return y}function eT(){var i=Y.H,r=i.useState()[0];return r=typeof r.then=="function"?cl(r):r,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(Ae.flags|=1024),r}function Vh(){var i=oc!==0;return oc=0,i}function Hh(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function zh(i){if(rc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}rc=!1}Gi=0,Nt=tt=Ae=null,Mo=!1,ul=oc=0,Lo=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ae.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Et(){if(tt===null){var i=Ae.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var r=Nt===null?Ae.memoizedState:Nt.next;if(r!==null)Nt=r,tt=i;else{if(i===null)throw Ae.alternate===null?Error(s(467)):Error(s(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?Ae.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(i){var r=ul;return ul+=1,Lo===null&&(Lo=[]),i=kg(Lo,i,r),r=Ae,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?bv:tf),i}function lc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return cl(i);if(i.$$typeof===se)return $t(i)}throw Error(s(438,String(i)))}function Bh(i){var r=null,a=Ae.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ae.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ac(),Ae.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=M;return r.index++,a}function Wi(i,r){return typeof r=="function"?r(i):r}function uc(i){var r=Et();return Gh(r,tt,i)}function Gh(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=i.baseQueue,y=u.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}r.baseQueue=g=y,u.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{r=g.next;var T=_=null,P=null,G=r,Q=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(Pe&te)===te:(Gi&te)===te){var W=G.revertLane;if(W===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===Oo&&(Q=!0);else if((Gi&W)===W){G=G.next,W===Oo&&(Q=!0);continue}else te={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(T=P=te,_=y):P=P.next=te,Ae.lanes|=W,Ms|=W;te=G.action,Vr&&a(y,te),y=G.hasEagerState?G.eagerState:a(y,te)}else W={lane:te,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},P===null?(T=P=W,_=y):P=P.next=W,Ae.lanes|=te,Ms|=te;G=G.next}while(G!==null&&G!==r);if(P===null?_=y:P.next=T,!bn(y,i.memoizedState)&&(Ot=!0,Q&&(a=xo,a!==null)))throw a;i.memoizedState=y,i.baseState=_,i.baseQueue=P,u.lastRenderedState=y}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Wh(i){var r=Et(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,y=r.memoizedState;if(g!==null){a.pending=null;var _=g=g.next;do y=i(y,_.action),_=_.next;while(_!==g);bn(y,r.memoizedState)||(Ot=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),a.lastRenderedState=y}return[y,u]}function jg(i,r,a){var u=Ae,g=Et(),y=Fe;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!bn((tt||g).memoizedState,a);if(_&&(g.memoizedState=a,Ot=!0),g=g.queue,Kh(Hg.bind(null,u,g,i),[i]),g.getSnapshot!==r||_||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Uo(9,{destroy:void 0},Vg.bind(null,u,g,a,r),null),st===null)throw Error(s(349));y||(Gi&127)!==0||qg(u,r,a)}return a}function qg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ae.updateQueue,r===null?(r=ac(),Ae.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Vg(i,r,a,u){r.value=a,r.getSnapshot=u,zg(r)&&Bg(i)}function Hg(i,r,a){return a(function(){zg(r)&&Bg(i)})}function zg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!bn(i,a)}catch{return!0}}function Bg(i){var r=Rr(i,2);r!==null&&pn(r,i,2)}function $h(i){var r=ln();if(typeof i=="function"){var a=i;if(i=a(),Vr){In(!0);try{a()}finally{In(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},r}function Gg(i,r,a,u){return i.baseState=a,Gh(i,tt,typeof u=="function"?u:Wi)}function tT(i,r,a,u,g){if(hc(i))throw Error(s(485));if(i=r.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};Y.T!==null?a(!0):y.isTransition=!1,u(y),a=r.pending,a===null?(y.next=r.pending=y,Wg(r,y)):(y.next=a.next,r.pending=a.next=y)}}function Wg(i,r){var a=r.action,u=r.payload,g=i.state;if(r.isTransition){var y=Y.T,_={};Y.T=_;try{var T=a(g,u),P=Y.S;P!==null&&P(_,T),$g(i,r,T)}catch(G){Jh(i,r,G)}finally{y!==null&&_.types!==null&&(y.types=_.types),Y.T=y}}else try{y=a(g,u),$g(i,r,y)}catch(G){Jh(i,r,G)}}function $g(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Jg(i,r,u)},function(u){return Jh(i,r,u)}):Jg(i,r,a)}function Jg(i,r,a){r.status="fulfilled",r.value=a,Kg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Wg(i,a)))}function Jh(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Kg(r),r=r.next;while(r!==u)}i.action=null}function Kg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Yg(i,r){return r}function Qg(i,r){if(Fe){var a=st.formState;if(a!==null){e:{var u=Ae;if(Fe){if(rt){t:{for(var g=rt,y=Mn;g.nodeType!==8;){if(!y){g=null;break t}if(g=Ln(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){rt=Ln(g.nextSibling),u=g.data==="F!";break e}}Is(u)}u=!1}u&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:r},a.queue=u,a=gv.bind(null,Ae,u),u.dispatch=a,u=$h(!1),y=ef.bind(null,Ae,!1,u.queue),u=ln(),g={state:r,dispatch:null,action:i,pending:null},u.queue=g,a=tT.bind(null,Ae,g,y,a),g.dispatch=a,u.memoizedState=i,[r,a,!1]}function Zg(i){var r=Et();return Xg(r,tt,i)}function Xg(i,r,a){if(r=Gh(i,r,Yg)[0],i=uc(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=cl(r)}catch(_){throw _===Ro?Xu:_}else u=r;r=Et();var g=r.queue,y=g.dispatch;return a!==r.memoizedState&&(Ae.flags|=2048,Uo(9,{destroy:void 0},nT.bind(null,g,a),null)),[u,y,i]}function nT(i,r){i.action=r}function ev(i){var r=Et(),a=tt;if(a!==null)return Xg(r,a,i);Et(),r=r.memoizedState,a=Et();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Uo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Ae.updateQueue,r===null&&(r=ac(),Ae.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function tv(){return Et().memoizedState}function cc(i,r,a,u){var g=ln();Ae.flags|=i,g.memoizedState=Uo(1|r,{destroy:void 0},a,u===void 0?null:u)}function dc(i,r,a,u){var g=Et();u=u===void 0?null:u;var y=g.memoizedState.inst;tt!==null&&u!==null&&jh(u,tt.memoizedState.deps)?g.memoizedState=Uo(r,y,a,u):(Ae.flags|=i,g.memoizedState=Uo(1|r,y,a,u))}function nv(i,r){cc(8390656,8,i,r)}function Kh(i,r){dc(2048,8,i,r)}function iT(i){Ae.flags|=4;var r=Ae.updateQueue;if(r===null)r=ac(),Ae.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function iv(i){var r=Et().memoizedState;return iT({ref:r,nextImpl:i}),function(){if(($e&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function sv(i,r){return dc(4,2,i,r)}function rv(i,r){return dc(4,4,i,r)}function ov(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function av(i,r,a){a=a!=null?a.concat([i]):null,dc(4,4,ov.bind(null,r,i),a)}function Yh(){}function lv(i,r){var a=Et();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&jh(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function uv(i,r){var a=Et();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&jh(r,u[1]))return u[0];if(u=i(),Vr){In(!0);try{i()}finally{In(!1)}}return a.memoizedState=[u,r],u}function Qh(i,r,a){return a===void 0||(Gi&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=cy(),Ae.lanes|=i,Ms|=i,a)}function cv(i,r,a,u){return bn(a,r)?a:Do.current!==null?(i=Qh(i,a,u),bn(i,r)||(Ot=!0),i):(Gi&42)===0||(Gi&1073741824)!==0&&(Pe&261930)===0?(Ot=!0,i.memoizedState=a):(i=cy(),Ae.lanes|=i,Ms|=i,r)}function dv(i,r,a,u,g){var y=le.p;le.p=y!==0&&8>y?y:8;var _=Y.T,T={};Y.T=T,ef(i,!1,r,a);try{var P=g(),G=Y.S;if(G!==null&&G(T,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=ZS(P,u);dl(i,r,Q,Tn(i))}else dl(i,r,u,Tn(i))}catch(te){dl(i,r,{then:function(){},status:"rejected",reason:te},Tn())}finally{le.p=y,_!==null&&T.types!==null&&(_.types=T.types),Y.T=_}}function sT(){}function Zh(i,r,a,u){if(i.tag!==5)throw Error(s(476));var g=hv(i).queue;dv(i,g,r,ye,a===null?sT:function(){return fv(i),a(u)})}function hv(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function fv(i){var r=hv(i);r.next===null&&(r=i.alternate.memoizedState),dl(i,r.next.queue,{},Tn())}function Xh(){return $t(kl)}function pv(){return Et().memoizedState}function mv(){return Et().memoizedState}function rT(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Tn();i=Ns(a);var u=Os(r,i,a);u!==null&&(pn(u,r,a),ol(u,r,a)),r={cache:kh()},i.payload=r;return}r=r.return}}function oT(i,r,a){var u=Tn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hc(i)?vv(r,a):(a=vh(i,r,a,u),a!==null&&(pn(a,i,u),yv(a,r,u)))}function gv(i,r,a){var u=Tn();dl(i,r,a,u)}function dl(i,r,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(hc(i))vv(r,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var _=r.lastRenderedState,T=y(_,a);if(g.hasEagerState=!0,g.eagerState=T,bn(T,_))return Wu(i,r,g,0),st===null&&Gu(),!1}catch{}finally{}if(a=vh(i,r,g,u),a!==null)return pn(a,i,u),yv(a,r,u),!0}return!1}function ef(i,r,a,u){if(u={lane:2,revertLane:Pf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hc(i)){if(r)throw Error(s(479))}else r=vh(i,a,u,2),r!==null&&pn(r,i,2)}function hc(i){var r=i.alternate;return i===Ae||r!==null&&r===Ae}function vv(i,r){Mo=rc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function yv(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Pa(i,a)}}var hl={readContext:$t,use:lc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};hl.useEffectEvent=mt;var bv={readContext:$t,use:lc,useCallback:function(i,r){return ln().memoizedState=[i,r===void 0?null:r],i},useContext:$t,useEffect:nv,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,cc(4194308,4,ov.bind(null,r,i),a)},useLayoutEffect:function(i,r){return cc(4194308,4,i,r)},useInsertionEffect:function(i,r){cc(4,2,i,r)},useMemo:function(i,r){var a=ln();r=r===void 0?null:r;var u=i();if(Vr){In(!0);try{i()}finally{In(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=ln();if(a!==void 0){var g=a(r);if(Vr){In(!0);try{a(r)}finally{In(!1)}}}else g=r;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=oT.bind(null,Ae,i),[u.memoizedState,i]},useRef:function(i){var r=ln();return i={current:i},r.memoizedState=i},useState:function(i){i=$h(i);var r=i.queue,a=gv.bind(null,Ae,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Yh,useDeferredValue:function(i,r){var a=ln();return Qh(a,i,r)},useTransition:function(){var i=$h(!1);return i=dv.bind(null,Ae,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Ae,g=ln();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),st===null)throw Error(s(349));(Pe&127)!==0||qg(u,r,a)}g.memoizedState=a;var y={value:a,getSnapshot:r};return g.queue=y,nv(Hg.bind(null,u,y,i),[i]),u.flags|=2048,Uo(9,{destroy:void 0},Vg.bind(null,u,y,a,r),null),a},useId:function(){var i=ln(),r=st.identifierPrefix;if(Fe){var a=Si,u=Ci;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=oc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=XS++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Xh,useFormState:Qg,useActionState:Qg,useOptimistic:function(i){var r=ln();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ef.bind(null,Ae,!0,a),a.dispatch=r,[i,r]},useMemoCache:Bh,useCacheRefresh:function(){return ln().memoizedState=rT.bind(null,Ae)},useEffectEvent:function(i){var r=ln(),a={impl:i};return r.memoizedState=a,function(){if(($e&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:$t,use:lc,useCallback:lv,useContext:$t,useEffect:Kh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:rv,useMemo:uv,useReducer:uc,useRef:tv,useState:function(){return uc(Wi)},useDebugValue:Yh,useDeferredValue:function(i,r){var a=Et();return cv(a,tt.memoizedState,i,r)},useTransition:function(){var i=uc(Wi)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:cl(i),r]},useSyncExternalStore:jg,useId:pv,useHostTransitionStatus:Xh,useFormState:Zg,useActionState:Zg,useOptimistic:function(i,r){var a=Et();return Gg(a,tt,i,r)},useMemoCache:Bh,useCacheRefresh:mv};tf.useEffectEvent=iv;var Ev={readContext:$t,use:lc,useCallback:lv,useContext:$t,useEffect:Kh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:rv,useMemo:uv,useReducer:Wh,useRef:tv,useState:function(){return Wh(Wi)},useDebugValue:Yh,useDeferredValue:function(i,r){var a=Et();return tt===null?Qh(a,i,r):cv(a,tt.memoizedState,i,r)},useTransition:function(){var i=Wh(Wi)[0],r=Et().memoizedState;return[typeof i=="boolean"?i:cl(i),r]},useSyncExternalStore:jg,useId:pv,useHostTransitionStatus:Xh,useFormState:ev,useActionState:ev,useOptimistic:function(i,r){var a=Et();return tt!==null?Gg(a,tt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Bh,useCacheRefresh:mv};Ev.useEffectEvent=iv;function nf(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:w({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var sf={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Tn(),g=Ns(u);g.payload=r,a!=null&&(g.callback=a),r=Os(i,g,u),r!==null&&(pn(r,i,u),ol(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Tn(),g=Ns(u);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=Os(i,g,u),r!==null&&(pn(r,i,u),ol(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Tn(),u=Ns(a);u.tag=2,r!=null&&(u.callback=r),r=Os(i,u,a),r!==null&&(pn(r,i,a),ol(r,i,a))}};function wv(i,r,a,u,g,y,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,_):r.prototype&&r.prototype.isPureReactComponent?!Za(a,u)||!Za(g,y):!0}function _v(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&sf.enqueueReplaceState(r,r.state,null)}function Hr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=w({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Cv(i){Bu(i)}function Sv(i){console.error(i)}function Tv(i){Bu(i)}function fc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Iv(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function rf(i,r,a){return a=Ns(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(i,r)},a}function Av(i){return i=Ns(i),i.tag=3,i}function kv(i,r,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;i.payload=function(){return g(y)},i.callback=function(){Iv(r,a,u)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){Iv(r,a,u),typeof g!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function aT(i,r,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&No(r,a,g,!0),a=wn.current,a!==null){switch(a.tag){case 31:case 13:return Zn===null?Tc():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===ec?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Of(i,u,g)),!1;case 22:return a.flags|=65536,u===ec?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Of(i,u,g)),!1}throw Error(s(435,a.tag))}return Of(i,u,g),Tc(),!1}if(Fe)return r=wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Ch&&(i=Error(s(422),{cause:u}),tl(Rn(i,a)))):(u!==Ch&&(r=Error(s(423),{cause:u}),tl(Rn(r,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Rn(u,a),g=rf(i.stateNode,u,g),Dh(i,g),gt!==4&&(gt=2)),!1;var y=Error(s(520),{cause:u});if(y=Rn(y,a),El===null?El=[y]:El.push(y),gt!==4&&(gt=2),r===null)return!0;u=Rn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=rf(a.stateNode,u,i),Dh(a,i),!1;case 1:if(r=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Av(g),kv(g,i,a,u),Dh(a,g),!1}a=a.return}while(a!==null);return!1}var of=Error(s(461)),Ot=!1;function Jt(i,r,a,u){r.child=i===null?Rg(r,null,a,u):qr(r,i.child,a,u)}function Nv(i,r,a,u,g){a=a.render;var y=r.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return Lr(r),u=qh(i,r,a,_,y,g),T=Vh(),i!==null&&!Ot?(Hh(i,r,g),$i(i,r,g)):(Fe&&T&&wh(r),r.flags|=1,Jt(i,r,u,g),r.child)}function Ov(i,r,a,u,g){if(i===null){var y=a.type;return typeof y=="function"&&!yh(y)&&y.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=y,xv(i,r,y,u,g)):(i=Ju(a.type,null,u,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(y=i.child,!pf(i,g)){var _=y.memoizedProps;if(a=a.compare,a=a!==null?a:Za,a(_,u)&&i.ref===r.ref)return $i(i,r,g)}return r.flags|=1,i=Vi(y,u),i.ref=r.ref,i.return=r,r.child=i}function xv(i,r,a,u,g){if(i!==null){var y=i.memoizedProps;if(Za(y,u)&&i.ref===r.ref)if(Ot=!1,r.pendingProps=u=y,pf(i,g))(i.flags&131072)!==0&&(Ot=!0);else return r.lanes=i.lanes,$i(i,r,g)}return af(i,r,a,u,g)}function Rv(i,r,a,u){var g=u.children,y=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,i!==null){for(u=r.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,r.child=null;return Pv(i,r,y,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zu(r,y!==null?y.cachePool:null),y!==null?Mg(r,y):Lh(),Lg(r);else return u=r.lanes=536870912,Pv(i,r,y!==null?y.baseLanes|a:a,a,u)}else y!==null?(Zu(r,y.cachePool),Mg(r,y),Rs(),r.memoizedState=null):(i!==null&&Zu(r,null),Lh(),Rs());return Jt(i,r,g,a),r.child}function fl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Pv(i,r,a,u,g){var y=Oh();return y=y===null?null:{parent:kt._currentValue,pool:y},r.memoizedState={baseLanes:a,cachePool:y},i!==null&&Zu(r,null),Lh(),Lg(r),i!==null&&No(i,r,u,!0),r.childLanes=g,null}function pc(i,r){return r=gc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Dv(i,r,a){return qr(r,i.child,null,a),i=pc(r,r.pendingProps),i.flags|=2,_n(r),r.memoizedState=null,i}function lT(i,r,a){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Fe){if(u.mode==="hidden")return i=pc(r,u),r.lanes=536870912,fl(null,i);if(Fh(r),(i=rt)?(i=Wy(i,Mn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ss!==null?{id:Ci,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,Wt=r,rt=null)):i=null,i===null)throw Is(r);return r.lanes=536870912,null}return pc(r,u)}var y=i.memoizedState;if(y!==null){var _=y.dehydrated;if(Fh(r),g)if(r.flags&256)r.flags&=-257,r=Dv(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ot||No(i,r,a,!1),g=(a&i.childLanes)!==0,Ot||g){if(u=st,u!==null&&(_=Da(u,a),_!==0&&_!==y.retryLane))throw y.retryLane=_,Rr(i,_),pn(u,i,_),of;Tc(),r=Dv(i,r,a)}else i=y.treeContext,rt=Ln(_.nextSibling),Wt=r,Fe=!0,Ts=null,Mn=!1,i!==null&&Eg(r,i),r=pc(r,u),r.flags|=4096;return r}return i=Vi(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function mc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function af(i,r,a,u,g){return Lr(r),a=qh(i,r,a,u,void 0,g),u=Vh(),i!==null&&!Ot?(Hh(i,r,g),$i(i,r,g)):(Fe&&u&&wh(r),r.flags|=1,Jt(i,r,a,g),r.child)}function Mv(i,r,a,u,g,y){return Lr(r),r.updateQueue=null,a=Fg(r,u,a,g),Ug(i),u=Vh(),i!==null&&!Ot?(Hh(i,r,y),$i(i,r,y)):(Fe&&u&&wh(r),r.flags|=1,Jt(i,r,a,y),r.child)}function Lv(i,r,a,u,g){if(Lr(r),r.stateNode===null){var y=To,_=a.contextType;typeof _=="object"&&_!==null&&(y=$t(_)),y=new a(u,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=sf,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=u,y.state=r.memoizedState,y.refs={},Rh(r),_=a.contextType,y.context=typeof _=="object"&&_!==null?$t(_):To,y.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(nf(r,a,_,u),y.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&sf.enqueueReplaceState(y,y.state,null),ll(r,u,y,g),al(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){y=r.stateNode;var T=r.memoizedProps,P=Hr(a,T);y.props=P;var G=y.context,Q=a.contextType;_=To,typeof Q=="object"&&Q!==null&&(_=$t(Q));var te=a.getDerivedStateFromProps;Q=typeof te=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||G!==_)&&_v(r,y,u,_),ks=!1;var W=r.memoizedState;y.state=W,ll(r,u,y,g),al(),G=r.memoizedState,T||W!==G||ks?(typeof te=="function"&&(nf(r,a,te,u),G=r.memoizedState),(P=ks||wv(r,a,P,u,W,G,_))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=G),y.props=u,y.state=G,y.context=_,u=P):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,Ph(i,r),_=r.memoizedProps,Q=Hr(a,_),y.props=Q,te=r.pendingProps,W=y.context,G=a.contextType,P=To,typeof G=="object"&&G!==null&&(P=$t(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==te||W!==P)&&_v(r,y,u,P),ks=!1,W=r.memoizedState,y.state=W,ll(r,u,y,g),al();var K=r.memoizedState;_!==te||W!==K||ks||i!==null&&i.dependencies!==null&&Yu(i.dependencies)?(typeof T=="function"&&(nf(r,a,T,u),K=r.memoizedState),(Q=ks||wv(r,a,Q,u,W,K,P)||i!==null&&i.dependencies!==null&&Yu(i.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,K,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,K,P)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=K),y.props=u,y.state=K,y.context=P,u=Q):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(r.flags|=1024),u=!1)}return y=u,mc(i,r),u=(r.flags&128)!==0,y||u?(y=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,i!==null&&u?(r.child=qr(r,i.child,null,g),r.child=qr(r,null,a,g)):Jt(i,r,a,g),r.memoizedState=y.state,i=r.child):i=$i(i,r,g),i}function Uv(i,r,a,u){return Dr(),r.flags|=256,Jt(i,r,a,u),r.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(i){return{baseLanes:i,cachePool:Ig()}}function cf(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Sn),i}function Fv(i,r,a){var u=r.pendingProps,g=!1,y=(r.flags&128)!==0,_;if((_=y)||(_=i!==null&&i.memoizedState===null?!1:(bt.current&2)!==0),_&&(g=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Fe){if(g?xs(r):Rs(),(i=rt)?(i=Wy(i,Mn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ss!==null?{id:Ci,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=vg(i),a.return=r,r.child=a,Wt=r,rt=null)):i=null,i===null)throw Is(r);return Wf(i)?r.lanes=32:r.lanes=536870912,null}var T=u.children;return u=u.fallback,g?(Rs(),g=r.mode,T=gc({mode:"hidden",children:T},g),u=Pr(u,g,a,null),T.return=r,u.return=r,T.sibling=u,r.child=T,u=r.child,u.memoizedState=uf(a),u.childLanes=cf(i,_,a),r.memoizedState=lf,fl(null,u)):(xs(r),df(r,T))}var P=i.memoizedState;if(P!==null&&(T=P.dehydrated,T!==null)){if(y)r.flags&256?(xs(r),r.flags&=-257,r=hf(i,r,a)):r.memoizedState!==null?(Rs(),r.child=i.child,r.flags|=128,r=null):(Rs(),T=u.fallback,g=r.mode,u=gc({mode:"visible",children:u.children},g),T=Pr(T,g,a,null),T.flags|=2,u.return=r,T.return=r,u.sibling=T,r.child=u,qr(r,i.child,null,a),u=r.child,u.memoizedState=uf(a),u.childLanes=cf(i,_,a),r.memoizedState=lf,r=fl(null,u));else if(xs(r),Wf(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(s(419)),u.stack="",u.digest=_,tl({value:u,source:null,stack:null}),r=hf(i,r,a)}else if(Ot||No(i,r,a,!1),_=(a&i.childLanes)!==0,Ot||_){if(_=st,_!==null&&(u=Da(_,a),u!==0&&u!==P.retryLane))throw P.retryLane=u,Rr(i,u),pn(_,i,u),of;Gf(T)||Tc(),r=hf(i,r,a)}else Gf(T)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,rt=Ln(T.nextSibling),Wt=r,Fe=!0,Ts=null,Mn=!1,i!==null&&Eg(r,i),r=df(r,u.children),r.flags|=4096);return r}return g?(Rs(),T=u.fallback,g=r.mode,P=i.child,G=P.sibling,u=Vi(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,G!==null?T=Vi(G,T):(T=Pr(T,g,a,null),T.flags|=2),T.return=r,u.return=r,u.sibling=T,r.child=u,fl(null,u),u=r.child,T=i.child.memoizedState,T===null?T=uf(a):(g=T.cachePool,g!==null?(P=kt._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=Ig(),T={baseLanes:T.baseLanes|a,cachePool:g}),u.memoizedState=T,u.childLanes=cf(i,_,a),r.memoizedState=lf,fl(i.child,u)):(xs(r),a=i.child,i=a.sibling,a=Vi(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=a,r.memoizedState=null,a)}function df(i,r){return r=gc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function gc(i,r){return i=En(22,i,null,r),i.lanes=0,i}function hf(i,r,a){return qr(r,i.child,null,a),i=df(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function jv(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Ih(i.return,r,a)}function ff(i,r,a,u,g,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=a,_.tailMode=g,_.treeForkCount=y)}function qv(i,r,a){var u=r.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var _=bt.current,T=(_&2)!==0;if(T?(_=_&1|2,r.flags|=128):_&=1,ue(bt,_),Jt(i,r,u,a),u=Fe?el:0,!T&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jv(i,a,r);else if(i.tag===19)jv(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)i=a.alternate,i!==null&&sc(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),ff(r,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&sc(i)===null){r.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}ff(r,!0,a,null,y,u);break;case"together":ff(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function $i(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Ms|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(No(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Vi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Vi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function pf(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Yu(i)))}function uT(i,r,a){switch(r.tag){case 3:Dt(r,r.stateNode.containerInfo),As(r,kt,i.memoizedState.cache),Dr();break;case 27:case 5:pr(r);break;case 4:Dt(r,r.stateNode.containerInfo);break;case 10:As(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Fh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(xs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Fv(i,r,a):(xs(r),i=$i(i,r,a),i!==null?i.sibling:null);xs(r);break;case 19:var g=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(No(i,r,a,!1),u=(a&r.childLanes)!==0),g){if(u)return qv(i,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(bt,bt.current),u)break;return null;case 22:return r.lanes=0,Rv(i,r,a,r.pendingProps);case 24:As(r,kt,i.memoizedState.cache)}return $i(i,r,a)}function Vv(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ot=!0;else{if(!pf(i,a)&&(r.flags&128)===0)return Ot=!1,uT(i,r,a);Ot=(i.flags&131072)!==0}else Ot=!1,Fe&&(r.flags&1048576)!==0&&bg(r,el,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Fr(r.elementType),r.type=i,typeof i=="function")yh(i)?(u=Hr(i,u),r.tag=1,r=Lv(null,r,i,u,a)):(r.tag=0,r=af(null,r,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===oe){r.tag=11,r=Nv(null,r,i,u,a);break e}else if(g===O){r.tag=14,r=Ov(null,r,i,u,a);break e}}throw r=We(i)||i,Error(s(306,r,""))}}return r;case 0:return af(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,g=Hr(u,r.pendingProps),Lv(i,r,u,g,a);case 3:e:{if(Dt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var y=r.memoizedState;g=y.element,Ph(i,r),ll(r,u,null,a);var _=r.memoizedState;if(u=_.cache,As(r,kt,u),u!==y.cache&&Ah(r,[kt],a,!0),al(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=Uv(i,r,u,a);break e}else if(u!==g){g=Rn(Error(s(424)),r),tl(g),r=Uv(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=Ln(i.firstChild),Wt=r,Fe=!0,Ts=null,Mn=!0,a=Rg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dr(),u===g){r=$i(i,r,a);break e}Jt(i,r,u,a)}r=r.child}return r;case 26:return mc(i,r),i===null?(a=Zy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Fe||(a=r.type,i=r.pendingProps,u=Rc(ke.current).createElement(a),u[Tt]=r,u[jt]=i,Kt(u,a,i),It(u),r.stateNode=u):r.memoizedState=Zy(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return pr(r),i===null&&Fe&&(u=r.stateNode=Ky(r.type,r.pendingProps,ke.current),Wt=r,Mn=!0,g=rt,qs(r.type)?($f=g,rt=Ln(u.firstChild)):rt=g),Jt(i,r,r.pendingProps.children,a),mc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Fe&&((g=u=rt)&&(u=jT(u,r.type,r.pendingProps,Mn),u!==null?(r.stateNode=u,Wt=r,rt=Ln(u.firstChild),Mn=!1,g=!0):g=!1),g||Is(r)),pr(r),g=r.type,y=r.pendingProps,_=i!==null?i.memoizedProps:null,u=y.children,Hf(g,y)?u=null:_!==null&&Hf(g,_)&&(r.flags|=32),r.memoizedState!==null&&(g=qh(i,r,eT,null,null,a),kl._currentValue=g),mc(i,r),Jt(i,r,u,a),r.child;case 6:return i===null&&Fe&&((i=a=rt)&&(a=qT(a,r.pendingProps,Mn),a!==null?(r.stateNode=a,Wt=r,rt=null,i=!0):i=!1),i||Is(r)),null;case 13:return Fv(i,r,a);case 4:return Dt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=qr(r,null,u,a):Jt(i,r,u,a),r.child;case 11:return Nv(i,r,r.type,r.pendingProps,a);case 7:return Jt(i,r,r.pendingProps,a),r.child;case 8:return Jt(i,r,r.pendingProps.children,a),r.child;case 12:return Jt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,As(r,r.type,u.value),Jt(i,r,u.children,a),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Lr(r),g=$t(g),u=u(g),r.flags|=1,Jt(i,r,u,a),r.child;case 14:return Ov(i,r,r.type,r.pendingProps,a);case 15:return xv(i,r,r.type,r.pendingProps,a);case 19:return qv(i,r,a);case 31:return lT(i,r,a);case 22:return Rv(i,r,a,r.pendingProps);case 24:return Lr(r),u=$t(kt),i===null?(g=Oh(),g===null&&(g=st,y=kh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),r.memoizedState={parent:u,cache:g},Rh(r),As(r,kt,g)):((i.lanes&a)!==0&&(Ph(i,r),ll(r,null,null,a),al()),g=i.memoizedState,y=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),As(r,kt,u)):(u=y.cache,As(r,kt,u),u!==g.cache&&Ah(r,[kt],a,!0))),Jt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ji(i){i.flags|=4}function mf(i,r,a,u,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(py())i.flags|=8192;else throw jr=ec,xh}else i.flags&=-16777217}function Hv(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!i0(r))if(py())i.flags|=8192;else throw jr=ec,xh}function vc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Cu():536870912,i.lanes|=r,Vo|=r)}function pl(i,r){if(!Fe)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ot(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function cT(i,r,a){var u=r.pendingProps;switch(_h(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ot(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Bi(kt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(ko(r)?Ji(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sh())),ot(r),null;case 26:var g=r.type,y=r.memoizedState;return i===null?(Ji(r),y!==null?(ot(r),Hv(r,y)):(ot(r),mf(r,g,null,u,a))):y?y!==i.memoizedState?(Ji(r),ot(r),Hv(r,y)):(ot(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ji(r),ot(r),mf(r,g,i,u,a)),null;case 27:if(ro(r),a=ke.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ot(r),null}i=he.current,ko(r)?wg(r):(i=Ky(g,u,a),r.stateNode=i,Ji(r))}return ot(r),null;case 5:if(ro(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ot(r),null}if(y=he.current,ko(r))wg(r);else{var _=Rc(ke.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(g,{is:u.is}):_.createElement(g)}}y[Tt]=r,y[jt]=u;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=y;e:switch(Kt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(r)}}return ot(r),mf(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=ke.current,ko(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,g=Wt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[Tt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Fy(i.nodeValue,a)),i||Is(r,!0)}else i=Rc(i).createTextNode(u),i[Tt]=r,r.stateNode=i}return ot(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=ko(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Tt]=r}else Dr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),i=!1}else a=Sh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(_n(r),r):(_n(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ot(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=ko(r),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Tt]=r}else Dr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),g=!1}else g=Sh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(_n(r),r):(_n(r),null)}return _n(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),vc(r,r.updateQueue),ot(r),null);case 4:return ut(),i===null&&Uf(r.stateNode.containerInfo),ot(r),null;case 10:return Bi(r.type),ot(r),null;case 19:if(ee(bt),u=r.memoizedState,u===null)return ot(r),null;if(g=(r.flags&128)!==0,y=u.rendering,y===null)if(g)pl(u,!1);else{if(gt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(y=sc(i),y!==null){for(r.flags|=128,pl(u,!1),i=y.updateQueue,r.updateQueue=i,vc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)gg(a,i),a=a.sibling;return ue(bt,bt.current&1|2),Fe&&Hi(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&on()>_c&&(r.flags|=128,g=!0,pl(u,!1),r.lanes=4194304)}else{if(!g)if(i=sc(y),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,vc(r,i),pl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Fe)return ot(r),null}else 2*on()-u.renderingStartTime>_c&&a!==536870912&&(r.flags|=128,g=!0,pl(u,!1),r.lanes=4194304);u.isBackwards?(y.sibling=r.child,r.child=y):(i=u.last,i!==null?i.sibling=y:r.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=on(),i.sibling=null,a=bt.current,ue(bt,g?a&1|2:a&1),Fe&&Hi(r,u.treeForkCount),i):(ot(r),null);case 22:case 23:return _n(r),Uh(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),a=r.updateQueue,a!==null&&vc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ee(Ur),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Bi(kt),ot(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function dT(i,r){switch(_h(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Bi(kt),ut(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ro(r),null;case 31:if(r.memoizedState!==null){if(_n(r),r.alternate===null)throw Error(s(340));Dr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(_n(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Dr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(bt),null;case 4:return ut(),null;case 10:return Bi(r.type),null;case 22:case 23:return _n(r),Uh(),i!==null&&ee(Ur),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Bi(kt),null;case 25:return null;default:return null}}function zv(i,r){switch(_h(r),r.tag){case 3:Bi(kt),ut();break;case 26:case 27:case 5:ro(r);break;case 4:ut();break;case 31:r.memoizedState!==null&&_n(r);break;case 13:_n(r);break;case 19:ee(bt);break;case 10:Bi(r.type);break;case 22:case 23:_n(r),Uh(),i!==null&&ee(Ur);break;case 24:Bi(kt)}}function ml(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var y=a.create,_=a.inst;u=y(),_.destroy=u}a=a.next}while(a!==g)}}catch(T){Xe(r,r.return,T)}}function Ps(i,r,a){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&i)===i){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,g=r;var P=a,G=T;try{G()}catch(Q){Xe(g,P,Q)}}}u=u.next}while(u!==y)}}catch(Q){Xe(r,r.return,Q)}}function Bv(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Dg(r,a)}catch(u){Xe(i,i.return,u)}}}function Gv(i,r,a){a.props=Hr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){Xe(i,r,u)}}function gl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){Xe(i,r,g)}}function Ti(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Xe(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Xe(i,r,g)}else a.current=null}function Wv(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Xe(i,i.return,g)}}function gf(i,r,a){try{var u=i.stateNode;PT(u,i.type,a,r),u[jt]=r}catch(g){Xe(i,i.return,g)}}function $v(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qs(i.type)||i.tag===4}function vf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$v(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yf(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Wn));else if(u!==4&&(u===27&&qs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(yf(i,r,a),i=i.sibling;i!==null;)yf(i,r,a),i=i.sibling}function yc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&qs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(yc(i,r,a),i=i.sibling;i!==null;)yc(i,r,a),i=i.sibling}function Jv(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Kt(r,u,a),r[Tt]=i,r[jt]=a}catch(y){Xe(i,i.return,y)}}var Ki=!1,xt=!1,bf=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function hT(i,r){if(i=i.containerInfo,qf=jc,i=ag(i),dh(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var _=0,T=-1,P=-1,G=0,Q=0,te=i,W=null;t:for(;;){for(var K;te!==a||g!==0&&te.nodeType!==3||(T=_+g),te!==y||u!==0&&te.nodeType!==3||(P=_+u),te.nodeType===3&&(_+=te.nodeValue.length),(K=te.firstChild)!==null;)W=te,te=K;for(;;){if(te===i)break t;if(W===a&&++G===g&&(T=_),W===y&&++Q===u&&(P=_),(K=te.nextSibling)!==null)break;te=W,W=te.parentNode}te=K}a=T===-1||P===-1?null:{start:T,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vf={focusedElem:i,selectionRange:a},jc=!1,Vt=r;Vt!==null;)if(r=Vt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Vt=i;else for(;Vt!==null;){switch(r=Vt,y=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=r,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var fe=Hr(a.type,g);i=u.getSnapshotBeforeUpdate(fe,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){Xe(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Bf(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Bf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Vt=i;break}Vt=r.return}}function Yv(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(i,a),u&4&&ml(5,a);break;case 1:if(Qi(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var g=Hr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}u&64&&Bv(a),u&512&&gl(a,a.return);break;case 3:if(Qi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Dg(i,r)}catch(_){Xe(a,a.return,_)}}break;case 27:r===null&&u&4&&Jv(a);case 26:case 5:Qi(i,a),r===null&&u&4&&Wv(a),u&512&&gl(a,a.return);break;case 12:Qi(i,a);break;case 31:Qi(i,a),u&4&&Xv(i,a);break;case 13:Qi(i,a),u&4&&ey(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=wT.bind(null,a),VT(i,a))));break;case 22:if(u=a.memoizedState!==null||Ki,!u){r=r!==null&&r.memoizedState!==null||xt,g=Ki;var y=xt;Ki=u,(xt=r)&&!y?Zi(i,a,(a.subtreeFlags&8772)!==0):Qi(i,a),Ki=g,xt=y}break;case 30:break;default:Qi(i,a)}}function Qv(i){var r=i.alternate;r!==null&&(i.alternate=null,Qv(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&co(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,cn=!1;function Yi(i,r,a){for(a=a.child;a!==null;)Zv(i,r,a),a=a.sibling}function Zv(i,r,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:xt||Ti(a,r),Yi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Ti(a,r);var u=dt,g=cn;qs(a.type)&&(dt=a.stateNode,cn=!1),Yi(i,r,a),Tl(a.stateNode),dt=u,cn=g;break;case 5:xt||Ti(a,r);case 6:if(u=dt,g=cn,dt=null,Yi(i,r,a),dt=u,cn=g,dt!==null)if(cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(y){Xe(a,r,y)}else try{dt.removeChild(a.stateNode)}catch(y){Xe(a,r,y)}break;case 18:dt!==null&&(cn?(i=dt,By(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Ko(i)):By(dt,a.stateNode));break;case 4:u=dt,g=cn,dt=a.stateNode.containerInfo,cn=!0,Yi(i,r,a),dt=u,cn=g;break;case 0:case 11:case 14:case 15:Ps(2,a,r),xt||Ps(4,a,r),Yi(i,r,a);break;case 1:xt||(Ti(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Gv(a,r,u)),Yi(i,r,a);break;case 21:Yi(i,r,a);break;case 22:xt=(u=xt)||a.memoizedState!==null,Yi(i,r,a),xt=u;break;default:Yi(i,r,a)}}function Xv(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ko(i)}catch(a){Xe(r,r.return,a)}}}function ey(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ko(i)}catch(a){Xe(r,r.return,a)}}function fT(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Kv),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Kv),r;default:throw Error(s(435,i.tag))}}function bc(i,r){var a=fT(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var g=_T.bind(null,i,u);u.then(g,g)}})}function dn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=i,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(qs(T.type)){dt=T.stateNode,cn=!1;break e}break;case 5:dt=T.stateNode,cn=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,cn=!0;break e}T=T.return}if(dt===null)throw Error(s(160));Zv(y,_,g),dt=null,cn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)ty(r,i),r=r.sibling}var Xn=null;function ty(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(r,i),hn(i),u&4&&(Ps(3,i,i.return),ml(3,i),Ps(5,i,i.return));break;case 1:dn(r,i),hn(i),u&512&&(xt||a===null||Ti(a,a.return)),u&64&&Ki&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=Xn;if(dn(r,i),hn(i),u&512&&(xt||a===null||Ti(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[hi]||y[Tt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Kt(y,u,a),y[Tt]=i,It(y),u=y;break e;case"link":var _=t0("link","href",g).get(u+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(y=_[T],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}y=g.createElement(u),Kt(y,u,a),g.head.appendChild(y);break;case"meta":if(_=t0("meta","content",g).get(u+(a.content||""))){for(T=0;T<_.length;T++)if(y=_[T],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}y=g.createElement(u),Kt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[Tt]=i,It(y),u=y}i.stateNode=u}else n0(g,i.type,i.stateNode);else i.stateNode=e0(g,u,i.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?n0(g,i.type,i.stateNode):e0(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&gf(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(r,i),hn(i),u&512&&(xt||a===null||Ti(a,a.return)),a!==null&&u&4&&gf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(r,i),hn(i),u&512&&(xt||a===null||Ti(a,a.return)),i.flags&32){g=i.stateNode;try{un(g,"")}catch(fe){Xe(i,i.return,fe)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,gf(i,g,a!==null?a.memoizedProps:g)),u&1024&&(bf=!0);break;case 6:if(dn(r,i),hn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(fe){Xe(i,i.return,fe)}}break;case 3:if(Mc=null,g=Xn,Xn=Pc(r.containerInfo),dn(r,i),Xn=g,hn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ko(r.containerInfo)}catch(fe){Xe(i,i.return,fe)}bf&&(bf=!1,ny(i));break;case 4:u=Xn,Xn=Pc(i.stateNode.containerInfo),dn(r,i),hn(i),Xn=u;break;case 12:dn(r,i),hn(i);break;case 31:dn(r,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bc(i,u)));break;case 13:dn(r,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wc=on()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bc(i,u)));break;case 22:g=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,G=Ki,Q=xt;if(Ki=G||g,xt=Q||P,dn(r,i),xt=Q,Ki=G,hn(i),u&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||P||Ki||xt||zr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(y=P.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=P.stateNode;var te=P.memoizedProps.style,W=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(fe){Xe(P,P.return,fe)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(fe){Xe(P,P.return,fe)}}}else if(r.tag===18){if(a===null){P=r;try{var K=P.stateNode;g?Gy(K,!0):Gy(P.stateNode,!1)}catch(fe){Xe(P,P.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,bc(i,a))));break;case 19:dn(r,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bc(i,u)));break;case 30:break;case 21:break;default:dn(r,i),hn(i)}}function hn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if($v(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=vf(i);yc(i,y,g);break;case 5:var _=a.stateNode;a.flags&32&&(un(_,""),a.flags&=-33);var T=vf(i);yc(i,T,_);break;case 3:case 4:var P=a.stateNode.containerInfo,G=vf(i);yf(i,G,P);break;default:throw Error(s(161))}}catch(Q){Xe(i,i.return,Q)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function ny(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;ny(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Qi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Yv(i,r.alternate,r),r=r.sibling}function zr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ps(4,r,r.return),zr(r);break;case 1:Ti(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Gv(r,r.return,a),zr(r);break;case 27:Tl(r.stateNode);case 26:case 5:Ti(r,r.return),zr(r);break;case 22:r.memoizedState===null&&zr(r);break;case 30:zr(r);break;default:zr(r)}i=i.sibling}}function Zi(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=i,y=r,_=y.flags;switch(y.tag){case 0:case 11:case 15:Zi(g,y,a),ml(4,y);break;case 1:if(Zi(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(G){Xe(u,u.return,G)}if(u=y,g=u.updateQueue,g!==null){var T=u.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Pg(P[g],T)}catch(G){Xe(u,u.return,G)}}a&&_&64&&Bv(y),gl(y,y.return);break;case 27:Jv(y);case 26:case 5:Zi(g,y,a),a&&u===null&&_&4&&Wv(y),gl(y,y.return);break;case 12:Zi(g,y,a);break;case 31:Zi(g,y,a),a&&_&4&&Xv(g,y);break;case 13:Zi(g,y,a),a&&_&4&&ey(g,y);break;case 22:y.memoizedState===null&&Zi(g,y,a),gl(y,y.return);break;case 30:break;default:Zi(g,y,a)}r=r.sibling}}function Ef(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&nl(a))}function wf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&nl(i))}function ei(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iy(i,r,a,u),r=r.sibling}function iy(i,r,a,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:ei(i,r,a,u),g&2048&&ml(9,r);break;case 1:ei(i,r,a,u);break;case 3:ei(i,r,a,u),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&nl(i)));break;case 12:if(g&2048){ei(i,r,a,u),i=r.stateNode;try{var y=r.memoizedProps,_=y.id,T=y.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){Xe(r,r.return,P)}}else ei(i,r,a,u);break;case 31:ei(i,r,a,u);break;case 13:ei(i,r,a,u);break;case 23:break;case 22:y=r.stateNode,_=r.alternate,r.memoizedState!==null?y._visibility&2?ei(i,r,a,u):vl(i,r):y._visibility&2?ei(i,r,a,u):(y._visibility|=2,Fo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Ef(_,r);break;case 24:ei(i,r,a,u),g&2048&&wf(r.alternate,r);break;default:ei(i,r,a,u)}}function Fo(i,r,a,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var y=i,_=r,T=a,P=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:Fo(y,_,T,P,g),ml(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?Fo(y,_,T,P,g):vl(y,_):(Q._visibility|=2,Fo(y,_,T,P,g)),g&&G&2048&&Ef(_.alternate,_);break;case 24:Fo(y,_,T,P,g),g&&G&2048&&wf(_.alternate,_);break;default:Fo(y,_,T,P,g)}r=r.sibling}}function vl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,g=u.flags;switch(u.tag){case 22:vl(a,u),g&2048&&Ef(u.alternate,u);break;case 24:vl(a,u),g&2048&&wf(u.alternate,u);break;default:vl(a,u)}r=r.sibling}}var yl=8192;function jo(i,r,a){if(i.subtreeFlags&yl)for(i=i.child;i!==null;)sy(i,r,a),i=i.sibling}function sy(i,r,a){switch(i.tag){case 26:jo(i,r,a),i.flags&yl&&i.memoizedState!==null&&XT(a,Xn,i.memoizedState,i.memoizedProps);break;case 5:jo(i,r,a);break;case 3:case 4:var u=Xn;Xn=Pc(i.stateNode.containerInfo),jo(i,r,a),Xn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=yl,yl=16777216,jo(i,r,a),yl=u):jo(i,r,a));break;default:jo(i,r,a)}}function ry(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function bl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Vt=u,ay(u,i)}ry(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)oy(i),i=i.sibling}function oy(i){switch(i.tag){case 0:case 11:case 15:bl(i),i.flags&2048&&Ps(9,i,i.return);break;case 3:bl(i);break;case 12:bl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ec(i)):bl(i);break;default:bl(i)}}function Ec(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Vt=u,ay(u,i)}ry(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ps(8,r,r.return),Ec(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ec(r));break;default:Ec(r)}i=i.sibling}}function ay(i,r){for(;Vt!==null;){var a=Vt;switch(a.tag){case 0:case 11:case 15:Ps(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Vt=u;else e:for(a=i;Vt!==null;){u=Vt;var g=u.sibling,y=u.return;if(Qv(u),u===a){Vt=null;break e}if(g!==null){g.return=y,Vt=g;break e}Vt=y}}}var pT={getCacheForType:function(i){var r=$t(kt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return $t(kt).controller.signal}},mT=typeof WeakMap=="function"?WeakMap:Map,$e=0,st=null,xe=null,Pe=0,Ze=0,Cn=null,Ds=!1,qo=!1,_f=!1,Xi=0,gt=0,Ms=0,Br=0,Cf=0,Sn=0,Vo=0,El=null,fn=null,Sf=!1,wc=0,ly=0,_c=1/0,Cc=null,Ls=null,Lt=0,Us=null,Ho=null,es=0,Tf=0,If=null,uy=null,wl=0,Af=null;function Tn(){return($e&2)!==0&&Pe!==0?Pe&-Pe:Y.T!==null?Pf():Su()}function cy(){if(Sn===0)if((Pe&536870912)===0||Fe){var i=vr;vr<<=1,(vr&3932160)===0&&(vr=262144),Sn=i}else Sn=536870912;return i=wn.current,i!==null&&(i.flags|=32),Sn}function pn(i,r,a){(i===st&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(zo(i,0),Fs(i,Pe,Sn,!1)),yr(i,a),(($e&2)===0||i!==st)&&(i===st&&(($e&2)===0&&(Br|=a),gt===4&&Fs(i,Pe,Sn,!1)),Ii(i))}function dy(i,r,a){if(($e&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||zn(i,r),g=u?yT(i,r):Nf(i,r,!0),y=u;do{if(g===0){qo&&!u&&Fs(i,r,0,!1);break}else{if(a=i.current.alternate,y&&!gT(a)){g=Nf(i,r,!1),y=!1;continue}if(g===2){if(y=r,i.errorRecoveryDisabledLanes&y)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=i;g=El;var P=T.current.memoizedState.isDehydrated;if(P&&(zo(T,_).flags|=256),_=Nf(T,_,!1),_!==2){if(_f&&!P){T.errorRecoveryDisabledLanes|=y,Br|=y,g=4;break e}y=fn,fn=g,y!==null&&(fn===null?fn=y:fn.push.apply(fn,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){zo(i,0),Fs(i,r,0,!0);break}e:{switch(u=i,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Fs(u,r,Sn,!Ds);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=wc+300-on(),10<g)){if(Fs(u,r,Sn,!Ds),ui(u,0,!0)!==0)break e;es=r,u.timeoutHandle=Hy(hy.bind(null,u,a,fn,Cc,Sf,r,Sn,Br,Vo,Ds,y,"Throttled",-0,0),g);break e}hy(u,a,fn,Cc,Sf,r,Sn,Br,Vo,Ds,y,null,-0,0)}}break}while(!0);Ii(i)}function hy(i,r,a,u,g,y,_,T,P,G,Q,te,W,K){if(i.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},sy(r,y,te);var fe=(y&62914560)===y?wc-on():(y&4194048)===y?ly-on():0;if(fe=eI(te,fe),fe!==null){es=y,i.cancelPendingCommit=fe(Ey.bind(null,i,r,y,a,u,g,_,T,P,Q,te,null,W,K)),Fs(i,y,_,!G);return}}Ey(i,r,y,a,u,g,_,T,P)}function gT(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!bn(y(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(i,r,a,u){r&=~Cf,r&=~Br,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var g=r;0<g;){var y=31-vt(g),_=1<<y;u[y]=-1,g&=~_}a!==0&&br(i,a,r)}function Sc(){return($e&6)===0?(_l(0),!1):!0}function kf(){if(xe!==null){if(Ze===0)var i=xe.return;else i=xe,zi=Mr=null,zh(i),Po=null,sl=0,i=xe;for(;i!==null;)zv(i.alternate,i),i=i.return;xe=null}}function zo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,LT(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),es=0,kf(),st=i,xe=a=Vi(i.current,null),Pe=r,Ze=0,Cn=null,Ds=!1,qo=zn(i,r),_f=!1,Vo=Sn=Cf=Br=Ms=gt=0,fn=El=null,Sf=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var g=31-vt(u),y=1<<g;r|=i[g],u&=~y}return Xi=r,Gu(),a}function fy(i,r){Ae=null,Y.H=hl,r===Ro||r===Xu?(r=Ng(),Ze=3):r===xh?(r=Ng(),Ze=4):Ze=r===of?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Cn=r,xe===null&&(gt=1,fc(i,Rn(r,i.current)))}function py(){var i=wn.current;return i===null?!0:(Pe&4194048)===Pe?Zn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===Zn:!1}function my(){var i=Y.H;return Y.H=hl,i===null?hl:i}function gy(){var i=Y.A;return Y.A=pT,i}function Tc(){gt=4,Ds||(Pe&4194048)!==Pe&&wn.current!==null||(qo=!0),(Ms&134217727)===0&&(Br&134217727)===0||st===null||Fs(st,Pe,Sn,!1)}function Nf(i,r,a){var u=$e;$e|=2;var g=my(),y=gy();(st!==i||Pe!==r)&&(Cc=null,zo(i,r)),r=!1;var _=gt;e:do try{if(Ze!==0&&xe!==null){var T=xe,P=Cn;switch(Ze){case 8:kf(),_=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(r=!0);var G=Ze;if(Ze=0,Cn=null,Bo(i,T,P,G),a&&qo){_=0;break e}break;default:G=Ze,Ze=0,Cn=null,Bo(i,T,P,G)}}vT(),_=gt;break}catch(Q){fy(i,Q)}while(!0);return r&&i.shellSuspendCounter++,zi=Mr=null,$e=u,Y.H=g,Y.A=y,xe===null&&(st=null,Pe=0,Gu()),_}function vT(){for(;xe!==null;)vy(xe)}function yT(i,r){var a=$e;$e|=2;var u=my(),g=gy();st!==i||Pe!==r?(Cc=null,_c=on()+500,zo(i,r)):qo=zn(i,r);e:do try{if(Ze!==0&&xe!==null){r=xe;var y=Cn;t:switch(Ze){case 1:Ze=0,Cn=null,Bo(i,r,y,1);break;case 2:case 9:if(Ag(y)){Ze=0,Cn=null,yy(r);break}r=function(){Ze!==2&&Ze!==9||st!==i||(Ze=7),Ii(i)},y.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Ag(y)?(Ze=0,Cn=null,yy(r)):(Ze=0,Cn=null,Bo(i,r,y,7));break;case 5:var _=null;switch(xe.tag){case 26:_=xe.memoizedState;case 5:case 27:var T=xe;if(_?i0(_):T.stateNode.complete){Ze=0,Cn=null;var P=T.sibling;if(P!==null)xe=P;else{var G=T.return;G!==null?(xe=G,Ic(G)):xe=null}break t}}Ze=0,Cn=null,Bo(i,r,y,5);break;case 6:Ze=0,Cn=null,Bo(i,r,y,6);break;case 8:kf(),gt=6;break e;default:throw Error(s(462))}}bT();break}catch(Q){fy(i,Q)}while(!0);return zi=Mr=null,Y.H=u,Y.A=g,$e=a,xe!==null?0:(st=null,Pe=0,Gu(),gt)}function bT(){for(;xe!==null&&!sh();)vy(xe)}function vy(i){var r=Vv(i.alternate,i,Xi);i.memoizedProps=i.pendingProps,r===null?Ic(i):xe=r}function yy(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=Mv(a,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=Mv(a,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:zh(r);default:zv(a,r),r=xe=gg(r,Xi),r=Vv(a,r,Xi)}i.memoizedProps=i.pendingProps,r===null?Ic(i):xe=r}function Bo(i,r,a,u){zi=Mr=null,zh(r),Po=null,sl=0;var g=r.return;try{if(aT(i,g,r,a,Pe)){gt=1,fc(i,Rn(a,i.current)),xe=null;return}}catch(y){if(g!==null)throw xe=g,y;gt=1,fc(i,Rn(a,i.current)),xe=null;return}r.flags&32768?(Fe||u===1?i=!0:qo||(Pe&536870912)!==0?i=!1:(Ds=i=!0,(u===2||u===9||u===3||u===6)&&(u=wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),by(r,i)):Ic(r)}function Ic(i){var r=i;do{if((r.flags&32768)!==0){by(r,Ds);return}i=r.return;var a=cT(r.alternate,r,Xi);if(a!==null){xe=a;return}if(r=r.sibling,r!==null){xe=r;return}xe=r=i}while(r!==null);gt===0&&(gt=5)}function by(i,r){do{var a=dT(i.alternate,i);if(a!==null){a.flags&=32767,xe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){xe=i;return}xe=i=a}while(i!==null);gt=6,xe=null}function Ey(i,r,a,u,g,y,_,T,P){i.cancelPendingCommit=null;do Ac();while(Lt!==0);if(($e&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(y=r.lanes|r.childLanes,y|=gh,ah(i,a,y,_,T,P),i===st&&(xe=st=null,Pe=0),Ho=r,Us=i,es=a,Tf=y,If=g,uy=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,CT(ps,function(){return Ty(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=le.p,le.p=2,_=$e,$e|=4;try{hT(i,r,a)}finally{$e=_,le.p=g,Y.T=u}}Lt=1,wy(),_y(),Cy()}}function wy(){if(Lt===1){Lt=0;var i=Us,r=Ho,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=$e;$e|=4;try{ty(r,i);var y=Vf,_=ag(i.containerInfo),T=y.focusedElem,P=y.selectionRange;if(_!==T&&T&&T.ownerDocument&&og(T.ownerDocument.documentElement,T)){if(P!==null&&dh(T)){var G=P.start,Q=P.end;if(Q===void 0&&(Q=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(Q,T.value.length);else{var te=T.ownerDocument||document,W=te&&te.defaultView||window;if(W.getSelection){var K=W.getSelection(),fe=T.textContent.length,Ee=Math.min(P.start,fe),it=P.end===void 0?Ee:Math.min(P.end,fe);!K.extend&&Ee>it&&(_=it,it=Ee,Ee=_);var q=rg(T,Ee),U=rg(T,it);if(q&&U&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var B=te.createRange();B.setStart(q.node,q.offset),K.removeAllRanges(),Ee>it?(K.addRange(B),K.extend(U.node,U.offset)):(B.setEnd(U.node,U.offset),K.addRange(B))}}}}for(te=[],K=T;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var Z=te[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}jc=!!qf,Vf=qf=null}finally{$e=g,le.p=u,Y.T=a}}i.current=r,Lt=2}}function _y(){if(Lt===2){Lt=0;var i=Us,r=Ho,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=$e;$e|=4;try{Yv(i,r.alternate,r)}finally{$e=g,le.p=u,Y.T=a}}Lt=3}}function Cy(){if(Lt===4||Lt===3){Lt=0,vu();var i=Us,r=Ho,a=es,u=uy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,Ho=Us=null,Sy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ls=null),Li(a),r=r.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Hn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Y.T,g=le.p,le.p=2,Y.T=null;try{for(var y=i.onRecoverableError,_=0;_<u.length;_++){var T=u[_];y(T.value,{componentStack:T.stack})}}finally{Y.T=r,le.p=g}}(es&3)!==0&&Ac(),Ii(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Af?wl++:(wl=0,Af=i):wl=0,_l(0)}}function Sy(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,nl(r)))}function Ac(){return wy(),_y(),Cy(),Ty()}function Ty(){if(Lt!==5)return!1;var i=Us,r=Tf;Tf=0;var a=Li(es),u=Y.T,g=le.p;try{le.p=32>a?32:a,Y.T=null,a=If,If=null;var y=Us,_=es;if(Lt=0,Ho=Us=null,es=0,($e&6)!==0)throw Error(s(331));var T=$e;if($e|=4,oy(y.current),iy(y,y.current,_,a),$e=T,_l(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Hn,y)}catch{}return!0}finally{le.p=g,Y.T=u,Sy(i,r)}}function Iy(i,r,a){r=Rn(a,r),r=rf(i.stateNode,r,2),i=Os(i,r,2),i!==null&&(yr(i,2),Ii(i))}function Xe(i,r,a){if(i.tag===3)Iy(i,i,a);else for(;r!==null;){if(r.tag===3){Iy(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ls===null||!Ls.has(u))){i=Rn(a,i),a=Av(2),u=Os(r,a,2),u!==null&&(kv(a,u,r,i),yr(u,2),Ii(u));break}}r=r.return}}function Of(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new mT;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(a)||(_f=!0,g.add(a),i=ET.bind(null,i,r,a),r.then(i,i))}function ET(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,st===i&&(Pe&a)===a&&(gt===4||gt===3&&(Pe&62914560)===Pe&&300>on()-wc?($e&2)===0&&zo(i,0):Cf|=a,Vo===Pe&&(Vo=0)),Ii(i)}function Ay(i,r){r===0&&(r=Cu()),i=Rr(i,r),i!==null&&(yr(i,r),Ii(i))}function wT(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Ay(i,a)}function _T(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),Ay(i,a)}function CT(i,r){return Mt(i,r)}var kc=null,Go=null,xf=!1,Nc=!1,Rf=!1,js=0;function Ii(i){i!==Go&&i.next===null&&(Go===null?kc=Go=i:Go=Go.next=i),Nc=!0,xf||(xf=!0,TT())}function _l(i,r){if(!Rf&&Nc){Rf=!0;do for(var a=!1,u=kc;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var _=u.suspendedLanes,T=u.pingedLanes;y=(1<<31-vt(42|i)+1)-1,y&=g&~(_&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,xy(u,y))}else y=Pe,y=ui(u,u===st?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||zn(u,y)||(a=!0,xy(u,y));u=u.next}while(a);Rf=!1}}function ST(){ky()}function ky(){Nc=xf=!1;var i=0;js!==0&&MT()&&(i=js);for(var r=on(),a=null,u=kc;u!==null;){var g=u.next,y=Ny(u,r);y===0?(u.next=null,a===null?kc=g:a.next=g,g===null&&(Go=a)):(a=u,(i!==0||(y&3)!==0)&&(Nc=!0)),u=g}Lt!==0&&Lt!==5||_l(i),js!==0&&(js=0)}function Ny(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var _=31-vt(y),T=1<<_,P=g[_];P===-1?((T&a)===0||(T&u)!==0)&&(g[_]=oh(T,r)):P<=r&&(i.expiredLanes|=T),y&=~T}if(r=st,a=Pe,a=ui(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&fs(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||zn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&fs(u),Li(a)){case 2:case 8:a=Ra;break;case 32:a=ps;break;case 268435456:a=yu;break;default:a=ps}return u=Oy.bind(null,i),a=Mt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&fs(u),i.callbackPriority=2,i.callbackNode=null,2}function Oy(i,r){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Ac()&&i.callbackNode!==a)return null;var u=Pe;return u=ui(i,i===st?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(dy(i,u,r),Ny(i,on()),i.callbackNode!=null&&i.callbackNode===a?Oy.bind(null,i):null)}function xy(i,r){if(Ac())return null;dy(i,r,!0)}function TT(){UT(function(){($e&6)!==0?Mt(xa,ST):ky()})}function Pf(){if(js===0){var i=Oo;i===0&&(i=ai,ai<<=1,(ai&261888)===0&&(ai=256)),js=i}return js}function Ry(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:mo(""+i)}function Py(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function IT(i,r,a,u,g){if(r==="submit"&&a&&a.stateNode===g){var y=Ry((g[jt]||null).action),_=u.submitter;_&&(r=(r=_[jt]||null)?Ry(r.formAction):_.getAttribute("formAction"),r!==null&&(y=r,_=null));var T=new Ei("action","action",null,u,g);i.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(js!==0){var P=_?Py(g,_):new FormData(g);Zh(a,{pending:!0,data:P,method:g.method,action:y},null,P)}}else typeof y=="function"&&(T.preventDefault(),P=_?Py(g,_):new FormData(g),Zh(a,{pending:!0,data:P,method:g.method,action:y},y,P))},currentTarget:g}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],AT=Mf.toLowerCase(),kT=Mf[0].toUpperCase()+Mf.slice(1);Qn(AT,"on"+kT)}Qn(cg,"onAnimationEnd"),Qn(dg,"onAnimationIteration"),Qn(hg,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(BS,"onTransitionRun"),Qn(GS,"onTransitionStart"),Qn(WS,"onTransitionCancel"),Qn(fg,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function Dy(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var y=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],P=T.instance,G=T.currentTarget;if(T=T.listener,P!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=G;try{y(g)}catch(Q){Bu(Q)}g.currentTarget=null,y=P}else for(_=0;_<u.length;_++){if(T=u[_],P=T.instance,G=T.currentTarget,T=T.listener,P!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=G;try{y(g)}catch(Q){Bu(Q)}g.currentTarget=null,y=P}}}}function Re(i,r){var a=r[uo];a===void 0&&(a=r[uo]=new Set);var u=i+"__bubble";a.has(u)||(My(r,i,2,!1),a.add(u))}function Lf(i,r,a){var u=0;r&&(u|=4),My(a,i,u,r)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Uf(i){if(!i[Oc]){i[Oc]=!0,Ma.forEach(function(a){a!=="selectionchange"&&(NT.has(a)||Lf(a,!1,i),Lf(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Oc]||(r[Oc]=!0,Lf("selectionchange",!1,r))}}function My(i,r,a,u){switch(c0(r)){case 2:var g=iI;break;case 8:g=sI;break;default:g=Zf}a=g.bind(null,r,a,i),g=void 0,!Sr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(r,a,{capture:!0,passive:g}):i.addEventListener(r,a,!0):g!==void 0?i.addEventListener(r,a,{passive:g}):i.addEventListener(r,a,!1)}function Ff(i,r,a,u,g){var y=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===g)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;T!==null;){if(_=fi(T),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){u=y=_;continue e}T=T.parentNode}}u=u.return}Es(function(){var G=y,Q=kn(a),te=[];e:{var W=pg.get(i);if(W!==void 0){var K=Ei,fe=i;switch(i){case"keypress":if(Ir(a)===0)break e;case"keydown":case"keyup":K=Vu;break;case"focusin":fe="focus",K=kr;break;case"focusout":fe="blur",K=kr;break;case"beforeblur":case"afterblur":K=kr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=E;break;case cg:case dg:case hg:K=Du;break;case fg:K=I;break;case"scroll":case"scrollend":K=$a;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=Mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ji;break;case"toggle":case"beforetoggle":K=Ne}var Ee=(r&4)!==0,it=!Ee&&(i==="scroll"||i==="scrollend"),q=Ee?W!==null?W+"Capture":null:W;Ee=[];for(var U=G,B;U!==null;){var Z=U;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||q===null||(Z=$n(U,q),Z!=null&&Ee.push(Sl(U,Z,B))),it)break;U=U.return}0<Ee.length&&(W=new K(W,fe,null,a,Q),te.push({event:W,listeners:Ee}))}}if((r&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",W&&a!==Ba&&(fe=a.relatedTarget||a.fromElement)&&(fi(fe)||fe[di]))break e;if((K||W)&&(W=Q.window===Q?Q:(W=Q.ownerDocument)?W.defaultView||W.parentWindow:window,K?(fe=a.relatedTarget||a.toElement,K=G,fe=fe?fi(fe):null,fe!==null&&(it=l(fe),Ee=fe.tag,fe!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(K=null,fe=G),K!==fe)){if(Ee=Ja,Z="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=ji,Z="onPointerLeave",q="onPointerEnter",U="pointer"),it=K==null?W:gn(K),B=fe==null?W:gn(fe),W=new Ee(Z,U+"leave",K,a,Q),W.target=it,W.relatedTarget=B,Z=null,fi(Q)===G&&(Ee=new Ee(q,U+"enter",fe,a,Q),Ee.target=B,Ee.relatedTarget=it,Z=Ee),it=Z,K&&fe)t:{for(Ee=OT,q=K,U=fe,B=0,Z=q;Z;Z=Ee(Z))B++;Z=0;for(var ve=U;ve;ve=Ee(ve))Z++;for(;0<B-Z;)q=Ee(q),B--;for(;0<Z-B;)U=Ee(U),Z--;for(;B--;){if(q===U||U!==null&&q===U.alternate){Ee=q;break t}q=Ee(q),U=Ee(U)}Ee=null}else Ee=null;K!==null&&Ly(te,W,K,Ee,!1),fe!==null&&it!==null&&Ly(te,it,fe,Ee,!0)}}e:{if(W=G?gn(G):window,K=W.nodeName&&W.nodeName.toLowerCase(),K==="select"||K==="input"&&W.type==="file")var ze=Xm;else if(Qm(W))if(eg)ze=VS;else{ze=jS;var me=FS}else K=W.nodeName,!K||K.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?G&&po(G.elementType)&&(ze=Xm):ze=qS;if(ze&&(ze=ze(i,G))){Zm(te,ze,a,Q);break e}me&&me(i,W,G),i==="focusout"&&G&&W.type==="number"&&G.memoizedProps.value!=null&&Va(W,"number",W.value)}switch(me=G?gn(G):window,i){case"focusin":(Qm(me)||me.contentEditable==="true")&&(_o=me,hh=G,Xa=null);break;case"focusout":Xa=hh=_o=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,lg(te,a,Q);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":lg(te,a,Q)}var Oe;if(Qe)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else wo?Nr(i,a)&&(De="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(qi&&a.locale!=="ko"&&(wo||De!=="onCompositionStart"?De==="onCompositionEnd"&&wo&&(Oe=Wa()):(bi=Q,Ga="value"in bi?bi.value:bi.textContent,wo=!0)),me=xc(G,De),0<me.length&&(De=new _i(De,i,null,a,Q),te.push({event:De,listeners:me}),Oe?De.data=Oe:(Oe=Eo(a),Oe!==null&&(De.data=Oe)))),(Oe=On?DS(i,a):MS(i,a))&&(De=xc(G,"onBeforeInput"),0<De.length&&(me=new _i("onBeforeInput","beforeinput",null,a,Q),te.push({event:me,listeners:De}),me.data=Oe)),IT(te,i,G,a,Q)}Dy(te,r)})}function Sl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function xc(i,r){for(var a=r+"Capture",u=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=$n(i,a),g!=null&&u.unshift(Sl(i,g,y)),g=$n(i,r),g!=null&&u.push(Sl(i,g,y))),i.tag===3)return u;i=i.return}return[]}function OT(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ly(i,r,a,u,g){for(var y=r._reactName,_=[];a!==null&&a!==u;){var T=a,P=T.alternate,G=T.stateNode;if(T=T.tag,P!==null&&P===u)break;T!==5&&T!==26&&T!==27||G===null||(P=G,g?(G=$n(a,y),G!=null&&_.unshift(Sl(a,G,P))):g||(G=$n(a,y),G!=null&&_.push(Sl(a,G,P)))),a=a.return}_.length!==0&&i.push({event:r,listeners:_})}var xT=/\r\n?/g,RT=/\u0000|\uFFFD/g;function Uy(i){return(typeof i=="string"?i:""+i).replace(xT,`
`).replace(RT,"")}function Fy(i,r){return r=Uy(r),Uy(i)===r}function nt(i,r,a,u,g,y){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||un(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&un(i,""+u);break;case"className":vn(i,"class",u);break;case"tabIndex":vn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(i,a,u);break;case"style":za(i,u,y);break;case"data":if(r!=="object"){vn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=mo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(r!=="input"&&nt(i,r,"name",g.name,g,null),nt(i,r,"formEncType",g.formEncType,g,null),nt(i,r,"formMethod",g.formMethod,g,null),nt(i,r,"formTarget",g.formTarget,g,null)):(nt(i,r,"encType",g.encType,g,null),nt(i,r,"method",g.method,g,null),nt(i,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=mo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"onScroll":u!=null&&Re("scroll",i);break;case"onScrollEnd":u!=null&&Re("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=mo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Re("beforetoggle",i),Re("toggle",i),ho(i,"popover",u);break;case"xlinkActuate":At(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":At(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":At(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":At(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":At(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":At(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":At(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":At(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":At(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ho(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xu.get(a)||a,ho(i,a,u))}}function jf(i,r,a,u,g,y){switch(a){case"style":za(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?un(i,u):(typeof u=="number"||typeof u=="bigint")&&un(i,""+u);break;case"onScroll":u!=null&&Re("scroll",i);break;case"onScrollEnd":u!=null&&Re("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),y=i[jt]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(r,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):ho(i,a,u)}}}function Kt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",i),Re("load",i);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var _=a[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,y,_,a,null)}}g&&nt(i,r,"srcSet",a.srcSet,a,null),u&&nt(i,r,"src",a.src,a,null);return;case"input":Re("invalid",i);var T=y=_=g=null,P=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var Q=a[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":_=Q;break;case"checked":P=Q;break;case"defaultChecked":G=Q;break;case"value":y=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:nt(i,r,u,Q,a,null)}}ku(i,y,T,P,G,_,g,!1);return;case"select":Re("invalid",i),u=_=y=null;for(g in a)if(a.hasOwnProperty(g)&&(T=a[g],T!=null))switch(g){case"value":y=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:nt(i,r,g,T,a,null)}r=y,a=_,i.multiple=!!u,r!=null?gs(i,!!u,r,!1):a!=null&&gs(i,!!u,a,!0);return;case"textarea":Re("invalid",i),y=g=u=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":g=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:nt(i,r,_,T,a,null)}vs(i,u,g,y);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(i,r,P,u,a,null)}return;case"dialog":Re("beforetoggle",i),Re("toggle",i),Re("cancel",i),Re("close",i);break;case"iframe":case"object":Re("load",i);break;case"video":case"audio":for(u=0;u<Cl.length;u++)Re(Cl[u],i);break;case"image":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"embed":case"source":case"link":Re("error",i),Re("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,G,u,a,null)}return;default:if(po(r)){for(Q in a)a.hasOwnProperty(Q)&&(u=a[Q],u!==void 0&&jf(i,r,Q,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&nt(i,r,T,u,a,null))}function PT(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,T=null,P=null,G=null,Q=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=te;default:u.hasOwnProperty(K)||nt(i,r,K,null,u,te)}}for(var W in u){var K=u[W];if(te=a[W],u.hasOwnProperty(W)&&(K!=null||te!=null))switch(W){case"type":y=K;break;case"name":g=K;break;case"checked":G=K;break;case"defaultChecked":Q=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==te&&nt(i,r,W,K,u,te)}}fo(i,_,T,P,G,Q,y,g);return;case"select":K=_=T=W=null;for(y in a)if(P=a[y],a.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":K=P;default:u.hasOwnProperty(y)||nt(i,r,y,null,u,P)}for(g in u)if(y=u[g],P=a[g],u.hasOwnProperty(g)&&(y!=null||P!=null))switch(g){case"value":W=y;break;case"defaultValue":T=y;break;case"multiple":_=y;default:y!==P&&nt(i,r,g,y,u,P)}r=T,a=_,u=K,W!=null?gs(i,!!a,W,!1):!!u!=!!a&&(r!=null?gs(i,!!a,r,!0):gs(i,!!a,a?[]:"",!1));return;case"textarea":K=W=null;for(T in a)if(g=a[T],a.hasOwnProperty(T)&&g!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(i,r,T,null,u,g)}for(_ in u)if(g=u[_],y=a[_],u.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":W=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&nt(i,r,_,g,u,y)}Nu(i,W,K);return;case"option":for(var fe in a)if(W=a[fe],a.hasOwnProperty(fe)&&W!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":i.selected=!1;break;default:nt(i,r,fe,null,u,W)}for(P in u)if(W=u[P],K=a[P],u.hasOwnProperty(P)&&W!==K&&(W!=null||K!=null))switch(P){case"selected":i.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:nt(i,r,P,W,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)W=a[Ee],a.hasOwnProperty(Ee)&&W!=null&&!u.hasOwnProperty(Ee)&&nt(i,r,Ee,null,u,W);for(G in u)if(W=u[G],K=a[G],u.hasOwnProperty(G)&&W!==K&&(W!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:nt(i,r,G,W,u,K)}return;default:if(po(r)){for(var it in a)W=a[it],a.hasOwnProperty(it)&&W!==void 0&&!u.hasOwnProperty(it)&&jf(i,r,it,void 0,u,W);for(Q in u)W=u[Q],K=a[Q],!u.hasOwnProperty(Q)||W===K||W===void 0&&K===void 0||jf(i,r,Q,W,u,K);return}}for(var q in a)W=a[q],a.hasOwnProperty(q)&&W!=null&&!u.hasOwnProperty(q)&&nt(i,r,q,null,u,W);for(te in u)W=u[te],K=a[te],!u.hasOwnProperty(te)||W===K||W==null&&K==null||nt(i,r,te,W,u,K)}function jy(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DT(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,_=g.initiatorType,T=g.duration;if(y&&T&&jy(_)){for(_=0,T=g.responseEnd,u+=1;u<a.length;u++){var P=a[u],G=P.startTime;if(G>T)break;var Q=P.transferSize,te=P.initiatorType;Q&&jy(te)&&(P=P.responseEnd,_+=Q*(P<T?1:(T-G)/(P-G)))}if(--u,r+=8*(y+_)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qf=null,Vf=null;function Rc(i){return i.nodeType===9?i:i.ownerDocument}function qy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Hf(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zf=null;function MT(){var i=window.event;return i&&i.type==="popstate"?i===zf?!1:(zf=i,!0):(zf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,LT=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(i){return zy.resolve(null).then(i).catch(FT)}:Hy;function FT(i){setTimeout(function(){throw i})}function qs(i){return i==="head"}function By(i,r){var a=r,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Ko(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Tl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Tl(a);for(var y=a.firstChild;y;){var _=y.nextSibling,T=y.nodeName;y[hi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=_}}else a==="body"&&Tl(i.ownerDocument.body);a=g}while(a);Ko(r)}function Gy(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Bf(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bf(a),co(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function jT(i,r,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[hi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence")||y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ln(i.nextSibling),i===null)break}return null}function qT(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ln(i.nextSibling),i===null))return null;return i}function Wy(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ln(i.nextSibling),i===null))return null;return i}function Gf(i){return i.data==="$?"||i.data==="$~"}function Wf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function VT(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ln(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var $f=null;function $y(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Ln(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Jy(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function Ky(i,r,a){switch(r=Rc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);co(i)}var Un=new Map,Yy=new Set;function Pc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ts=le.d;le.d={f:HT,r:zT,D:BT,C:GT,L:WT,m:$T,X:KT,S:JT,M:YT};function HT(){var i=ts.f(),r=Sc();return i||r}function zT(i){var r=An(i);r!==null&&r.tag===5&&r.type==="form"?fv(r):ts.r(i)}var Wo=typeof document>"u"?null:document;function Qy(i,r,a){var u=Wo;if(u&&typeof r=="string"&&r){var g=yn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Yy.has(g)||(Yy.add(g),i={rel:i,crossOrigin:a,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Kt(r,"link",i),It(r),u.head.appendChild(r)))}}function BT(i){ts.D(i),Qy("dns-prefetch",i,null)}function GT(i,r){ts.C(i,r),Qy("preconnect",i,r)}function WT(i,r,a){ts.L(i,r,a);var u=Wo;if(u&&i&&r){var g='link[rel="preload"][as="'+yn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+yn(a.imageSizes)+'"]')):g+='[href="'+yn(i)+'"]';var y=g;switch(r){case"style":y=$o(i);break;case"script":y=Jo(i)}Un.has(y)||(i=w({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Un.set(y,i),u.querySelector(g)!==null||r==="style"&&u.querySelector(Il(y))||r==="script"&&u.querySelector(Al(y))||(r=u.createElement("link"),Kt(r,"link",i),It(r),u.head.appendChild(r)))}}function $T(i,r){ts.m(i,r);var a=Wo;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(i)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Jo(i)}if(!Un.has(y)&&(i=w({rel:"modulepreload",href:i},r),Un.set(y,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(y)))return}u=a.createElement("link"),Kt(u,"link",i),It(u),a.head.appendChild(u)}}}function JT(i,r,a){ts.S(i,r,a);var u=Wo;if(u&&i){var g=pi(u).hoistableStyles,y=$o(i);r=r||"default";var _=g.get(y);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(Il(y)))T.loading=5;else{i=w({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Un.get(y))&&Jf(i,a);var P=_=u.createElement("link");It(P),Kt(P,"link",i),P._p=new Promise(function(G,Q){P.onload=G,P.onerror=Q}),P.addEventListener("load",function(){T.loading|=1}),P.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Dc(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:T},g.set(y,_)}}}function KT(i,r){ts.X(i,r);var a=Wo;if(a&&i){var u=pi(a).hoistableScripts,g=Jo(i),y=u.get(g);y||(y=a.querySelector(Al(g)),y||(i=w({src:i,async:!0},r),(r=Un.get(g))&&Kf(i,r),y=a.createElement("script"),It(y),Kt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function YT(i,r){ts.M(i,r);var a=Wo;if(a&&i){var u=pi(a).hoistableScripts,g=Jo(i),y=u.get(g);y||(y=a.querySelector(Al(g)),y||(i=w({src:i,async:!0,type:"module"},r),(r=Un.get(g))&&Kf(i,r),y=a.createElement("script"),It(y),Kt(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Zy(i,r,a,u){var g=(g=ke.current)?Pc(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=$o(a.href),a=pi(g).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=$o(a.href);var y=pi(g).hoistableStyles,_=y.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,_),(y=g.querySelector(Il(i)))&&!y._p&&(_.instance=y,_.state.loading=5),Un.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(i,a),y||QT(g,i,a,_.state))),r&&u===null)throw Error(s(528,""));return _}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Jo(a),a=pi(g).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function $o(i){return'href="'+yn(i)+'"'}function Il(i){return'link[rel="stylesheet"]['+i+"]"}function Xy(i){return w({},i,{"data-precedence":i.precedence,precedence:null})}function QT(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Kt(r,"link",a),It(r),i.head.appendChild(r))}function Jo(i){return'[src="'+yn(i)+'"]'}function Al(i){return"script[async]"+i}function e0(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+yn(a.href)+'"]');if(u)return r.instance=u,It(u),u;var g=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),It(u),Kt(u,"style",g),Dc(u,a.precedence,i),r.instance=u;case"stylesheet":g=$o(a.href);var y=i.querySelector(Il(g));if(y)return r.state.loading|=4,r.instance=y,It(y),y;u=Xy(a),(g=Un.get(g))&&Jf(u,g),y=(i.ownerDocument||i).createElement("link"),It(y);var _=y;return _._p=new Promise(function(T,P){_.onload=T,_.onerror=P}),Kt(y,"link",u),r.state.loading|=4,Dc(y,a.precedence,i),r.instance=y;case"script":return y=Jo(a.src),(g=i.querySelector(Al(y)))?(r.instance=g,It(g),g):(u=a,(g=Un.get(y))&&(u=w({},a),Kf(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),It(g),Kt(g,"link",u),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Dc(u,a.precedence,i));return r.instance}function Dc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===r)y=T;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Jf(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Kf(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Mc=null;function t0(i,r,a){if(Mc===null){var u=new Map,g=Mc=new Map;g.set(a,u)}else g=Mc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var y=a[g];if(!(y[hi]||y[Tt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(r)||"";_=i+_;var T=u.get(_);T?T.push(y):u.set(_,[y])}}return u}function n0(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function ZT(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function i0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function XT(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=$o(u.href),y=r.querySelector(Il(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Lc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=y,It(y);return}y=r.ownerDocument||r,u=Xy(u),(g=Un.get(g))&&Jf(u,g),y=y.createElement("link"),It(y);var _=y;_._p=new Promise(function(T,P){_.onload=T,_.onerror=P}),Kt(y,"link",u),a.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Lc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Yf=0;function eI(i,r){return i.stylesheets&&i.count===0&&Fc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Fc(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+r);0<i.imgBytes&&Yf===0&&(Yf=62500*DT());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Fc(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Yf?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Uc=null;function Fc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Uc=new Map,r.forEach(tI,i),Uc=null,Lc.call(i))}function tI(i,r){if(!(r.state.loading&4)){var a=Uc.get(i);if(a)var u=a.get(null);else{a=new Map,Uc.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),u=_)}u&&a.set(null,u)}g=r.instance,_=g.getAttribute("data-precedence"),y=a.get(_)||u,y===u&&a.set(null,g),a.set(_,g),this.count++,u=Lc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var kl={$$typeof:se,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function nI(i,r,a,u,g,y,_,T,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function s0(i,r,a,u,g,y,_,T,P,G,Q,te){return i=new nI(i,r,a,_,P,G,Q,te,T),r=1,y===!0&&(r|=24),y=En(3,null,null,r),i.current=y,y.stateNode=i,r=kh(),r.refCount++,i.pooledCache=r,r.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:r},Rh(y),i}function r0(i){return i?(i=To,i):To}function o0(i,r,a,u,g,y){g=r0(g),u.context===null?u.context=g:u.pendingContext=g,u=Ns(r),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=Os(i,u,r),a!==null&&(pn(a,i,r),ol(a,i,r))}function a0(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Qf(i,r){a0(i,r),(i=i.alternate)&&a0(i,r)}function l0(i){if(i.tag===13||i.tag===31){var r=Rr(i,67108864);r!==null&&pn(r,i,67108864),Qf(i,67108864)}}function u0(i){if(i.tag===13||i.tag===31){var r=Tn();r=Er(r);var a=Rr(i,r);a!==null&&pn(a,i,r),Qf(i,r)}}var jc=!0;function iI(i,r,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=2,Zf(i,r,a,u)}finally{le.p=y,Y.T=g}}function sI(i,r,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=8,Zf(i,r,a,u)}finally{le.p=y,Y.T=g}}function Zf(i,r,a,u){if(jc){var g=Xf(u);if(g===null)Ff(i,r,u,qc,a),d0(i,u);else if(oI(g,i,r,a,u))u.stopPropagation();else if(d0(i,u),r&4&&-1<rI.indexOf(i)){for(;g!==null;){var y=An(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=li(y.pendingLanes);if(_!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var P=1<<31-vt(_);T.entanglements[1]|=P,_&=~P}Ii(y),($e&6)===0&&(_c=on()+500,_l(0))}}break;case 31:case 13:T=Rr(y,2),T!==null&&pn(T,y,2),Sc(),Qf(y,2)}if(y=Xf(u),y===null&&Ff(i,r,u,qc,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else Ff(i,r,u,null,a)}}function Xf(i){return i=kn(i),ep(i)}var qc=null;function ep(i){if(qc=null,i=fi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=f(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return qc=i,null}function c0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case xa:return 2;case Ra:return 8;case ps:case rh:return 32;case yu:return 268435456;default:return 32}default:return 32}}var tp=!1,Vs=null,Hs=null,zs=null,Nl=new Map,Ol=new Map,Bs=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d0(i,r){switch(i){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Nl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(r.pointerId)}}function xl(i,r,a,u,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},r!==null&&(r=An(r),r!==null&&l0(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function oI(i,r,a,u,g){switch(r){case"focusin":return Vs=xl(Vs,i,r,a,u,g),!0;case"dragenter":return Hs=xl(Hs,i,r,a,u,g),!0;case"mouseover":return zs=xl(zs,i,r,a,u,g),!0;case"pointerover":var y=g.pointerId;return Nl.set(y,xl(Nl.get(y)||null,i,r,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Ol.set(y,xl(Ol.get(y)||null,i,r,a,u,g)),!0}return!1}function h0(i){var r=fi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Bn(i.priority,function(){u0(a)});return}}else if(r===31){if(r=f(a),r!==null){i.blockedOn=r,Bn(i.priority,function(){u0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Vc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Xf(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ba=u,a.target.dispatchEvent(u),Ba=null}else return r=An(a),r!==null&&l0(r),i.blockedOn=a,!1;r.shift()}return!0}function f0(i,r,a){Vc(i)&&a.delete(r)}function aI(){tp=!1,Vs!==null&&Vc(Vs)&&(Vs=null),Hs!==null&&Vc(Hs)&&(Hs=null),zs!==null&&Vc(zs)&&(zs=null),Nl.forEach(f0),Ol.forEach(f0)}function Hc(i,r){i.blockedOn===r&&(i.blockedOn=null,tp||(tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aI)))}var zc=null;function p0(i){zc!==i&&(zc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===i&&(zc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],g=i[r+2];if(typeof u!="function"){if(ep(u||a)===null)continue;break}var y=An(a);y!==null&&(i.splice(r,3),r-=3,Zh(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Ko(i){function r(P){return Hc(P,i)}Vs!==null&&Hc(Vs,i),Hs!==null&&Hc(Hs,i),zs!==null&&Hc(zs,i),Nl.forEach(r),Ol.forEach(r);for(var a=0;a<Bs.length;a++){var u=Bs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Bs.length&&(a=Bs[0],a.blockedOn===null);)h0(a),a.blockedOn===null&&Bs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],_=g[jt]||null;if(typeof y=="function")_||p0(a);else if(_){var T=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[jt]||null)T=_.formAction;else if(ep(g)!==null)continue}else T=_.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),p0(a)}}}function m0(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function np(i){this._internalRoot=i}Bc.prototype.render=np.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Tn();o0(a,u,i,r,null,null)},Bc.prototype.unmount=np.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;o0(i.current,2,null,i,null,null),Sc(),r[di]=null}};function Bc(i){this._internalRoot=i}Bc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Su();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Bs.length&&r!==0&&r<Bs[a].priority;a++);Bs.splice(a,0,i),a===0&&h0(i)}};var g0=e.version;if(g0!=="19.2.0")throw Error(s(527,g0,"19.2.0"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=v(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var lI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Hn=Gc.inject(lI),Bt=Gc}catch{}}return Pl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",g=Cv,y=Sv,_=Tv;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=s0(i,1,!1,null,null,a,u,null,g,y,_,m0),i[di]=r.current,Uf(i),new np(r)},Pl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,g="",y=Cv,_=Sv,T=Tv,P=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),r=s0(i,1,!0,r,a??null,u,g,P,y,_,T,m0),r.context=r0(null),a=r.current,u=Tn(),u=Er(u),g=Ns(u),g.callback=null,Os(a,g,u),a=u,r.current.lanes=a,yr(r,a),Ii(r),i[di]=r.current,Uf(i),new Bc(r)},Pl.version="19.2.0",Pl}var O0;function bI(){if(O0)return ip.exports;O0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=yI(),ip.exports}var EI=bI();const wI=Pw(EI);var $s=(n=>(n.CUSTOMER="CUSTOMER",n.ADMIN="ADMIN",n))($s||{});/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _I=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),x0=n=>{const e=CI(n);return e.charAt(0).toUpperCase()+e.slice(1)},Dw=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),SI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var TI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const II=Ve.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...f},m)=>Ve.createElement("svg",{ref:m,...TI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:Dw("lucide",o),...!l&&!SI(f)&&{"aria-hidden":"true"},...f},[...c.map(([v,b])=>Ve.createElement(v,b)),...Array.isArray(l)?l:[l]]));/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _t=(n,e)=>{const t=Ve.forwardRef(({className:s,...o},l)=>Ve.createElement(II,{ref:l,iconNode:e,className:Dw(`lucide-${_I(x0(n))}`,`lucide-${n}`,s),...o}));return t.displayName=x0(n),t};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const AI=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kI=_t("bot",AI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const NI=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],OI=_t("circle-play",NI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const xI=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],R0=_t("database",xI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const RI=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],PI=_t("layout-grid",RI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const DI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],MI=_t("loader-circle",DI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const LI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UI=_t("log-out",LI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const FI=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],jI=_t("message-circle",FI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qI=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],rp=_t("pencil",qI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const VI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dl=_t("plus",VI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const HI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zI=_t("save",HI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const BI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GI=_t("search",BI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const WI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$I=_t("send",WI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const JI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P0=_t("settings",JI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const KI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],YI=_t("shield-check",KI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const QI=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ZI=_t("sparkles",QI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const XI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],op=_t("trash-2",XI);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const eA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tA=_t("user",eA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nA=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],iA=_t("video",nA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sA=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],rA=_t("volume-2",sA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const oA=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],aA=_t("youtube",oA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],em=_t("x",lA),uA=()=>{};var D0={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mw=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cA=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,m=o+2<n.length,v=m?n[o+2]:0,b=l>>2,w=(l&3)<<4|f>>4;let S=(f&15)<<2|v>>6,N=v&63;m||(N=64,c||(S=64)),s.push(t[b],t[w],t[S],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Mw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],c=o<n.length?t[n.charAt(o)]:0;++o;const f=o<n.length?t[n.charAt(o)]:64;++o;const m=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||c==null||f==null||m==null)throw new dA;const v=l<<2|c>>4;if(s.push(v),f!==64){const b=c<<4&240|f>>2;if(s.push(b),m!==64){const w=f<<6&192|m;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class dA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hA=function(n){const e=Mw(n);return Lw.encodeByteArray(e,!0)},cd=function(n){return hA(n).replace(/\./g,"")},Uw=function(n){try{return Lw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pA=()=>fA().__FIREBASE_DEFAULTS__,mA=()=>{if(typeof process>"u"||typeof D0>"u")return;const n=D0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Uw(n[1]);return e&&JSON.parse(e)},Dd=()=>{try{return uA()||pA()||mA()||gA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Fw=n=>{var e,t;return(t=(e=Dd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},vA=n=>{const e=Fw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},jw=()=>{var n;return(n=Dd())==null?void 0:n.config},qw=n=>{var e;return(e=Dd())==null?void 0:e[`_${n}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vw(n){return(await fetch(n,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[cd(JSON.stringify(t)),cd(JSON.stringify(c)),""].join(".")}const Hl={};function EA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?n.emulator.push(e):n.prod.push(e);return n}function wA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M0=!1;function Hw(n,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||Hl[n]===e||Hl[n]||M0)return;Hl[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",o=EA().prod.length>0;function l(){const w=document.getElementById(s);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{M0=!0,l()},w}function v(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=wA(s),S=t("text"),N=document.getElementById(S)||document.createElement("span"),H=t("learnmore"),L=document.getElementById(H)||document.createElement("a"),V=t("preprendIcon"),$=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const X=w.element;c(X),v(L,H);const se=m();f($,V),X.append($,N,L,se),document.body.appendChild(X)}o?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function CA(){var n;const e=(n=Dd())==null?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AA(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kA(){return!CA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NA(){try{return typeof indexedDB=="object"}catch{return!1}}function OA(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xA="FirebaseError";class cs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=xA,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?RA(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new cs(o,f,s)}}function RA(n,e){return n.replace(PA,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const PA=/\{\$([^}]+)}/g;function DA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(L0(l)&&L0(c)){if(!Jr(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function L0(n){return n!==null&&typeof n=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[s,o]=t.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ul(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MA(n,e){const t=new LA(n,e);return t.subscribe.bind(t)}class LA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");UA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ap),o.error===void 0&&(o.error=ap),o.complete===void 0&&(o.complete=ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vn(n){return n&&n._delegate?n._delegate:n}class Kr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gr="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new yA;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qA(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:jA(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jA(n){return n===Gr?void 0:n}function qA(n){return n.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const HA={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},zA=Me.INFO,BA={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},GA=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=BA[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=zA,this._logHandler=GA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const WA=(n,e)=>e.some(t=>n instanceof t);let U0,F0;function $A(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JA(){return F0||(F0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zw=new WeakMap,bp=new WeakMap,Bw=new WeakMap,lp=new WeakMap,nm=new WeakMap;function KA(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(er(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zw.set(t,n)}).catch(()=>{}),nm.set(e,n),e}function YA(n){if(bp.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bp.set(n,e)}let Ep={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QA(n){Ep=n(Ep)}function ZA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(up(this),e,...t);return Bw.set(s,e.sort?e.sort():[e]),er(s)}:JA().includes(n)?function(...e){return n.apply(up(this),e),er(zw.get(this))}:function(...e){return er(n.apply(up(this),e))}}function XA(n){return typeof n=="function"?ZA(n):(n instanceof IDBTransaction&&YA(n),WA(n,$A())?new Proxy(n,Ep):n)}function er(n){if(n instanceof IDBRequest)return KA(n);if(lp.has(n))return lp.get(n);const e=XA(n);return e!==n&&(lp.set(n,e),nm.set(e,n)),e}const up=n=>nm.get(n);function ek(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=er(c);return s&&c.addEventListener("upgradeneeded",m=>{s(er(c.result),m.oldVersion,m.newVersion,er(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const tk=["get","getKey","getAll","getAllKeys","count"],nk=["put","add","delete","clear"],cp=new Map;function j0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=nk.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||tk.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,o?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&m.done]))[0]};return cp.set(e,l),l}QA(n=>({...n,get:(e,t,s)=>j0(e,t)||n.get(e,t,s),has:(e,t)=>!!j0(e,t)||n.has(e,t)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ik{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sk(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(" ")}}function sk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",q0="0.14.6";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rs=new tm("@firebase/app"),rk="@firebase/app-compat",ok="@firebase/analytics-compat",ak="@firebase/analytics",lk="@firebase/app-check-compat",uk="@firebase/app-check",ck="@firebase/auth",dk="@firebase/auth-compat",hk="@firebase/database",fk="@firebase/data-connect",pk="@firebase/database-compat",mk="@firebase/functions",gk="@firebase/functions-compat",vk="@firebase/installations",yk="@firebase/installations-compat",bk="@firebase/messaging",Ek="@firebase/messaging-compat",wk="@firebase/performance",_k="@firebase/performance-compat",Ck="@firebase/remote-config",Sk="@firebase/remote-config-compat",Tk="@firebase/storage",Ik="@firebase/storage-compat",Ak="@firebase/firestore",kk="@firebase/ai",Nk="@firebase/firestore-compat",Ok="firebase",xk="12.6.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _p="[DEFAULT]",Rk={[wp]:"fire-core",[rk]:"fire-core-compat",[ak]:"fire-analytics",[ok]:"fire-analytics-compat",[uk]:"fire-app-check",[lk]:"fire-app-check-compat",[ck]:"fire-auth",[dk]:"fire-auth-compat",[hk]:"fire-rtdb",[fk]:"fire-data-connect",[pk]:"fire-rtdb-compat",[mk]:"fire-fn",[gk]:"fire-fn-compat",[vk]:"fire-iid",[yk]:"fire-iid-compat",[bk]:"fire-fcm",[Ek]:"fire-fcm-compat",[wk]:"fire-perf",[_k]:"fire-perf-compat",[Ck]:"fire-rc",[Sk]:"fire-rc-compat",[Tk]:"fire-gcs",[Ik]:"fire-gcs-compat",[Ak]:"fire-fst",[Nk]:"fire-fst-compat",[kk]:"fire-vertex","fire-js":"fire-js",[Ok]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dd=new Map,Pk=new Map,Cp=new Map;function V0(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ua(n){const e=n.name;if(Cp.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,n);for(const t of dd.values())V0(t,n);for(const t of Pk.values())V0(t,n);return!0}function im(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ti(n){return n==null?!1:n.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new au("app","Firebase",Dk);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mk{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ya=xk;function Gw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:_p,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw tr.create("bad-app-name",{appName:String(o)});if(t||(t=jw()),!t)throw tr.create("no-options");const l=dd.get(o);if(l){if(Jr(t,l.options)&&Jr(s,l.config))return l;throw tr.create("duplicate-app",{appName:o})}const c=new VA(o);for(const m of Cp.values())c.addComponent(m);const f=new Mk(t,s,c);return dd.set(o,f),f}function Ww(n=_p){const e=dd.get(n);if(!e&&n===_p&&jw())return Gw();if(!e)throw tr.create("no-app",{appName:n});return e}function nr(n,e,t){let s=Rk[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(c.join(" "));return}ua(new Kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lk="firebase-heartbeat-database",Uk=1,Yl="firebase-heartbeat-store";let dp=null;function $w(){return dp||(dp=ek(Lk,Uk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),dp}async function Fk(n){try{const e=(await $w()).transaction(Yl),t=await e.objectStore(Yl).get(Jw(n));return await e.done,t}catch(e){if(e instanceof cs)rs.warn(e.message);else{const t=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(t.message)}}}async function H0(n,e){try{const t=(await $w()).transaction(Yl,"readwrite");await t.objectStore(Yl).put(e,Jw(n)),await t.done}catch(t){if(t instanceof cs)rs.warn(t.message);else{const s=tr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});rs.warn(s.message)}}}function Jw(n){return`${n.name}!${n.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jk=1024,qk=30;class Vk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zk(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=z0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>qk){const l=Bk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){rs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=z0(),{heartbeatsToSend:s,unsentEntries:o}=Hk(this._heartbeatsCache.heartbeats),l=cd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return rs.warn(t),""}}}function z0(){return new Date().toISOString().substring(0,10)}function Hk(n,e=jk){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),B0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),B0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class zk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NA()?OA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Fk(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}}function B0(n){return cd(JSON.stringify({version:2,heartbeats:n})).length}function Bk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gk(n){ua(new Kr("platform-logger",e=>new ik(e),"PRIVATE")),ua(new Kr("heartbeat",e=>new Vk(e),"PRIVATE")),nr(wp,q0,n),nr(wp,q0,"esm2020"),nr("fire-js","")}Gk("");var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,Kw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,A){function k(){}k.prototype=A.prototype,O.F=A.prototype,O.prototype=new k,O.prototype.constructor=O,O.D=function(M,D,F){for(var x=Array(arguments.length-2),We=2;We<arguments.length;We++)x[We-2]=arguments[We];return A.prototype[D].apply(M,x)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,A,k){k||(k=0);const M=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)M[D]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(D=0;D<16;++D)M[D]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=O.g[0],k=O.g[1],D=O.g[2];let F=O.g[3],x;x=A+(F^k&(D^F))+M[0]+3614090360&4294967295,A=k+(x<<7&4294967295|x>>>25),x=F+(D^A&(k^D))+M[1]+3905402710&4294967295,F=A+(x<<12&4294967295|x>>>20),x=D+(k^F&(A^k))+M[2]+606105819&4294967295,D=F+(x<<17&4294967295|x>>>15),x=k+(A^D&(F^A))+M[3]+3250441966&4294967295,k=D+(x<<22&4294967295|x>>>10),x=A+(F^k&(D^F))+M[4]+4118548399&4294967295,A=k+(x<<7&4294967295|x>>>25),x=F+(D^A&(k^D))+M[5]+1200080426&4294967295,F=A+(x<<12&4294967295|x>>>20),x=D+(k^F&(A^k))+M[6]+2821735955&4294967295,D=F+(x<<17&4294967295|x>>>15),x=k+(A^D&(F^A))+M[7]+4249261313&4294967295,k=D+(x<<22&4294967295|x>>>10),x=A+(F^k&(D^F))+M[8]+1770035416&4294967295,A=k+(x<<7&4294967295|x>>>25),x=F+(D^A&(k^D))+M[9]+2336552879&4294967295,F=A+(x<<12&4294967295|x>>>20),x=D+(k^F&(A^k))+M[10]+4294925233&4294967295,D=F+(x<<17&4294967295|x>>>15),x=k+(A^D&(F^A))+M[11]+2304563134&4294967295,k=D+(x<<22&4294967295|x>>>10),x=A+(F^k&(D^F))+M[12]+1804603682&4294967295,A=k+(x<<7&4294967295|x>>>25),x=F+(D^A&(k^D))+M[13]+4254626195&4294967295,F=A+(x<<12&4294967295|x>>>20),x=D+(k^F&(A^k))+M[14]+2792965006&4294967295,D=F+(x<<17&4294967295|x>>>15),x=k+(A^D&(F^A))+M[15]+1236535329&4294967295,k=D+(x<<22&4294967295|x>>>10),x=A+(D^F&(k^D))+M[1]+4129170786&4294967295,A=k+(x<<5&4294967295|x>>>27),x=F+(k^D&(A^k))+M[6]+3225465664&4294967295,F=A+(x<<9&4294967295|x>>>23),x=D+(A^k&(F^A))+M[11]+643717713&4294967295,D=F+(x<<14&4294967295|x>>>18),x=k+(F^A&(D^F))+M[0]+3921069994&4294967295,k=D+(x<<20&4294967295|x>>>12),x=A+(D^F&(k^D))+M[5]+3593408605&4294967295,A=k+(x<<5&4294967295|x>>>27),x=F+(k^D&(A^k))+M[10]+38016083&4294967295,F=A+(x<<9&4294967295|x>>>23),x=D+(A^k&(F^A))+M[15]+3634488961&4294967295,D=F+(x<<14&4294967295|x>>>18),x=k+(F^A&(D^F))+M[4]+3889429448&4294967295,k=D+(x<<20&4294967295|x>>>12),x=A+(D^F&(k^D))+M[9]+568446438&4294967295,A=k+(x<<5&4294967295|x>>>27),x=F+(k^D&(A^k))+M[14]+3275163606&4294967295,F=A+(x<<9&4294967295|x>>>23),x=D+(A^k&(F^A))+M[3]+4107603335&4294967295,D=F+(x<<14&4294967295|x>>>18),x=k+(F^A&(D^F))+M[8]+1163531501&4294967295,k=D+(x<<20&4294967295|x>>>12),x=A+(D^F&(k^D))+M[13]+2850285829&4294967295,A=k+(x<<5&4294967295|x>>>27),x=F+(k^D&(A^k))+M[2]+4243563512&4294967295,F=A+(x<<9&4294967295|x>>>23),x=D+(A^k&(F^A))+M[7]+1735328473&4294967295,D=F+(x<<14&4294967295|x>>>18),x=k+(F^A&(D^F))+M[12]+2368359562&4294967295,k=D+(x<<20&4294967295|x>>>12),x=A+(k^D^F)+M[5]+4294588738&4294967295,A=k+(x<<4&4294967295|x>>>28),x=F+(A^k^D)+M[8]+2272392833&4294967295,F=A+(x<<11&4294967295|x>>>21),x=D+(F^A^k)+M[11]+1839030562&4294967295,D=F+(x<<16&4294967295|x>>>16),x=k+(D^F^A)+M[14]+4259657740&4294967295,k=D+(x<<23&4294967295|x>>>9),x=A+(k^D^F)+M[1]+2763975236&4294967295,A=k+(x<<4&4294967295|x>>>28),x=F+(A^k^D)+M[4]+1272893353&4294967295,F=A+(x<<11&4294967295|x>>>21),x=D+(F^A^k)+M[7]+4139469664&4294967295,D=F+(x<<16&4294967295|x>>>16),x=k+(D^F^A)+M[10]+3200236656&4294967295,k=D+(x<<23&4294967295|x>>>9),x=A+(k^D^F)+M[13]+681279174&4294967295,A=k+(x<<4&4294967295|x>>>28),x=F+(A^k^D)+M[0]+3936430074&4294967295,F=A+(x<<11&4294967295|x>>>21),x=D+(F^A^k)+M[3]+3572445317&4294967295,D=F+(x<<16&4294967295|x>>>16),x=k+(D^F^A)+M[6]+76029189&4294967295,k=D+(x<<23&4294967295|x>>>9),x=A+(k^D^F)+M[9]+3654602809&4294967295,A=k+(x<<4&4294967295|x>>>28),x=F+(A^k^D)+M[12]+3873151461&4294967295,F=A+(x<<11&4294967295|x>>>21),x=D+(F^A^k)+M[15]+530742520&4294967295,D=F+(x<<16&4294967295|x>>>16),x=k+(D^F^A)+M[2]+3299628645&4294967295,k=D+(x<<23&4294967295|x>>>9),x=A+(D^(k|~F))+M[0]+4096336452&4294967295,A=k+(x<<6&4294967295|x>>>26),x=F+(k^(A|~D))+M[7]+1126891415&4294967295,F=A+(x<<10&4294967295|x>>>22),x=D+(A^(F|~k))+M[14]+2878612391&4294967295,D=F+(x<<15&4294967295|x>>>17),x=k+(F^(D|~A))+M[5]+4237533241&4294967295,k=D+(x<<21&4294967295|x>>>11),x=A+(D^(k|~F))+M[12]+1700485571&4294967295,A=k+(x<<6&4294967295|x>>>26),x=F+(k^(A|~D))+M[3]+2399980690&4294967295,F=A+(x<<10&4294967295|x>>>22),x=D+(A^(F|~k))+M[10]+4293915773&4294967295,D=F+(x<<15&4294967295|x>>>17),x=k+(F^(D|~A))+M[1]+2240044497&4294967295,k=D+(x<<21&4294967295|x>>>11),x=A+(D^(k|~F))+M[8]+1873313359&4294967295,A=k+(x<<6&4294967295|x>>>26),x=F+(k^(A|~D))+M[15]+4264355552&4294967295,F=A+(x<<10&4294967295|x>>>22),x=D+(A^(F|~k))+M[6]+2734768916&4294967295,D=F+(x<<15&4294967295|x>>>17),x=k+(F^(D|~A))+M[13]+1309151649&4294967295,k=D+(x<<21&4294967295|x>>>11),x=A+(D^(k|~F))+M[4]+4149444226&4294967295,A=k+(x<<6&4294967295|x>>>26),x=F+(k^(A|~D))+M[11]+3174756917&4294967295,F=A+(x<<10&4294967295|x>>>22),x=D+(A^(F|~k))+M[2]+718787259&4294967295,D=F+(x<<15&4294967295|x>>>17),x=k+(F^(D|~A))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+A&4294967295,O.g[1]=O.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,O.g[2]=O.g[2]+D&4294967295,O.g[3]=O.g[3]+F&4294967295}s.prototype.v=function(O,A){A===void 0&&(A=O.length);const k=A-this.blockSize,M=this.C;let D=this.h,F=0;for(;F<A;){if(D==0)for(;F<=k;)o(this,O,F),F+=this.blockSize;if(typeof O=="string"){for(;F<A;)if(M[D++]=O.charCodeAt(F++),D==this.blockSize){o(this,M),D=0;break}}else for(;F<A;)if(M[D++]=O[F++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=A},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var A=1;A<O.length-8;++A)O[A]=0;A=this.o*8;for(var k=O.length-8;k<O.length;++k)O[k]=A&255,A/=256;for(this.v(O),O=Array(16),A=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)O[A++]=this.g[k]>>>M&255;return O};function l(O,A){var k=f;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=A(O)}function c(O,A){this.h=A;const k=[];let M=!0;for(let D=O.length-1;D>=0;D--){const F=O[D]|0;M&&F==A||(k[D]=F,M=!1)}this.g=k}var f={};function m(O){return-128<=O&&O<128?l(O,function(A){return new c([A|0],A<0?-1:0)}):new c([O|0],O<0?-1:0)}function v(O){if(isNaN(O)||!isFinite(O))return w;if(O<0)return V(v(-O));const A=[];let k=1;for(let M=0;O>=k;M++)A[M]=O/k|0,k*=4294967296;return new c(A,0)}function b(O,A){if(O.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(O.charAt(0)=="-")return V(b(O.substring(1),A));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=v(Math.pow(A,8));let M=w;for(let F=0;F<O.length;F+=8){var D=Math.min(8,O.length-F);const x=parseInt(O.substring(F,F+D),A);D<8?(D=v(Math.pow(A,D)),M=M.j(D).add(v(x))):(M=M.j(k),M=M.add(v(x)))}return M}var w=m(0),S=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-V(this).m();let O=0,A=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);O+=(M>=0?M:4294967296+M)*A,A*=4294967296}return O},n.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(H(this))return"0";if(L(this))return"-"+V(this).toString(O);const A=v(Math.pow(O,6));var k=this;let M="";for(;;){const D=oe(k,A).g;k=$(k,D.j(A));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(O);if(k=D,H(k))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function H(O){if(O.h!=0)return!1;for(let A=0;A<O.g.length;A++)if(O.g[A]!=0)return!1;return!0}function L(O){return O.h==-1}n.l=function(O){return O=$(this,O),L(O)?-1:H(O)?0:1};function V(O){const A=O.g.length,k=[];for(let M=0;M<A;M++)k[M]=~O.g[M];return new c(k,~O.h).add(S)}n.abs=function(){return L(this)?V(this):this},n.add=function(O){const A=Math.max(this.g.length,O.g.length),k=[];let M=0;for(let D=0;D<=A;D++){let F=M+(this.i(D)&65535)+(O.i(D)&65535),x=(F>>>16)+(this.i(D)>>>16)+(O.i(D)>>>16);M=x>>>16,F&=65535,x&=65535,k[D]=x<<16|F}return new c(k,k[k.length-1]&-2147483648?-1:0)};function $(O,A){return O.add(V(A))}n.j=function(O){if(H(this)||H(O))return w;if(L(this))return L(O)?V(this).j(V(O)):V(V(this).j(O));if(L(O))return V(this.j(V(O)));if(this.l(N)<0&&O.l(N)<0)return v(this.m()*O.m());const A=this.g.length+O.g.length,k=[];for(var M=0;M<2*A;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<O.g.length;D++){const F=this.i(M)>>>16,x=this.i(M)&65535,We=O.i(D)>>>16,pt=O.i(D)&65535;k[2*M+2*D]+=x*pt,X(k,2*M+2*D),k[2*M+2*D+1]+=F*pt,X(k,2*M+2*D+1),k[2*M+2*D+1]+=x*We,X(k,2*M+2*D+1),k[2*M+2*D+2]+=F*We,X(k,2*M+2*D+2)}for(O=0;O<A;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=A;O<2*A;O++)k[O]=0;return new c(k,0)};function X(O,A){for(;(O[A]&65535)!=O[A];)O[A+1]+=O[A]>>>16,O[A]&=65535,A++}function se(O,A){this.g=O,this.h=A}function oe(O,A){if(H(A))throw Error("division by zero");if(H(O))return new se(w,w);if(L(O))return A=oe(V(O),A),new se(V(A.g),V(A.h));if(L(A))return A=oe(O,V(A)),new se(V(A.g),A.h);if(O.g.length>30){if(L(O)||L(A))throw Error("slowDivide_ only works with positive integers.");for(var k=S,M=A;M.l(O)<=0;)k=pe(k),M=pe(M);var D=ie(k,1),F=ie(M,1);for(M=ie(M,2),k=ie(k,2);!H(M);){var x=F.add(M);x.l(O)<=0&&(D=D.add(k),F=x),M=ie(M,1),k=ie(k,1)}return A=$(O,D.j(A)),new se(D,A)}for(D=w;O.l(A)>=0;){for(k=Math.max(1,Math.floor(O.m()/A.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=v(k),x=F.j(A);L(x)||x.l(O)>0;)k-=M,F=v(k),x=F.j(A);H(F)&&(F=S),D=D.add(F),O=$(O,x)}return new se(D,O)}n.B=function(O){return oe(this,O).h},n.and=function(O){const A=Math.max(this.g.length,O.g.length),k=[];for(let M=0;M<A;M++)k[M]=this.i(M)&O.i(M);return new c(k,this.h&O.h)},n.or=function(O){const A=Math.max(this.g.length,O.g.length),k=[];for(let M=0;M<A;M++)k[M]=this.i(M)|O.i(M);return new c(k,this.h|O.h)},n.xor=function(O){const A=Math.max(this.g.length,O.g.length),k=[];for(let M=0;M<A;M++)k[M]=this.i(M)^O.i(M);return new c(k,this.h^O.h)};function pe(O){const A=O.g.length+1,k=[];for(let M=0;M<A;M++)k[M]=O.i(M)<<1|O.i(M-1)>>>31;return new c(k,O.h)}function ie(O,A){const k=A>>5;A%=32;const M=O.g.length-k,D=[];for(let F=0;F<M;F++)D[F]=A>0?O.i(F+k)>>>A|O.i(F+k+1)<<32-A:O.i(F+k);return new c(D,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Kw=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=b,ir=c}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yw,Fl,Qw,Zc,Sp,Zw,Xw,e_;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(p,E){if(E)e:{var C=s;p=p.split(".");for(var I=0;I<p.length-1;I++){var z=p[I];if(!(z in C))break e;C=C[z]}p=p[p.length-1],I=C[p],E=E(I),E!=I&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(E){var C=[],I;for(I in E)Object.prototype.hasOwnProperty.call(E,I)&&C.push([I,E[I]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function m(p,E,C){return p.call.apply(p.bind,arguments)}function v(p,E,C){return v=m,v.apply(null,arguments)}function b(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var I=C.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function w(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(I,z,J){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return E.prototype[z].apply(I,ae)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function N(p){const E=p.length;if(E>0){const C=Array(E);for(let I=0;I<E;I++)C[I]=p[I];return C}return[]}function H(p,E){for(let I=1;I<arguments.length;I++){const z=arguments[I];var C=typeof z;if(C=C!="object"?C:z?Array.isArray(z)?"array":C:"null",C=="array"||C=="object"&&typeof z.length=="number"){C=p.length||0;const J=z.length||0;p.length=C+J;for(let ae=0;ae<J;ae++)p[C+ae]=z[ae]}else p.push(z)}}class L{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function V(p){c.setTimeout(()=>{throw p},0)}function $(){var p=O;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class X{constructor(){this.h=this.g=null}add(E,C){const I=se.get();I.set(E,C),this.h?this.h.next=I:this.g=I,this.h=I}}var se=new L(()=>new oe,p=>p.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ie=!1,O=new X,A=()=>{const p=Promise.resolve(void 0);pe=()=>{p.then(k)}};function k(){for(var p;p=$();){try{p.h.call(p.g)}catch(C){V(C)}var E=se;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}ie=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,E),c.removeEventListener("test",C,E)}catch{}return p})();function x(p){return/^[\s\xa0]*$/.test(p)}function We(p,E){D.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}w(We,D),We.prototype.init=function(p,E){const C=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(p,E,C,I,z){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!I,this.ha=z,this.key=++Y,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function He(p,E,C){for(const I in p)E.call(C,p[I],I,p)}function Ke(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function j(p){const E={};for(const C in p)E[C]=p[C];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,E){let C,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(C in I)p[C]=I[C];for(let J=0;J<ee.length;J++)C=ee[J],Object.prototype.hasOwnProperty.call(I,C)&&(p[C]=I[C])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,E,C,I,z){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const ae=ke(p,E,I,z);return ae>-1?(E=p[ae],C||(E.fa=!1)):(E=new le(E,this.src,J,!!I,z),E.fa=C,p.push(E)),E};function Ce(p,E){const C=E.type;if(C in p.g){var I=p.g[C],z=Array.prototype.indexOf.call(I,E,void 0),J;(J=z>=0)&&Array.prototype.splice.call(I,z,1),J&&(ye(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function ke(p,E,C,I){for(let z=0;z<p.length;++z){const J=p[z];if(!J.da&&J.listener==E&&J.capture==!!C&&J.ha==I)return z}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(p,E,C,I,z){if(Array.isArray(E)){for(let J=0;J<E.length;J++)ut(p,E[J],C,I,z);return null}return C=Oa(C),p&&p[pt]?p.J(E,C,f(I)?!!I.capture:!1,z):pr(p,E,C,!1,I,z)}function pr(p,E,C,I,z,J){if(!E)throw Error("Invalid event type");const ae=f(z)?!!z.capture:!!z;let Ne=mr(p);if(Ne||(p[je]=Ne=new he(p)),C=Ne.add(E,C,I,ae,J),C.proxy)return C;if(I=ro(),C.proxy=I,I.src=p,I.listener=C,p.addEventListener)F||(z=ae),z===void 0&&(z=!1),p.addEventListener(E.toString(),I,z);else if(p.attachEvent)p.attachEvent(oi(E.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ro(){function p(C){return E.call(p.src,p.listener,C)}const E=ka;return p}function oo(p,E,C,I,z){if(Array.isArray(E))for(var J=0;J<E.length;J++)oo(p,E[J],C,I,z);else I=f(I)?!!I.capture:!!I,C=Oa(C),p&&p[pt]?(p=p.i,J=String(E).toString(),J in p.g&&(E=p.g[J],C=ke(E,C,I,z),C>-1&&(ye(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[J],p.h--)))):p&&(p=mr(p))&&(E=p.g[E.toString()],p=-1,E&&(p=ke(E,C,I,z)),(C=p>-1?E[p]:null)&&ao(C))}function ao(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[pt])Ce(E.i,p);else{var C=p.type,I=p.proxy;E.removeEventListener?E.removeEventListener(C,I,p.capture):E.detachEvent?E.detachEvent(oi(C),I):E.addListener&&E.removeListener&&E.removeListener(I),(C=mr(E))?(Ce(C,p),C.h==0&&(C.src=null,E[je]=null)):ye(p)}}}function oi(p){return p in Dt?Dt[p]:Dt[p]="on"+p}function ka(p,E){if(p.da)p=!0;else{E=new We(E,this);const C=p.listener,I=p.ha||p.src;p.fa&&ao(p),p=C.call(I,E)}return p}function mr(p){return p=p[je],p instanceof he?p:null}var Na="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oa(p){return typeof p=="function"?p:(p[Na]||(p[Na]=function(E){return p.handleEvent(E)}),p[Na])}function Ct(){M.call(this),this.i=new he(this),this.M=this,this.G=null}w(Ct,M),Ct.prototype[pt]=!0,Ct.prototype.removeEventListener=function(p,E,C,I){oo(this,p,E,C,I)};function Mt(p,E){var C,I=p.G;if(I)for(C=[];I;I=I.G)C.push(I);if(p=p.M,I=E.type||E,typeof E=="string")E=new D(E,p);else if(E instanceof D)E.target=E.target||p;else{var z=E;E=new D(I,p),ue(E,z)}z=!0;let J,ae;if(C)for(ae=C.length-1;ae>=0;ae--)J=E.g=C[ae],z=fs(J,I,!0,E)&&z;if(J=E.g=p,z=fs(J,I,!0,E)&&z,z=fs(J,I,!1,E)&&z,C)for(ae=0;ae<C.length;ae++)J=E.g=C[ae],z=fs(J,I,!1,E)&&z}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let I=0;I<C.length;I++)ye(C[I]);delete p.g[E],p.h--}}this.G=null},Ct.prototype.J=function(p,E,C,I){return this.i.add(String(p),E,!1,C,I)},Ct.prototype.K=function(p,E,C,I){return this.i.add(String(p),E,!0,C,I)};function fs(p,E,C,I){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let z=!0;for(let J=0;J<E.length;++J){const ae=E[J];if(ae&&!ae.da&&ae.capture==C){const Ne=ae.listener,yt=ae.ha||ae.src;ae.fa&&Ce(p.i,ae),z=Ne.call(yt,I)!==!1&&z}}return z&&!I.defaultPrevented}function sh(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(p,E||0)}function vu(p){p.g=sh(()=>{p.g=null,p.i&&(p.i=!1,vu(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class on extends M{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(p){M.call(this),this.h=p,this.g={}}w(gr,M);var xa=[];function Ra(p){He(p.g,function(E,C){this.g.hasOwnProperty(C)&&ao(E)},p),p.g={}}gr.prototype.N=function(){gr.Z.N.call(this),Ra(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=c.JSON.stringify,rh=c.JSON.parse,yu=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function bu(){}function Eu(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bt(){D.call(this,"d")}w(Bt,D);function In(){D.call(this,"c")}w(In,D);var vt={},wu=null;function lo(){return wu=wu||new Ct}vt.Ia="serverreachability";function _u(p){D.call(this,vt.Ia,p)}w(_u,D);function ai(p){const E=lo();Mt(E,new _u(E))}vt.STAT_EVENT="statevent";function vr(p,E){D.call(this,vt.STAT_EVENT,p),this.stat=E}w(vr,D);function St(p){const E=lo();Mt(E,new vr(E,p))}vt.Ja="timingevent";function li(p,E){D.call(this,vt.Ja,p),this.size=E}w(li,D);function ui(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},E)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function oh(p,E,C,I,z,J){p.info(function(){if(p.g)if(J){var ae="",Ne=J.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var yt=Ne[Qe].split("=");if(yt.length>1){const ct=yt[0];yt=yt[1];const On=ct.split("_");ae=On.length>=2&&On[1]=="type"?ae+(ct+"="+yt+"&"):ae+(ct+"=redacted&")}}}else ae=null;else ae=J;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+E+`
`+C+`
`+ae})}function Cu(p,E,C,I,z,J,ae){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+E+`
`+C+`
`+J+" "+ae})}function ci(p,E,C,I){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+ah(p,C)+(I?" "+I:"")})}function yr(p,E){p.info(function(){return"TIMEOUT: "+E})}zn.prototype.info=function(){};function ah(p,E){if(!p.g)return E;if(!E)return null;try{const J=JSON.parse(E);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var C=J[p];if(!(C.length<2)){var I=C[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ae=1;ae<I.length;ae++)I[ae]=""}}}}return ps(J)}catch{return E}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Da;function Er(){}w(Er,bu),Er.prototype.g=function(){return new XMLHttpRequest},Da=new Er;function Li(p){return encodeURIComponent(String(p))}function Su(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function Bn(p,E,C,I){this.j=p,this.i=E,this.l=C,this.S=I||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gn}function Gn(){this.i=null,this.g="",this.h=!1}var Tt={},jt={};function di(p,E,C){p.M=1,p.A=wr(At(E)),p.u=C,p.R=!0,uo(p,null)}function uo(p,E){p.F=Date.now(),hi(p),p.B=At(p.A);var C=p.B,I=p.S;Array.isArray(I)||(I=[String(I)]),po(C.i,"t",I),p.C=0,C=p.j.L,p.h=new Gn,p.g=ju(p.j,C?E:null,!p.u),p.P>0&&(p.O=new on(v(p.Y,p,p.g),p.P)),E=p.V,C=p.g,I=p.ba;var z="readystatechange";Array.isArray(z)||(z&&(xa[0]=z.toString()),z=xa);for(let J=0;J<z.length;J++){const ae=ut(C,z[J],I||E.handleEvent,!1,E.h||E);if(!ae)break;E.g[ae.key]=ae}E=p.J?j(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),ai(),oh(p.i,p.v,p.B,p.l,p.S,p.u)}Bn.prototype.ba=function(p){p=p.target;const E=this.O;E&&Jn(p)==3?E.j():this.Y(p)},Bn.prototype.Y=function(p){try{if(p==this.g)e:{const Ne=Jn(this.g),yt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Ne!=4||yt==7||(yt==8||Qe<=0?ai(3):ai(2)),fi(this);var E=this.g.ca();this.X=E;var C=lh(this);if(this.o=E==200,Cu(this.i,this.v,this.B,this.l,this.S,Ne,E),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(I)){var J=I;break t}}J=null}if(p=J)ci(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pi(this,p);else{this.o=!1,this.m=3,St(12),gn(this),An(this);break e}}if(this.R){p=!0;let ct;for(;!this.K&&this.C<C.length;)if(ct=Iu(this,C),ct==jt){Ne==4&&(this.m=4,St(14),p=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Tt){this.m=4,St(15),ci(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else ci(this.i,this.l,ct,null),pi(this,ct);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,St(16),p=!1),this.o=this.o&&p,!p)ci(this.i,this.l,C,"[Invalid Chunked Response]"),gn(this),An(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Ka(ae),ae.P=!0,St(11))}}else ci(this.i,this.l,C,null),pi(this,C);Ne==4&&gn(this),this.o&&!this.K&&(Ne==4?Mu(this.j,this):(this.o=!1,hi(this)))}else Fi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),gn(this),An(this)}}}catch{}finally{}};function lh(p){if(!Tu(p))return p.g.la();const E=Gt(p.g);if(E==="")return"";let C="";const I=E.length,z=Jn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return gn(p),An(p),"";p.h.i=new c.TextDecoder}for(let J=0;J<I;J++)p.h.h=!0,C+=p.h.i.decode(E[J],{stream:!(z&&J==I-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function Tu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Iu(p,E){var C=p.C,I=E.indexOf(`
`,C);return I==-1?jt:(C=Number(E.substring(C,I)),isNaN(C)?Tt:(I+=1,I+C>E.length?jt:(E=E.slice(I,I+C),p.C=I+C,E)))}Bn.prototype.cancel=function(){this.K=!0,gn(this)};function hi(p){p.T=Date.now()+p.H,co(p,p.H)}function co(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ui(v(p.aa,p),E)}function fi(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Bn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(yr(this.i,this.B),this.M!=2&&(ai(),St(17)),gn(this),this.m=2,An(this)):co(this,this.T-p)};function An(p){p.j.I==0||p.K||Mu(p.j,p)}function gn(p){fi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,Ra(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function pi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||gi(C.h,p))){if(!p.L&&gi(C.h,p)&&C.I==3){try{var I=C.Ba.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)bo(C),_s(C);else break e;kr(C),St(18)}}else C.xa=z[1],0<C.xa-C.K&&z[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ui(v(C.Va,C),6e3));mi(C.h)<=1&&C.ta&&(C.ta=void 0)}else _i(C,11)}else if((p.L||C.g==p)&&bo(C),!x(E))for(z=C.Ba.g.parse(E),E=0;E<z.length;E++){let Qe=z[E];const ct=Qe[0];if(!(ct<=C.K))if(C.K=ct,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const On=Qe[3];On!=null&&(C.ka=On,C.j.info("VER="+C.ka));const qi=Qe[4];qi!=null&&(C.za=qi,C.j.info("SVER="+C.za));const Kn=Qe[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(I=1.5*Kn,C.O=I,C.j.info("backChannelRequestTimeoutMs_="+I)),I=C;const Yn=p.g;if(Yn){const Nr=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var J=I.h;J.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ua(J,J.h),J.h=null))}if(I.G){const Eo=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(I.wa=Eo,Ye(I.J,I.G,Eo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),I=C;var ae=p;if(I.na=Fu(I,I.L?I.ba:null,I.W),ae.L){Fa(I.h,ae);var Ne=ae,yt=I.O;yt&&(Ne.H=yt),Ne.D&&(fi(Ne),hi(Ne)),I.g=ae}else Pu(I);C.i.length>0&&wi(C)}else Qe[0]!="stop"&&Qe[0]!="close"||_i(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?_i(C,7):$a(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}ai(4)}catch{}}var It=class{constructor(p,E){this.g=p,this.map=E}};function Ma(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function La(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mi(p){return p.h?1:p.g?p.g.size:0}function gi(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function Ua(p,E){p.g?p.g.add(E):p.h=E}function Fa(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}Ma.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ja(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return N(p.i)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ho(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const I=p[C].indexOf("=");let z,J=null;I>=0?(z=p[C].substring(0,I),J=p[C].substring(I+1)):z=p[C],E(z,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function vn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof vn?(this.l=p.l,qt(this,p.j),this.o=p.o,this.g=p.g,ms(this,p.u),this.h=p.h,qa(this,xu(p.i)),this.m=p.m):p&&(E=String(p).match(Au))?(this.l=!1,qt(this,E[1]||"",!0),this.o=vi(E[2]||""),this.g=vi(E[3]||"",!0),ms(this,E[4]),this.h=vi(E[5]||"",!0),qa(this,E[6]||"",!0),this.m=vi(E[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}vn.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(_r(E,fo,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(_r(E,fo,!0),"@"),p.push(Li(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(_r(C,C.charAt(0)=="/"?Va:ku,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",_r(C,Nu)),p.join("")},vn.prototype.resolve=function(p){const E=At(this);let C=!!p.j;C?qt(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var I=p.h;if(C)ms(E,p.u);else if(C=!!p.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=E.h.lastIndexOf("/");z!=-1&&(I=E.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const J=[];for(let ae=0;ae<z.length;){const Ne=z[ae++];Ne=="."?I&&ae==z.length&&J.push(""):Ne==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),I&&ae==z.length&&J.push("")):(J.push(Ne),I=!0)}I=J.join("/")}else I=z}return C?E.h=I:C=p.i.toString()!=="",C?qa(E,xu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function At(p){return new vn(p)}function qt(p,E,C){p.j=C?vi(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function ms(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function qa(p,E,C){E instanceof vs?(p.i=E,mo(p.i,p.l)):(C||(E=_r(E,gs)),p.i=new vs(E,p.l))}function Ye(p,E,C){p.i.set(E,C)}function wr(p){return Ye(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vi(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function _r(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,yn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function yn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var fo=/[#\/\?@]/g,ku=/[#\?:]/g,Va=/[#\?]/g,gs=/[#\?@]/g,Nu=/#/g;function vs(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function un(p){p.g||(p.g=new Map,p.h=0,p.i&&ho(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=vs.prototype,n.add=function(p,E){un(this),this.i=null,p=ys(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function Ou(p,E){un(p),E=ys(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Ha(p,E){return un(p),E=ys(p,E),p.g.has(E)}n.forEach=function(p,E){un(this),this.g.forEach(function(C,I){C.forEach(function(z){p.call(E,z,I,this)},this)},this)};function za(p,E){un(p);let C=[];if(typeof E=="string")Ha(p,E)&&(C=C.concat(p.g.get(ys(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return un(this),this.i=null,p=ys(this,p),Ha(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=za(this,p),p.length>0?String(p[0]):E):E};function po(p,E,C){Ou(p,E),C.length>0&&(p.i=null,p.g.set(ys(p,E),N(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let I=0;I<E.length;I++){var C=E[I];const z=Li(C);C=za(this,C);for(let J=0;J<C.length;J++){let ae=z;C[J]!==""&&(ae+="="+Li(C[J])),p.push(ae)}}return this.i=p.join("&")};function xu(p){const E=new vs;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function ys(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function mo(p,E){E&&!p.j&&(un(p),p.i=null,p.g.forEach(function(C,I){const z=I.toLowerCase();I!=z&&(Ou(this,I),po(this,z,C))},p)),p.j=E}function Wn(p,E){const C=new zn;if(c.Image){const I=new Image;I.onload=b(kn,C,"TestLoadImage: loaded",!0,E,I),I.onerror=b(kn,C,"TestLoadImage: error",!1,E,I),I.onabort=b(kn,C,"TestLoadImage: abort",!1,E,I),I.ontimeout=b(kn,C,"TestLoadImage: timeout",!1,E,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else E(!1)}function Ba(p,E){const C=new zn,I=new AbortController,z=setTimeout(()=>{I.abort(),kn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:I.signal}).then(J=>{clearTimeout(z),J.ok?kn(C,"TestPingServer: ok",!0,E):kn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(z),kn(C,"TestPingServer: error",!1,E)})}function kn(p,E,C,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(C)}catch{}}function bs(){this.g=new yu}function yi(p){this.i=p.Sb||null,this.h=p.ab||!1}w(yi,bu),yi.prototype.g=function(){return new Cr(this.i,this.h)};function Cr(p,E){Ct.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Cr,Ct),n=Cr.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,$n(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;go(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function go(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?Es(this):$n(this),this.readyState==3&&go(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Es(this))},n.Na=function(p){this.g&&(this.response=p,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(p){p.readyState=4,p.l=null,p.j=null,p.B=null,$n(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function $n(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Nn(p){let E="";return He(p,function(C,I){E+=I,E+=":",E+=C,E+=`\r
`}),E}function Sr(p,E,C){e:{for(I in C){var I=!1;break e}I=!0}I||(C=Nn(C),typeof p=="string"?C!=null&&Li(C):Ye(p,E,C))}function et(p){Ct.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(et,Ct);var bi=/^https?$/i,Ga=["POST","PUT"];n=et.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Da.g(),this.g.onreadystatechange=S(v(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(J){Tr(this,J);return}if(p=C||"",C=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)C.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())C.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),z=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(Ga,E,void 0)>=0)||I||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of C)this.g.setRequestHeader(J,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){Tr(this,J)}};function Tr(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,Wa(p),Ui(p)}function Wa(p){p.A||(p.A=!0,Mt(p,"complete"),Mt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Mt(this,"complete"),Mt(this,"abort"),Ui(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ir(this):this.Xa())},n.Xa=function(){Ir(this)};function Ir(p){if(p.h&&typeof l<"u"){if(p.v&&Jn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Mt(p,"readystatechange"),Jn(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var I;if(I=J===0){let ae=String(p.D).match(Au)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),I=!bi.test(ae?ae.toLowerCase():"")}C=I}if(C)Mt(p,"complete"),Mt(p,"success");else{p.o=6;try{var z=Jn(p)>2?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.ca()+"]",Wa(p)}}finally{Ui(p)}}}}function Ui(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||Mt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),rh(E)}};function Gt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(p){const E={};p=(p.g&&Jn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(x(p[I]))continue;var C=Su(p[I]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=E[z]||[];E[z]=J,J.push(C)}Ke(E,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function ws(p){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,p),this.Za=Ei("retryDelaySeedMs",1e4,p),this.Ta=Ei("forwardChannelMaxRetries",2,p),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ma(p&&p.concurrentRequestLimit),this.Ba=new bs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ws.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,I){St(0),this.W=p,this.H=E||{},C&&I!==void 0&&(this.H.OSID=C,this.H.OAID=I),this.F=this.X,this.J=Fu(this,null,this.W),wi(this)};function $a(p){if(vo(p),p.I==3){var E=p.V++,C=At(p.J);if(Ye(C,"SID",p.M),Ye(C,"RID",E),Ye(C,"TYPE","terminate"),Ar(p,C),E=new Bn(p,p.j,E),E.M=2,E.A=wr(At(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=E.A,C=!0),C||(E.g=ju(E.j,null),E.g.ea(E.A)),E.F=Date.now(),hi(E)}Uu(p)}function _s(p){p.g&&(Ka(p),p.g.cancel(),p.g=null)}function vo(p){_s(p),p.v&&(c.clearTimeout(p.v),p.v=null),bo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function wi(p){if(!La(p.h)&&!p.m){p.m=!0;var E=p.Ea;pe||A(),ie||(pe(),ie=!0),O.add(E,p),p.D=0}}function yo(p,E){return mi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ui(v(p.Ea,p,E),Lu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const z=new Bn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=j(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(z.J=J,J=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var I=this.i[C];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=Ru(this,z,E),C=At(this.J),Ye(C,"RID",p),Ye(C,"CVER",22),this.G&&Ye(C,"X-HTTP-Session-Id",this.G),Ar(this,C),J&&(this.R?E="headers="+Li(Nn(J))+"&"+E:this.u&&Sr(C,this.u,J)),Ua(this.h,z),this.Ra&&Ye(C,"TYPE","init"),this.S?(Ye(C,"$req",E),Ye(C,"SID","null"),z.U=!0,di(z,C,null)):di(z,C,E),this.I=2}}else this.I==3&&(p?Ja(this,p):this.i.length==0||La(this.h)||Ja(this))};function Ja(p,E){var C;E?C=E.l:C=p.V++;const I=At(p.J);Ye(I,"SID",p.M),Ye(I,"RID",C),Ye(I,"AID",p.K),Ar(p,I),p.u&&p.o&&Sr(I,p.u,p.o),C=new Bn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=Ru(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ua(p.h,C),di(C,I,E)}function Ar(p,E){p.H&&He(p.H,function(C,I){Ye(E,I,C)}),p.l&&He({},function(C,I){Ye(E,I,C)})}function Ru(p,E,C){C=Math.min(p.i.length,C);const I=p.l?v(p.l.Ka,p.l,p):null;e:{var z=p.i;let Ne=-1;for(;;){const yt=["count="+C];Ne==-1?C>0?(Ne=z[0].g,yt.push("ofs="+Ne)):Ne=0:yt.push("ofs="+Ne);let Qe=!0;for(let ct=0;ct<C;ct++){var J=z[ct].g;const On=z[ct].map;if(J-=Ne,J<0)Ne=Math.max(0,z[ct].g-100),Qe=!1;else try{J="req"+J+"_"||"";try{var ae=On instanceof Map?On:Object.entries(On);for(const[qi,Kn]of ae){let Yn=Kn;f(Kn)&&(Yn=ps(Kn)),yt.push(J+qi+"="+encodeURIComponent(Yn))}}catch(qi){throw yt.push(J+"type="+encodeURIComponent("_badmap")),qi}}catch{I&&I(On)}}if(Qe){ae=yt.join("&");break e}}ae=void 0}return p=p.i.splice(0,C),E.G=p,ae}function Pu(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;pe||A(),ie||(pe(),ie=!0),O.add(E,p),p.A=0}}function kr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ui(v(p.Da,p),Lu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ui(v(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),_s(this),Du(this))};function Ka(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function Du(p){p.g=new Bn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=At(p.na);Ye(E,"RID","rpc"),Ye(E,"SID",p.M),Ye(E,"AID",p.K),Ye(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ye(E,"TO",p.ia),Ye(E,"TYPE","xmlhttp"),Ar(p,E),p.u&&p.o&&Sr(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=wr(At(E)),C.u=null,C.R=!0,uo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,_s(this),kr(this),St(19))};function bo(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Mu(p,E){var C=null;if(p.g==E){bo(p),Ka(p),p.g=null;var I=2}else if(gi(p.h,E))C=E.G,Fa(p.h,E),I=1;else return;if(p.I!=0){if(E.o)if(I==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var z=p.D;I=lo(),Mt(I,new li(I,C)),wi(p)}else Pu(p);else if(z=E.m,z==3||z==0&&E.X>0||!(I==1&&yo(p,E)||I==2&&kr(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),z){case 1:_i(p,5);break;case 4:_i(p,10);break;case 3:_i(p,6);break;default:_i(p,2)}}}function Lu(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function _i(p,E){if(p.j.info("Error code "+E),E==2){var C=v(p.bb,p),I=p.Ua;const z=!I;I=new vn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qt(I,"https"),wr(I),z?Wn(I.toString(),C):Ba(I.toString(),C)}else St(2);p.I=0,p.l&&p.l.pa(E),Uu(p),vo(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Uu(p){if(p.I=0,p.ja=[],p.l){const E=ja(p.h);(E.length!=0||p.i.length!=0)&&(H(p.ja,E),H(p.ja,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.oa()}}function Fu(p,E,C){var I=C instanceof vn?At(C):new vn(C);if(I.g!="")E&&(I.g=E+"."+I.g),ms(I,I.u);else{var z=c.location;I=z.protocol,E=E?E+"."+z.hostname:z.hostname,z=+z.port;const J=new vn(null);I&&qt(J,I),E&&(J.g=E),z&&ms(J,z),C&&(J.h=C),I=J}return C=p.G,E=p.wa,C&&E&&Ye(I,C,E),Ye(I,"VER",p.ka),Ar(p,I),I}function ju(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new et(new yi({ab:C})):new et(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}n=qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Cs(){}Cs.prototype.g=function(p,E){return new an(p,E)};function an(p,E){Ct.call(this),this.g=new ws(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!x(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!x(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new ji(this)}w(an,Ct),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){$a(this.g)},an.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=ps(p),p=C);E.i.push(new It(E.Ya++,p)),E.I==3&&wi(E)},an.prototype.N=function(){this.g.l=null,delete this.j,$a(this.g),delete this.g,an.Z.N.call(this)};function Vu(p){Bt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}w(Vu,Bt);function Hu(){In.call(this),this.status=1}w(Hu,In);function ji(p){this.g=p}w(ji,qu),ji.prototype.ra=function(){Mt(this.g,"a")},ji.prototype.qa=function(p){Mt(this.g,new Vu(p))},ji.prototype.pa=function(p){Mt(this.g,new Hu)},ji.prototype.oa=function(){Mt(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,e_=function(){return new Cs},Xw=function(){return lo()},Zw=vt,Sp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Zc=br,Pa.COMPLETE="complete",Qw=Pa,Eu.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Fl=Eu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Yw=et}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore",$0="4.9.2";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ba="12.3.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yr=new tm("@firebase/firestore");function Yo(){return Yr.logLevel}function de(n,...e){if(Yr.logLevel<=Me.DEBUG){const t=e.map(sm);Yr.debug(`Firestore (${ba}): ${n}`,...t)}}function os(n,...e){if(Yr.logLevel<=Me.ERROR){const t=e.map(sm);Yr.error(`Firestore (${ba}): ${n}`,...t)}}function ca(n,...e){if(Yr.logLevel<=Me.WARN){const t=e.map(sm);Yr.warn(`Firestore (${ba}): ${n}`,...t)}}function sm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _e(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,t_(n,s,t)}function t_(n,e,t){let s=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw os(s),new Error(s)}function Je(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||t_(e,o,s)}function Ie(n,e){return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class n_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class $k{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Jk{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new sr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new sr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new n_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class Kk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Yk{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Kk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new J0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Zk(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Le(n,e){return n<e?-1:n>e?1:0}function Tp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return hp(o)===hp(l)?Le(o,l):hp(o)?1:-1}return Le(n.length,e.length)}const Xk=55296,e1=57343;function hp(n){const e=n.charCodeAt(0);return e>=Xk&&e<=e1}function da(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K0="__name__";class Ai{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Ai.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=Ai.isNumericId(e),o=Ai.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Tp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class ht extends Ai{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const t1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ai{construct(e,t,s){return new Qt(e,t,s)}static isValidIdentifier(e){return t1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K0}static keyField(){return new Qt([K0])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n1(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function i1(n,e,t,s){if(e===!0&&s===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y0(n){if(!be.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function i_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(t){return t.constructor?t.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function Ql(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=om(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!i_(n))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q0=-62135596800,Z0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Z0);return new lt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new lt(0,0))}static max(){return new Se(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zl=-1;function s1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new lt(t+1,0):new lt(t,s));return new or(o,be.empty(),e)}function r1(n){return new or(n.readTime,n.key,Zl)}class or{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new or(Se.min(),be.empty(),Zl)}static max(){return new or(Se.max(),be.empty(),Zl)}}function o1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ea(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==a1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(m=>s(m)))})),c=!0,l===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((o=>o?ne.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((b=>{c[v]=b,++f,f===l&&s(c)}),(b=>o(b)))}}))}static doWhile(e,t){return new ne(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function u1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wa(n){return n.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const am=-1;function Ld(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function c1(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s_="";function d1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X0(e)),e=h1(n.get(t),e);return X0(e)}function h1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case s_:t+="";break;default:t+=l}}return t}function X0(n){return n+s_+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function r_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ft{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}}class $c{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Yt.RED,this.left=o??Yt.EMPTY,this.right=l??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Yt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(n,e,t,s,o){return this}insert(n,e,t){return new Yt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ft{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ni{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new Ft(Qt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new o_("Invalid base64 string: "+o):o}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=f1.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lr(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a_="server_timestamp",l_="__type__",u_="__previous_value__",c_="__local_write_time__";function lm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[l_])==null?void 0:t.stringValue)===a_}function Ud(n){const e=n.mapValue.fields[u_];return lm(e)?Ud(e):e}function Xl(n){const e=ar(n.mapValue.fields[c_].timestampValue);return new lt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p1{constructor(e,t,s,o,l,c,f,m,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=b}}const fd="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||fd}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d_="__type__",m1="__max__",Jc={mapValue:{}},h_="__vector__",pd="value";function ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:v1(n)?9007199254740991:g1(n)?10:11:_e(28295,{value:n})}function Di(n,e){if(n===e)return!0;const t=ur(n);if(t!==ur(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xl(n).isEqual(Xl(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ar(s.timestampValue),c=ar(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return lr(s.bytesValue).isEqual(lr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return wt(s.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(s.geoPointValue.longitude)===wt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return wt(s.integerValue)===wt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=wt(s.doubleValue),c=wt(o.doubleValue);return l===c?hd(l)===hd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return da(n.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(eb(l)!==eb(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Di(l[f],c[f])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function tu(n,e){return(n.values||[]).find((t=>Di(t,e)))!==void 0}function ha(n,e){if(n===e)return 0;const t=ur(n),s=ur(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=wt(o.integerValue||o.doubleValue),f=wt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return nb(n.timestampValue,e.timestampValue);case 4:return nb(Xl(n),Xl(e));case 5:return Tp(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=lr(o),f=lr(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Le(c[m],f[m]);if(v!==0)return v}return Le(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Le(wt(o.latitude),wt(l.latitude));return c!==0?c:Le(wt(o.longitude),wt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ib(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,f,m,v;const b=o.fields||{},w=l.fields||{},S=(c=b[pd])==null?void 0:c.arrayValue,N=(f=w[pd])==null?void 0:f.arrayValue,H=Le(((m=S==null?void 0:S.values)==null?void 0:m.length)||0,((v=N==null?void 0:N.values)==null?void 0:v.length)||0);return H!==0?H:ib(S,N)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Jc.mapValue&&l===Jc.mapValue)return 0;if(o===Jc.mapValue)return 1;if(l===Jc.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const w=Tp(f[b],v[b]);if(w!==0)return w;const S=ha(c[f[b]],m[v[b]]);if(S!==0)return S}return Le(f.length,v.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function nb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=ar(n),s=ar(e),o=Le(t.seconds,s.seconds);return o!==0?o:Le(t.nanos,s.nanos)}function ib(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ha(t[o],s[o]);if(l)return l}return Le(t.length,s.length)}function fa(n){return Ip(n)}function Ip(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const t=ar(e);return`time(${t.seconds},${t.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return lr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return be.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let t="[",s=!0;for(const o of e.values||[])s?s=!1:t+=",",t+=Ip(o);return t+"]"})(n.arrayValue):"mapValue"in n?(function(e){const t=Object.keys(e.fields||{}).sort();let s="{",o=!0;for(const l of t)o?o=!1:s+=",",s+=`${l}:${Ip(e.fields[l])}`;return s+"}"})(n.mapValue):_e(61005,{value:n})}function Xc(n){switch(ur(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(n);return e?16+Xc(e):16;case 5:return 2*n.stringValue.length;case 6:return lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(t){return(t.values||[]).reduce(((s,o)=>s+Xc(o)),0)})(n.arrayValue);case 10:case 11:return(function(t){let s=0;return Xr(t.fields,((o,l)=>{s+=o.length+Xc(l)})),s})(n.mapValue);default:throw _e(13486,{value:n})}}function Ap(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function sb(n){return!!n&&"nullValue"in n}function rb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function g1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[d_])==null?void 0:t.stringValue)===h_}function zl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Xr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=zl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zl(n.arrayValue.values[t]);return e}return{...n}}function v1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(t)}setAll(e){let t=Qt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=zl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Xr(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Fn(zl(this.value))}}function f_(n){const e=[];return Xr(n.fields,((t,s)=>{const o=new Qt([t]);if(ed(s)){const l=f_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new ni(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,Se.min(),Se.min(),Se.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,o){return new nn(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new nn(e,2,t,Se.min(),Se.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Se.min(),Se.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class md{constructor(e,t){this.position=e,this.inclusive=t}}function ob(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=ha(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function ab(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Di(n.position[t],e.position[t]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function y1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p_{}class Ut extends p_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new E1(e,t,s):t==="array-contains"?new C1(e,s):t==="in"?new S1(e,s):t==="not-in"?new T1(e,s):t==="array-contains-any"?new I1(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new w1(e,s):new _1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ha(t,this.value)):t!==null&&ur(this.value)===ur(t)&&this.matchesComparison(ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends p_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mi(e,t)}matches(e){return m_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m_(n){return n.op==="and"}function g_(n){return b1(n)&&m_(n)}function b1(n){for(const e of n.filters)if(e instanceof Mi)return!1;return!0}function kp(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+fa(n.value);if(g_(n))return n.filters.map((e=>kp(e))).join(",");{const e=n.filters.map((t=>kp(t))).join(",");return`${n.op}(${e})`}}function v_(n,e){return n instanceof Ut?(function(t,s){return s instanceof Ut&&t.op===s.op&&t.field.isEqual(s.field)&&Di(t.value,s.value)})(n,e):n instanceof Mi?(function(t,s){return s instanceof Mi&&t.op===s.op&&t.filters.length===s.filters.length?t.filters.reduce(((o,l,c)=>o&&v_(l,s.filters[c])),!0):!1})(n,e):void _e(19439)}function y_(n){return n instanceof Ut?(function(e){return`${e.field.canonicalString()} ${e.op} ${fa(e.value)}`})(n):n instanceof Mi?(function(e){return e.op.toString()+" {"+e.getFilters().map(y_).join(" ,")+"}"})(n):"Filter"}class E1 extends Ut{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class w1 extends Ut{constructor(e,t){super(e,"in",t),this.keys=b_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _1 extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=b_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function b_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class C1 extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return um(t)&&tu(t.arrayValue,this.value)}}class S1 extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class T1 extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class I1 extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>tu(this.value.arrayValue,s)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A1{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function lb(n,e=null,t=[],s=[],o=null,l=null,c=null){return new A1(n,e,t,s,o,l,c)}function cm(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),e.Te=t}return e.Te}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!v_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ab(n.startAt,e.startAt)&&ab(n.endAt,e.endAt)}function Np(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fd{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function k1(n,e,t,s,o,l,c,f){return new Fd(n,e,t,s,o,l,c,f)}function hm(n){return new Fd(n)}function ub(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function N1(n){return n.collectionGroup!==null}function Bl(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ft(Qt.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new gd(o,s))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new gd(Qt.keyField(),s))}return e.Ie}function ki(n){const e=Ie(n);return e.Ee||(e.Ee=O1(e,Bl(n))),e.Ee}function O1(n,e){if(n.limitType==="F")return lb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new gd(o.field,l)}));const t=n.endAt?new md(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new md(n.startAt.position,n.startAt.inclusive):null;return lb(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Op(n,e,t){return new Fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jd(n,e){return dm(ki(n),ki(e))&&n.limitType===e.limitType}function E_(n){return`${cm(ki(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${(function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((s=>y_(s))).join(", ")}]`),Ld(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),`Target(${t})`})(ki(n))}; limitType=${n.limitType})`}function qd(n,e){return e.isFoundDocument()&&(function(t,s){const o=s.key.path;return t.collectionGroup!==null?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)})(n,e)&&(function(t,s){for(const o of Bl(t))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(t,s){for(const o of t.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(t,s){return!(t.startAt&&!(function(o,l,c){const f=ob(o,l,c);return o.inclusive?f<=0:f<0})(t.startAt,Bl(t),s)||t.endAt&&!(function(o,l,c){const f=ob(o,l,c);return o.inclusive?f>=0:f>0})(t.endAt,Bl(t),s))})(n,e)}function x1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function w_(n){return(e,t)=>{let s=!1;for(const o of Bl(n)){const l=R1(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function R1(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(o,l,c){const f=l.data.field(o),m=c.data.field(o);return f!==null&&m!==null?ha(f,m):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:n.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return r_(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P1=new ft(be.comparator);function as(){return P1}const __=new ft(be.comparator);function jl(...n){let e=__;for(const t of n)e=e.insert(t.key,t);return e}function C_(n){let e=__;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Wr(){return Gl()}function S_(){return Gl()}function Gl(){return new eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const D1=new ft(be.comparator),M1=new Ft(be.comparator);function Ue(...n){let e=M1;for(const t of n)e=e.add(t);return e}const L1=new Ft(Le);function U1(){return L1}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function T_(n){return{integerValue:""+n}}function F1(n,e){return c1(e)?T_(e):fm(n,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vd{constructor(){this._=void 0}}function j1(n,e,t){return n instanceof vd?(function(s,o){const l={fields:{[l_]:{stringValue:a_},[c_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&lm(o)&&(o=Ud(o)),o&&(l.fields[u_]=o),{mapValue:l}})(t,e):n instanceof nu?A_(n,e):n instanceof iu?k_(n,e):(function(s,o){const l=I_(s,o),c=cb(l)+cb(s.Ae);return Ap(l)&&Ap(s.Ae)?T_(c):fm(s.serializer,c)})(n,e)}function q1(n,e,t){return n instanceof nu?A_(n,e):n instanceof iu?k_(n,e):t}function I_(n,e){return n instanceof yd?(function(t){return Ap(t)||(function(s){return!!s&&"doubleValue"in s})(t)})(e)?e:{integerValue:0}:null}class vd extends Vd{}class nu extends Vd{constructor(e){super(),this.elements=e}}function A_(n,e){const t=N_(e);for(const s of n.elements)t.some((o=>Di(o,s)))||t.push(s);return{arrayValue:{values:t}}}class iu extends Vd{constructor(e){super(),this.elements=e}}function k_(n,e){let t=N_(e);for(const s of n.elements)t=t.filter((o=>!Di(o,s)));return{arrayValue:{values:t}}}class yd extends Vd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cb(n){return wt(n.integerValue||n.doubleValue)}function N_(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function V1(n,e){return n.field.isEqual(e.field)&&(function(t,s){return t instanceof nu&&s instanceof nu||t instanceof iu&&s instanceof iu?da(t.elements,s.elements,Di):t instanceof yd&&s instanceof yd?Di(t.Ae,s.Ae):t instanceof vd&&s instanceof vd})(n.transform,e.transform)}class H1{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hd{}function O_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new R_(n.key,ss.none()):new cu(n.key,n.data,ss.none());{const t=n.data,s=Fn.empty();let o=new Ft(Qt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new to(n.key,s,new ni(o.toArray()),ss.none())}}function z1(n,e,t){n instanceof cu?(function(s,o,l){const c=s.value.clone(),f=hb(s.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof to?(function(s,o,l){if(!td(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=hb(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(x_(s)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Wl(n,e,t,s){return n instanceof cu?(function(o,l,c,f){if(!td(o.precondition,l))return c;const m=o.value.clone(),v=fb(o.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof to?(function(o,l,c,f){if(!td(o.precondition,l))return c;const m=fb(o.fieldTransforms,f,l),v=l.data;return v.setAll(x_(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(o,l,c){return td(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function B1(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=I_(s.transform,o||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,l))}return t||null}function db(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(t,s){return t===void 0&&s===void 0||!(!t||!s)&&da(t,s,((o,l)=>V1(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Hd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class to extends Hd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function x_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function hb(n,e,t){const s=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,q1(c,f,t[o]))}return s}function fb(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,j1(l,c,e))}return s}class R_ extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G1 extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&z1(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Wl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Wl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=S_();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const m=O_(c,f);m!==null&&s.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,((t,s)=>db(t,s)))&&da(this.baseMutations,e.baseMutations,((t,s)=>db(t,s)))}}class pm{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return D1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new pm(e,t,s,o)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rt,qe;function K1(n){switch(n){case re.OK:return _e(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function P_(n){if(n===void 0)return os("GRPC error has no .code"),re.UNKNOWN;switch(n){case Rt.OK:return re.OK;case Rt.CANCELLED:return re.CANCELLED;case Rt.UNKNOWN:return re.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return re.INTERNAL;case Rt.UNAVAILABLE:return re.UNAVAILABLE;case Rt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Rt.NOT_FOUND:return re.NOT_FOUND;case Rt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Rt.ABORTED:return re.ABORTED;case Rt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Rt.DATA_LOSS:return re.DATA_LOSS;default:return _e(39323,{code:n})}}(qe=Rt||(Rt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y1(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q1=new ir([4294967295,4294967295],0);function pb(n){const e=Y1().encode(n),t=new Kw;return t.update(e),new Uint8Array(t.digest())}function mb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ir([t,s],0),new ir([o,l],0)]}class mm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ql(`Invalid padding: ${t}`);if(s<0)throw new ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ql(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ir.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ir.fromNumber(s)));return o.compare(Q1)===1&&(o=new ir([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pb(e),[s,o]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new mm(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=pb(e),[s,o]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zd(Se.min(),o,new ft(Le),as(),Ue())}}class du{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,Ue(),Ue(),Ue())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nd{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class D_{constructor(e,t){this.targetId=e,this.Ce=t}}class M_{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class gb{constructor(){this.ve=0,this.Fe=vb(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),s=Ue();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:l})}})),new du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=vb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z1{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Kc(),this.He=Kc(),this.Ye=new ft(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Np(l))if(s===0){const c=new be(l.path);this.et(t,c,nn.newNoDocument(c,Se.min()))}else Je(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=lr(s).toUint8Array()}catch(m){if(m instanceof o_)return ca("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new mm(c,o,l)}catch(m){return ca(m instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Np(f.target)){const m=new be(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,nn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ue();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new zd(e,t,this.Ye,this.je,s);return this.je=as(),this.Je=Kc(),this.He=Kc(),this.Ye=new ft(Le),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new ft(be.comparator)}function vb(){return new ft(be.comparator)}const X1={asc:"ASCENDING",desc:"DESCENDING"},eN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tN={and:"AND",or:"OR"};class nN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xp(n,e){return n.useProto3Json||Ld(e)?e:{value:e}}function bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iN(n,e){return bd(n,e.toTimestamp())}function Ni(n){return Je(!!n,49232),Se.fromTimestamp((function(e){const t=ar(e);return new lt(t.seconds,t.nanos)})(n))}function gm(n,e){return Rp(n,e).canonicalString()}function Rp(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function U_(n){const e=ht.fromString(n);return Je(H_(e),10190,{key:e.toString()}),e}function Pp(n,e){return gm(n.databaseId,e.path)}function fp(n,e){const t=U_(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(j_(t))}function F_(n,e){return gm(n.databaseId,e)}function sN(n){const e=U_(n);return e.length===4?ht.emptyPath():j_(e)}function Dp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function j_(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yb(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function rN(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:_e(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Je(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?re.UNKNOWN:P_(m.code);return new ge(v,m.message||"")})(c);t=new M_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=fp(n,s.document.name),l=Ni(s.document.updateTime),c=s.document.createTime?Ni(s.document.createTime):Se.min(),f=new Fn({mapValue:{fields:s.document.fields}}),m=nn.newFoundDocument(o,l,c,f),v=s.targetIds||[],b=s.removedTargetIds||[];t=new nd(v,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=fp(n,s.document),l=s.readTime?Ni(s.readTime):Se.min(),c=nn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new nd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=fp(n,s.document),l=s.removedTargetIds||[];t=new nd([],l,o,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new J1(o,l),f=s.targetId;t=new D_(f,c)}}return t}function oN(n,e){let t;if(e instanceof cu)t={update:yb(n,e.key,e.value)};else if(e instanceof R_)t={delete:Pp(n,e.key)};else if(e instanceof to)t={update:yb(n,e.key,e.data),updateMask:mN(e.fieldMask)};else{if(!(e instanceof G1))return _e(16599,{Vt:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,l){const c=l.transform;if(c instanceof vd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof nu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof iu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw _e(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:iN(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)})(n,e.precondition)),t}function aN(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Ni(s.updateTime):Ni(o);return l.isEqual(Se.min())&&(l=Ni(o)),new H1(l,s.transformResults||[])})(t,e)))):[]}function lN(n,e){return{documents:[F_(n,e.path)]}}function uN(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=F_(n,o);const l=(function(m){if(m.length!==0)return V_(Mi.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(b){return{field:Zo(b.field),direction:hN(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=xp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function cN(n){let e=sN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Je(s===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(b){const w=q_(b);return w instanceof Mi&&g_(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((w=>(function(S){return new gd(Xo(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let w;return w=typeof b=="object"?b.value:b,Ld(w)?null:w})(t.limit));let m=null;t.startAt&&(m=(function(b){const w=!!b.before,S=b.values||[];return new md(S,w)})(t.startAt));let v=null;return t.endAt&&(v=(function(b){const w=!b.before,S=b.values||[];return new md(S,w)})(t.endAt)),k1(e,o,c,l,f,"F",m,v)}function dN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function q_(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xo(e.unaryFilter.field);return Ut.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Xo(e.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xo(e.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Xo(e.unaryFilter.field);return Ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ut.create(Xo(e.fieldFilter.field),(function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Mi.create(e.compositeFilter.filters.map((t=>q_(t))),(function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(e.compositeFilter.op))})(n):_e(30097,{filter:n})}function hN(n){return X1[n]}function fN(n){return eN[n]}function pN(n){return tN[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return Qt.fromServerFormat(n.fieldPath)}function V_(n){return n instanceof Ut?(function(e){if(e.op==="=="){if(rb(e.value))return{unaryFilter:{field:Zo(e.field),op:"IS_NAN"}};if(sb(e.value))return{unaryFilter:{field:Zo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(rb(e.value))return{unaryFilter:{field:Zo(e.field),op:"IS_NOT_NAN"}};if(sb(e.value))return{unaryFilter:{field:Zo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(e.field),op:fN(e.op),value:e.value}}})(n):n instanceof Mi?(function(e){const t=e.getFilters().map((s=>V_(s)));return t.length===1?t[0]:{compositeFilter:{op:pN(e.op),filters:t}}})(n):_e(54877,{filter:n})}function mN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function H_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zs{constructor(e,t,s,o,l=Se.min(),c=Se.min(),f=Zt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gN{constructor(e){this.yt=e}}function vN(n){const e=cN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yN{constructor(){this.Cn=new bN}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(or.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class bN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ft(ht.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(ht.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},z_=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(z_,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Eb="LruGarbageCollector",EN=1048576;function wb([n,e],[t,s]){const o=Le(n,t);return o===0?Le(e,s):o}class wN{constructor(e){this.Ir=e,this.buffer=new Ft(wb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();wb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _N{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Eb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wa(t)?de(Eb,"Ignoring IndexedDB error during garbage collection: ",t):await Ea(t)}await this.Vr(3e5)}))}}class CN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Md.ce);const s=new wN(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(bb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(s=w,f=Date.now(),this.removeTargets(e,s,t)))).next((w=>(l=w,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(v=Date.now(),Yo()<=Me.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${w} documents in `+(v-m)+`ms
Total Duration: ${v-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function SN(n,e){return new CN(n,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TN{constructor(){this.changes=new eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Wl(s.mutation,o,ni.empty(),lt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ue()){const o=Wr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=jl();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Wr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ue())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=as();const c=Gl(),f=(function(){return Gl()})();return t.forEach(((m,v)=>{const b=s.get(v.key);o.has(v.key)&&(b===void 0||b.mutation instanceof to)?l=l.insert(v.key,v):b!==void 0?(c.set(v.key,b.mutation.getFieldMask()),Wl(b.mutation,v,b.mutation.getFieldMask(),lt.now())):c.set(v.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,b)=>c.set(v,b))),t.forEach(((v,b)=>f.set(v,new IN(b,c.get(v)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Gl();let o=new ft(((c,f)=>c-f)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let b=s.get(m)||ni.empty();b=f.applyToLocalView(v,b),s.set(m,b);const w=(o.get(f.batchId)||Ue()).add(m);o=o.insert(f.batchId,w)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,w=S_();b.forEach((S=>{if(!l.has(S)){const N=O_(t.get(S),s.get(S));N!==null&&w.set(S,N),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,w))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(l){return be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):N1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ne.resolve(Wr());let f=Zl,m=l;return c.next((v=>ne.forEach(v,((b,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{m=m.insert(b,S)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Ue()))).next((b=>({batchId:f,changes:C_(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let o=jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=jl();return this.indexManager.getCollectionParents(e,l).next((f=>ne.forEach(f,(m=>{const v=(function(b,w){return new Fd(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((b=>{b.forEach(((w,S)=>{c=c.insert(w,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((m,v)=>{const b=v.getKey();c.get(b)===null&&(c=c.insert(b,nn.newInvalidDocument(b)))}));let f=jl();return c.forEach(((m,v)=>{const b=l.get(m);b!==void 0&&Wl(b.mutation,v,ni.empty(),lt.now()),qd(t,v)&&(f=f.insert(m,v))})),f}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ni(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:vN(s.bundledQuery),readTime:Ni(s.readTime)}})(t)),ne.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NN{constructor(){this.overlays=new ft(be.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Wr();return ne.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=Wr(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ft(((v,b)=>v-b));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let b=l.get(v.largestBatchId);b===null&&(b=Wr(),l=l.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Wr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,b)=>f.set(v,b))),!(f.size()>=o)););return ne.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new $1(t,s));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ON{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vm{constructor(){this.Qr=new Ft(Ht.$r),this.Ur=new Ft(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1);let l=Ue();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Ht.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new W1(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Zr=this.Zr.add(new Ht(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?am:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ft(Le);return t.forEach((o=>{const l=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new be(l),0);let f=new Ft(Le);return this.Zr.forEachWhile((m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(f=f.add(m.Yr)),!0)}),c),ne.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(o=>{const l=new Ht(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RN{constructor(e){this.ri=e,this.docs=(function(){return new ft(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=as();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=as();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||o1(r1(b),s)<=0||(o.has(b.key)||qd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new PN(this)}getSize(e){return ne.resolve(this.size)}}class PN extends TN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DN{constructor(e){this.persistence=e,this.si=new eo((t=>cm(t)),dm),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new vm,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),ne.waitFor(l).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class B_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Md(0),this.li=!1,this.li=!0,this.hi=new ON,this.referenceDelegate=e(this),this.Pi=new DN(this),this.indexManager=new yN,this.remoteDocumentCache=(function(s){return new RN(s)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gN(t),this.Ii=new kN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new xN(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new MN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class MN extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Ri=new vm,this.Vi=null}static mi(e){return new ym(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=be.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ed{constructor(e,t){this.persistence=e,this.pi=new eo((s=>d1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=SN(this,t)}static mi(e,t){return new Ed(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?ne.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xc(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bm{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ue(),o=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bm(e,t.fromCache,s,o)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kA()?8:u1(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new LN;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Yo()<=Me.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Yo()<=Me.DEBUG&&de("QueryEngine","Query:",Qo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Yo()<=Me.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):ne.resolve())}ys(e,t){if(ub(t))return ne.resolve(null);let s=ki(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Op(t,null,"F"),s=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const v=this.Ds(t,f);return this.Cs(t,v,c,m.readTime)?this.ys(e,Op(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ws(e,t,s,o){return ub(t)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?ne.resolve(null):(Yo()<=Me.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qo(t)),this.vs(e,c,t,s1(o,Zl)).next((f=>f)))}))}Ds(e,t){let s=new Ft(w_(e));return t.forEach(((o,l)=>{qd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Yo()<=Me.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,or.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Em="LocalStore",FN=3e8;class jN{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ft(Le),this.xs=new eo((l=>cm(l)),dm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function qN(n,e,t,s){return new jN(n,e,t,s)}async function G_(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let m=Ue();for(const v of o){c.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of l){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(s,m).next((v=>({Ls:v,removedBatchIds:c,addedBatchIds:f})))}))}))}function VN(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,m,v){const b=m.batch,w=b.keys();let S=ne.resolve();return w.forEach((N=>{S=S.next((()=>v.getEntry(f,N))).next((H=>{const L=m.docVersions.get(N);Je(L!==null,48541),H.version.compareTo(L)<0&&(b.applyToRemoteDocument(H,m),H.isValidDocument()&&(H.setReadTime(m.commitVersion),v.addEntry(H)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(f,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let f=Ue();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function W_(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HN(n,e){const t=Ie(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((b,w)=>{const S=o.get(w);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,w))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?N=N.withResumeToken(Zt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,s)),o=o.insert(w,N),(function(H,L,V){return H.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=FN?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(S,N,b)&&f.push(t.Pi.updateTargetData(l,N))}));let m=as(),v=Ue();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),f.push(zN(l,c,e.documentUpdates).next((b=>{m=b.ks,v=b.qs}))),!s.isEqual(Se.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((w=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(b)}return ne.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Ms=o,l)))}function zN(n,e,t){let s=Ue(),o=Ue();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=as();return t.forEach(((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Se.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):de(Em,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)})),{ks:c,qs:o}}))}function BN(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=am),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function GN(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,ne.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Zs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Mp(n,e,t){const s=Ie(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!wa(c))throw c;de(Em,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function _b(n,e,t){const s=Ie(n);let o=Se.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,v){const b=Ie(f),w=b.xs.get(v);return w!==void 0?ne.resolve(b.Ms.get(w)):b.Pi.getTargetData(m,v)})(s,c,ki(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:Ue()))).next((f=>(WN(s,x1(e),f),{documents:f,Qs:l})))))}function WN(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Cb{constructor(){this.activeTargetIds=U1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $N{constructor(){this.Mo=new Cb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JN{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sb="ConnectivityMonitor";class Tb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Sb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Yc=null;function Lp(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pp="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===fd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=Lp(),f=this.zo(e,t.toUriEncodedString());de(pp,`Sending RPC '${e}' ${c}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:v}=new URL(f),b=va(v);return this.Jo(e,f,m,s,b).then((w=>(de(pp,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw ca(pp,`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",s),w}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=KN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const en="WebChannelConnection";class ZN extends YN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=Lp();return new Promise(((f,m)=>{const v=new Yw;v.setWithCredentials(!0),v.listenOnce(Qw.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Zc.NO_ERROR:const w=v.getResponseJson();de(en,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),f(w);break;case Zc.TIMEOUT:de(en,`RPC '${e}' ${c} timed out`),m(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const S=v.getStatus();if(de(en,`RPC '${e}' ${c} failed with status:`,S,"response text:",v.getResponseText()),S>0){let N=v.getResponseJson();Array.isArray(N)&&(N=N[0]);const H=N==null?void 0:N.error;if(H&&H.status&&H.message){const L=(function(V){const $=V.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf($)>=0?$:re.UNKNOWN})(H.status);m(new ge(L,H.message))}else m(new ge(re.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ge(re.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:c,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{de(en,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(o);de(en,`RPC '${e}' ${c} sending request:`,o),v.send(t,"POST",b,s,15)}))}T_(e,t,s){const o=Lp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=e_(),f=Xw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const b=l.join("");de(en,`Creating RPC '${e}' stream ${o}: ${b}`,m);const w=c.createWebChannel(b,m);this.I_(w);let S=!1,N=!1;const H=new QN({Yo:V=>{N?de(en,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(S||(de(en,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),de(en,`RPC '${e}' stream ${o} sending:`,V),w.send(V))},Zo:()=>w.close()}),L=(V,$,X)=>{V.listen($,(se=>{try{X(se)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return L(w,Fl.EventType.OPEN,(()=>{N||(de(en,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),L(w,Fl.EventType.CLOSE,(()=>{N||(N=!0,de(en,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(w))})),L(w,Fl.EventType.ERROR,(V=>{N||(N=!0,ca(en,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),H.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),L(w,Fl.EventType.MESSAGE,(V=>{var $;if(!N){const X=V.data[0];Je(!!X,16349);const se=X,oe=(se==null?void 0:se.error)||(($=se[0])==null?void 0:$.error);if(oe){de(en,`RPC '${e}' stream ${o} received error:`,oe);const pe=oe.status;let ie=(function(A){const k=Rt[A];if(k!==void 0)return P_(k)})(pe),O=oe.message;ie===void 0&&(ie=re.INTERNAL,O="Unknown error status: "+pe+" with message "+oe.message),N=!0,H.a_(new ge(ie,O)),w.close()}else de(en,`RPC '${e}' stream ${o} received:`,X),H.u_(X)}})),L(f,Zw.STAT_EVENT,(V=>{V.stat===Sp.PROXY?de(en,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Sp.NOPROXY&&de(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mp(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bd(n){return new nN(n,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ib="PersistentStream";class J_{constructor(e,t,s,o,l,c,f,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ge(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class XN extends J_{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rN(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Se.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Se.min():l.readTime?Ni(l.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Dp(this.serializer),t.addTarget=(function(o,l){let c;const f=l.target;if(c=Np(f)?{documents:lN(o,f)}:{query:uN(o,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=L_(o,l.resumeToken);const m=xp(o,l.expectedCount);m!==null&&(c.expectedCount=m)}else if(l.snapshotVersion.compareTo(Se.min())>0){c.readTime=bd(o,l.snapshotVersion.toTimestamp());const m=xp(o,l.expectedCount);m!==null&&(c.expectedCount=m)}return c})(this.serializer,e);const s=dN(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Dp(this.serializer),t.removeTarget=e,this.q_(t)}}class eO extends J_{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aN(e.writeResults,e.commitTime),s=Ni(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Dp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>oN(this.serializer,s)))};this.q_(t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tO{}class nO extends tO{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Rp(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Rp(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(os(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qr="RemoteStore";class sO{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{no(this)&&(de(Qr,"Restarting streams for network reachability change."),await(async function(f){const m=Ie(f);m.Ea.add(4),await hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Gd(m)})(this))}))})),this.Ra=new iO(s,o)}}async function Gd(n){if(no(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function K_(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sm(t)?Cm(t):_a(t).O_()&&_m(t,e))}function wm(n,e){const t=Ie(n),s=_a(t);t.Ia.delete(e),s.O_()&&Y_(t,e),t.Ia.size===0&&(s.O_()?s.L_():no(t)&&t.Ra.set("Unknown"))}function _m(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).Y_(e)}function Y_(n,e){n.Va.Ue(e),_a(n).Z_(e)}function Cm(n){n.Va=new Z1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Ra.ua()}function Sm(n){return no(n)&&!_a(n).x_()&&n.Ia.size>0}function no(n){return Ie(n).Ea.size===0}function Q_(n){n.Va=void 0}async function rO(n){n.Ra.set("Online")}async function oO(n){n.Ia.forEach(((e,t)=>{_m(n,e)}))}async function aO(n,e){Q_(n),Sm(n)?(n.Ra.ha(e),Cm(n)):n.Ra.set("Unknown")}async function lO(n,e,t){if(n.Ra.set("Online"),e instanceof M_&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(s){de(Qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wd(n,s)}else if(e instanceof nd?n.Va.Ze(e):e instanceof D_?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await W_(n.localStore);t.compareTo(s)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.Ia.get(m);v&&o.Ia.set(m,v.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,m)=>{const v=o.Ia.get(f);if(!v)return;o.Ia.set(f,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),Y_(o,f);const b=new Zs(v.target,f,m,v.sequenceNumber);_m(o,b)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(s){de(Qr,"Failed to raise snapshot:",s),await wd(n,s)}}async function wd(n,e,t){if(!wa(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Qr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gd(n)}))}function Z_(n,e){return e().catch((t=>wd(n,t,e)))}async function Wd(n){const e=Ie(n),t=cr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:am;for(;uO(e);)try{const o=await BN(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,cO(e,o)}catch(o){await wd(e,o)}X_(e)&&eC(e)}function uO(n){return no(n)&&n.Ta.length<10}function cO(n,e){n.Ta.push(e);const t=cr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function X_(n){return no(n)&&!cr(n).x_()&&n.Ta.length>0}function eC(n){cr(n).start()}async function dO(n){cr(n).ra()}async function hO(n){const e=cr(n);for(const t of n.Ta)e.ea(t.mutations)}async function fO(n,e,t){const s=n.Ta.shift(),o=pm.from(s,e,t);await Z_(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Wd(n)}async function pO(n,e){e&&cr(n).X_&&await(async function(t,s){if((function(o){return K1(o)&&o!==re.ABORTED})(s.code)){const o=t.Ta.shift();cr(t).B_(),await Z_(t,(()=>t.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Wd(t)}})(n,e),X_(n)&&eC(n)}async function Ab(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),de(Qr,"RemoteStore received new credentials");const s=no(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gd(t)}async function mO(n,e){const t=Ie(n);e?(t.Ea.delete(2),await Gd(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function _a(n){return n.ma||(n.ma=(function(e,t,s){const o=Ie(e);return o.sa(),new XN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:rO.bind(null,n),t_:oO.bind(null,n),r_:aO.bind(null,n),H_:lO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Sm(n)?Cm(n):n.Ra.set("Unknown")):(await n.ma.stop(),Q_(n))}))),n.ma}function cr(n){return n.fa||(n.fa=(function(e,t,s){const o=Ie(e);return o.sa(),new eO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dO.bind(null,n),r_:pO.bind(null,n),ta:hO.bind(null,n),na:fO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Wd(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Qr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Tm(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(n,e){if(os("AsyncQueue",`${e}: ${n}`),wa(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=jl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kb{constructor(){this.ga=new ft(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,o,l,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ma(e,t,na.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vO{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,t){const s=Ie(e),o=s.queries;s.queries=Nb(),o.forEach(((l,c)=>{for(const f of c.Sa)f.onError(t)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Nb(){return new eo((n=>E_(n)),jd)}async function yO(n,e){const t=Ie(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new gO,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Im(c,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Am(t)}async function bO(n,e){const t=Ie(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EO(n,e){const t=Ie(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(o)&&(s=!0);c.wa=o}}s&&Am(t)}function wO(n,e,t){const s=Ie(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Am(n){n.Ca.forEach((e=>{e.next()}))}var Up,Ob;(Ob=Up||(Up={})).Ma="default",Ob.Cache="cache";class _O{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tC{constructor(e){this.key=e}}class nC{constructor(e){this.key=e}}class CO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=w_(e),this.tu=new na(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new kb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const S=o.get(b),N=qd(this.query,w)?w:null,H=!!S&&this.mutatedKeys.has(S.key),L=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let V=!1;S&&N?S.data.isEqual(N.data)?H!==L&&(s.track({type:3,doc:N}),V=!0):this.su(S,N)||(s.track({type:2,doc:N}),V=!0,(m&&this.eu(N,m)>0||v&&this.eu(N,v)<0)&&(f=!0)):!S&&N?(s.track({type:0,doc:N}),V=!0):S&&!N&&(s.track({type:1,doc:S}),V=!0,(m||v)&&(f=!0)),V&&(N?(c=c.add(N),l=L?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,w)=>(function(S,N){const H=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:L})}};return H(S)-H(N)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,v=m!==this.Za;return this.Za=m,c.length!==0||v?{snapshot:new ma(this.query,e.tu,l,c,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new nC(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new tC(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const km="SyncEngine";class SO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class TO{constructor(e){this.key=e,this.hu=!1}}class IO{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new eo((f=>E_(f)),jd),this.Iu=new Map,this.Eu=new Set,this.du=new ft(be.comparator),this.Au=new Map,this.Ru=new vm,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AO(n,e,t=!0){const s=lC(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await iC(s,e,t,!0),o}async function kO(n,e){const t=lC(n);await iC(t,e,!0,!1)}async function iC(n,e,t,s){const o=await GN(n.localStore,ki(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await NO(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&K_(n.remoteStore,o),f}async function NO(n,e,t,s,o){n.pu=(w,S,N)=>(async function(H,L,V,$){let X=L.view.ru(V);X.Cs&&(X=await _b(H.localStore,L.query,!1).then((({documents:ie})=>L.view.ru(ie,X))));const se=$&&$.targetChanges.get(L.targetId),oe=$&&$.targetMismatches.get(L.targetId)!=null,pe=L.view.applyChanges(X,H.isPrimaryClient,se,oe);return Rb(H,L.targetId,pe.au),pe.snapshot})(n,w,S,N);const l=await _b(n.localStore,e,!0),c=new CO(e,l.Qs),f=c.ru(l.documents),m=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),v=c.applyChanges(f,n.isPrimaryClient,m);Rb(n,t,v.au);const b=new SO(e,t,c);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function OO(n,e,t){const s=Ie(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!jd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Mp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&wm(s.remoteStore,o.targetId),Fp(s,o.targetId)})).catch(Ea)):(Fp(s,o.targetId),await Mp(s.localStore,o.targetId,!0))}async function xO(n,e){const t=Ie(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wm(t.remoteStore,s.targetId))}async function RO(n,e,t){const s=jO(n);try{const o=await(function(l,c){const f=Ie(l),m=lt.now(),v=c.reduce(((S,N)=>S.add(N.key)),Ue());let b,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=as(),H=Ue();return f.Ns.getEntries(S,v).next((L=>{N=L,N.forEach(((V,$)=>{$.isValidDocument()||(H=H.add(V))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,N))).next((L=>{b=L;const V=[];for(const $ of c){const X=B1($,b.get($.key).overlayedDocument);X!=null&&V.push(new to($.key,X,f_(X.value.mapValue),ss.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,V,c)})).next((L=>{w=L;const V=L.applyToLocalDocumentSet(b,H);return f.documentOverlayCache.saveOverlays(S,L.batchId,V)}))})).then((()=>({batchId:w.batchId,changes:C_(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(l,c,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new ft(Le)),m=m.insert(c,f),l.Vu[l.currentUser.toKey()]=m})(s,o.batchId,t),await fu(s,o.changes),await Wd(s.remoteStore)}catch(o){const l=Im(o,"Failed to persist write");t.reject(l)}}async function sC(n,e){const t=Ie(n);try{const s=await HN(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Je(c.hu,14607):o.removedDocuments.size>0&&(Je(c.hu,42227),c.hu=!1))})),await fu(t,s,e)}catch(s){await Ea(s)}}function xb(n,e,t){const s=Ie(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(l,c){const f=Ie(l);f.onlineState=c;let m=!1;f.queries.forEach(((v,b)=>{for(const w of b.Sa)w.va(c)&&(m=!0)})),m&&Am(f)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function PO(n,e,t){const s=Ie(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new ft(be.comparator);c=c.insert(l,nn.newNoDocument(l,Se.min()));const f=Ue().add(l),m=new zd(Se.min(),new Map,new ft(Le),c,f);await sC(s,m),s.du=s.du.remove(l),s.Au.delete(e),Nm(s)}else await Mp(s.localStore,e,!1).then((()=>Fp(s,e,t))).catch(Ea)}async function DO(n,e){const t=Ie(n),s=e.batch.batchId;try{const o=await VN(t.localStore,e);oC(t,s,null),rC(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await fu(t,o)}catch(o){await Ea(o)}}async function MO(n,e,t){const s=Ie(n);try{const o=await(function(l,c){const f=Ie(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next((b=>(Je(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);oC(s,e,t),rC(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await fu(s,o)}catch(o){await Ea(o)}}function rC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function oC(n,e,t){const s=Ie(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||aC(n,s)}))}function aC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(wm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Nm(n))}function Rb(n,e,t){for(const s of t)s instanceof tC?(n.Ru.addReference(s.key,e),LO(n,s)):s instanceof nC?(de(km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||aC(n,s.key)):_e(19791,{wu:s})}function LO(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(km,"New document in limbo: "+t),n.Eu.add(s),Nm(n))}function Nm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(ht.fromString(e)),s=n.fu.next();n.Au.set(s,new TO(t)),n.du=n.du.insert(t,s),K_(n.remoteStore,new Zs(ki(hm(t.path)),s,"TargetPurposeLimboResolution",Md.ce))}}async function fu(n,e,t){const s=Ie(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,m)=>{c.push(s.pu(m,e,t).then((v=>{var b;if((v||t)&&s.isPrimaryClient){const w=v?!v.fromCache:(b=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(v){o.push(v);const w=bm.As(m.targetId,v);l.push(w)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(f,m){const v=Ie(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(m,(w=>ne.forEach(w.Es,(S=>v.persistence.referenceDelegate.addReference(b,w.targetId,S))).next((()=>ne.forEach(w.ds,(S=>v.persistence.referenceDelegate.removeReference(b,w.targetId,S)))))))))}catch(b){if(!wa(b))throw b;de(Em,"Failed to update sequence numbers: "+b)}for(const b of m){const w=b.targetId;if(!b.fromCache){const S=v.Ms.get(w),N=S.snapshotVersion,H=S.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(w,H)}}})(s.localStore,l))}async function UO(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){de(km,"User change. New user:",e.toKey());const s=await G_(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((f=>{f.reject(new ge(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(t,s.Ls)}}function FO(n,e){const t=Ie(n),s=t.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let o=Ue();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function lC(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PO.bind(null,e),e.Pu.H_=EO.bind(null,e.eventManager),e.Pu.yu=wO.bind(null,e.eventManager),e}function jO(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MO.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qN(this.persistence,new UN,e.initialUser,this.serializer)}Cu(e){return new B_(ym.mi,this.serializer)}Du(e){return new $N}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class qO extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Ed,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new _N(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new B_((s=>Ed.mi(s,t)),this.serializer)}}class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=UO.bind(null,this.syncEngine),await mO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vO})()}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),s=(function(o){return new ZN(o)})(e.databaseInfo);return(function(o,l,c,f){return new nO(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(t,s,o,l,c){return new sO(t,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>xb(this.syncEngine,t,0)),(function(){return Tb.v()?new Tb:new JN})())}createSyncEngine(e,t){return(function(s,o,l,c,f,m,v){const b=new IO(s,o,l,c,f,m);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=Ie(s);de(Qr,"RemoteStore shutting down."),o.Ea.add(5),await hu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}jp.provider={build:()=>new jp};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dr="FirestoreClient";class HO{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(dr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(dr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Im(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function gp(n,e){n.asyncQueue.verifyOperationInProgress(),de(dr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await G_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Pb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zO(n);de(dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Ab(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Ab(e.remoteStore,o))),n._onlineComponents=e}async function zO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(dr,"Using user provided OfflineComponentProvider");try{await gp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ca("Error using user provided cache. Falling back to memory cache: "+t),await gp(n,new _d)}}else de(dr,"Using default OfflineComponentProvider"),await gp(n,new qO(void 0));return n._offlineComponents}async function uC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(dr,"Using user provided OnlineComponentProvider"),await Pb(n,n._uninitializedComponentsProvider._online)):(de(dr,"Using default OnlineComponentProvider"),await Pb(n,new jp))),n._onlineComponents}function BO(n){return uC(n).then((e=>e.syncEngine))}async function GO(n){const e=await uC(n),t=e.eventManager;return t.onListen=AO.bind(null,e.syncEngine),t.onUnlisten=OO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xO.bind(null,e.syncEngine),t}function WO(n,e,t={}){const s=new sr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,f,m){const v=new VO({next:w=>{v.Nu(),l.enqueueAndForget((()=>bO(o,b)));const S=w.docs.has(c);!S&&w.fromCache?m.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&f&&f.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),b=new _O(hm(c.path),v,{includeMetadataChanges:!0,qa:!0});return yO(o,b)})(await GO(n),n.asyncQueue,e,t,s))),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Db=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dC="firestore.googleapis.com",Mb=!0;class Lb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dC,this.ssl=Mb}else this.host=e.host,this.ssl=e.ssl??Mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=z_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EN)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cC(e.experimentalLongPollingOptions??{}),(function(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(t,s){return t.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Om{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(t){if(!t)return new Wk;switch(t.type){case"firstParty":return new Yk(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const t=Db.get(e);t&&(de("ComponentProvider","Removing Datastore"),Db.delete(e),t.terminate())})(this),Promise.resolve()}}function $O(n,e,t,s={}){var o;n=Ql(n,Om);const l=va(e),c=n._getSettings(),f={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;l&&(Vw(`https://${m}`),Hw("Firestore",!0)),c.host!==dC&&c.host!==m&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:m,ssl:l,emulatorOptions:s};if(!Jr(v,f)&&(n._setSettings(v),s.mockUserToken)){let b,w;if(typeof s.mockUserToken=="string")b=s.mockUserToken,w=tn.MOCK_USER;else{b=bA(s.mockUserToken,(o=n._app)==null?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new tn(S)}n._authCredentials=new $k(new n_(b,w))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xm{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xm(this.firestore,e,this._query)}}class zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uu(t,zt._jsonSchema))return new zt(e,s||null,new be(ht.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Pt("string",zt._jsonSchemaVersion),referencePath:Pt("string")};class su extends xm{constructor(e,t,s){super(e,t,hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new be(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function $d(n,e,...t){if(n=Vn(n),arguments.length===1&&(e=rm.newId()),n1("doc","path",e),n instanceof Om){const s=ht.fromString(e,...t);return Y0(s),new zt(n,null,new be(s))}{if(!(n instanceof zt||n instanceof su))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Y0(s),new zt(n.firestore,n instanceof su?n.converter:null,new be(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ub="AsyncQueue";class Fb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $_(this,"async_queue_retry"),this._c=()=>{const s=mp();s&&de(Ub,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;de(Ub,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,os("INTERNAL UNHANDLED ERROR: ",jb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Tm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rm extends Om{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Fb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fb(e),this._firestoreClient=void 0,await e}}}function JO(n,e){const t=typeof n=="object"?n:Ww(),s=typeof n=="string"?n:fd,o=im(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=vA("firestore");l&&$O(o,...l)}return o}function hC(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KO(n),n._firestoreClient}function KO(n){var e,t,s;const o=n._freezeSettings(),l=(function(c,f,m,v){return new p1(c,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)==null?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||(t=o.localCache)!=null&&t._offlineComponentProvider&&(s=o.localCache)!=null&&s._onlineComponentProvider&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new HO(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Zt.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Pt("string",jn._jsonSchemaVersion),bytes:Pt("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fC{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(uu(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Pt("string",Oi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(t,s){if(t.length!==s.length)return!1;for(let o=0;o<t.length;++o)if(t[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xi(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:Pt("string",xi._jsonSchemaVersion),vectorValues:Pt("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YO=/^__.*__$/;class QO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}function pC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:n})}}class Dm{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),o=this.Vc({path:s,fc:!1});return o.gc(e),o}yc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),o=this.Vc({path:s,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pC(this.Ac)&&YO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bd(e)}Cc(e,t,s,o=!1){return new Dm({Ac:e,methodName:t,Dc:s,path:Qt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XO(n){const e=n._freezeSettings(),t=Bd(n._databaseId);return new ZO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ex(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);yC("Data must be an object, but it was:",c,s);const f=gC(s,c);let m,v;if(l.merge)m=new ni(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const S=tx(e,w,t);if(!c.contains(S))throw new ge(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ix(b,S)||b.push(S)}m=new ni(b),v=c.fieldTransforms.filter((w=>m.covers(w.field)))}else m=null,v=c.fieldTransforms;return new QO(new Fn(f),m,v)}function mC(n,e){if(vC(n=Vn(n)))return yC("Unsupported field value:",e,n),gC(n,e);if(n instanceof fC)return(function(t,s){if(!pC(s.Ac))throw s.Sc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(t,s){const o=[];let l=0;for(const c of t){let f=mC(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(t,s){if((t=Vn(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return F1(s.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const o=lt.fromDate(t);return{timestampValue:bd(s.serializer,o)}}if(t instanceof lt){const o=new lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bd(s.serializer,o)}}if(t instanceof Oi)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jn)return{bytesValue:L_(s.serializer,t._byteString)};if(t instanceof zt){const o=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gm(t.firestore._databaseId||s.databaseId,t._key.path)}}if(t instanceof xi)return(function(o,l){return{mapValue:{fields:{[d_]:{stringValue:h_},[pd]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return fm(l.serializer,c)}))}}}}}})(t,s);throw s.Sc(`Unsupported field value: ${om(t)}`)})(n,e)}function gC(n,e){const t={};return r_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(n,((s,o)=>{const l=mC(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function vC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof Oi||n instanceof jn||n instanceof zt||n instanceof fC||n instanceof xi)}function yC(n,e,t){if(!vC(t)||!i_(t)){const s=om(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tx(n,e,t){if((e=Vn(e))instanceof Pm)return e._internalPath;if(typeof e=="string")return bC(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}const nx=new RegExp("[~\\*/\\[\\]]");function bC(n,e,t){if(e.search(nx)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pm(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${o}`),m+=")"),new ge(re.INVALID_ARGUMENT,f+n+m)}function ix(n,e){return n.some((t=>t.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EC{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sx extends EC{data(){return super.data()}}function wC(n,e){return typeof e=="string"?bC(n,e):e instanceof Pm?e._internalPath:e._delegate._internalPath}class rx{convertValue(e,t="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xr(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)==null?void 0:t[pd].arrayValue)==null?void 0:s.values)==null?void 0:o.map((c=>wt(c.doubleValue)));return new xi(l)}convertGeoPoint(e){return new Oi(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ud(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const t=ar(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);Je(H_(s),9688,{name:e});const o=new eu(s.get(1),s.get(3)),l=new be(s.popFirst(5));return o.isEqual(t)||os(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ox(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends EC{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(wC("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$r._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),t}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:Pt("string",$r._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class id extends $r{data(e={}){return super.data(e)}}class $l{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new id(this._firestore,this._userDataWriter,s.key,s,new Vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new id(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Vl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new id(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Vl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return c.type!==0&&(m=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:ax(c.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$l._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ax(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _C(n){n=Ql(n,zt);const e=Ql(n.firestore,Rm);return WO(hC(e),n._key).then((t=>cx(e,n,t)))}$l._jsonSchemaVersion="firestore/querySnapshot/1.0",$l._jsonSchema={type:Pt("string",$l._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class lx extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function CC(n,e,t){n=Ql(n,zt);const s=Ql(n.firestore,Rm),o=ox(n.converter,e);return ux(s,[ex(XO(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ss.none())])}function ux(n,e){return(function(t,s){const o=new sr;return t.asyncQueue.enqueueAndForget((async()=>RO(await BO(t),s,o))),o.promise})(hC(n),e)}function cx(n,e,t){const s=t.docs.get(e._key),o=new lx(n);return new $r(n,o,e._key,s,new Vl(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){ba=t})(ya),ua(new Kr("firestore",((t,{instanceIdentifier:s,options:o})=>{const l=t.getProvider("app").getImmediate(),c=new Rm(new Jk(t.getProvider("auth-internal")),new Qk(l,t.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(f.options.projectId,m)})(l,s),l);return o={useFetchStreams:e,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),nr(W0,$0,n),nr(W0,$0,"esm2020")})();var dx="firebase",hx="12.6.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/nr(dx,hx,"app");function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fx=SC,TC=new au("auth","Firebase",SC());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sd=new tm("@firebase/auth");function px(n,...e){Sd.logLevel<=Me.WARN&&Sd.warn(`Auth (${ya}): ${n}`,...e)}function sd(n,...e){Sd.logLevel<=Me.ERROR&&Sd.error(`Auth (${ya}): ${n}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function si(n,...e){throw Mm(n,...e)}function Ri(n,...e){return Mm(n,...e)}function IC(n,e,t){const s={...fx(),[e]:t};return new au("auth","Firebase",s).create(e,{appName:n.name})}function rr(n){return IC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return TC.create(n,...e)}function we(n,e,...t){if(!n)throw Mm(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sd(e),new Error(e)}function ls(n,e){n||ns(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function mx(){return qb()==="http:"||qb()==="https:"}function qb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mx()||TA()||"connection"in navigator)?navigator.onLine:!0}function vx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=_A()||IA()}get(){return gx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lm(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ex=new pu(3e4,6e4);function io(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function hr(n,e,t,s,o={}){return kC(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=lu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:m,...l};return SA()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&va(n.emulatorConfig.host)&&(v.credentials="include"),AC.fetch()(await NC(n,n.config.apiHost,t,f),v)})}async function kC(n,e,t){n._canInitEmulator=!1;const s={...yx,...e};try{const o=new _x(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Qc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Qc(n,"user-disabled",c);const b=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw IC(n,b,v);si(n,b)}}catch(o){if(o instanceof cs)throw o;si(n,"network-request-failed",{message:String(o)})}}async function Jd(n,e,t,s,o={}){const l=await hr(n,e,t,s,o);return"mfaPendingCredential"in l&&si(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function NC(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Lm(n.config,o):`${n.config.apiScheme}://${o}`;return bx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function wx(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _x{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ri(this.auth,"network-request-failed")),Ex.get())})}}function Qc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ri(n,e,s);return o.customData._tokenResponse=t,o}function Vb(n){return n!==void 0&&n.enterprise!==void 0}class Cx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Sx(n,e){return hr(n,"GET","/v2/recaptchaConfig",io(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Tx(n,e){return hr(n,"POST","/v1/accounts:delete",e)}async function Td(n,e){return hr(n,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ix(n,e=!1){const t=Vn(n),s=await t.getIdToken(e),o=Um(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Jl(vp(o.auth_time)),issuedAtTime:Jl(vp(o.iat)),expirationTime:Jl(vp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function vp(n){return Number(n)*1e3}function Um(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return sd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Uw(t);return o?JSON.parse(o):(sd("Failed to decode base64 JWT payload"),null)}catch(o){return sd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Hb(n){const e=Um(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof cs&&Ax(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Ax({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const t=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,t)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Id(n){var e;const t=n.auth,s=await n.getIdToken(),o=await ru(n,Td(t,{idToken:s}));we(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=(e=l.providerUserInfo)!=null&&e.length?OC(l.providerUserInfo):[],f=Ox(n.providerData,c),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),b=m?v:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Vp(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(n,w)}async function Nx(n){const e=Vn(n);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ox(n,e){return[...n.filter(t=>!e.some(s=>s.providerId===t.providerId)),...e]}function OC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function xx(n,e){const t=await kC(n,{},async()=>{const s=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await NC(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&va(n.emulatorConfig.host)&&(m.credentials="include"),AC.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rx(n,e){return hr(n,"POST","/v2/accounts:revokeToken",io(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=Hb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await xx(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ia;return s&&(we(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ws(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ix(this,e)}reload(){return Nx(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Id(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await ru(this,Tx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:N,providerData:H,stsTokenManager:L}=t;we(w&&L,e,"internal-error");const V=ia.fromJSON(this.name,L);we(typeof w=="string",e,"internal-error"),Ws(s,e.name),Ws(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof N=="boolean",e,"internal-error"),Ws(l,e.name),Ws(c,e.name),Ws(f,e.name),Ws(m,e.name),Ws(v,e.name),Ws(b,e.name);const $=new ii({uid:w,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:V,createdAt:v,lastLoginAt:b});return H&&Array.isArray(H)&&($.providerData=H.map(X=>({...X}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,s=!1){const o=new ia;o.updateFromServerResponse(t);const l=new ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Id(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?OC(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new ia;f.updateFromIdToken(s);const m=new ii({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zb=new Map;function is(n){ls(n instanceof Function,"Expected a class definition");let e=zb.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zb.set(n,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xC.type="NONE";const Bb=xC;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rd(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=rd(this.userKey,o.apiKey,l),this.fullPersistenceKey=rd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Td(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new sa(is(Bb),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||is(Bb);const c=rd(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const b=await v._get(c);if(b){let w;if(typeof b=="string"){const S=await Td(e,{idToken:b}).catch(()=>{});if(!S)break;w=await ii._fromGetAccountInfoResponse(e,S,b)}else w=ii._fromJSON(e,b);v!==l&&(f=w),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new sa(l,e,s):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(c)}catch{}})),new sa(l,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UC(e))return"Blackberry";if(FC(e))return"Webos";if(PC(e))return"Safari";if((e.includes("chrome/")||DC(e))&&!e.includes("edge/"))return"Chrome";if(LC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function RC(n=rn()){return/firefox\//i.test(n)}function PC(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DC(n=rn()){return/crios\//i.test(n)}function MC(n=rn()){return/iemobile/i.test(n)}function LC(n=rn()){return/android/i.test(n)}function UC(n=rn()){return/blackberry/i.test(n)}function FC(n=rn()){return/webos/i.test(n)}function Fm(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Px(n=rn()){var e;return Fm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Dx(){return AA()&&document.documentMode===10}function jC(n=rn()){return Fm(n)||LC(n)||FC(n)||UC(n)||/windows phone/i.test(n)||MC(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qC(n,e=[]){let t;switch(n){case"Browser":t=Gb(rn());break;case"Worker":t=`${Gb(rn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Lx(n,e={}){return hr(n,"GET","/v2/passwordPolicy",io(n,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ux=6;class Fx{constructor(e){var t;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??Ux,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((t=e.allowedNonAlphanumericCharacters)==null?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jx{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new Mx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=is(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Td(this,{idToken:e}),s=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)==null?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m!=null&&m.user&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(rr(this));const t=e?Vn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lx(this),t=new Fx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Rx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&is(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&px(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ca(n){return Vn(n)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=MA(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qx(n){Kd=n}function VC(n){return Kd.loadJS(n)}function Vx(){return Kd.recaptchaEnterpriseScript}function Hx(){return Kd.gapiScript}function zx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Bx{constructor(){this.enterprise=new Gx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Gx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Wx="recaptcha-enterprise",HC="NO_RECAPTCHA";class $x{constructor(e){this.type=Wx,this.auth=Ca(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{Sx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new Cx(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,c(v.siteKey)}}).catch(m=>{f(m)})})}function o(l,c,f){const m=window.grecaptcha;Vb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{c(v)}).catch(()=>{c(HC)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bx().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&Vb(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Vx();m.length!==0&&(m+=f),VC(m).then(()=>{o(f,l,c)}).catch(v=>{c(v)})}}).catch(f=>{c(f)})})}}async function $b(n,e,t,s=!1,o=!1){const l=new $x(n);let c;if(o)c=HC;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Jb(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await $b(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await $b(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jx(n,e){const t=im(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Jr(o,e??{}))return s;si(s,"already-initialized")}return t.initialize({options:e})}function Kx(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(is);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Yx(n,e,t){const s=Ca(n);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=zC(e),{host:c,port:f}=Qx(e),m=f===null?"":`:${f}`,v={url:`${l}//${c}${m}/`},b=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Jr(v,s.config.emulator)&&Jr(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,va(c)?(Vw(`${l}//${c}${m}`),Hw("Auth",!0)):Zx()}function zC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Qx(n){const e=zC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Kb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Kb(c)}}}function Kb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Zx(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function Xx(n,e){return hr(n,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function eR(n,e){return Jd(n,"POST","/v1/accounts:signInWithPassword",io(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function tR(n,e){return Jd(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}async function nR(n,e){return Jd(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ou extends jm{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ou(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&t!=null&&t.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jb(e,t,"signInWithPassword",eR);case"emailLink":return tR(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jb(e,s,"signUpPassword",Xx);case"emailLink":return nR(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ra(n,e){return Jd(n,"POST","/v1/accounts:signInWithIdp",io(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iR="http://localhost";class Zr extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Zr(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ra(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ra(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ra(e,t)}buildRequest(){const e={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rR(n){const e=Ll(Ul(n)).link,t=e?Ll(Ul(e)).deep_link_id:null,s=Ll(Ul(n)).deep_link_id;return(s?Ll(Ul(s)).link:null)||s||t||e||n}class qm{constructor(e){const t=Ll(Ul(e)),s=t.apiKey??null,o=t.oobCode??null,l=sR(t.mode??null);we(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rR(e);try{return new qm(t)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sa{constructor(){this.providerId=Sa.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=qm.parseLink(t);return we(s,"argument-error"),ou._fromEmailAndCode(e,s.code,s.tenantId)}}Sa.PROVIDER_ID="password";Sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mu extends BC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Js extends mu{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ks extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zr._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ys extends mu{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qs extends mu{constructor(){super("twitter.com")}static credential(e,t){return Zr._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ii._fromIdTokenResponse(e,s,o),c=Yb(s);return new ga({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Yb(s);return new ga({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ad extends cs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Ad(e,t,s,o)}}function GC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(n,o,e,s):o})}async function oR(n,e,t=!1){const s=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ga._forOperation(n,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function aR(n,e,t=!1){const{auth:s}=n;if(ti(s.app))return Promise.reject(rr(s));const o="reauthenticate";try{const l=await ru(n,GC(s,o,e,n),t);we(l.idToken,s,"internal-error");const c=Um(l.idToken);we(c,s,"internal-error");const{sub:f}=c;return we(n.uid===f,s,"user-mismatch"),ga._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&si(s,"user-mismatch"),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function WC(n,e,t=!1){if(ti(n.app))return Promise.reject(rr(n));const s="signIn",o=await GC(n,s,e),l=await ga._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function lR(n,e){return WC(Ca(n),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uR(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function cR(n,e,t){return ti(n.app)?Promise.reject(rr(n)):lR(Vn(n),Sa.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uR(n),s})}function dR(n,e,t,s){return Vn(n).onIdTokenChanged(e,t,s)}function hR(n,e,t){return Vn(n).beforeAuthStateChanged(e,t)}function fR(n){return Vn(n).signOut()}const kd="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $C{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pR=1e3,mR=10;class JC extends $C{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);Dx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mR):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JC.type="LOCAL";const gR=JC;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KC extends $C{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KC.type="SESSION";const YC=KC;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async v=>v(t.origin,l)),m=await vR(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const v=Vm("",20);o.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===v)switch(S.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pi(){return window}function bR(n){Pi().location.href=n}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QC(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function ER(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function _R(){return QC()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZC="firebaseLocalStorageDb",CR=1,Nd="firebaseLocalStorage",XC="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qd(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function SR(){const n=indexedDB.deleteDatabase(ZC);return new gu(n).toPromise()}function Hp(){const n=indexedDB.open(ZC,CR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Nd,{keyPath:XC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Nd)?e(s):(s.close(),await SR(),e(await Hp()))})})}async function Qb(n,e,t){const s=Qd(n,!0).put({[XC]:e,value:t});return new gu(s).toPromise()}async function TR(n,e){const t=Qd(n,!1).get(e),s=await new gu(t).toPromise();return s===void 0?null:s.value}function Zb(n,e){const t=Qd(n,!0).delete(e);return new gu(t).toPromise()}const IR=800,AR=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>AR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(_R()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new yR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&(e=s[0])!=null&&e.fulfilled&&(t=s[0])!=null&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await Qb(e,kd,"1"),await Zb(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>TR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Qd(o,!1).getAll();return new gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const kR=eS;new pu(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NR(n,e){return e?is(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hm extends jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OR(n){return WC(n.auth,new Hm(n),n.bypassAuthState)}function xR(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),aR(t,new Hm(n),n.bypassAuthState)}async function RR(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),oR(t,new Hm(n),n.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tS{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OR;case"linkViaPopup":case"linkViaRedirect":return RR;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:si(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PR=new pu(2e3,1e4);class ea extends tS{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}ea.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DR="pendingRedirect",od=new Map;class MR extends tS{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const t=await LR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LR(n,e){const t=jR(e),s=FR(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function UR(n,e){od.set(n._key(),e)}function FR(n){return is(n._redirectPersistence)}function jR(n){return rd(DR,n.config.apiKey,n.name)}async function qR(n,e,t=!1){if(ti(n.app))return Promise.reject(rr(n));const s=Ca(n),o=NR(s,e),l=await new MR(s,o,t).execute();return l&&!t&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VR=600*1e3;class HR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nS(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xb(e))}saveEventToCache(e){this.cachedEventUids.add(Xb(e)),this.lastProcessedEventTime=Date.now()}}function Xb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(n);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function BR(n,e={}){return hr(n,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WR=/^https?/;async function $R(n){if(n.config.emulator)return;const{authorizedDomains:e}=await BR(n);for(const t of e)try{if(JR(t))return}catch{}si(n,"unauthorized-domain")}function JR(n){const e=qp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===s}if(!WR.test(t))return!1;if(GR.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KR=new pu(3e4,6e4);function eE(){const n=Pi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YR(n){return new Promise((e,t)=>{var s,o,l;function c(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),t(Ri(n,"network-request-failed"))},timeout:KR.get()})}if((o=(s=Pi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=Pi().gapi)!=null&&l.load)c();else{const f=zx("iframefcb");return Pi()[f]=()=>{gapi.load?c():t(Ri(n,"network-request-failed"))},VC(`${Hx()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw ad=null,e})}let ad=null;function QR(n){return ad=ad||YR(n),ad}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZR=new pu(5e3,15e3),XR="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i2(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lm(e,e2):`https://${n.config.authDomain}/${XR}`,s={apiKey:e.apiKey,appName:n.name,v:ya},o=n2.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${lu(s).slice(1)}`}async function s2(n){const e=await QR(n),t=Pi().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:i2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Ri(n,"network-request-failed"),f=Pi().setTimeout(()=>{l(c)},ZR.get());function m(){Pi().clearTimeout(f),o(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const r2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o2=500,a2=600,l2="_blank",u2="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c2(n,e,t,s=o2,o=a2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m={...r2,width:s.toString(),height:o.toString(),top:l,left:c},v=rn().toLowerCase();t&&(f=DC(v)?l2:t),RC(v)&&(e=e||u2,m.scrollbars="yes");const b=Object.entries(m).reduce((S,[N,H])=>`${S}${N}=${H},`,"");if(Px(v)&&f!=="_self")return d2(e||"",f),new tE(null);const w=window.open(e||"",f,b);we(w,n,"popup-blocked");try{w.focus()}catch{}return new tE(w)}function d2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h2="__/auth/handler",f2="emulator/auth/handler",p2=encodeURIComponent("fac");async function nE(n,e,t,s,o,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ya,eventId:o};if(e instanceof BC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",DA(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))c[b]=w}if(e instanceof mu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(c.scopes=b.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await n._getAppCheckToken(),v=m?`#${p2}=${encodeURIComponent(m)}`:"";return`${m2(n)}?${lu(f).slice(1)}${v}`}function m2({config:n}){return n.emulator?Lm(n,f2):`https://${n.authDomain}/${h2}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yp="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YC,this._completeRedirectFn=qR,this._overrideRedirectResult=UR}async _openPopup(e,t,s,o){var l;ls((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await nE(e,t,s,qp(),o);return c2(e,c,Vm())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await nE(e,t,s,qp(),o);return bR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ls(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await s2(e),s=new HR(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yp,{type:yp},s=>{var o;const l=(o=s==null?void 0:s[0])==null?void 0:o[yp];l!==void 0&&t(!!l),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$R(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jC()||PC()||Fm()}}const v2=g2;var iE="@firebase/auth",sE="1.11.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function b2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E2(n){ua(new Kr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qC(n)},v=new jx(s,o,l,m);return Kx(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new Kr("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(s=>new y2(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(iE,sE,b2(n)),nr(iE,sE,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const w2=300,_2=qw("authIdTokenMaxAge")||w2;let rE=null;const C2=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>_2)return;const o=t==null?void 0:t.token;rE!==o&&(rE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function S2(n=Ww()){const e=im(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Jx(n,{popupRedirectResolver:v2,persistence:[kR,gR,YC]}),s=qw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=C2(l.toString());hR(t,c,()=>c(t.currentUser)),dR(t,f=>c(f))}}const o=Fw("auth");return o&&Yx(t,`http://${o}`),t}function T2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}qx({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Ri("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",T2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E2("Browser");const I2={apiKey:"AIzaSyBsdPghRmOsLX7JIj-T8IYF4bRp-KxQAPc",authDomain:"cybee-ca5a2.firebaseapp.com",projectId:"cybee-ca5a2",storageBucket:"cybee-ca5a2.firebasestorage.app",messagingSenderId:"215321650697",appId:"1:215321650697:web:d0bbf35f6861a891c9bad8",measurementId:"G-K624Y57R5Q"},iS=Gw(I2),Zd=JO(iS),oE=S2(iS),Xd="supportApp",sS="videos",rS="config",A2=async n=>{console.log("Saving videos to Firebase:",n),await CC($d(Zd,Xd,sS),{videos:n}),console.log("Videos saved successfully")},k2=async()=>{const n=$d(Zd,Xd,sS),e=await _C(n);if(e.exists()){const t=e.data();return console.log("Loaded videos from Firebase:",t.videos),t.videos||[]}return console.log("No videos document found in Firebase"),[]},zp=async n=>{await CC($d(Zd,Xd,rS),n)},N2=async()=>{const n=$d(Zd,Xd,rS),e=await _C(n);return e.exists()?e.data():null},O2=({videos:n,setVideos:e,chatConfig:t,setChatConfig:s})=>{const[o,l]=Ve.useState("videos"),[c,f]=Ve.useState({title:"",description:"",url:""}),[m,v]=Ve.useState(null),b=L=>{const V=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,$=L.match(V);return $&&$[2].length===11?$[2]:null},w=L=>{L.preventDefault();const V=b(c.url);if(!V){alert("Invalid YouTube URL");return}if(m)e($=>$.map(X=>X.id===m?{...X,title:c.title,description:c.description,url:c.url,videoId:V}:X)),v(null);else{const $={id:Date.now().toString(),title:c.title,description:c.description,url:c.url,videoId:V};e(X=>[$,...X])}f({title:"",description:"",url:""})},S=L=>{f({title:L.title,description:L.description,url:L.url}),v(L.id),window.scrollTo({top:0,behavior:"smooth"})},N=()=>{f({title:"",description:"",url:""}),v(null)},H=(L,V)=>{V.stopPropagation(),window.confirm("Are you sure you want to delete this video?")&&(e($=>$.filter(X=>X.id!==L)),m===L&&N())};return R.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[R.jsxs("div",{className:"mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Dashboard"}),R.jsx("p",{className:"text-slate-500",children:"Manage support content and AI configurations."})]}),R.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200",children:[R.jsxs("button",{onClick:()=>l("videos"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="videos"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(iA,{size:18}),R.jsx("span",{children:"Video Library"})]}),o==="videos"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("ai"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="ai"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(P0,{size:18}),R.jsx("span",{children:"AI Configuration"})]}),o==="ai"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("sql"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="sql"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(R0,{size:18}),R.jsx("span",{children:"SQL Queries"})]}),o==="sql"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),R.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:o==="videos"?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"lg:col-span-1",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 sticky top-6",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m?R.jsx(rp,{size:20,className:"text-blue-600"}):R.jsx(Dl,{size:20,className:"text-blue-600"}),m?"Edit Video":"Add New Video"]}),m&&R.jsxs("button",{type:"button",onClick:N,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded-md transition-colors",children:[R.jsx(em,{size:14})," Cancel"]})]}),R.jsxs("form",{onSubmit:w,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Video Title"}),R.jsx("input",{type:"text",required:!0,value:c.title,onChange:L=>f({...c,title:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"e.g. How to Reset Password"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"YouTube URL"}),R.jsx("input",{type:"url",required:!0,value:c.url,onChange:L=>f({...c,url:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"https://youtube.com/watch?v=..."})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),R.jsx("textarea",{required:!0,value:c.description,onChange:L=>f({...c,description:L.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"Brief summary of the video content..."})]}),R.jsxs("button",{type:"submit",className:`w-full py-2.5 font-medium rounded-xl transition-colors shadow-lg flex items-center justify-center gap-2 text-white ${m?"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/20":"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}`,children:[m?R.jsx(zI,{size:18}):R.jsx(Dl,{size:18}),m?"Update Video":"Save Video"]})]})]})}),R.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[R.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Published Videos (",n.length,")"]}),n.length===0?R.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[R.jsx(aA,{size:48,className:"mx-auto text-slate-300 mb-3"}),R.jsx("p",{className:"text-slate-500",children:"No videos added yet."})]}):n.map(L=>R.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex gap-4 hover:shadow-md transition-all ${m===L.id?"border-blue-500 ring-2 ring-blue-500/10":"border-slate-100"}`,children:[R.jsx("div",{className:"w-32 h-20 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0 relative group",children:R.jsx("img",{src:`https://img.youtube.com/vi/${L.videoId}/mqdefault.jpg`,alt:L.title,className:"w-full h-full object-cover"})}),R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsx("h4",{className:"font-semibold text-slate-800 line-clamp-1",children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{type:"button",onClick:()=>S(L),className:`p-1.5 rounded-lg transition-colors ${m===L.id?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"Edit video",children:R.jsx(rp,{size:16})}),R.jsx("button",{type:"button",onClick:V=>H(L.id,V),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Delete video",children:R.jsx(op,{size:16})})]})]}),R.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mt-1",children:L.description}),R.jsx("a",{href:L.url,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 mt-2 inline-block hover:underline",children:"View on YouTube"})]})]},L.id))]})]}):o==="sql"?R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100",children:[R.jsx("div",{className:"p-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>{const L=document.getElementById("sqlForm"),V=(L==null?void 0:L.style.display)==="none";L&&(L.style.display=V?"block":"none")},children:R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[R.jsx(R0,{size:20,className:"text-green-600"}),"SQL Query Manager",R.jsx("span",{className:"text-sm text-slate-500",children:"(Click to expand)"})]})}),R.jsx("div",{id:"sqlForm",style:{display:"none"},className:"px-6 pb-6",children:R.jsxs("form",{onSubmit:L=>{L.preventDefault();const V=new FormData(L.target),$=V.get("title"),X=V.get("query");if($.trim()&&X.trim()){const se={id:Date.now().toString(),title:$.trim(),query:X.trim()};s({...t,sqlQueries:[...t.sqlQueries||[],se]}),L.target.reset()}},className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Query Title"}),R.jsx("input",{name:"title",type:"text",required:!0,placeholder:"e.g., Get all users",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SQL Query"}),R.jsx("textarea",{name:"query",required:!0,rows:6,placeholder:"SELECT * FROM users WHERE...;",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Save Query"]})]})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Saved Queries (",(t.sqlQueries||[]).length,")"]}),R.jsx("input",{type:"text",placeholder:"Search queries...",onChange:L=>{const V=L.target.value.toLowerCase();document.querySelectorAll("[data-query-item]").forEach($=>{const X=$.querySelector("h5").textContent.toLowerCase(),se=$.querySelector("p").textContent.toLowerCase();$.style.display=X.includes(V)||se.includes(V)?"block":"none"})},className:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-64"})]}),(t.sqlQueries||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No queries saved yet."}):R.jsx("div",{className:"space-y-3",children:(t.sqlQueries||[]).map(L=>R.jsxs("div",{"data-query-item":!0,className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsx("h5",{className:"font-medium text-slate-800 cursor-pointer hover:text-blue-600",onClick:()=>{const V=document.createElement("div");V.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",V.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw] max-h-[80vh] overflow-auto">
                                  <h3 class="text-lg font-bold mb-4">${L.title}</h3>
                                  <textarea class="w-full h-64 p-3 border rounded-lg font-mono text-sm" readonly>${L.query}</textarea>
                                  <div class="flex gap-3 mt-4">
                                    <button onclick="navigator.clipboard.writeText('${L.query.replace(/'/g,"\\'")}')">Copy</button>
                                    <button onclick="this.closest('.fixed').remove()">Close</button>
                                  </div>
                                </div>
                              `,document.body.appendChild(V),V.onclick=$=>$.target===V&&V.remove()},children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{onClick:()=>{const V=document.createElement("div");V.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",V.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw]">
                                  <h3 class="text-lg font-bold mb-4">Edit Query</h3>
                                  <input id="editTitle" class="w-full p-3 border rounded-lg mb-3" value="${L.title}" placeholder="Query Title">
                                  <textarea id="editQuery" class="w-full h-64 p-3 border rounded-lg font-mono text-sm mb-4">${L.query}</textarea>
                                  <div class="flex gap-3">
                                    <button onclick="
                                      const title = document.getElementById('editTitle').value;
                                      const query = document.getElementById('editQuery').value;
                                      if (title && query) {
                                        window.updateQuery('${L.id}', title, query);
                                        this.closest('.fixed').remove();
                                      }
                                    " class="px-4 py-2 bg-blue-600 text-white rounded-lg">Save</button>
                                    <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-600 text-white rounded-lg">Cancel</button>
                                  </div>
                                </div>
                              `,window.updateQuery=($,X,se)=>{s({...t,sqlQueries:(t.sqlQueries||[]).map(oe=>oe.id===$?{...oe,title:X,query:se}:oe)})},document.body.appendChild(V)},className:"text-blue-500 hover:text-blue-700 p-1",children:R.jsx(rp,{size:14})}),R.jsx("button",{onClick:()=>s({...t,sqlQueries:(t.sqlQueries||[]).filter(V=>V.id!==L.id)}),className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(op,{size:14})})]})]}),R.jsx("p",{className:"text-slate-600 text-xs font-mono truncate",children:L.query})]},L.id))})]})]}):R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(P0,{size:20,className:"text-blue-600"}),"Chat Assistant Settings"]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"System Instructions (Persona)"}),R.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Define how the AI should behave, what it knows, and its tone."}),R.jsx("textarea",{value:t.systemInstruction,onChange:L=>s({...t,systemInstruction:L.target.value}),rows:6,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Welcome Message"}),R.jsx("input",{type:"text",value:t.welcomeMessage,onChange:L=>s({...t,welcomeMessage:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(Dl,{size:20,className:"text-green-600"}),"Q&A Training"]}),R.jsxs("form",{onSubmit:async L=>{L.preventDefault();const V=new FormData(L.target),$=V.get("question"),X=V.get("answer");if($.trim()&&X.trim()){const se={id:Date.now().toString(),question:$.trim(),answer:X.trim()},oe={...t,qaTraining:[...t.qaTraining||[],se]};s(oe),await zp(oe),L.target.reset()}},className:"space-y-4 mb-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Question"}),R.jsx("input",{name:"question",type:"text",required:!0,placeholder:"e.g., What is your customer care number?",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Answer"}),R.jsx("textarea",{name:"answer",required:!0,rows:3,placeholder:"e.g., You can reach our customer care at +1-800-POLOSYS (765-6797)",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Add Q&A"]})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Trained Q&As (",(t.qaTraining||[]).length,")"]}),(t.qaTraining||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No Q&A pairs added yet."}):(t.qaTraining||[]).map(L=>R.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsxs("p",{className:"font-medium text-slate-800",children:["Q: ",L.question]}),R.jsx("button",{onClick:async()=>{if(!confirm("Delete this Q&A?"))return;const V={...t,qaTraining:(t.qaTraining||[]).filter($=>$.id!==L.id)};try{await zp(V),s(V),console.log("Q&A deleted successfully")}catch($){console.error("Failed to delete Q&A:",$),alert("Failed to delete. Please try again.")}},className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(op,{size:14})})]}),R.jsxs("p",{className:"text-slate-600 text-sm",children:["A: ",L.answer]})]},L.id))]})]}),R.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800",children:R.jsxs("p",{children:[R.jsx("strong",{children:"Note:"})," Changes take effect for new chat sessions."]})})]})})]})};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let x2,R2;function P2(){return{geminiUrl:x2,vertexUrl:R2}}function D2(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=P2();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ds{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let v=0;v<m.length;v++){const b=m[v];h(b,e.slice(l+1),t[v])}else for(const v of m)h(v,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];h(m[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function M2(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),c=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const v=l[m];v!=="*"&&!v.endsWith("[]")&&!v.endsWith("[0]")&&c.add(v)}Bp(n,o,l,0,c)}}function Bp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const m of f[c])Bp(m,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(v=>!v.startsWith("_")&&!o.has(v)),m={};for(const v of f)m[v]=c[v];for(const[v,b]of Object.entries(m)){const w=[];for(const S of t.slice(s))S==="*"?w.push(v):w.push(S);h(c,w,b)}for(const v of f)delete c[v]}}else{const c=n;l in c&&Bp(c[l],e,t,s+1,o)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function L2(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function U2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],j2(c)),e}function F2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],q2(c)),e}function j2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>V2(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function q2(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>H2(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function V2(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],J2(t)),e}function H2(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],K2(t)),e}function z2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function B2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function G2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],W2(c)),e}function W2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function oS(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],$2(c)),e}function $2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function J2(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],zm(s));const o=d(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function K2(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],zm(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var aE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aE||(aE={}));var lE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lE||(lE={}));var uE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uE||(uE={}));var Xs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Xs||(Xs={}));var cE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cE||(cE={}));var dE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dE||(dE={}));var hE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(hE||(hE={}));var fE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fE||(fE={}));var pE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pE||(pE={}));var mE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(mE||(mE={}));var gE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gE||(gE={}));var vE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(vE||(vE={}));var yE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(yE||(yE={}));var bE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bE||(bE={}));var EE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(EE||(EE={}));var wE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wE||(wE={}));var _E;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_E||(_E={}));var CE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(CE||(CE={}));var SE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(SE||(SE={}));var Od;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Od||(Od={}));var TE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(TE||(TE={}));var IE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(IE||(IE={}));var AE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AE||(AE={}));var Gp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Gp||(Gp={}));var kE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kE||(kE={}));var NE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(NE||(NE={}));var OE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(OE||(OE={}));var xE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(xE||(xE={}));var RE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(RE||(RE={}));var PE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PE||(PE={}));var DE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(DE||(DE={}));var ME;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ME||(ME={}));var LE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(LE||(LE={}));var UE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(UE||(UE={}));var FE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(FE||(FE={}));var jE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jE||(jE={}));var qE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qE||(qE={}));var VE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VE||(VE={}));var HE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(HE||(HE={}));var zE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(zE||(zE={}));var BE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(BE||(BE={}));var GE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(GE||(GE={}));var WE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(WE||(WE={}));var $E;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})($E||($E={}));var JE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(JE||(JE={}));var KE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(KE||(KE={}));var YE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(YE||(YE={}));var QE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(QE||(QE={}));var ZE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ZE||(ZE={}));var XE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XE||(XE={}));var ew;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ew||(ew={}));var tw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tw||(tw={}));var nw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nw||(nw={}));var iw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(iw||(iw={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class Wp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ml{get text(){var e,t,s,o,l,c,f,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let v="",b=!1;const w=[];for(const S of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,H]of Object.entries(S))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(H!==null||H!==void 0)&&w.push(N);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;b=!0,v+=S.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?v:void 0}get data(){var e,t,s,o,l,c,f,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let v="";const b=[];for(const w of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,N]of Object.entries(w))S!=="inlineData"&&(N!==null||N!==void 0)&&b.push(S);w.inlineData&&typeof w.inlineData.data=="string"&&(v+=atob(w.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),v.length>0?btoa(v):void 0}get functionCalls(){var e,t,s,o,l,c,f,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return v}get executableCode(){var e,t,s,o,l,c,f,m,v;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.code}get codeExecutionResult(){var e,t,s,o,l,c,f,m,v;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.output}}class sw{}class rw{}class Y2{}class Q2{}class Z2{}class X2{}class ow{}class aw{}class lw{}class eP{}class xd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new xd;let o;const l=e;return t?o=F2(l):o=U2(l),Object.assign(s,o),s}}class uw{}class cw{}class dw{}class tP{}class nP{}class iP{}class Bm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Bm,o=G2(e);return Object.assign(s,o),s}}class sP{}class rP{}class oP{}class hw{}class aP{get text(){var e,t,s;let o="",l=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,v]of Object.entries(f))m!=="text"&&m!=="thought"&&v!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class lP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Gm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Gm,o=oS(e);return Object.assign(s,o),s}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Ge(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aS(n,e){const t=Ge(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function lS(n){return Array.isArray(n)?n.map(e=>Rd(e)):[Rd(n)]}function Rd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function uS(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cS(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fw(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function dS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>fw(e)):[fw(n)]}function $p(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function pw(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function mw(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return $p(n)?n:{role:"user",parts:dS(n)}}function Wm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=sn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function qn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(pw(n)||mw(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],s=$p(n[0]);for(const o of n){const l=$p(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(pw(o)||mw(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:dS(t)}),e}function uP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Xs).includes(t[0].toUpperCase())?t[0].toUpperCase():Xs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Xs).includes(s.toUpperCase())?s.toUpperCase():Xs.TYPE_UNSPECIFIED})}}function oa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&uP(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Xs).includes(f.toUpperCase())?f.toUpperCase():Xs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=oa(f);else if(s.includes(c)){const m=[];for(const v of f){if(v.type=="null"){e.nullable=!0;continue}m.push(oa(v))}e[c]=m}else if(o.includes(c)){const m={};for(const[v,b]of Object.entries(f))m[v]=oa(b);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function $m(n){return oa(n)}function Jm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Km(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ta(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oa(e.response));return n}function Ia(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function cP(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function hs(n,e){if(typeof e!="string")throw new Error("name must be a string");return cP(n,e,"cachedContents")}function hS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function fr(n){return zm(n)}function dP(n){return n!=null&&typeof n=="object"&&"name"in n}function hP(n){return n!=null&&typeof n=="object"&&"video"in n}function fP(n){return n!=null&&typeof n=="object"&&"uri"in n}function fS(n){var e;let t;if(dP(n)&&(t=n.name),!(fP(n)&&(t=n.uri,t===void 0))&&!(hP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function pS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mS(n){for(const e of["models","tunedModels","publisherModels"])if(pP(n,e))return n[e];return[]}function pP(n,e){return n!==null&&typeof n=="object"&&e in n}function mP(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function gP(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=mP(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function gS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function vP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let o=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const c=l.response;if(!(typeof c!="object"||c===null)&&c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Aa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function yP(n){const e={},t=d(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ZP(c))),h(e,["inlinedResponses"],l)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function bP(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function EP(n){const e={},t=d(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ld(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const o=d(n,["metadata","state"]);o!=null&&h(e,["state"],yS(o));const l=d(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(n,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&h(e,["model"],m);const v=d(n,["metadata","output"]);return v!=null&&h(e,["dest"],yP(vS(v))),e}function Jp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=d(n,["state"]);o!=null&&h(e,["state"],yS(o));const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(e,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(e,["updateTime"],v);const b=d(n,["model"]);b!=null&&h(e,["model"],b);const w=d(n,["inputConfig"]);w!=null&&h(e,["src"],wP(w));const S=d(n,["outputConfig"]);S!=null&&h(e,["dest"],bP(vS(S)));const N=d(n,["completionStats"]);return N!=null&&h(e,["completionStats"],N),e}function wP(n){const e={},t=d(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function _P(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(t,["fileName"],s);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>QP(n,c))),h(t,["requests","requests"],l)}return t}function CP(n){const e={},t=d(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function SP(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function TP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function IP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function AP(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],kP(s));const o=d(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(N=>N)),h(e,["safetyRatings"],S)}const w=d(n,["urlContextMetadata"]);return w!=null&&h(e,["urlContextMetadata"],w),e}function kP(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function bS(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>rD(l))),h(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function NP(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function OP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=d(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],EP(vP(o))),t}function gw(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["src"]);o!=null&&h(t,["batch","inputConfig"],_P(n,gS(n,o)));const l=d(e,["config"]);return l!=null&&NP(l,t),t}function xP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],Ge(n,s));const o=d(e,["src"]);o!=null&&h(t,["inputConfig"],CP(gS(n,o)));const l=d(e,["config"]);return l!=null&&OP(l,t),t}function RP(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function PP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["src"]);o!=null&&h(t,["batch","inputConfig"],qP(n,o));const l=d(e,["config"]);return l!=null&&RP(l,t),t}function DP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function MP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function LP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function UP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function FP(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=Wm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(h(t,["_self"],jP(o,t)),M2(t,{"requests[].*":"requests[].request.*"})),t}function jP(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function qP(n,e){const t={},s=d(e,["fileName"]);s!=null&&h(t,["file_name"],s);const o=d(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],FP(n,o)),t}function VP(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function HP(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zP(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BP(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],bS(sn(o)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const w=d(e,["responseLogprobs"]);w!=null&&h(s,["responseLogprobs"],w);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const V=d(e,["responseMimeType"]);V!=null&&h(s,["responseMimeType"],V);const $=d(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],$m($));const X=d(e,["responseJsonSchema"]);if(X!=null&&h(s,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(x=>oD(x))),h(t,["safetySettings"],F)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let F=Ia(oe);Array.isArray(F)&&(F=F.map(x=>lD(Ta(x)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],aD(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);t!==void 0&&ie!=null&&h(t,["cachedContent"],hs(n,ie));const O=d(e,["responseModalities"]);O!=null&&h(s,["responseModalities"],O);const A=d(e,["mediaResolution"]);A!=null&&h(s,["mediaResolution"],A);const k=d(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],Jm(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],YP(D)),s}function GP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>AP(v))),h(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function WP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function $P(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],Aa(n,s)),t}function JP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function KP(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function YP(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["request","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let f=qn(o);Array.isArray(f)&&(f=f.map(m=>bS(m))),h(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(t,["request","generationConfig"],BP(n,c,d(t,["request"],{}))),t}function ZP(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],GP(t));const s=d(n,["error"]);return s!=null&&h(e,["error"],s),e}function XP(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function eD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function tD(n){const e={},t=d(n,["config"]);return t!=null&&XP(t,e),e}function nD(n){const e={},t=d(n,["config"]);return t!=null&&eD(t,e),e}function iD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>ld(c))),h(e,["batchJobs"],l)}return e}function sD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Jp(c))),h(e,["batchJobs"],l)}return e}function rD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],VP(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],HP(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],SP(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const w=d(n,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const S=d(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function oD(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function aD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],zP(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function lD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(w=>w)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],JP(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],KP(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var us;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(us||(us={}));class so{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class uD extends ds{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new so(us.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=gw(this.apiClient,e),s=t._url,o=ce("{model}:batchGenerateContent",s),l=t.batch.inputConfig.requests,c=l.requests,f=[];for(const m of c){const v=Object.assign({},m);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const w=v.request;w.systemInstruction=b,v.request=w}f.push(v)}return l.requests=f,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=xP(this.apiClient,e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Jp(b))}else{const v=gw(this.apiClient,e);return f=ce("{model}:batchGenerateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PP(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>ld(m))}}async get(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=$P(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Jp(b))}else{const v=WP(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=IP(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=TP(this.apiClient,e);c=ce("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=nD(e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=sD(b),S=new hw;return Object.assign(S,w),S})}else{const v=tD(e);return f=ce("batches",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=iD(b),S=new hw;return Object.assign(S,w),S})}}async delete(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=MP(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>UP(b))}else{const v=DP(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>LP(b))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function cD(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vw(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>PD(l))),h(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function dD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let b=qn(c);Array.isArray(b)&&(b=b.map(w=>vw(w))),h(e,["contents"],b)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],vw(sn(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(w=>MD(w))),h(e,["tools"],b)}const v=d(n,["toolConfig"]);if(e!==void 0&&v!=null&&h(e,["toolConfig"],DD(v)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let w=qn(c);Array.isArray(w)&&(w=w.map(S=>S)),h(e,["contents"],w)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],sn(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let w=m;Array.isArray(w)&&(w=w.map(S=>LD(S))),h(e,["tools"],w)}const v=d(n,["toolConfig"]);e!==void 0&&v!=null&&h(e,["toolConfig"],v);const b=d(n,["kmsKeyName"]);return e!==void 0&&b!=null&&h(e,["encryption_spec","kmsKeyName"],b),t}function fD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aS(n,s));const o=d(e,["config"]);return o!=null&&dD(o,t),t}function pD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aS(n,s));const o=d(e,["config"]);return o!=null&&hD(o,t),t}function mD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function gD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function vD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function yD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function bD(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ED(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wD(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _D(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function CD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function SD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function TD(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function ID(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function AD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function kD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function ND(n){const e={},t=d(n,["config"]);return t!=null&&AD(t,e),e}function OD(n){const e={},t=d(n,["config"]);return t!=null&&kD(t,e),e}function xD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function RD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function PD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],bD(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],ED(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],cD(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const w=d(n,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const S=d(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function DD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],wD(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function MD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(w=>w)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],TD(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],ID(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function LD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(S=>_D(S))),h(e,["functionDeclarations"],w)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function UD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function FD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function jD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const o=d(e,["config"]);return o!=null&&UD(o,t),t}function qD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const o=d(e,["config"]);return o!=null&&FD(o,t),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class VD extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(us.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=pD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=fD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async get(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=SD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=CD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async delete(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=gD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=yD(b),S=new cw;return Object.assign(S,w),S})}else{const v=mD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=vD(b),S=new cw;return Object.assign(S,w),S})}}async update(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=qD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=jD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async listInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=OD(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=RD(b),S=new dw;return Object.assign(S,w),S})}else{const v=ND(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=xD(b),S=new dw;return Object.assign(S,w),S})}}}function yw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(N){return function(H){return Promise.resolve(H).then(N,w)}}function f(N,H){s[N]&&(o[N]=function(L){return new Promise(function(V,$){l.push([N,L,V,$])>1||m(N,L)})},H&&(o[N]=H(o[N])))}function m(N,H){try{v(s[N](H))}catch(L){S(l[0][3],L)}}function v(N){N.value instanceof at?Promise.resolve(N.value.v).then(b,w):S(l[0][2],N)}function b(N){m("next",N)}function w(N){m("throw",N)}function S(N,H){N(H),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Kl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yw=="function"?yw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,m){c=n[l](c),o(f,m,c.done,c.value)})}}function o(l,c,f,m){Promise.resolve(m).then(function(v){l({value:v,done:f})},c)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function HD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ES(t)}function ES(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bw(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!ES(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class BD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new GD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class GD{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),zD(l)}async sendMessage(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const m=await o,v=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,b=m.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let S=[];b!=null&&(S=(f=b.slice(w))!==null&&f!==void 0?f:[]);const N=v?[v]:[];this.recordHistory(s,N,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?bw(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return aa(this,arguments,function*(){var l,c,f,m;const v=[];try{for(var b=!0,w=Kl(e),S;S=yield at(w.next()),l=S.done,!l;b=!0){m=S.value,b=!1;const N=m;if(HD(N)){const H=(o=(s=N.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;H!==void 0&&v.push(H)}yield yield at(N)}}catch(N){c={error:N}}finally{try{!b&&!l&&(f=w.return)&&(yield at(f.call(w)))}finally{if(c)throw c.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...bw(s)):this.history.push(e),this.history.push(...o)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eh.prototype)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function WD(n){const e={},t=d(n,["file"]);return t!=null&&h(e,["file"],t),e}function $D(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function JD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fS(t)),e}function KD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function YD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fS(t)),e}function QD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function ZD(n){const e={},t=d(n,["config"]);return t!=null&&QD(t,e),e}function XD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eM extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(us.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ZD(e);return l=ce("files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const v=XD(m),b=new sP;return Object.assign(b,v),b})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=WD(e);return l=ce("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=$D(m),b=new rP;return Object.assign(b,v),b})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=JD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const v=KD(m),b=new oP;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function ud(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tM(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>vM(l))),h(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function nM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function iM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function rM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=d(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const w=d(n,["presencePenalty"]);w!=null&&h(e,["presencePenalty"],w);const S=d(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const H=d(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const V=d(n,["routingConfig"]);V!=null&&h(e,["routingConfig"],V);const $=d(n,["seed"]);$!=null&&h(e,["seed"],$);const X=d(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],wS(X));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const oe=d(n,["temperature"]);oe!=null&&h(e,["temperature"],oe);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const ie=d(n,["topK"]);ie!=null&&h(e,["topK"],ie);const O=d(n,["topP"]);if(O!=null&&h(e,["topP"],O),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function oM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function lM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const w=d(n,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],Km(w));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],tM(sn(H)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let ie=Ia(L);Array.isArray(ie)&&(ie=ie.map(O=>bM(Ta(O)))),h(e,["setup","tools"],ie)}const V=d(n,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],yM(V));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function uM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],rM(s));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const w=d(n,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],wS(Km(w)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],sn(H));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let ie=Ia(L);Array.isArray(ie)&&(ie=ie.map(O=>EM(Ta(O)))),h(e,["setup","tools"],ie)}const V=d(n,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],V);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function cM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Ge(n,s));const o=d(e,["config"]);return o!=null&&h(t,["config"],lM(o,t)),t}function dM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Ge(n,s));const o=d(e,["config"]);return o!=null&&h(t,["config"],uM(o,t)),t}function hM(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function fM(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["weightedPrompts"],s)}return e}function pM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lS(t);Array.isArray(v)&&(v=v.map(b=>ud(b))),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],ud(cS(s)));const o=d(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&h(e,["video"],ud(uS(l)));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function mM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lS(t);Array.isArray(v)&&(v=v.map(b=>b)),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],cS(s));const o=d(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&h(e,["video"],uS(l));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function gM(n){const e={},t=d(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const o=d(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);const l=d(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],wM(c));const f=d(n,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);return m!=null&&h(e,["sessionResumptionUpdate"],m),e}function vM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],nM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],iM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],ud(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const w=d(n,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const S=d(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function yM(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wS(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(w=>w)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],oM(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],aM(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function EM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(S=>sM(S))),h(e,["functionDeclarations"],w)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function wM(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const o=d(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(n,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["promptTokensDetails"],N)}const v=d(n,["cacheTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["cacheTokensDetails"],N)}const b=d(n,["candidatesTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["responseTokensDetails"],N)}const w=d(n,["toolUsePromptTokensDetails"]);if(w!=null){let N=w;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["toolUsePromptTokensDetails"],N)}const S=d(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function _M(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function CM(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],SM(s));const o=d(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(N=>N)),h(e,["safetyRatings"],S)}const w=d(n,["urlContextMetadata"]);return w!=null&&h(e,["urlContextMetadata"],w),e}function SM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function TM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let l=qn(o);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function IM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["tokensInfo"],o)}return e}function AM(n){const e={},t=d(n,["values"]);t!=null&&h(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&h(e,["statistics"],kM(s)),e}function kM(n){const e={},t=d(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function th(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>UL(l))),h(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function NM(n){const e={},t=d(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function OM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xM(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],sn(s));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>IS(f))),h(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],_L(l)),t}function RM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let c=qn(o);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&OM(l),t}function PM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let c=qn(o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&xM(l,t),t}function DM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const o=d(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function MM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function LM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Ge(n,s)),t}function UM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Ge(n,s)),t}function FM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function jM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function qM(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const w=d(n,["includeSafetyAttributes"]);e!==void 0&&w!=null&&h(e,["parameters","includeSafetyAttributes"],w);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const V=d(n,["addWatermark"]);e!==void 0&&V!=null&&h(e,["parameters","addWatermark"],V);const $=d(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const X=d(n,["editMode"]);e!==void 0&&X!=null&&h(e,["parameters","editMode"],X);const se=d(n,["baseSteps"]);return e!==void 0&&se!=null&&h(e,["parameters","editConfig","baseSteps"],se),t}function VM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>zL(m))),h(t,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&qM(c,t),t}function HM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>nh(l))),h(e,["generatedImages"],o)}return e}function zM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function BM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),t}function GM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let f=Wm(n,o);Array.isArray(f)&&(f=f.map(m=>m)),h(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&zM(l,t);const c=d(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],Ge(n,c)),t}function WM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let c=Wm(n,o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&BM(l,t),t}function $M(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function JM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>AM(c))),h(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function KM(n){const e={},t=d(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function YM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZM(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function eL(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],th(sn(o)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const w=d(e,["responseLogprobs"]);w!=null&&h(s,["responseLogprobs"],w);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const V=d(e,["responseMimeType"]);V!=null&&h(s,["responseMimeType"],V);const $=d(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],$m($));const X=d(e,["responseJsonSchema"]);if(X!=null&&h(s,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(x=>BL(x))),h(t,["safetySettings"],F)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let F=Ia(oe);Array.isArray(F)&&(F=F.map(x=>QL(Ta(x)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],YL(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);t!==void 0&&ie!=null&&h(t,["cachedContent"],hs(n,ie));const O=d(e,["responseModalities"]);O!=null&&h(s,["responseModalities"],O);const A=d(e,["mediaResolution"]);A!=null&&h(s,["mediaResolution"],A);const k=d(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],Jm(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],AL(D)),s}function tL(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],sn(o));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const w=d(e,["responseLogprobs"]);w!=null&&h(s,["responseLogprobs"],w);const S=d(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const V=d(e,["responseMimeType"]);V!=null&&h(s,["responseMimeType"],V);const $=d(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],$m($));const X=d(e,["responseJsonSchema"]);X!=null&&h(s,["responseJsonSchema"],X);const se=d(e,["routingConfig"]);se!=null&&h(s,["routingConfig"],se);const oe=d(e,["modelSelectionConfig"]);oe!=null&&h(s,["modelConfig"],oe);const pe=d(e,["safetySettings"]);if(t!==void 0&&pe!=null){let Y=pe;Array.isArray(Y)&&(Y=Y.map(le=>le)),h(t,["safetySettings"],Y)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let Y=Ia(ie);Array.isArray(Y)&&(Y=Y.map(le=>IS(Ta(le)))),h(t,["tools"],Y)}const O=d(e,["toolConfig"]);t!==void 0&&O!=null&&h(t,["toolConfig"],O);const A=d(e,["labels"]);t!==void 0&&A!=null&&h(t,["labels"],A);const k=d(e,["cachedContent"]);t!==void 0&&k!=null&&h(t,["cachedContent"],hs(n,k));const M=d(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const F=d(e,["speechConfig"]);F!=null&&h(s,["speechConfig"],TS(Jm(F)));const x=d(e,["audioTimestamp"]);x!=null&&h(s,["audioTimestamp"],x);const We=d(e,["thinkingConfig"]);We!=null&&h(s,["thinkingConfig"],We);const pt=d(e,["imageConfig"]);return pt!=null&&h(s,["imageConfig"],kL(pt)),s}function Ew(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let c=qn(o);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],eL(n,l,t)),t}function ww(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["contents"]);if(o!=null){let c=qn(o);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],tL(n,l,t)),t}function _w(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>CM(v))),h(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function Cw(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),h(e,["candidates"],v)}const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const f=d(n,["responseId"]);f!=null&&h(e,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function nL(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=d(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const b=d(n,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const w=d(n,["outputMimeType"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","mimeType"],w);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=d(n,["imageSize"]);if(e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function iL(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const w=d(n,["includeSafetyAttributes"]);e!==void 0&&w!=null&&h(e,["parameters","includeSafetyAttributes"],w);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const V=d(n,["addWatermark"]);e!==void 0&&V!=null&&h(e,["parameters","addWatermark"],V);const $=d(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const X=d(n,["imageSize"]);e!==void 0&&X!=null&&h(e,["parameters","sampleImageSize"],X);const se=d(n,["enhancePrompt"]);return e!==void 0&&se!=null&&h(e,["parameters","enhancePrompt"],se),t}function sL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&nL(l,t),t}function rL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&iL(l,t),t}function oL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yL(c))),h(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],CS(o)),e}function aL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>nh(c))),h(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],SS(o)),e}function lL(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=d(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=d(n,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],ih(b));const w=d(n,["referenceImages"]);if(e!==void 0&&w!=null){let S=w;Array.isArray(S)&&(S=S.map(N=>c4(N))),h(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uL(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=d(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=d(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const w=d(n,["pubsubTopic"]);e!==void 0&&w!=null&&h(e,["parameters","pubsubTopic"],w);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const N=d(n,["enhancePrompt"]);e!==void 0&&N!=null&&h(e,["parameters","enhancePrompt"],N);const H=d(n,["generateAudio"]);e!==void 0&&H!=null&&h(e,["parameters","generateAudio"],H);const L=d(n,["lastFrame"]);e!==void 0&&L!=null&&h(e,["instances[0]","lastFrame"],ri(L));const V=d(n,["referenceImages"]);if(e!==void 0&&V!=null){let se=V;Array.isArray(se)&&(se=se.map(oe=>d4(oe))),h(e,["instances[0]","referenceImages"],se)}const $=d(n,["mask"]);e!==void 0&&$!=null&&h(e,["instances[0]","mask"],u4($));const X=d(n,["compressionQuality"]);return e!==void 0&&X!=null&&h(e,["parameters","compressionQuality"],X),t}function cL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],pL(c)),e}function dL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],mL(c)),e}function hL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],ih(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],AS(c));const f=d(e,["source"]);f!=null&&gL(f,t);const m=d(e,["config"]);return m!=null&&lL(m,t),t}function fL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],ri(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],kS(c));const f=d(e,["source"]);f!=null&&vL(f,t);const m=d(e,["config"]);return m!=null&&uL(m,t),t}function pL(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>EL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function mL(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>wL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function gL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ih(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],AS(l)),t}function vL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ri(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],kS(l)),t}function yL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],NL(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=d(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],CS(o)),e}function nh(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],_S(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=d(n,["_self"]);o!=null&&h(e,["safetyAttributes"],SS(o));const l=d(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function bL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["mask"],_S(t));const s=d(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["labels"],o)}return e}function EL(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],a4(t)),e}function wL(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],l4(t)),e}function _L(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=d(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const w=d(n,["presencePenalty"]);w!=null&&h(e,["presencePenalty"],w);const S=d(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const H=d(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const V=d(n,["routingConfig"]);V!=null&&h(e,["routingConfig"],V);const $=d(n,["seed"]);$!=null&&h(e,["seed"],$);const X=d(n,["speechConfig"]);X!=null&&h(e,["speechConfig"],TS(X));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const oe=d(n,["temperature"]);oe!=null&&h(e,["temperature"],oe);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const ie=d(n,["topK"]);ie!=null&&h(e,["topK"],ie);const O=d(n,["topP"]);if(O!=null&&h(e,["topP"],O),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CL(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Ge(n,s)),t}function SL(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Ge(n,s)),t}function TL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function IL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function AL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const o=d(n,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const l=d(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function NL(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],fr(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _S(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],fr(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ih(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],fr(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ri(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],fr(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function OL(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pS(n,f)),s}function xL(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pS(n,f)),s}function RL(n,e){const t={},s=d(e,["config"]);return s!=null&&OL(n,s,t),t}function PL(n,e){const t={},s=d(e,["config"]);return s!=null&&xL(n,s,t),t}function DL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=mS(o);Array.isArray(l)&&(l=l.map(c=>Kp(c))),h(e,["models"],l)}return e}function ML(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=mS(o);Array.isArray(l)&&(l=l.map(c=>Yp(c))),h(e,["models"],l)}return e}function LL(n){const e={},t=d(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const o=d(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function Kp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=d(n,["description"]);o!=null&&h(e,["description"],o);const l=d(n,["version"]);l!=null&&h(e,["version"],l);const c=d(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],ZL(c));const f=d(n,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const m=d(n,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);const v=d(n,["supportedGenerationMethods"]);v!=null&&h(e,["supportedActions"],v);const b=d(n,["temperature"]);b!=null&&h(e,["temperature"],b);const w=d(n,["maxTemperature"]);w!=null&&h(e,["maxTemperature"],w);const S=d(n,["topP"]);S!=null&&h(e,["topP"],S);const N=d(n,["topK"]);N!=null&&h(e,["topK"],N);const H=d(n,["thinking"]);return H!=null&&h(e,["thinking"],H),e}function Yp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=d(n,["description"]);o!=null&&h(e,["description"],o);const l=d(n,["versionId"]);l!=null&&h(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let w=c;Array.isArray(w)&&(w=w.map(S=>KM(S))),h(e,["endpoints"],w)}const f=d(n,["labels"]);f!=null&&h(e,["labels"],f);const m=d(n,["_self"]);m!=null&&h(e,["tunedModelInfo"],XL(m));const v=d(n,["defaultCheckpointId"]);v!=null&&h(e,["defaultCheckpointId"],v);const b=d(n,["checkpoints"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(S=>S)),h(e,["checkpoints"],w)}return e}function UL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],YM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],QM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],_M(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const w=d(n,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const S=d(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function FL(n){const e={},t=d(n,["productImage"]);return t!=null&&h(e,["image"],ri(t)),e}function jL(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=d(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const w=d(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const N=d(n,["labels"]);return e!==void 0&&N!=null&&h(e,["labels"],N),t}function qL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["source"]);o!=null&&HL(o,t);const l=d(e,["config"]);return l!=null&&jL(l,t),t}function VL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>nh(o))),h(e,["generatedImages"],s)}return e}function HL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=d(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],ri(o));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>FL(f))),h(e,["instances[0]","productImages"],c)}return t}function zL(n){const e={},t=d(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],ri(t));const s=d(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const o=d(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);const l=d(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],LL(l));const c=d(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],NM(c));const f=d(n,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const m=d(n,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function CS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function SS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function BL(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function GL(n){const e={},t=d(n,["image"]);return t!=null&&h(e,["image"],ri(t)),e}function WL(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const m=d(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),t}function $L(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["source"]);o!=null&&KL(o,t);const l=d(e,["config"]);return l!=null&&WL(l,t),t}function JL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>bL(o))),h(e,["generatedMasks"],s)}return e}function KL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ri(o));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],GL(l)),t}function TS(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function YL(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],ZM(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function QL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(w=>w)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],TL(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],IL(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function IS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let w=t;Array.isArray(w)&&(w=w.map(S=>XM(S))),h(e,["functionDeclarations"],w)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function ZL(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function XL(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function e4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function t4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function n4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","name"],Ge(n,s));const o=d(e,["config"]);return o!=null&&e4(o,t),t}function i4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["config"]);return o!=null&&t4(o,t),t}function s4(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=d(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=d(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const b=d(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const w=d(n,["labels"]);e!==void 0&&w!=null&&h(e,["labels"],w);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const N=d(n,["mode"]);return e!==void 0&&N!=null&&h(e,["parameters","mode"],N),t}function r4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Ge(n,s));const o=d(e,["image"]);o!=null&&h(t,["instances[0]","image"],ri(o));const l=d(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&s4(c,t),t}function o4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>nh(l))),h(e,["generatedImages"],o)}return e}function a4(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],fr(s));const o=d(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function l4(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],fr(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function u4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["_self"],ri(t));const s=d(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function c4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],ih(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function d4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],ri(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function AS(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],fr(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function kS(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],fr(s));const o=d(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const h4="Content-Type",f4="X-Server-Timeout",p4="User-Agent",Qp="x-goog-api-client",m4="1.30.0",g4=`google-genai-sdk/${m4}`,v4="v1beta1",y4="v1beta",Sw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class b4{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:v4,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:y4,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))o.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&E4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Tw(o),new Wp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Tw(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield at(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(f,{stream:!0});try{const b=JSON.parse(m);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),S=w.status,N=w.code,H=`got status: ${S}. ${JSON.stringify(b)}`;if(N>=400&&N<600)throw new eh({message:H,status:N})}}catch(b){if(b.name==="ApiError")throw b}l+=m;let v=l.match(Sw);for(;v;){const b=v[1];try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new Wp(w)),l=l.slice(v[0].length),v=l.match(Sw)}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=g4+" "+this.clientOptions.userAgentExtra;return e[p4]=t,e[Qp]=t,e[h4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(f4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m={file:o},v=this.getFileName(e),b=ce("upload/v1beta/files",m._url),w=await this.fetchUploadUrl(b,o.sizeBytes,o.mimeType,v,m,t==null?void 0:t.httpOptions);return l.upload(e,w,this)}async uploadFileToFileSearchStore(e,t,s){var o;const l=this.clientOptions.uploader,c=await l.stat(t),f=String(c.size),m=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const v=`upload/v1beta/${e}:uploadToFileSearchStore`,b=this.getFileName(t),w={};s!=null&&s.customMetadata&&(w.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(w.chunkingConfig=s.chunkingConfig);const S=await this.fetchUploadUrl(v,f,m,b,w,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,o,l,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const v=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!v||!(v!=null&&v.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(f=v==null?void 0:v.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function Tw(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new eh({message:o,status:t}):new Error(o)}}function E4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const v=c[m],b=f[m];v&&typeof v=="object"&&!Array.isArray(v)&&b&&typeof b=="object"&&!Array.isArray(b)?f[m]=s(b,v):(b&&v&&typeof b!=typeof v&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof b}, New type: ${typeof v}. Overwriting.`),f[m]=v)}return f}const o=s(t,e);n.body=JSON.stringify(o)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const w4="mcp_used/unknown";let _4=!1;function NS(n){for(const e of n)if(C4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return _4}function OS(n){var e;const t=(e=n[Qp])!==null&&e!==void 0?e:"";n[Qp]=(t+` ${w4}`).trimStart()}function C4(n){return n!==null&&typeof n=="object"&&n instanceof Ym}function S4(n,e=100){return aa(this,arguments,function*(){let t,s=0;for(;s<e;){const o=yield at(n.listTools({cursor:t}));for(const l of o.tools)yield yield at(l),s++;if(!o.nextCursor)break;t=o.nextCursor}})}class Ym{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ym(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const b of this.mcpClients)try{for(var f=!0,m=(t=void 0,Kl(S4(b))),v;v=await m.next(),e=v.done,!e;f=!0){o=v.value,f=!1;const w=o;c.push(w);const S=w.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=b}}catch(w){t={error:w}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),gP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function T4(n,e,t){const s=new lP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class I4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=N4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let v=()=>{};const b=new Promise($=>{v=$}),w=e.callbacks,S=function(){v({})},N=this.apiClient,H={onopen:S,onmessage:$=>{T4(N,w.onmessage,$)},onerror:(t=w==null?void 0:w.onerror)!==null&&t!==void 0?t:function($){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function($){}},L=this.webSocketFactory.create(m,k4(c),H);L.connect(),await b;const V={setup:{model:Ge(this.apiClient,e.model)}};return L.send(JSON.stringify(V)),new A4(L,this.apiClient)}}class A4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function k4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function N4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const O4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function x4(n,e,t){const s=new aP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=gM(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class R4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new I4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),v=this.apiClient.getApiVersion();let b;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&NS(e.config.tools)&&OS(w);const S=L4(w);if(this.apiClient.isVertexAI())b=`${m}/ws/google.cloud.aiplatform.${v}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,b);else{const k=this.apiClient.getApiKey();let M="BidiGenerateContent",D="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),v!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",D="access_token"),b=`${m}/ws/google.ai.generativelanguage.${v}.GenerativeService.${M}?${D}=${k}`}let N=()=>{};const H=new Promise(k=>{N=k}),L=e.callbacks,V=function(){var k;(k=L==null?void 0:L.onopen)===null||k===void 0||k.call(L),N({})},$=this.apiClient,X={onopen:V,onmessage:k=>{x4($,L.onmessage,k)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(k){},onclose:(s=L==null?void 0:L.onclose)!==null&&s!==void 0?s:function(k){}},se=this.webSocketFactory.create(b,M4(S),X);se.connect(),await H;let oe=Ge(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const k=this.apiClient.getProject(),M=this.apiClient.getLocation();oe=`projects/${k}/locations/${M}/`+oe}let pe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Od.AUDIO]}:e.config.responseModalities=[Od.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],O=[];for(const k of ie)if(this.isCallableTool(k)){const M=k;O.push(await M.tool())}else O.push(k);O.length>0&&(e.config.tools=O);const A={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?pe=dM(this.apiClient,A):pe=cM(this.apiClient,A),delete pe.config,se.send(JSON.stringify(pe)),new D4(se,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P4={turnComplete:!0};class D4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=qn(t.turns),e.isVertexAI()||(s=s.map(o=>th(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(O4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},P4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mM(e)}:t={realtimeInput:pM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function M4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function L4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const Iw=10;function Aw(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function U4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>la(o)))!==null&&s!==void 0?s:!1}function kw(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,o)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function Nw(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class F4 extends ds{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!U4(t)||Aw(t.config))return await this.generateContentInternal(m);const v=kw(t);if(v.length>0){const L=v.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let b,w;const S=qn(m.contents),N=(l=(o=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Iw;let H=0;for(;H<N&&(b=await this.generateContentInternal(m),!(!b.functionCalls||b.functionCalls.length===0));){const L=b.candidates[0].content,V=[];for(const $ of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(la($)){const X=await $.callTool(b.functionCalls);V.push(...X)}H++,w={role:"user",parts:V},m.contents=qn(m.contents),m.contents.push(L),m.contents.push(w),Nw(m.config)&&(S.push(L),S.push(w))}return Nw(m.config)&&(b.automaticFunctionCallingHistory=S),b},this.generateContentStream=async t=>{var s,o,l,c,f;if(this.maybeMoveToResponseJsonSchem(t),Aw(t.config)){const w=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(w)}const m=kw(t);if(m.length>0){const w=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${w}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const v=(l=(o=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,b=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(v&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&m!=null&&m.safetyAttributes&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((s=o.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new so(us.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,c,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&!((o=t.video)===null||o===void 0)&&o.videoBytes?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>la(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&NS(e.config.tools)){const m=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let v=Object.assign({},m);Object.keys(v).length===0&&(v=this.apiClient.getDefaultHeaders()),OS(v),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:v})}return f}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const f=c,m=await f.tool();for(const v of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!v.name)throw new Error("Function declaration name is required.");if(l.has(v.name))throw new Error(`Duplicate tool declaration name: ${v.name}`);l.set(v.name,f)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:Iw;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(v,b,w){var S,N;return aa(this,arguments,function*(){for(var H,L,V,$;f<l;){c&&(f++,c=!1);const pe=yield at(v.processParamsMaybeAddMcpUsage(w)),ie=yield at(v.generateContentStreamInternal(pe)),O=[],A=[];try{for(var X=!0,se=(L=void 0,Kl(ie)),oe;oe=yield at(se.next()),H=oe.done,!H;X=!0){$=oe.value,X=!1;const k=$;if(yield yield at(k),k.candidates&&!((S=k.candidates[0])===null||S===void 0)&&S.content){A.push(k.candidates[0].content);for(const M of(N=k.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<l&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(M.functionCall.name)){const D=yield at(b.get(M.functionCall.name).callTool([M.functionCall]));O.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(k){L={error:k}}finally{try{!X&&!H&&(V=se.return)&&(yield at(V.call(se)))}finally{if(L)throw L.error}}if(O.length>0){c=!0;const k=new Ml;k.candidates=[{content:{role:"user",parts:O}}],yield yield at(k);const M=[];M.push(...A),M.push({role:"user",parts:O});const D=qn(w.contents).concat(M);w.contents=D}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=ww(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=Cw(b),S=new Ml;return Object.assign(S,w),S})}else{const v=Ew(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=_w(b),S=new Ml;return Object.assign(S,w),S})}}async generateContentStreamInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=ww(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var w,S,N,H;try{for(var L=!0,V=Kl(b),$;$=yield at(V.next()),w=$.done,!w;L=!0){H=$.value,L=!1;const X=H,se=Cw(yield at(X.json()));se.sdkHttpResponse={headers:X.headers};const oe=new Ml;Object.assign(oe,se),yield yield at(oe)}}catch(X){S={error:X}}finally{try{!L&&!w&&(N=V.return)&&(yield at(N.call(V)))}finally{if(S)throw S.error}}})})}else{const v=Ew(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var w,S,N,H;try{for(var L=!0,V=Kl(b),$;$=yield at(V.next()),w=$.done,!w;L=!0){H=$.value,L=!1;const X=H,se=_w(yield at(X.json()));se.sdkHttpResponse={headers:X.headers};const oe=new Ml;Object.assign(oe,se),yield yield at(oe)}}catch(X){S={error:X}}finally{try{!L&&!w&&(N=V.return)&&(yield at(N.call(V)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=WM(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=JM(b),S=new sw;return Object.assign(S,w),S})}else{const v=GM(this.apiClient,e);return f=ce("{model}:batchEmbedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=$M(b),S=new sw;return Object.assign(S,w),S})}}async generateImagesInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=rL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=aL(b),S=new rw;return Object.assign(S,w),S})}else{const v=sL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=oL(b),S=new rw;return Object.assign(S,w),S})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=VM(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const v=HM(m),b=new Y2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=r4(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const v=o4(m),b=new Q2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=qL(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=VL(m),b=new Z2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=$L(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=JL(m),b=new X2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=SL(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=CL(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}}async listInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=ML(b),S=new ow;return Object.assign(S,w),S})}else{const v=RL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=DL(b),S=new ow;return Object.assign(S,w),S})}}async update(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=i4(this.apiClient,e);return f=ce("{model}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=n4(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}}async delete(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=UM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=jM(b),S=new aw;return Object.assign(S,w),S})}else{const v=LM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=FM(b),S=new aw;return Object.assign(S,w),S})}}async countTokens(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=MM(b),S=new lw;return Object.assign(S,w),S})}else{const v=RM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=DM(b),S=new lw;return Object.assign(S,w),S})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=TM(this.apiClient,e);return l=ce("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>{const v=IM(m),b=new eP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=fL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>{const w=dL(b),S=new xd;return Object.assign(S,w),S})}else{const v=hL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>{const w=cL(b),S=new xd;return Object.assign(S,w),S})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class j4 extends ds{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=B2(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c}else{const v=z2(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=L2(e);return l=ce("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function q4(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function V4(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Y4(l))),h(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function H4(n,e,t){const s={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=d(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&h(t,["bidiGenerateContentSetup"],K4(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),s}function z4(n,e){const t={},s=d(e,["config"]);return s!=null&&h(t,["config"],H4(n,s,t)),t}function B4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function G4(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const o=d(n,["name"]);if(o!=null&&h(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function J4(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const w=d(n,["speechConfig"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","speechConfig"],Km(w));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],V4(sn(H)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let ie=Ia(L);Array.isArray(ie)&&(ie=ie.map(O=>Z4(Ta(O)))),h(e,["setup","tools"],ie)}const V=d(n,["sessionResumption"]);e!==void 0&&V!=null&&h(e,["setup","sessionResumption"],Q4(V));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const X=d(n,["outputAudioTranscription"]);e!==void 0&&X!=null&&h(e,["setup","outputAudioTranscription"],X);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function K4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Ge(n,s));const o=d(e,["config"]);return o!=null&&h(t,["config"],J4(o,t)),t}function Y4(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],B4(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],G4(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],q4(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const w=d(n,["thoughtSignature"]);w!=null&&h(e,["thoughtSignature"],w);const S=d(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function Q4(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Z4(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(w=>w)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=d(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],W4(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],$4(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function X4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function eU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=X4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(v=>c.includes(v)?`generationConfig.${v}`:v));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class tU extends ds{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=z4(this.apiClient,e);l=ce("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=eU(f,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),o.then(v=>v)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function nU(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function iU(n){const e={},t=d(n,["config"]);return t!=null&&nU(t,e),e}function sU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function rU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&sU(s,e),e}function oU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function aU(n,e){const t={},s=d(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function lU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],cU(c)),e}function uU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["fileName"]);s!=null&&h(e,["fileName"],s);const o=d(n,["config"]);return o!=null&&aU(o,e),e}function cU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const o=d(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function dU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function hU(n){const e={},t=d(n,["config"]);return t!=null&&dU(t,e),e}function fU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function pU(n,e){const t={},s=d(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const o=d(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function mU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["config"]);return s!=null&&pU(s,e),e}function gU(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function vU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function yU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&vU(s,e),e}function bU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function EU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function wU(n){const e={},t=d(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=d(n,["config"]);return s!=null&&EU(s,e),e}function _U(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=d(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class CU extends ds{constructor(e){super(),this.apiClient=e,this.list=async t=>new so(us.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yU(e);o=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wU(e);return l=ce("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=_U(m),b=new tP;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class SU extends ds{constructor(e,t=new CU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new so(us.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rU(e);o=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=fU(m),b=new nP;return Object.assign(b,v),b})}}async uploadToFileSearchStoreInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mU(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=gU(m),b=new iP;return Object.assign(b,v),b})}}async importFile(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uU(e);return l=ce("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>{const v=lU(m),b=new Bm;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function TU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function IU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function AU(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(n,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function kU(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec"],Ow(N))}else if(o==="PREFERENCE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec"],Ow(N))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(f==="PREFERENCE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="PREFERENCE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(v==="PREFERENCE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let b=d(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(b==="PREFERENCE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const w=d(n,["labels"]);e!==void 0&&w!=null&&h(e,["labels"],w);const S=d(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function NU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&qU(l);const c=d(n,["config"]);return c!=null&&AU(c,t),t}function OU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&VU(l,t,e);const c=d(n,["config"]);return c!=null&&kU(c,t,e),t}function xU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function RU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function PU(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function DU(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function MU(n,e){const t={},s=d(n,["config"]);return s!=null&&PU(s,t),t}function LU(n,e){const t={},s=d(n,["config"]);return s!=null&&DU(s,t),t}function UU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>xS(f))),h(t,["tuningJobs"],c)}return t}function FU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Zp(f))),h(t,["tuningJobs"],c)}return t}function jU(n,e){const t={},s=d(n,["name"]);s!=null&&h(t,["model"],s);const o=d(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function qU(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(t,["examples","examples"],o)}return t}function VU(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function xS(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["state"]);l!=null&&h(t,["state"],hS(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["tuningTask","startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["tuningTask","completeTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["description"]);b!=null&&h(t,["description"],b);const w=d(n,["baseModel"]);w!=null&&h(t,["baseModel"],w);const S=d(n,["_self"]);return S!=null&&h(t,["tunedModel"],jU(S)),t}function Zp(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["state"]);l!=null&&h(t,["state"],hS(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["error"]);b!=null&&h(t,["error"],b);const w=d(n,["description"]);w!=null&&h(t,["description"],w);const S=d(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const N=d(n,["tunedModel"]);N!=null&&h(t,["tunedModel"],N);const H=d(n,["preTunedModel"]);H!=null&&h(t,["preTunedModel"],H);const L=d(n,["supervisedTuningSpec"]);L!=null&&h(t,["supervisedTuningSpec"],L);const V=d(n,["preferenceOptimizationSpec"]);V!=null&&h(t,["preferenceOptimizationSpec"],V);const $=d(n,["tuningDataStats"]);$!=null&&h(t,["tuningDataStats"],$);const X=d(n,["encryptionSpec"]);X!=null&&h(t,["encryptionSpec"],X);const se=d(n,["partnerModelTuningSpec"]);se!=null&&h(t,["partnerModelTuningSpec"],se);const oe=d(n,["customBaseModel"]);oe!=null&&h(t,["customBaseModel"],oe);const pe=d(n,["experiment"]);pe!=null&&h(t,["experiment"],pe);const ie=d(n,["labels"]);ie!=null&&h(t,["labels"],ie);const O=d(n,["outputUri"]);O!=null&&h(t,["outputUri"],O);const A=d(n,["pipelineJob"]);A!=null&&h(t,["pipelineJob"],A);const k=d(n,["serviceAccount"]);k!=null&&h(t,["serviceAccount"],k);const M=d(n,["tunedModelDisplayName"]);M!=null&&h(t,["tunedModelDisplayName"],M);const D=d(n,["veoTuningSpec"]);return D!=null&&h(t,["veoTuningSpec"],D),t}function HU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&h(t,["name"],o);const l=d(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(n,["done"]);c!=null&&h(t,["done"],c);const f=d(n,["error"]);return f!=null&&h(t,["error"],f),t}function Ow(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const o=d(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class zU extends ds{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new so(us.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Gp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=RU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>Zp(b))}else{const v=xU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>xS(b))}}async listInternal(e){var t,s,o,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=LU(e);return f=ce("tuningJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=FU(b),S=new uw;return Object.assign(S,w),S})}else{const v=MU(e);return f=ce("tunedModels",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(w=>{const S=w;return S.sdkHttpResponse={headers:b.headers},S})),c.then(b=>{const w=UU(b),S=new uw;return Object.assign(S,w),S})}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=IU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=TU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=OU(e,e);return l=ce("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>Zp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NU(e);return l=ce("tunedModels",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),o.then(m=>HU(m))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class BU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GU=1024*1024*8,WU=3,$U=1e3,JU=2,Pd="x-goog-upload-status";async function KU(n,e,t){var s;const o=await RS(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function YU(n,e,t){var s;const o=await RS(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=oS(l),f=new Gm;return Object.assign(f,c),f}async function RS(n,e,t){var s,o;let l=0,c=0,f=new Wp(new Response),m="upload";for(l=n.size;c<l;){const v=Math.min(GU,l-c),b=n.slice(c,c+v);c+v>=l&&(m+=", finalize");let w=0,S=$U;for(;w<WU&&(f=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[Pd]));)w++,await ZU(S),S=S*JU;if(c+=v,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Pd])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function QU(n){return{size:n.size,type:n.type}}function ZU(n){return new Promise(e=>setTimeout(e,n))}class XU{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KU(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QU(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class e6{create(e,t,s){return new t6(e,t,s)}}class t6{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const xw="x-goog-api-key";class n6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(xw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(xw,this.apiKey)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const i6="gl-node/";class s6{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=D2(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new n6(this.apiKey);this.apiClient=new b4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:i6+"web",uploader:new XU,downloader:new BU}),this.models=new F4(this.apiClient),this.live=new R4(this.apiClient,o,new e6),this.batches=new uD(this.apiClient),this.chats=new BD(this.models,this.apiClient),this.caches=new VD(this.apiClient),this.files=new eM(this.apiClient),this.operations=new j4(this.apiClient),this.authTokens=new tU(this.apiClient),this.tunings=new zU(this.apiClient),this.fileSearchStores=new SU(this.apiClient)}}const r6=()=>{const n="AIzaSyCSFyCeDbb17S9girfB9pZJJ7Sg8_nxAJs";return new s6({apiKey:n})},Rw=(n,e,t)=>{const s=r6();if(!s)return null;let o=n.systemInstruction+`

IMPORTANT: Do not use markdown formatting like ** or * in your responses. Use plain text only.`;if(t&&t!=="en"){const l={es:"Responde siempre en espaol.",fr:"Rponds toujours en franais.",de:"Antworte immer auf Deutsch.",it:"Rispondi sempre in italiano.",pt:"Responda sempre em portugus.",ar:"   .",hi:"    ",ml:"   ."}[t];l&&(o=l+" "+o)}if(e&&e.length>0){const l=e.map(c=>`- "${c.title}": ${c.description}`).join(`
`);o+=`

Available video tutorials:
${l}

When users ask questions related to these topics, suggest the relevant video tutorial by title.`}return n.qaTraining&&n.qaTraining.length>0&&(o=`KNOWLEDGE BASE - Use this information to answer questions naturally:
${n.qaTraining.map(l=>`${l.question}: ${l.answer}`).join(`
`)}

When users ask about these topics, use the information above but respond conversationally, not in Q&A format.

`+o),s.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:o}})},o6=async(n,e)=>{try{return await n.sendMessageStream({message:e})}catch(t){throw console.error("Error sending message to Gemini:",t),t}},a6=({config:n,videos:e=[]})=>{const[t,s]=Ve.useState(!1),[o,l]=Ve.useState([]),[c,f]=Ve.useState(""),[m,v]=Ve.useState(!1),[b,w]=Ve.useState(null),[S,N]=Ve.useState("en"),[H,L]=Ve.useState(!1),V=Ve.useRef(null),$=Ve.useRef(null),X=[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugus"},{code:"ar",name:""},{code:"hi",name:""},{code:"ml",name:""}];Ve.useEffect(()=>{if(t){const ie=Rw(n,e,S);w(ie),o.length===0&&l([{id:"welcome",role:"model",text:n.welcomeMessage,timestamp:Date.now()}])}},[t,n,e]),Ve.useEffect(()=>{var ie;(ie=V.current)==null||ie.scrollIntoView({behavior:"smooth"})},[o]);const se=async()=>{if(!c.trim()||!b)return;const ie=c.trim();f("");const O={id:Date.now().toString(),role:"user",text:ie,timestamp:Date.now()};l(A=>[...A,O]),v(!0);try{const A=await o6(b,ie);let k="";const M=(Date.now()+1).toString();l(D=>[...D,{id:M,role:"model",text:"",timestamp:Date.now()}]);for await(const D of A){const F=D.text||"";k+=F,l(x=>x.map(We=>We.id===M?{...We,text:k}:We))}}catch(A){console.error(A),l(k=>[...k,{id:Date.now().toString(),role:"model",text:"I'm sorry, I'm having trouble connecting right now. Please try again later.",timestamp:Date.now()}])}finally{v(!1),setTimeout(()=>{var A;(A=$.current)==null||A.focus()},100)}},oe=ie=>{ie.key==="Enter"&&!ie.shiftKey&&(ie.preventDefault(),se())},pe=ie=>{if("speechSynthesis"in window){const O=new SpeechSynthesisUtterance(ie),A={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT",pt:"pt-BR",ar:"ar-SA",hi:"hi-IN",ml:"ml-IN"};O.lang=A[S]||"en-US",O.rate=.9,speechSynthesis.speak(O)}};return R.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end",children:[t&&R.jsxs("div",{className:`mb-4 bg-white shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-slide-up ${H?"fixed inset-4 rounded-lg z-50":"w-[350px] sm:w-[400px] h-[500px] rounded-2xl origin-bottom-right"}`,children:[R.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 flex justify-between items-center text-white",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:R.jsx(ZI,{size:18})}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-semibold text-sm",children:"AI Support Assistant"}),R.jsx("p",{className:"text-xs text-blue-100",children:"Powered by Gemini"})]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("select",{value:S,onChange:ie=>{N(ie.target.value),w(null);const O=Rw(n,e,ie.target.value);w(O)},className:"px-2 py-1 text-xs bg-white/20 border border-white/30 rounded text-white focus:outline-none focus:bg-white/30",children:X.map(ie=>R.jsx("option",{value:ie.code,className:"text-slate-800",children:ie.name},ie.code))}),R.jsx("button",{onClick:()=>L(!H),className:"p-1 hover:bg-white/20 rounded-full transition",title:H?"Exit fullscreen":"Fullscreen",children:H?"":""}),R.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded-full transition",children:R.jsx(em,{size:20})})]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[o.map(ie=>R.jsxs("div",{className:`flex gap-3 ${ie.role==="user"?"flex-row-reverse":""}`,children:[R.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${ie.role==="user"?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-600"}`,children:ie.role==="user"?R.jsx(tA,{size:16}):R.jsx(kI,{size:16})}),R.jsx("div",{className:`max-w-[80%] rounded-2xl p-3 text-sm leading-relaxed ${ie.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white border border-slate-200 text-slate-700 rounded-tl-none shadow-sm"}`,children:R.jsxs("div",{className:"flex items-start justify-between gap-2",children:[R.jsx("div",{className:"flex-1",children:ie.text||R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-75"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-150"})]})}),ie.role==="model"&&ie.text&&R.jsx("button",{onClick:()=>pe(ie.text),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Listen",children:R.jsx(rA,{size:14})})]})})]},ie.id)),R.jsx("div",{ref:V})]}),R.jsxs("div",{className:"p-3 bg-white border-t border-slate-100",children:[R.jsxs("div",{className:"relative flex items-center gap-2",children:[R.jsx("input",{ref:$,type:"text",value:c,onChange:ie=>f(ie.target.value),onKeyDown:oe,placeholder:"Ask for help...",disabled:m,className:"flex-1 pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"}),R.jsx("button",{onClick:se,disabled:!c.trim()||m,className:"absolute right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?R.jsx(MI,{size:16,className:"animate-spin"}):R.jsx($I,{size:16})})]}),R.jsx("div",{className:"text-center mt-2",children:R.jsx("p",{className:"text-[10px] text-slate-400",children:"AI can make mistakes. Please verify important info."})})]})]}),R.jsxs("button",{onClick:()=>s(!t),className:`group p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-105 flex items-center gap-2 ${t?"bg-slate-700 rotate-90 opacity-0 pointer-events-none absolute":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white"}`,children:[R.jsx(jI,{size:28,className:"animate-pulse"}),R.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium pr-0 group-hover:pr-2",children:"Support Chat"})]})]})},l6=({videoId:n,onClose:e})=>(Ve.useEffect(()=>{const t=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),n?R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:e,children:R.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-xl overflow-hidden shadow-2xl animate-slide-up",onClick:t=>t.stopPropagation(),children:[R.jsx("div",{className:"absolute top-0 right-0 p-4 z-10",children:R.jsx("button",{onClick:e,className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:R.jsx(em,{size:24})})}),R.jsx("div",{className:"aspect-video w-full",children:R.jsx("iframe",{src:`https://www.youtube.com/embed/${n}?autoplay=1&rel=0`,title:"YouTube video player",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null),u6={systemInstruction:"You are a helpful customer support agent for 'Polosys Support'. You assist users with questions about accounting software, inventory management, and general troubleshooting. Be polite, concise, and professional. If you don't know the answer, advise them to contact human support at support@polosys.com or call our customer care number: +1-800-POLOSYS (765-6797). For urgent issues, recommend calling the customer care number.",welcomeMessage:"Hello! How can I help you with the system today?"},c6=()=>{const[n,e]=Ve.useState(()=>localStorage.getItem("adminLoggedIn")==="true"?$s.ADMIN:$s.CUSTOMER),[t,s]=Ve.useState(!1),[o,l]=Ve.useState([]),[c,f]=Ve.useState(u6),[m,v]=Ve.useState(!0),[b,w]=Ve.useState(null),[S,N]=Ve.useState(""),[H,L]=Ve.useState(!1),[V,$]=Ve.useState({email:"",password:""}),[X,se]=Ve.useState(""),oe=()=>{L(!0),se("")},pe=async A=>{A.preventDefault();try{await cR(oE,V.email,V.password),localStorage.setItem("adminLoggedIn","true"),e($s.ADMIN),L(!1),$({email:"",password:""})}catch{se("Invalid credentials")}},ie=async()=>{await fR(oE),localStorage.removeItem("adminLoggedIn"),e($s.CUSTOMER),s(!1)};Ve.useEffect(()=>{(async()=>{try{const[A,k]=await Promise.all([k2(),N2()]);l(A),k&&f(k)}catch(A){console.error("Error loading data:",A)}finally{v(!1)}})()},[]),Ve.useEffect(()=>{m||A2(o).catch(console.error)},[o,m]),Ve.useEffect(()=>{m||zp(c).catch(console.error)},[c,m]);const O=o.filter(A=>A.title.toLowerCase().includes(S.toLowerCase())||A.description.toLowerCase().includes(S.toLowerCase()));return R.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900",children:[R.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between h-16",children:[R.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",onDoubleClick:()=>s(!t),title:"Double click for admin options",children:[R.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:R.jsx(PI,{size:24})}),R.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-600",children:"Polosys Support"})]}),R.jsx("div",{className:"flex items-center gap-4",children:n===$s.CUSTOMER?t&&R.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition-colors animate-fade-in",children:[R.jsx(YI,{size:18}),R.jsx("span",{children:"Admin Access"})]}):R.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 rounded-lg transition-colors",children:[R.jsx(UI,{size:18}),R.jsx("span",{children:"Logout"})]})})]})})}),R.jsxs("main",{className:"relative",children:[m?R.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),R.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):n===$s.ADMIN?R.jsx(O2,{videos:o,setVideos:l,chatConfig:c,setChatConfig:f}):R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[R.jsxs("div",{className:"text-center mb-16 space-y-4",children:[R.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight",children:"How can we help you today?"}),R.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Browse our video library for quick tutorials or chat with our AI assistant for instant support."}),R.jsxs("div",{className:"max-w-xl mx-auto mt-8 relative group",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors",children:R.jsx(GI,{size:20})}),R.jsx("input",{type:"text",placeholder:"Search for videos (e.g., 'invoice', 'setup')...",value:S,onChange:A=>N(A.target.value),className:"block w-full pl-11 pr-4 py-4 bg-white border border-slate-200 rounded-2xl shadow-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:O.map(A=>R.jsxs("div",{onClick:()=>w(A.videoId),className:"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100 cursor-pointer flex flex-col h-full",children:[R.jsxs("div",{className:"relative aspect-video overflow-hidden bg-slate-100",children:[R.jsx("img",{src:`https://img.youtube.com/vi/${A.videoId}/hqdefault.jpg`,alt:A.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),R.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:R.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-lg transform scale-90 group-hover:scale-110 transition-all duration-300",children:R.jsx(OI,{size:24,className:"text-blue-600 ml-1"})})}),R.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-medium",children:"Video"})]}),R.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[R.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors",children:A.title}),R.jsx("p",{className:"text-slate-600 text-sm leading-relaxed flex-1",children:A.description}),R.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center text-blue-600 font-medium text-sm",children:["Watch Tutorial ",R.jsx("span",{className:"ml-1 group-hover:translate-x-1 transition-transform",children:""})]})]})]},A.id))}),O.length===0&&R.jsxs("div",{className:"text-center py-20",children:[R.jsx("p",{className:"text-slate-500 text-lg",children:"No videos found matching your search."}),R.jsx("button",{onClick:()=>N(""),className:"mt-4 text-blue-600 font-medium hover:underline",children:"Clear search"})]})]}),n===$s.CUSTOMER&&R.jsx(a6,{config:c,videos:o})]}),R.jsx(l6,{videoId:b,onClose:()=>w(null)}),H&&R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-[90vw]",children:[R.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Admin Login"}),R.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),R.jsx("input",{type:"email",required:!0,value:V.email,onChange:A=>$({...V,email:A.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),R.jsx("input",{type:"password",required:!0,value:V.password,onChange:A=>$({...V,password:A.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),X&&R.jsx("p",{className:"text-red-500 text-sm text-center",children:X}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx("button",{type:"button",onClick:()=>{L(!1),$({email:"",password:""}),se("")},className:"flex-1 py-2 px-4 border border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50",children:"Cancel"}),R.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Login"})]})]})]})})]})},PS=document.getElementById("root");if(!PS)throw new Error("Could not find root element to mount to");const d6=wI.createRoot(PS);d6.render(R.jsx(fI.StrictMode,{children:R.jsx(c6,{})}));
