(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function PE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v0={exports:{}},Rl={};/**
* @license React
* react-jsx-runtime.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var y0;function cA(){if(y0)return Rl;y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var f in i)f!=="key"&&(l[f]=i[f])}else l=i;return i=l.ref,{$$typeof:n,type:s,key:c,ref:i!==void 0?i:null,props:l}}return Rl.Fragment=e,Rl.jsx=t,Rl.jsxs=t,Rl}var b0;function dA(){return b0||(b0=1,v0.exports=cA()),v0.exports}var R=dA(),w0={exports:{}},Ie={};/**
* @license React
* react.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var E0;function hA(){if(E0)return Ie;E0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),C=Symbol.iterator;function N(j){return j===null||typeof j!="object"?null:(j=C&&j[C]||j["@@iterator"],typeof j=="function"?j:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,q={};function J(j,ee,ue){this.props=j,this.context=ee,this.refs=q,this.updater=ue||H}J.prototype.isReactComponent={},J.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},J.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Z(){}Z.prototype=J.prototype;function se(j,ee,ue){this.props=j,this.context=ee,this.refs=q,this.updater=ue||H}var ie=se.prototype=new Z;ie.constructor=se,L(ie,J.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray;function re(){}var x={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function k(j,ee,ue){var he=ue.ref;return{$$typeof:n,type:j,key:ee,ref:he!==void 0?he:null,props:ue}}function M(j,ee){return k(j.type,ee,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function F(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ue){return ee[ue]})}var O=/\/+/g;function $e(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):ee.toString(36)}function pt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(re,re):(j.status="pending",j.then(function(ee){j.status==="pending"&&(j.status="fulfilled",j.value=ee)},function(ee){j.status==="pending"&&(j.status="rejected",j.reason=ee)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,ee,ue,he,Te){var ke=typeof j;(ke==="undefined"||ke==="boolean")&&(j=null);var je=!1;if(j===null)je=!0;else switch(ke){case"bigint":case"string":case"number":je=!0;break;case"object":switch(j.$$typeof){case n:case e:je=!0;break;case b:return je=j._init,Y(je(j._payload),ee,ue,he,Te)}}if(je)return Te=Te(j),je=he===""?"."+$e(j,0):he,pe(Te)?(ue="",je!=null&&(ue=je.replace(O,"$&/")+"/"),Y(Te,ee,ue,"",function(mo){return mo})):Te!=null&&(D(Te)&&(Te=M(Te,ue+(Te.key==null||j&&j.key===Te.key?"":(""+Te.key).replace(O,"$&/")+"/")+je)),ee.push(Te)),1;je=0;var Dt=he===""?".":he+":";if(pe(j))for(var ut=0;ut<j.length;ut++)he=j[ut],ke=Dt+$e(he,ut),je+=Y(he,ee,ue,ke,Te);else if(ut=N(j),typeof ut=="function")for(j=ut.call(j),ut=0;!(he=j.next()).done;)he=he.value,ke=Dt+$e(he,ut++),je+=Y(he,ee,ue,ke,Te);else if(ke==="object"){if(typeof j.then=="function")return Y(pt(j),ee,ue,he,Te);throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return je}function le(j,ee,ue){if(j==null)return j;var he=[],Te=0;return Y(j,he,"","",function(ke){return ee.call(ue,ke,Te++)}),he}function ye(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ue){(j._status===0||j._status===-1)&&(j._status=1,j._result=ue)},function(ue){(j._status===0||j._status===-1)&&(j._status=2,j._result=ue)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var He=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ke={map:le,forEach:function(j,ee,ue){le(j,function(){ee.apply(this,arguments)},ue)},count:function(j){var ee=0;return le(j,function(){ee++}),ee},toArray:function(j){return le(j,function(ee){return ee})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ie.Activity=E,Ie.Children=Ke,Ie.Component=J,Ie.Fragment=t,Ie.Profiler=i,Ie.PureComponent=se,Ie.StrictMode=s,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(j){return x.H.useMemoCache(j)}},Ie.cache=function(j){return function(){return j.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(j,ee,ue){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var he=L({},j.props),Te=j.key;if(ee!=null)for(ke in ee.key!==void 0&&(Te=""+ee.key),ee)!_.call(ee,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ee.ref===void 0||(he[ke]=ee[ke]);var ke=arguments.length-2;if(ke===1)he.children=ue;else if(1<ke){for(var je=Array(ke),Dt=0;Dt<ke;Dt++)je[Dt]=arguments[Dt+2];he.children=je}return k(j.type,Te,he)},Ie.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Ie.createElement=function(j,ee,ue){var he,Te={},ke=null;if(ee!=null)for(he in ee.key!==void 0&&(ke=""+ee.key),ee)_.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Te[he]=ee[he]);var je=arguments.length-2;if(je===1)Te.children=ue;else if(1<je){for(var Dt=Array(je),ut=0;ut<je;ut++)Dt[ut]=arguments[ut+2];Te.children=Dt}if(j&&j.defaultProps)for(he in je=j.defaultProps,je)Te[he]===void 0&&(Te[he]=je[he]);return k(j,ke,Te)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(j){return{$$typeof:f,render:j}},Ie.isValidElement=D,Ie.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:ye}},Ie.memo=function(j,ee){return{$$typeof:v,type:j,compare:ee===void 0?null:ee}},Ie.startTransition=function(j){var ee=x.T,ue={};x.T=ue;try{var he=j(),Te=x.S;Te!==null&&Te(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(re,He)}catch(ke){He(ke)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),x.T=ee}},Ie.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ie.use=function(j){return x.H.use(j)},Ie.useActionState=function(j,ee,ue){return x.H.useActionState(j,ee,ue)},Ie.useCallback=function(j,ee){return x.H.useCallback(j,ee)},Ie.useContext=function(j){return x.H.useContext(j)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(j,ee){return x.H.useDeferredValue(j,ee)},Ie.useEffect=function(j,ee){return x.H.useEffect(j,ee)},Ie.useEffectEvent=function(j){return x.H.useEffectEvent(j)},Ie.useId=function(){return x.H.useId()},Ie.useImperativeHandle=function(j,ee,ue){return x.H.useImperativeHandle(j,ee,ue)},Ie.useInsertionEffect=function(j,ee){return x.H.useInsertionEffect(j,ee)},Ie.useLayoutEffect=function(j,ee){return x.H.useLayoutEffect(j,ee)},Ie.useMemo=function(j,ee){return x.H.useMemo(j,ee)},Ie.useOptimistic=function(j,ee){return x.H.useOptimistic(j,ee)},Ie.useReducer=function(j,ee,ue){return x.H.useReducer(j,ee,ue)},Ie.useRef=function(j){return x.H.useRef(j)},Ie.useState=function(j){return x.H.useState(j)},Ie.useSyncExternalStore=function(j,ee,ue){return x.H.useSyncExternalStore(j,ee,ue)},Ie.useTransition=function(){return x.H.useTransition()},Ie.version="19.2.0",Ie}var S0;function Zp(){return S0||(S0=1,w0.exports=hA()),w0.exports}var qe=Zp();const fA=PE(qe);var rp={exports:{}},Pl={},T0={exports:{}},C0={};/**
* @license React
* scheduler.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var I0;function pA(){return I0||(I0=1,(function(n){function e(Y,le){var ye=Y.length;Y.push(le);e:for(;0<ye;){var He=ye-1>>>1,Ke=Y[He];if(0<i(Ke,le))Y[He]=le,Y[ye]=Ke,ye=He;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var le=Y[0],ye=Y.pop();if(ye!==le){Y[0]=ye;e:for(var He=0,Ke=Y.length,j=Ke>>>1;He<j;){var ee=2*(He+1)-1,ue=Y[ee],he=ee+1,Te=Y[he];if(0>i(ue,ye))he<Ke&&0>i(Te,ue)?(Y[He]=Te,Y[he]=ye,He=he):(Y[He]=ue,Y[ee]=ye,He=ee);else if(he<Ke&&0>i(Te,ye))Y[He]=Te,Y[he]=ye,He=he;else break e}}return le}function i(Y,le){var ye=Y.sortIndex-le.sortIndex;return ye!==0?ye:Y.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],v=[],b=1,E=null,C=3,N=!1,H=!1,L=!1,q=!1,J=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ie(Y){for(var le=t(v);le!==null;){if(le.callback===null)s(v);else if(le.startTime<=Y)s(v),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(v)}}function pe(Y){if(L=!1,ie(Y),!H)if(t(m)!==null)H=!0,re||(re=!0,F());else{var le=t(v);le!==null&&pt(pe,le.startTime-Y)}}var re=!1,x=-1,_=5,k=-1;function M(){return q?!0:!(n.unstable_now()-k<_)}function D(){if(q=!1,re){var Y=n.unstable_now();k=Y;var le=!0;try{e:{H=!1,L&&(L=!1,Z(x),x=-1),N=!0;var ye=C;try{t:{for(ie(Y),E=t(m);E!==null&&!(E.expirationTime>Y&&M());){var He=E.callback;if(typeof He=="function"){E.callback=null,C=E.priorityLevel;var Ke=He(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof Ke=="function"){E.callback=Ke,ie(Y),le=!0;break t}E===t(m)&&s(m),ie(Y)}else s(m);E=t(m)}if(E!==null)le=!0;else{var j=t(v);j!==null&&pt(pe,j.startTime-Y),le=!1}}break e}finally{E=null,C=ye,N=!1}le=void 0}}finally{le?F():re=!1}}}var F;if(typeof se=="function")F=function(){se(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,$e=O.port2;O.port1.onmessage=D,F=function(){$e.postMessage(null)}}else F=function(){J(D,0)};function pt(Y,le){x=J(function(){Y(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var le=3;break;default:le=C}var ye=C;C=le;try{return Y()}finally{C=ye}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=C;C=Y;try{return le()}finally{C=ye}},n.unstable_scheduleCallback=function(Y,le,ye){var He=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?He+ye:He):ye=He,Y){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,Y={id:b++,callback:le,priorityLevel:Y,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>He?(Y.sortIndex=ye,e(v,Y),t(m)===null&&Y===t(v)&&(L?(Z(x),x=-1):L=!0,pt(pe,ye-He))):(Y.sortIndex=Ke,e(m,Y),H||N||(H=!0,re||(re=!0,F()))),Y},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Y){var le=C;return function(){var ye=C;C=le;try{return Y.apply(this,arguments)}finally{C=ye}}}})(C0)),C0}var A0;function mA(){return A0||(A0=1,T0.exports=pA()),T0.exports}var sp={exports:{}},Zt={};/**
* @license React
* react-dom.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var _0;function gA(){if(_0)return Zt;_0=1;var n=Zp();function e(m){var v="https://react.dev/errors/"+m;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(m,v,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:m,containerInfo:v,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,v){if(m==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(m,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(m,v,null,b)},Zt.flushSync=function(m){var v=c.T,b=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=v,s.p=b,s.d.f()}},Zt.preconnect=function(m,v){typeof m=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(m,v))},Zt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Zt.preinit=function(m,v){if(typeof m=="string"&&v&&typeof v.as=="string"){var b=v.as,E=f(b,v.crossOrigin),C=typeof v.integrity=="string"?v.integrity:void 0,N=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?s.d.S(m,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:N}):b==="script"&&s.d.X(m,{crossOrigin:E,integrity:C,fetchPriority:N,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Zt.preinitModule=function(m,v){if(typeof m=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=f(v.as,v.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(m)},Zt.preload=function(m,v){if(typeof m=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,E=f(b,v.crossOrigin);s.d.L(m,b,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Zt.preloadModule=function(m,v){if(typeof m=="string")if(v){var b=f(v.as,v.crossOrigin);s.d.m(m,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(m)},Zt.requestFormReset=function(m){s.d.r(m)},Zt.unstable_batchedUpdates=function(m,v){return m(v)},Zt.useFormState=function(m,v,b){return c.H.useFormState(m,v,b)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var k0;function vA(){if(k0)return sp.exports;k0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=gA(),sp.exports}/**
* @license React
* react-dom-client.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var N0;function yA(){if(N0)return Pl;N0=1;var n=mA(),e=Zp(),t=vA();function s(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,a=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(a=o.return),r=o.return;while(r)}return o.tag===3?a:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(s(188))}function v(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(s(188));return o!==r?null:r}for(var a=r,u=o;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return m(g),r;if(y===u)return m(g),o;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var S=!1,I=g.child;I;){if(I===a){S=!0,a=g,u=y;break}if(I===u){S=!0,u=g,a=y;break}I=I.sibling}if(!S){for(I=y.child;I;){if(I===a){S=!0,a=y,u=g;break}if(I===u){S=!0,u=y,a=g;break}I=I.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:o}function b(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=b(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case J:return"Profiler";case q:return"StrictMode";case pe:return"Suspense";case re:return"SuspenseList";case k:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case H:return"Portal";case se:return r.displayName||"Context";case Z:return(r._context.displayName||"Context")+".Consumer";case ie:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return o=r.displayName||null,o!==null?o:$e(r.type)||"Memo";case _:o=r._payload,r=r._init;try{return $e(r(o))}catch{}}return null}var pt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},He=[],Ke=-1;function j(r){return{current:r}}function ee(r){0>Ke||(r.current=He[Ke],He[Ke]=null,Ke--)}function ue(r,o){Ke++,He[Ke]=r.current,r.current=o}var he=j(null),Te=j(null),ke=j(null),je=j(null);function Dt(r,o){switch(ue(ke,o),ue(Te,r),ue(he,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Vy(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Vy(o),r=qy(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(he),ue(he,r)}function ut(){ee(he),ee(Te),ee(ke)}function mo(r){r.memoizedState!==null&&ue(je,r);var o=he.current,a=qy(o,r.type);o!==a&&(ue(Te,r),ue(he,a))}function ii(r){Te.current===r&&(ee(he),ee(Te)),je.current===r&&(ee(je),kl._currentValue=ye)}var ai,li;function ir(r){if(ai===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);ai=o&&o[1]||"",li=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ai+r+li}var ka=!1;function go(r,o){if(!r||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var $=K}Reflect.construct(r,[],te)}else{try{te.call()}catch(K){$=K}r.call(te.prototype)}}else{try{throw Error()}catch(K){$=K}(te=r())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],I=y[1];if(S&&I){var P=S.split(`
`),B=I.split(`
`);for(g=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(u===P.length||g===B.length)for(u=P.length-1,g=B.length-1;1<=u&&0<=g&&P[u]!==B[g];)g--;for(;1<=u&&0<=g;u--,g--)if(P[u]!==B[g]){if(u!==1||g!==1)do if(u--,g--,0>g||P[u]!==B[g]){var Q=`
`+P[u].replace(" at new "," at ");return r.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",r.displayName)),Q}while(1<=u&&0<=g);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?ir(a):""}function Na(r,o){switch(r.tag){case 26:case 27:case 5:return ir(r.type);case 16:return ir("Lazy");case 13:return r.child!==o&&o!==null?ir("Suspense Fallback"):ir("Suspense");case 19:return ir("SuspenseList");case 0:case 15:return go(r.type,!1);case 11:return go(r.type.render,!1);case 1:return go(r.type,!0);case 31:return ir("Activity");default:return""}}function xa(r){try{var o="",a=null;do o+=Na(r,a),a=r,r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,fs=n.unstable_cancelCallback,sh=n.unstable_shouldYield,vu=n.unstable_requestPaint,on=n.unstable_now,vo=n.unstable_getCurrentPriorityLevel,Oa=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,ps=n.unstable_NormalPriority,oh=n.unstable_LowPriority,yu=n.unstable_IdlePriority,bu=n.log,wu=n.unstable_setDisableYieldValue,Hn=null,Gt=null;function An(r){if(typeof bu=="function"&&wu(r),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Hn,r)}catch{}}var vt=Math.clz32?Math.clz32:Su,Eu=Math.log,ui=Math.LN2;function Su(r){return r>>>=0,r===0?32:31-(Eu(r)/ui|0)|0}var ar=256,yo=262144,Ct=4194304;function lr(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ur(r,o,a){var u=r.pendingLanes;if(u===0)return 0;var g=0,y=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?g=lr(u):(S&=I,S!==0?g=lr(S):a||(a=I&~r,a!==0&&(g=lr(a))))):(I=u&~y,I!==0?g=lr(I):S!==0?g=lr(S):a||(a=u&~r,a!==0&&(g=lr(a)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,a=o&-o,y>=a||y===32&&(a&4194048)!==0)?o:g}function zn(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ih(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tu(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function cr(r){for(var o=[],a=0;31>a;a++)o.push(r);return o}function bo(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ah(r,o,a,u,g,y){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var I=r.entanglements,P=r.expirationTimes,B=r.hiddenUpdates;for(a=S&~a;0<a;){var Q=31-vt(a),te=1<<Q;I[Q]=0,P[Q]=-1;var $=B[Q];if($!==null)for(B[Q]=null,Q=0;Q<$.length;Q++){var K=$[Q];K!==null&&(K.lane&=-536870913)}a&=~te}u!==0&&wo(r,u,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(S&~o))}function wo(r,o,a){r.pendingLanes|=o,r.suspendedLanes&=~o;var u=31-vt(o);r.entangledLanes|=o,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Pa(r,o){var a=r.entangledLanes|=o;for(r=r.entanglements;a;){var u=31-vt(a),g=1<<u;g&o|r[u]&o&&(r[u]|=o),a&=~g}}function Da(r,o){var a=o&-o;return a=(a&42)!==0?1:Eo(a),(a&(r.suspendedLanes|o))!==0?0:a}function Eo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Lr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Cu(){var r=le.p;return r!==0?r:(r=window.event,r===void 0?32:c0(r.type))}function Gn(r,o){var a=le.p;try{return le.p=r,o()}finally{le.p=a}}var Bn=Math.random().toString(36).slice(2),It="__reactFiber$"+Bn,jt="__reactProps$"+Bn,dr="__reactContainer$"+Bn,ci="__reactEvents$"+Bn,lh="__reactListeners$"+Bn,Iu="__reactHandles$"+Bn,Au="__reactResources$"+Bn,hr="__reactMarker$"+Bn;function di(r){delete r[It],delete r[jt],delete r[ci],delete r[lh],delete r[Iu]}function fr(r){var o=r[It];if(o)return o;for(var a=r.parentNode;a;){if(o=a[dr]||a[It]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(r=Wy(r);r!==null;){if(a=r[It])return a;r=Wy(r)}return o}r=a,a=r.parentNode}return null}function _n(r){if(r=r[It]||r[dr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function gn(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(s(33))}function pr(r){var o=r[Au];return o||(o=r[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function At(r){r[hr]=!0}var Ma=new Set,La={};function mr(r,o){gr(r,o),gr(r+"Capture",o)}function gr(r,o){for(La[r]=o,r=0;r<o.length;r++)Ma.add(o[r])}var Ua=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fa={},ja={};function _u(r){return Tt.call(ja,r)?!0:Tt.call(Fa,r)?!1:Ua.test(r)?ja[r]=!0:(Fa[r]=!0,!1)}function hi(r,o,a){if(_u(o))if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+a)}}function vn(r,o,a){if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+a)}}function _t(r,o,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(o,a,""+u)}}function Vt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ms(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Va(r,o,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,y.call(this,S)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ye(r){if(!r._valueTracker){var o=ms(r)?"checked":"value";r._valueTracker=Va(r,o,""+r[o])}}function So(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return r&&(u=ms(r)?r.checked?"true":"false":r.value),r=u,r!==a?(o.setValue(r),!0):!1}function vr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var To=/[\n"\\]/g;function yn(r){return r.replace(To,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fi(r,o,a,u,g,y,S,I){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),o!=null?S==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Vt(o)):r.value!==""+Vt(o)&&(r.value=""+Vt(o)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),o!=null?qa(r,S,Vt(o)):a!=null?qa(r,S,Vt(a)):u!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+Vt(I):r.removeAttribute("name")}function ku(r,o,a,u,g,y,S,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),o!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){Ye(r);return}a=a!=null?""+Vt(a):"",o=o!=null?""+Vt(o):a,I||o===r.value||(r.value=o),r.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ye(r)}function qa(r,o,a){o==="number"&&vr(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function gs(r,o,a,u){if(r=r.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<r.length;a++)g=o.hasOwnProperty("$"+r[a].value),r[a].selected!==g&&(r[a].selected=g),g&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Vt(a),o=null,g=0;g<r.length;g++){if(r[g].value===a){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function Nu(r,o,a){if(o!=null&&(o=""+Vt(o),o!==r.value&&(r.value=o),a==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=a!=null?""+Vt(a):""}function vs(r,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(pt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Vt(o),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ye(r)}function un(r,o){if(o){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=o;return}}r.textContent=o}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ha(r,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":u?r.setProperty(o,a):typeof a!="number"||a===0||xu.has(o)?o==="float"?r.cssFloat=a:r[o]=(""+a).trim():r[o]=a+"px"}function za(r,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&Ha(r,g,u)}else for(var y in o)o.hasOwnProperty(y)&&Ha(r,y,o[y])}function pi(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(r){return ys.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function $n(){}var Ga=null;function kn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var bs=null,yr=null;function Co(r){var o=_n(r);if(o&&(r=o.stateNode)){var a=r[jt]||null;e:switch(r=o.stateNode,o.type){case"input":if(fi(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==r&&u.form===r.form){var g=u[jt]||null;if(!g)throw Error(s(90));fi(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===r.form&&So(u)}break e;case"textarea":Nu(r,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&gs(r,!!a.multiple,o,!1)}}}var gi=!1;function ws(r,o,a){if(gi)return r(o,a);gi=!0;try{var u=r(o);return u}finally{if(gi=!1,(bs!==null||yr!==null)&&(Cc(),bs&&(o=bs,r=yr,yr=bs=null,Co(o),r)))for(o=0;o<r.length;o++)Co(r[o])}}function Jn(r,o){var a=r.stateNode;if(a===null)return null;var u=a[jt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=!1;if(Nn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Io=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Io=!1}var br=null,Ba=null,Ao=null;function $a(){if(Ao)return Ao;var r,o=Ba,a=o.length,u,g="value"in br?br.value:br.textContent,y=g.length;for(r=0;r<a&&o[r]===g[r];r++);var S=a-r;for(u=1;u<=S&&o[a-u]===g[y-u];u++);return Ao=g.slice(r,1<u?1-u:void 0)}function _o(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ur(){return!0}function Wn(){return!1}function Bt(r){function o(a,u,g,y,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(a=r[I],this[I]=a?a(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ur:Wn,this.isPropagationStopped=Wn,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=Bt(Fr),Es=E({},Fr,{view:0,detail:0}),Ja=Bt(Es),Ss,vi,Er,yi=E({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Er&&(Er&&r.type==="mousemove"?(Ss=r.screenX-Er.screenX,vi=r.screenY-Er.screenY):vi=Ss=0,Er=r),Ss)},movementY:function(r){return"movementY"in r?r.movementY:vi}}),Wa=Bt(yi),ko=E({},yi,{dataTransfer:0}),Ru=Bt(ko),Pu=E({},Es,{relatedTarget:0}),No=Bt(Pu),Ka=E({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=Bt(Ka),bi=E({},Fr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Mu=Bt(bi),Lu=E({},Fr,{data:0}),Sr=Bt(Lu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=ju[r])?!!o[r]:!1}function Ts(){return Vu}var an=E({},Es,{key:function(r){if(r.key){var o=Uu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=_o(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(r){return r.type==="keypress"?_o(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?_o(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qu=Bt(an),Hu=E({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jr=Bt(Hu),p=E({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),w=Bt(p),T=E({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Bt(T),z=E({},yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Bt(z),ae=E({},Fr,{newState:0,oldState:0}),Ne=Bt(ae),yt=[9,13,27,32],Qe=Nn&&"CompositionEvent"in window,ct=null;Nn&&"documentMode"in document&&(ct=document.documentMode);var xn=Nn&&"TextEvent"in window&&!ct,Vr=Nn&&(!Qe||ct&&8<ct&&11>=ct),Kn=" ",Yn=!1;function xo(r,o){switch(r){case"keyup":return yt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wi(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ei=!1;function DC(r,o){switch(r){case"compositionend":return wi(o);case"keypress":return o.which!==32?null:(Yn=!0,Kn);case"textInput":return r=o.data,r===Kn&&Yn?null:r;default:return null}}function MC(r,o){if(Ei)return r==="compositionend"||!Qe&&xo(r,o)?(r=$a(),Ao=Ba=br=null,Ei=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vr&&o.locale!=="ko"?null:o.data;default:return null}}var LC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!LC[r.type]:o==="textarea"}function Xm(r,o,a,u){bs?yr?yr.push(u):yr=[u]:bs=u,o=Oc(o,"onChange"),0<o.length&&(a=new wr("onChange","change",null,a,u),r.push({event:a,listeners:o}))}var Ya=null,Qa=null;function UC(r){Dy(r,0)}function zu(r){var o=gn(r);if(So(o))return r}function Zm(r,o){if(r==="change")return o}var eg=!1;if(Nn){var uh;if(Nn){var ch="oninput"in document;if(!ch){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),ch=typeof tg.oninput=="function"}uh=ch}else uh=!1;eg=uh&&(!document.documentMode||9<document.documentMode)}function ng(){Ya&&(Ya.detachEvent("onpropertychange",rg),Qa=Ya=null)}function rg(r){if(r.propertyName==="value"&&zu(Qa)){var o=[];Xm(o,Qa,r,kn(r)),ws(UC,o)}}function FC(r,o,a){r==="focusin"?(ng(),Ya=o,Qa=a,Ya.attachEvent("onpropertychange",rg)):r==="focusout"&&ng()}function jC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return zu(Qa)}function VC(r,o){if(r==="click")return zu(o)}function qC(r,o){if(r==="input"||r==="change")return zu(o)}function HC(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var bn=typeof Object.is=="function"?Object.is:HC;function Xa(r,o){if(bn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var a=Object.keys(r),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Tt.call(o,g)||!bn(r[g],o[g]))return!1}return!0}function sg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function og(r,o){var a=sg(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=o&&u>=o)return{node:a,offset:o-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sg(a)}}function ig(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?ig(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function ag(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=vr(r.document);o instanceof r.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)r=o.contentWindow;else break;o=vr(r.document)}return o}function dh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var zC=Nn&&"documentMode"in document&&11>=document.documentMode,Si=null,hh=null,Za=null,fh=!1;function lg(r,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||Si==null||Si!==vr(u)||(u=Si,"selectionStart"in u&&dh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Za&&Xa(Za,u)||(Za=u,u=Oc(hh,"onSelect"),0<u.length&&(o=new wr("onSelect","select",null,o,a),r.push({event:o,listeners:u}),o.target=Si)))}function Oo(r,o){var a={};return a[r.toLowerCase()]=o.toLowerCase(),a["Webkit"+r]="webkit"+o,a["Moz"+r]="moz"+o,a}var Ti={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},ph={},ug={};Nn&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Ro(r){if(ph[r])return ph[r];if(!Ti[r])return r;var o=Ti[r],a;for(a in o)if(o.hasOwnProperty(a)&&a in ug)return ph[r]=o[a];return r}var cg=Ro("animationend"),dg=Ro("animationiteration"),hg=Ro("animationstart"),GC=Ro("transitionrun"),BC=Ro("transitionstart"),$C=Ro("transitioncancel"),fg=Ro("transitionend"),pg=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Qn(r,o){pg.set(r,o),mr(o,[r])}var Gu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},On=[],Ci=0,gh=0;function Bu(){for(var r=Ci,o=gh=Ci=0;o<r;){var a=On[o];On[o++]=null;var u=On[o];On[o++]=null;var g=On[o];On[o++]=null;var y=On[o];if(On[o++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&mg(a,g,y)}}function $u(r,o,a,u){On[Ci++]=r,On[Ci++]=o,On[Ci++]=a,On[Ci++]=u,gh|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function vh(r,o,a,u){return $u(r,o,a,u),Ju(r)}function Po(r,o){return $u(r,null,null,o),Ju(r)}function mg(r,o,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=r.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&o!==null&&(g=31-vt(a),r=y.hiddenUpdates,u=r[g],u===null?r[g]=[o]:u.push(o),o.lane=a|536870912),y):null}function Ju(r){if(50<El)throw El=0,_f=null,Error(s(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ii={};function JC(r,o,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(r,o,a,u){return new JC(r,o,a,u)}function yh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function qr(r,o){var a=r.alternate;return a===null?(a=wn(r.tag,o,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=o,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,o=r.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function gg(r,o){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,o=a.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Wu(r,o,a,u,g,y){var S=0;if(u=r,typeof r=="function")yh(r)&&(S=1);else if(typeof r=="string")S=XI(r,a,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case k:return r=wn(31,a,o,g),r.elementType=k,r.lanes=y,r;case L:return Do(a.children,g,y,o);case q:S=8,g|=24;break;case J:return r=wn(12,a,o,g|2),r.elementType=J,r.lanes=y,r;case pe:return r=wn(13,a,o,g),r.elementType=pe,r.lanes=y,r;case re:return r=wn(19,a,o,g),r.elementType=re,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case se:S=10;break e;case Z:S=9;break e;case ie:S=11;break e;case x:S=14;break e;case _:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return o=wn(S,a,o,g),o.elementType=r,o.type=u,o.lanes=y,o}function Do(r,o,a,u){return r=wn(7,r,u,o),r.lanes=a,r}function bh(r,o,a){return r=wn(6,r,null,o),r.lanes=a,r}function vg(r){var o=wn(18,null,null,0);return o.stateNode=r,o}function wh(r,o,a){return o=wn(4,r.children!==null?r.children:[],r.key,o),o.lanes=a,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var yg=new WeakMap;function Rn(r,o){if(typeof r=="object"&&r!==null){var a=yg.get(r);return a!==void 0?a:(o={value:r,source:o,stack:xa(o)},yg.set(r,o),o)}return{value:r,source:o,stack:xa(o)}}var Ai=[],_i=0,Ku=null,el=0,Pn=[],Dn=0,Cs=null,Tr=1,Cr="";function Hr(r,o){Ai[_i++]=el,Ai[_i++]=Ku,Ku=r,el=o}function bg(r,o,a){Pn[Dn++]=Tr,Pn[Dn++]=Cr,Pn[Dn++]=Cs,Cs=r;var u=Tr;r=Cr;var g=32-vt(u)-1;u&=~(1<<g),a+=1;var y=32-vt(o)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Tr=1<<32-vt(o)+g|a<<g|u,Cr=y+r}else Tr=1<<y|a<<g|u,Cr=r}function Eh(r){r.return!==null&&(Hr(r,1),bg(r,1,0))}function Sh(r){for(;r===Ku;)Ku=Ai[--_i],Ai[_i]=null,el=Ai[--_i],Ai[_i]=null;for(;r===Cs;)Cs=Pn[--Dn],Pn[Dn]=null,Cr=Pn[--Dn],Pn[Dn]=null,Tr=Pn[--Dn],Pn[Dn]=null}function wg(r,o){Pn[Dn++]=Tr,Pn[Dn++]=Cr,Pn[Dn++]=Cs,Tr=o.id,Cr=o.overflow,Cs=r}var $t=null,ot=null,Fe=!1,Is=null,Mn=!1,Th=Error(s(519));function As(r){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Rn(o,r)),Th}function Eg(r){var o=r.stateNode,a=r.type,u=r.memoizedProps;switch(o[It]=r,o[jt]=u,a){case"dialog":Re("cancel",o),Re("close",o);break;case"iframe":case"object":case"embed":Re("load",o);break;case"video":case"audio":for(a=0;a<Tl.length;a++)Re(Tl[a],o);break;case"source":Re("error",o);break;case"img":case"image":case"link":Re("error",o),Re("load",o);break;case"details":Re("toggle",o);break;case"input":Re("invalid",o),ku(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Re("invalid",o);break;case"textarea":Re("invalid",o),vs(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Fy(o.textContent,a)?(u.popover!=null&&(Re("beforetoggle",o),Re("toggle",o)),u.onScroll!=null&&Re("scroll",o),u.onScrollEnd!=null&&Re("scrollend",o),u.onClick!=null&&(o.onclick=$n),o=!0):o=!1,o||As(r,!0)}function Sg(r){for($t=r.return;$t;)switch($t.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:$t=$t.return}}function ki(r){if(r!==$t)return!1;if(!Fe)return Sg(r),Fe=!0,!1;var o=r.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Hf(r.type,r.memoizedProps)),a=!a),a&&ot&&As(r),Sg(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=Jy(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=Jy(r)}else o===27?(o=ot,Vs(r.type)?(r=Jf,Jf=null,ot=r):ot=o):ot=$t?Ln(r.stateNode.nextSibling):null;return!0}function Mo(){ot=$t=null,Fe=!1}function Ch(){var r=Is;return r!==null&&(fn===null?fn=r:fn.push.apply(fn,r),Is=null),r}function tl(r){Is===null?Is=[r]:Is.push(r)}var Ih=j(null),Lo=null,zr=null;function _s(r,o,a){ue(Ih,o._currentValue),o._currentValue=a}function Gr(r){r._currentValue=Ih.current,ee(Ih)}function Ah(r,o,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),r===a)break;r=r.return}}function _h(r,o,a,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var P=0;P<o.length;P++)if(I.context===o[P]){y.lanes|=a,I=y.alternate,I!==null&&(I.lanes|=a),Ah(y.return,a,r),u||(S=null);break e}y=I.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=a,y=S.alternate,y!==null&&(y.lanes|=a),Ah(S,a,r),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===r){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Ni(r,o,a,u){r=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=g.type;bn(g.pendingProps.value,S.value)||(r!==null?r.push(I):r=[I])}}else if(g===je.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(kl):r=[kl])}g=g.return}r!==null&&_h(o,r,a,u),o.flags|=262144}function Yu(r){for(r=r.firstContext;r!==null;){if(!bn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Uo(r){Lo=r,zr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Jt(r){return Tg(Lo,r)}function Qu(r,o){return Lo===null&&Uo(r),Tg(r,o)}function Tg(r,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},zr===null){if(r===null)throw Error(s(308));zr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else zr=zr.next=o;return a}var WC=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){o.aborted=!0,r.forEach(function(a){return a()})}},KC=n.unstable_scheduleCallback,YC=n.unstable_NormalPriority,kt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new WC,data:new Map,refCount:0}}function nl(r){r.refCount--,r.refCount===0&&KC(YC,function(){r.controller.abort()})}var rl=null,Nh=0,xi=0,Oi=null;function QC(r,o){if(rl===null){var a=rl=[];Nh=0,xi=Pf(),Oi={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Nh++,o.then(Cg,Cg),o}function Cg(){if(--Nh===0&&rl!==null){Oi!==null&&(Oi.status="fulfilled");var r=rl;rl=null,xi=0,Oi=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function XC(r,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return r.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Ig=Y.S;Y.S=function(r,o){ly=on(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&QC(r,o),Ig!==null&&Ig(r,o)};var Fo=j(null);function xh(){var r=Fo.current;return r!==null?r:st.pooledCache}function Xu(r,o){o===null?ue(Fo,Fo.current):ue(Fo,o.pool)}function Ag(){var r=xh();return r===null?null:{parent:kt._currentValue,pool:r}}var Ri=Error(s(460)),Oh=Error(s(474)),Zu=Error(s(542)),ec={then:function(){}};function _g(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kg(r,o,a){switch(a=r[a],a===void 0?r.push(o):a!==o&&(o.then($n,$n),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,xg(r),r;default:if(typeof o.status=="string")o.then($n,$n);else{if(r=st,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=o,r.status="pending",r.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,xg(r),r}throw Vo=o,Ri}}function jo(r){try{var o=r._init;return o(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Vo=a,Ri):a}}var Vo=null;function Ng(){if(Vo===null)throw Error(s(459));var r=Vo;return Vo=null,r}function xg(r){if(r===Ri||r===Zu)throw Error(s(483))}var Pi=null,sl=0;function tc(r){var o=sl;return sl+=1,Pi===null&&(Pi=[]),kg(Pi,r,o)}function ol(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function nc(r,o){throw o.$$typeof===C?Error(s(525)):(r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Og(r){function o(V,U){if(r){var G=V.deletions;G===null?(V.deletions=[U],V.flags|=16):G.push(U)}}function a(V,U){if(!r)return null;for(;U!==null;)o(V,U),U=U.sibling;return null}function u(V){for(var U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function g(V,U){return V=qr(V,U),V.index=0,V.sibling=null,V}function y(V,U,G){return V.index=G,r?(G=V.alternate,G!==null?(G=G.index,G<U?(V.flags|=67108866,U):G):(V.flags|=67108866,U)):(V.flags|=1048576,U)}function S(V){return r&&V.alternate===null&&(V.flags|=67108866),V}function I(V,U,G,X){return U===null||U.tag!==6?(U=bh(G,V.mode,X),U.return=V,U):(U=g(U,G),U.return=V,U)}function P(V,U,G,X){var ve=G.type;return ve===L?Q(V,U,G.props.children,X,G.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===_&&jo(ve)===U.type)?(U=g(U,G.props),ol(U,G),U.return=V,U):(U=Wu(G.type,G.key,G.props,null,V.mode,X),ol(U,G),U.return=V,U)}function B(V,U,G,X){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=wh(G,V.mode,X),U.return=V,U):(U=g(U,G.children||[]),U.return=V,U)}function Q(V,U,G,X,ve){return U===null||U.tag!==7?(U=Do(G,V.mode,X,ve),U.return=V,U):(U=g(U,G),U.return=V,U)}function te(V,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=bh(""+U,V.mode,G),U.return=V,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return G=Wu(U.type,U.key,U.props,null,V.mode,G),ol(G,U),G.return=V,G;case H:return U=wh(U,V.mode,G),U.return=V,U;case _:return U=jo(U),te(V,U,G)}if(pt(U)||F(U))return U=Do(U,V.mode,G,null),U.return=V,U;if(typeof U.then=="function")return te(V,tc(U),G);if(U.$$typeof===se)return te(V,Qu(V,U),G);nc(V,U)}return null}function $(V,U,G,X){var ve=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ve!==null?null:I(V,U,""+G,X);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return G.key===ve?P(V,U,G,X):null;case H:return G.key===ve?B(V,U,G,X):null;case _:return G=jo(G),$(V,U,G,X)}if(pt(G)||F(G))return ve!==null?null:Q(V,U,G,X,null);if(typeof G.then=="function")return $(V,U,tc(G),X);if(G.$$typeof===se)return $(V,U,Qu(V,G),X);nc(V,G)}return null}function K(V,U,G,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return V=V.get(G)||null,I(U,V,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return V=V.get(X.key===null?G:X.key)||null,P(U,V,X,ve);case H:return V=V.get(X.key===null?G:X.key)||null,B(U,V,X,ve);case _:return X=jo(X),K(V,U,G,X,ve)}if(pt(X)||F(X))return V=V.get(G)||null,Q(U,V,X,ve,null);if(typeof X.then=="function")return K(V,U,G,tc(X),ve);if(X.$$typeof===se)return K(V,U,G,Qu(U,X),ve);nc(U,X)}return null}function fe(V,U,G,X){for(var ve=null,ze=null,me=U,xe=U=0,De=null;me!==null&&xe<G.length;xe++){me.index>xe?(De=me,me=null):De=me.sibling;var Ge=$(V,me,G[xe],X);if(Ge===null){me===null&&(me=De);break}r&&me&&Ge.alternate===null&&o(V,me),U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge,me=De}if(xe===G.length)return a(V,me),Fe&&Hr(V,xe),ve;if(me===null){for(;xe<G.length;xe++)me=te(V,G[xe],X),me!==null&&(U=y(me,U,xe),ze===null?ve=me:ze.sibling=me,ze=me);return Fe&&Hr(V,xe),ve}for(me=u(me);xe<G.length;xe++)De=K(me,V,xe,G[xe],X),De!==null&&(r&&De.alternate!==null&&me.delete(De.key===null?xe:De.key),U=y(De,U,xe),ze===null?ve=De:ze.sibling=De,ze=De);return r&&me.forEach(function(Bs){return o(V,Bs)}),Fe&&Hr(V,xe),ve}function we(V,U,G,X){if(G==null)throw Error(s(151));for(var ve=null,ze=null,me=U,xe=U=0,De=null,Ge=G.next();me!==null&&!Ge.done;xe++,Ge=G.next()){me.index>xe?(De=me,me=null):De=me.sibling;var Bs=$(V,me,Ge.value,X);if(Bs===null){me===null&&(me=De);break}r&&me&&Bs.alternate===null&&o(V,me),U=y(Bs,U,xe),ze===null?ve=Bs:ze.sibling=Bs,ze=Bs,me=De}if(Ge.done)return a(V,me),Fe&&Hr(V,xe),ve;if(me===null){for(;!Ge.done;xe++,Ge=G.next())Ge=te(V,Ge.value,X),Ge!==null&&(U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge);return Fe&&Hr(V,xe),ve}for(me=u(me);!Ge.done;xe++,Ge=G.next())Ge=K(me,V,xe,Ge.value,X),Ge!==null&&(r&&Ge.alternate!==null&&me.delete(Ge.key===null?xe:Ge.key),U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge);return r&&me.forEach(function(uA){return o(V,uA)}),Fe&&Hr(V,xe),ve}function rt(V,U,G,X){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N:e:{for(var ve=G.key;U!==null;){if(U.key===ve){if(ve=G.type,ve===L){if(U.tag===7){a(V,U.sibling),X=g(U,G.props.children),X.return=V,V=X;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===_&&jo(ve)===U.type){a(V,U.sibling),X=g(U,G.props),ol(X,G),X.return=V,V=X;break e}a(V,U);break}else o(V,U);U=U.sibling}G.type===L?(X=Do(G.props.children,V.mode,X,G.key),X.return=V,V=X):(X=Wu(G.type,G.key,G.props,null,V.mode,X),ol(X,G),X.return=V,V=X)}return S(V);case H:e:{for(ve=G.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(V,U.sibling),X=g(U,G.children||[]),X.return=V,V=X;break e}else{a(V,U);break}else o(V,U);U=U.sibling}X=wh(G,V.mode,X),X.return=V,V=X}return S(V);case _:return G=jo(G),rt(V,U,G,X)}if(pt(G))return fe(V,U,G,X);if(F(G)){if(ve=F(G),typeof ve!="function")throw Error(s(150));return G=ve.call(G),we(V,U,G,X)}if(typeof G.then=="function")return rt(V,U,tc(G),X);if(G.$$typeof===se)return rt(V,U,Qu(V,G),X);nc(V,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(V,U.sibling),X=g(U,G),X.return=V,V=X):(a(V,U),X=bh(G,V.mode,X),X.return=V,V=X),S(V)):a(V,U)}return function(V,U,G,X){try{sl=0;var ve=rt(V,U,G,X);return Pi=null,ve}catch(me){if(me===Ri||me===Zu)throw me;var ze=wn(29,me,null,V.mode);return ze.lanes=X,ze.return=V,ze}finally{}}}var qo=Og(!0),Rg=Og(!1),ks=!1;function Rh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ph(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ns(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xs(r,o,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Ju(r),mg(r,null,a),o}return $u(r,u,o,a),Ju(r)}function il(r,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=r.pendingLanes,a|=u,o.lanes=a,Pa(r,a)}}function Dh(r,o){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,a=a.next}while(a!==null);y===null?g=y=o:y=y.next=o}else g=y=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=o:r.next=o,a.lastBaseUpdate=o}var Mh=!1;function al(){if(Mh){var r=Oi;if(r!==null)throw r}}function ll(r,o,a,u){Mh=!1;var g=r.updateQueue;ks=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var P=I,B=P.next;P.next=null,S===null?y=B:S.next=B,S=P;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,I=Q.lastBaseUpdate,I!==S&&(I===null?Q.firstBaseUpdate=B:I.next=B,Q.lastBaseUpdate=P))}if(y!==null){var te=g.baseState;S=0,Q=B=P=null,I=y;do{var $=I.lane&-536870913,K=$!==I.lane;if(K?(Pe&$)===$:(u&$)===$){$!==0&&$===xi&&(Mh=!0),Q!==null&&(Q=Q.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var fe=r,we=I;$=o;var rt=a;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){te=fe.call(rt,te,$);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,$=typeof fe=="function"?fe.call(rt,te,$):fe,$==null)break e;te=E({},te,$);break e;case 2:ks=!0}}$=I.callback,$!==null&&(r.flags|=64,K&&(r.flags|=8192),K=g.callbacks,K===null?g.callbacks=[$]:K.push($))}else K={lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Q===null?(B=Q=K,P=te):Q=Q.next=K,S|=$;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;K=I,I=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(P=te),g.baseState=P,g.firstBaseUpdate=B,g.lastBaseUpdate=Q,y===null&&(g.shared.lanes=0),Ms|=S,r.lanes=S,r.memoizedState=te}}function Pg(r,o){if(typeof r!="function")throw Error(s(191,r));r.call(o)}function Dg(r,o){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)Pg(a[r],o)}var Di=j(null),rc=j(0);function Mg(r,o){r=Zr,ue(rc,r),ue(Di,o),Zr=r|o.baseLanes}function Lh(){ue(rc,Zr),ue(Di,Di.current)}function Uh(){Zr=rc.current,ee(Di),ee(rc)}var En=j(null),Xn=null;function Os(r){var o=r.alternate;ue(bt,bt.current&1),ue(En,r),Xn===null&&(o===null||Di.current!==null||o.memoizedState!==null)&&(Xn=r)}function Fh(r){ue(bt,bt.current),ue(En,r),Xn===null&&(Xn=r)}function Lg(r){r.tag===22?(ue(bt,bt.current),ue(En,r),Xn===null&&(Xn=r)):Rs()}function Rs(){ue(bt,bt.current),ue(En,En.current)}function Sn(r){ee(En),Xn===r&&(Xn=null),ee(bt)}var bt=j(0);function sc(r){for(var o=r;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bf(a)||$f(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Br=0,_e=null,tt=null,Nt=null,oc=!1,Mi=!1,Ho=!1,ic=0,ul=0,Li=null,ZC=0;function mt(){throw Error(s(321))}function jh(r,o){if(o===null)return!1;for(var a=0;a<o.length&&a<r.length;a++)if(!bn(r[a],o[a]))return!1;return!0}function Vh(r,o,a,u,g,y){return Br=y,_e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=r===null||r.memoizedState===null?bv:tf,Ho=!1,y=a(u,g),Ho=!1,Mi&&(y=Fg(o,a,u,g)),Ug(r),y}function Ug(r){Y.H=hl;var o=tt!==null&&tt.next!==null;if(Br=0,Nt=tt=_e=null,oc=!1,ul=0,Li=null,o)throw Error(s(300));r===null||xt||(r=r.dependencies,r!==null&&Yu(r)&&(xt=!0))}function Fg(r,o,a,u){_e=r;var g=0;do{if(Mi&&(Li=null),ul=0,Mi=!1,25<=g)throw Error(s(301));if(g+=1,Nt=tt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=wv,y=o(a,u)}while(Mi);return y}function eI(){var r=Y.H,o=r.useState()[0];return o=typeof o.then=="function"?cl(o):o,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(_e.flags|=1024),o}function qh(){var r=ic!==0;return ic=0,r}function Hh(r,o,a){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~a}function zh(r){if(oc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}oc=!1}Br=0,Nt=tt=_e=null,Mi=!1,ul=ic=0,Li=null}function ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?_e.memoizedState=Nt=r:Nt=Nt.next=r,Nt}function wt(){if(tt===null){var r=_e.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var o=Nt===null?_e.memoizedState:Nt.next;if(o!==null)Nt=o,tt=r;else{if(r===null)throw _e.alternate===null?Error(s(467)):Error(s(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?_e.memoizedState=Nt=r:Nt=Nt.next=r}return Nt}function ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(r){var o=ul;return ul+=1,Li===null&&(Li=[]),r=kg(Li,r,o),o=_e,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?bv:tf),r}function lc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return cl(r);if(r.$$typeof===se)return Jt(r)}throw Error(s(438,String(r)))}function Gh(r){var o=null,a=_e.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=ac(),_e.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(r),u=0;u<r;u++)a[u]=M;return o.index++,a}function $r(r,o){return typeof o=="function"?o(r):o}function uc(r){var o=wt();return Bh(o,tt,r)}function Bh(r,o,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=r.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}o.baseQueue=g=y,u.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{o=g.next;var I=S=null,P=null,B=o,Q=!1;do{var te=B.lane&-536870913;if(te!==B.lane?(Pe&te)===te:(Br&te)===te){var $=B.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),te===xi&&(Q=!0);else if((Br&$)===$){B=B.next,$===xi&&(Q=!0);continue}else te={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(I=P=te,S=y):P=P.next=te,_e.lanes|=$,Ms|=$;te=B.action,Ho&&a(y,te),y=B.hasEagerState?B.eagerState:a(y,te)}else $={lane:te,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(I=P=$,S=y):P=P.next=$,_e.lanes|=te,Ms|=te;B=B.next}while(B!==null&&B!==o);if(P===null?S=y:P.next=I,!bn(y,r.memoizedState)&&(xt=!0,Q&&(a=Oi,a!==null)))throw a;r.memoizedState=y,r.baseState=S,r.baseQueue=P,u.lastRenderedState=y}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function $h(r){var o=wt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,g=a.pending,y=o.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do y=r(y,S.action),S=S.next;while(S!==g);bn(y,o.memoizedState)||(xt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),a.lastRenderedState=y}return[y,u]}function jg(r,o,a){var u=_e,g=wt(),y=Fe;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=o();var S=!bn((tt||g).memoizedState,a);if(S&&(g.memoizedState=a,xt=!0),g=g.queue,Kh(Hg.bind(null,u,g,r),[r]),g.getSnapshot!==o||S||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Ui(9,{destroy:void 0},qg.bind(null,u,g,a,o),null),st===null)throw Error(s(349));y||(Br&127)!==0||Vg(u,o,a)}return a}function Vg(r,o,a){r.flags|=16384,r={getSnapshot:o,value:a},o=_e.updateQueue,o===null?(o=ac(),_e.updateQueue=o,o.stores=[r]):(a=o.stores,a===null?o.stores=[r]:a.push(r))}function qg(r,o,a,u){o.value=a,o.getSnapshot=u,zg(o)&&Gg(r)}function Hg(r,o,a){return a(function(){zg(o)&&Gg(r)})}function zg(r){var o=r.getSnapshot;r=r.value;try{var a=o();return!bn(r,a)}catch{return!0}}function Gg(r){var o=Po(r,2);o!==null&&pn(o,r,2)}function Jh(r){var o=ln();if(typeof r=="function"){var a=r;if(r=a(),Ho){An(!0);try{a()}finally{An(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:r},o}function Bg(r,o,a,u){return r.baseState=a,Bh(r,tt,typeof u=="function"?u:$r)}function tI(r,o,a,u,g){if(hc(r))throw Error(s(485));if(r=o.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};Y.T!==null?a(!0):y.isTransition=!1,u(y),a=o.pending,a===null?(y.next=o.pending=y,$g(o,y)):(y.next=a.next,o.pending=a.next=y)}}function $g(r,o){var a=o.action,u=o.payload,g=r.state;if(o.isTransition){var y=Y.T,S={};Y.T=S;try{var I=a(g,u),P=Y.S;P!==null&&P(S,I),Jg(r,o,I)}catch(B){Wh(r,o,B)}finally{y!==null&&S.types!==null&&(y.types=S.types),Y.T=y}}else try{y=a(g,u),Jg(r,o,y)}catch(B){Wh(r,o,B)}}function Jg(r,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Wg(r,o,u)},function(u){return Wh(r,o,u)}):Wg(r,o,a)}function Wg(r,o,a){o.status="fulfilled",o.value=a,Kg(o),r.state=a,o=r.pending,o!==null&&(a=o.next,a===o?r.pending=null:(a=a.next,o.next=a,$g(r,a)))}function Wh(r,o,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,Kg(o),o=o.next;while(o!==u)}r.action=null}function Kg(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Yg(r,o){return o}function Qg(r,o){if(Fe){var a=st.formState;if(a!==null){e:{var u=_e;if(Fe){if(ot){t:{for(var g=ot,y=Mn;g.nodeType!==8;){if(!y){g=null;break t}if(g=Ln(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){ot=Ln(g.nextSibling),u=g.data==="F!";break e}}As(u)}u=!1}u&&(o=a[0])}}return a=ln(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:o},a.queue=u,a=gv.bind(null,_e,u),u.dispatch=a,u=Jh(!1),y=ef.bind(null,_e,!1,u.queue),u=ln(),g={state:o,dispatch:null,action:r,pending:null},u.queue=g,a=tI.bind(null,_e,g,y,a),g.dispatch=a,u.memoizedState=r,[o,a,!1]}function Xg(r){var o=wt();return Zg(o,tt,r)}function Zg(r,o,a){if(o=Bh(r,o,Yg)[0],r=uc($r)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=cl(o)}catch(S){throw S===Ri?Zu:S}else u=o;o=wt();var g=o.queue,y=g.dispatch;return a!==o.memoizedState&&(_e.flags|=2048,Ui(9,{destroy:void 0},nI.bind(null,g,a),null)),[u,y,r]}function nI(r,o){r.action=o}function ev(r){var o=wt(),a=tt;if(a!==null)return Zg(o,a,r);wt(),o=o.memoizedState,a=wt();var u=a.queue.dispatch;return a.memoizedState=r,[o,u,!1]}function Ui(r,o,a,u){return r={tag:r,create:a,deps:u,inst:o,next:null},o=_e.updateQueue,o===null&&(o=ac(),_e.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,o.lastEffect=r),r}function tv(){return wt().memoizedState}function cc(r,o,a,u){var g=ln();_e.flags|=r,g.memoizedState=Ui(1|o,{destroy:void 0},a,u===void 0?null:u)}function dc(r,o,a,u){var g=wt();u=u===void 0?null:u;var y=g.memoizedState.inst;tt!==null&&u!==null&&jh(u,tt.memoizedState.deps)?g.memoizedState=Ui(o,y,a,u):(_e.flags|=r,g.memoizedState=Ui(1|o,y,a,u))}function nv(r,o){cc(8390656,8,r,o)}function Kh(r,o){dc(2048,8,r,o)}function rI(r){_e.flags|=4;var o=_e.updateQueue;if(o===null)o=ac(),_e.updateQueue=o,o.events=[r];else{var a=o.events;a===null?o.events=[r]:a.push(r)}}function rv(r){var o=wt().memoizedState;return rI({ref:o,nextImpl:r}),function(){if((Je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function sv(r,o){return dc(4,2,r,o)}function ov(r,o){return dc(4,4,r,o)}function iv(r,o){if(typeof o=="function"){r=r();var a=o(r);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function av(r,o,a){a=a!=null?a.concat([r]):null,dc(4,4,iv.bind(null,o,r),a)}function Yh(){}function lv(r,o){var a=wt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&jh(o,u[1])?u[0]:(a.memoizedState=[r,o],r)}function uv(r,o){var a=wt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&jh(o,u[1]))return u[0];if(u=r(),Ho){An(!0);try{r()}finally{An(!1)}}return a.memoizedState=[u,o],u}function Qh(r,o,a){return a===void 0||(Br&1073741824)!==0&&(Pe&261930)===0?r.memoizedState=o:(r.memoizedState=a,r=cy(),_e.lanes|=r,Ms|=r,a)}function cv(r,o,a,u){return bn(a,o)?a:Di.current!==null?(r=Qh(r,a,u),bn(r,o)||(xt=!0),r):(Br&42)===0||(Br&1073741824)!==0&&(Pe&261930)===0?(xt=!0,r.memoizedState=a):(r=cy(),_e.lanes|=r,Ms|=r,o)}function dv(r,o,a,u,g){var y=le.p;le.p=y!==0&&8>y?y:8;var S=Y.T,I={};Y.T=I,ef(r,!1,o,a);try{var P=g(),B=Y.S;if(B!==null&&B(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=XC(P,u);dl(r,o,Q,In(r))}else dl(r,o,u,In(r))}catch(te){dl(r,o,{then:function(){},status:"rejected",reason:te},In())}finally{le.p=y,S!==null&&I.types!==null&&(S.types=I.types),Y.T=S}}function sI(){}function Xh(r,o,a,u){if(r.tag!==5)throw Error(s(476));var g=hv(r).queue;dv(r,g,o,ye,a===null?sI:function(){return fv(r),a(u)})}function hv(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:ye},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:a},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function fv(r){var o=hv(r);o.next===null&&(o=r.alternate.memoizedState),dl(r,o.next.queue,{},In())}function Zh(){return Jt(kl)}function pv(){return wt().memoizedState}function mv(){return wt().memoizedState}function oI(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var a=In();r=Ns(a);var u=xs(o,r,a);u!==null&&(pn(u,o,a),il(u,o,a)),o={cache:kh()},r.payload=o;return}o=o.return}}function iI(r,o,a){var u=In();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hc(r)?vv(o,a):(a=vh(r,o,a,u),a!==null&&(pn(a,r,u),yv(a,o,u)))}function gv(r,o,a){var u=In();dl(r,o,a,u)}function dl(r,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(hc(r))vv(o,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,I=y(S,a);if(g.hasEagerState=!0,g.eagerState=I,bn(I,S))return $u(r,o,g,0),st===null&&Bu(),!1}catch{}finally{}if(a=vh(r,o,g,u),a!==null)return pn(a,r,u),yv(a,o,u),!0}return!1}function ef(r,o,a,u){if(u={lane:2,revertLane:Pf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hc(r)){if(o)throw Error(s(479))}else o=vh(r,a,u,2),o!==null&&pn(o,r,2)}function hc(r){var o=r.alternate;return r===_e||o!==null&&o===_e}function vv(r,o){Mi=oc=!0;var a=r.pending;a===null?o.next=o:(o.next=a.next,a.next=o),r.pending=o}function yv(r,o,a){if((a&4194048)!==0){var u=o.lanes;u&=r.pendingLanes,a|=u,o.lanes=a,Pa(r,a)}}var hl={readContext:Jt,use:lc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};hl.useEffectEvent=mt;var bv={readContext:Jt,use:lc,useCallback:function(r,o){return ln().memoizedState=[r,o===void 0?null:o],r},useContext:Jt,useEffect:nv,useImperativeHandle:function(r,o,a){a=a!=null?a.concat([r]):null,cc(4194308,4,iv.bind(null,o,r),a)},useLayoutEffect:function(r,o){return cc(4194308,4,r,o)},useInsertionEffect:function(r,o){cc(4,2,r,o)},useMemo:function(r,o){var a=ln();o=o===void 0?null:o;var u=r();if(Ho){An(!0);try{r()}finally{An(!1)}}return a.memoizedState=[u,o],u},useReducer:function(r,o,a){var u=ln();if(a!==void 0){var g=a(o);if(Ho){An(!0);try{a(o)}finally{An(!1)}}}else g=o;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=iI.bind(null,_e,r),[u.memoizedState,r]},useRef:function(r){var o=ln();return r={current:r},o.memoizedState=r},useState:function(r){r=Jh(r);var o=r.queue,a=gv.bind(null,_e,o);return o.dispatch=a,[r.memoizedState,a]},useDebugValue:Yh,useDeferredValue:function(r,o){var a=ln();return Qh(a,r,o)},useTransition:function(){var r=Jh(!1);return r=dv.bind(null,_e,r.queue,!0,!1),ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,a){var u=_e,g=ln();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),st===null)throw Error(s(349));(Pe&127)!==0||Vg(u,o,a)}g.memoizedState=a;var y={value:a,getSnapshot:o};return g.queue=y,nv(Hg.bind(null,u,y,r),[r]),u.flags|=2048,Ui(9,{destroy:void 0},qg.bind(null,u,y,a,o),null),a},useId:function(){var r=ln(),o=st.identifierPrefix;if(Fe){var a=Cr,u=Tr;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=ic++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=ZC++,o="_"+o+"r_"+a.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Zh,useFormState:Qg,useActionState:Qg,useOptimistic:function(r){var o=ln();o.memoizedState=o.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=ef.bind(null,_e,!0,a),a.dispatch=o,[r,o]},useMemoCache:Gh,useCacheRefresh:function(){return ln().memoizedState=oI.bind(null,_e)},useEffectEvent:function(r){var o=ln(),a={impl:r};return o.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:Jt,use:lc,useCallback:lv,useContext:Jt,useEffect:Kh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:uv,useReducer:uc,useRef:tv,useState:function(){return uc($r)},useDebugValue:Yh,useDeferredValue:function(r,o){var a=wt();return cv(a,tt.memoizedState,r,o)},useTransition:function(){var r=uc($r)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:cl(r),o]},useSyncExternalStore:jg,useId:pv,useHostTransitionStatus:Zh,useFormState:Xg,useActionState:Xg,useOptimistic:function(r,o){var a=wt();return Bg(a,tt,r,o)},useMemoCache:Gh,useCacheRefresh:mv};tf.useEffectEvent=rv;var wv={readContext:Jt,use:lc,useCallback:lv,useContext:Jt,useEffect:Kh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:uv,useReducer:$h,useRef:tv,useState:function(){return $h($r)},useDebugValue:Yh,useDeferredValue:function(r,o){var a=wt();return tt===null?Qh(a,r,o):cv(a,tt.memoizedState,r,o)},useTransition:function(){var r=$h($r)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:cl(r),o]},useSyncExternalStore:jg,useId:pv,useHostTransitionStatus:Zh,useFormState:ev,useActionState:ev,useOptimistic:function(r,o){var a=wt();return tt!==null?Bg(a,tt,r,o):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Gh,useCacheRefresh:mv};wv.useEffectEvent=rv;function nf(r,o,a,u){o=r.memoizedState,a=a(u,o),a=a==null?o:E({},o,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var rf={enqueueSetState:function(r,o,a){r=r._reactInternals;var u=In(),g=Ns(u);g.payload=o,a!=null&&(g.callback=a),o=xs(r,g,u),o!==null&&(pn(o,r,u),il(o,r,u))},enqueueReplaceState:function(r,o,a){r=r._reactInternals;var u=In(),g=Ns(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=xs(r,g,u),o!==null&&(pn(o,r,u),il(o,r,u))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var a=In(),u=Ns(a);u.tag=2,o!=null&&(u.callback=o),o=xs(r,u,a),o!==null&&(pn(o,r,a),il(o,r,a))}};function Ev(r,o,a,u,g,y,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,S):o.prototype&&o.prototype.isPureReactComponent?!Xa(a,u)||!Xa(g,y):!0}function Sv(r,o,a,u){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==r&&rf.enqueueReplaceState(o,o.state,null)}function zo(r,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(r=r.defaultProps){a===o&&(a=E({},a));for(var g in r)a[g]===void 0&&(a[g]=r[g])}return a}function Tv(r){Gu(r)}function Cv(r){console.error(r)}function Iv(r){Gu(r)}function fc(r,o){try{var a=r.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Av(r,o,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function sf(r,o,a){return a=Ns(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(r,o)},a}function _v(r){return r=Ns(r),r.tag=3,r}function kv(r,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;r.payload=function(){return g(y)},r.callback=function(){Av(o,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){Av(o,a,u),typeof g!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function aI(r,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&Ni(o,a,g,!0),a=En.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Ic():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===ec?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),xf(r,u,g)),!1;case 22:return a.flags|=65536,u===ec?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),xf(r,u,g)),!1}throw Error(s(435,a.tag))}return xf(r,u,g),Ic(),!1}if(Fe)return o=En.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==Th&&(r=Error(s(422),{cause:u}),tl(Rn(r,a)))):(u!==Th&&(o=Error(s(423),{cause:u}),tl(Rn(o,a))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=Rn(u,a),g=sf(r.stateNode,u,g),Dh(r,g),gt!==4&&(gt=2)),!1;var y=Error(s(520),{cause:u});if(y=Rn(y,a),wl===null?wl=[y]:wl.push(y),gt!==4&&(gt=2),o===null)return!0;u=Rn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,r=g&-g,a.lanes|=r,r=sf(a.stateNode,u,r),Dh(a,r),!1;case 1:if(o=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=_v(g),kv(g,r,a,u),Dh(a,g),!1}a=a.return}while(a!==null);return!1}var of=Error(s(461)),xt=!1;function Wt(r,o,a,u){o.child=r===null?Rg(o,null,a,u):qo(o,r.child,a,u)}function Nv(r,o,a,u,g){a=a.render;var y=o.ref;if("ref"in u){var S={};for(var I in u)I!=="ref"&&(S[I]=u[I])}else S=u;return Uo(o),u=Vh(r,o,a,S,y,g),I=qh(),r!==null&&!xt?(Hh(r,o,g),Jr(r,o,g)):(Fe&&I&&Eh(o),o.flags|=1,Wt(r,o,u,g),o.child)}function xv(r,o,a,u,g){if(r===null){var y=a.type;return typeof y=="function"&&!yh(y)&&y.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=y,Ov(r,o,y,u,g)):(r=Wu(a.type,null,u,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,!pf(r,g)){var S=y.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(S,u)&&r.ref===o.ref)return Jr(r,o,g)}return o.flags|=1,r=qr(y,u),r.ref=o.ref,r.return=o,o.child=r}function Ov(r,o,a,u,g){if(r!==null){var y=r.memoizedProps;if(Xa(y,u)&&r.ref===o.ref)if(xt=!1,o.pendingProps=u=y,pf(r,g))(r.flags&131072)!==0&&(xt=!0);else return o.lanes=r.lanes,Jr(r,o,g)}return af(r,o,a,u,g)}function Rv(r,o,a,u){var g=u.children,y=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,r!==null){for(u=o.child=r.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,o.child=null;return Pv(r,o,y,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Xu(o,y!==null?y.cachePool:null),y!==null?Mg(o,y):Lh(),Lg(o);else return u=o.lanes=536870912,Pv(r,o,y!==null?y.baseLanes|a:a,a,u)}else y!==null?(Xu(o,y.cachePool),Mg(o,y),Rs(),o.memoizedState=null):(r!==null&&Xu(o,null),Lh(),Rs());return Wt(r,o,g,a),o.child}function fl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Pv(r,o,a,u,g){var y=xh();return y=y===null?null:{parent:kt._currentValue,pool:y},o.memoizedState={baseLanes:a,cachePool:y},r!==null&&Xu(o,null),Lh(),Lg(o),r!==null&&Ni(r,o,u,!0),o.childLanes=g,null}function pc(r,o){return o=gc({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Dv(r,o,a){return qo(o,r.child,null,a),r=pc(o,o.pendingProps),r.flags|=2,Sn(o),o.memoizedState=null,r}function lI(r,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Fe){if(u.mode==="hidden")return r=pc(o,u),o.lanes=536870912,fl(null,r);if(Fh(o),(r=ot)?(r=$y(r,Mn),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Cs!==null?{id:Tr,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},a=vg(r),a.return=o,o.child=a,$t=o,ot=null)):r=null,r===null)throw As(o);return o.lanes=536870912,null}return pc(o,u)}var y=r.memoizedState;if(y!==null){var S=y.dehydrated;if(Fh(o),g)if(o.flags&256)o.flags&=-257,o=Dv(r,o,a);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(s(558));else if(xt||Ni(r,o,a,!1),g=(a&r.childLanes)!==0,xt||g){if(u=st,u!==null&&(S=Da(u,a),S!==0&&S!==y.retryLane))throw y.retryLane=S,Po(r,S),pn(u,r,S),of;Ic(),o=Dv(r,o,a)}else r=y.treeContext,ot=Ln(S.nextSibling),$t=o,Fe=!0,Is=null,Mn=!1,r!==null&&wg(o,r),o=pc(o,u),o.flags|=4096;return o}return r=qr(r.child,{mode:u.mode,children:u.children}),r.ref=o.ref,o.child=r,r.return=o,r}function mc(r,o){var a=o.ref;if(a===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(o.flags|=4194816)}}function af(r,o,a,u,g){return Uo(o),a=Vh(r,o,a,u,void 0,g),u=qh(),r!==null&&!xt?(Hh(r,o,g),Jr(r,o,g)):(Fe&&u&&Eh(o),o.flags|=1,Wt(r,o,a,g),o.child)}function Mv(r,o,a,u,g,y){return Uo(o),o.updateQueue=null,a=Fg(o,u,a,g),Ug(r),u=qh(),r!==null&&!xt?(Hh(r,o,y),Jr(r,o,y)):(Fe&&u&&Eh(o),o.flags|=1,Wt(r,o,a,y),o.child)}function Lv(r,o,a,u,g){if(Uo(o),o.stateNode===null){var y=Ii,S=a.contextType;typeof S=="object"&&S!==null&&(y=Jt(S)),y=new a(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rf,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},Rh(o),S=a.contextType,y.context=typeof S=="object"&&S!==null?Jt(S):Ii,y.state=o.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(nf(o,a,S,u),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&rf.enqueueReplaceState(y,y.state,null),ll(o,u,y,g),al(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(r===null){y=o.stateNode;var I=o.memoizedProps,P=zo(a,I);y.props=P;var B=y.context,Q=a.contextType;S=Ii,typeof Q=="object"&&Q!==null&&(S=Jt(Q));var te=a.getDerivedStateFromProps;Q=typeof te=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||B!==S)&&Sv(o,y,u,S),ks=!1;var $=o.memoizedState;y.state=$,ll(o,u,y,g),al(),B=o.memoizedState,I||$!==B||ks?(typeof te=="function"&&(nf(o,a,te,u),B=o.memoizedState),(P=ks||Ev(o,a,P,u,$,B,S))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=B),y.props=u,y.state=B,y.context=S,u=P):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,Ph(r,o),S=o.memoizedProps,Q=zo(a,S),y.props=Q,te=o.pendingProps,$=y.context,B=a.contextType,P=Ii,typeof B=="object"&&B!==null&&(P=Jt(B)),I=a.getDerivedStateFromProps,(B=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==te||$!==P)&&Sv(o,y,u,P),ks=!1,$=o.memoizedState,y.state=$,ll(o,u,y,g),al();var K=o.memoizedState;S!==te||$!==K||ks||r!==null&&r.dependencies!==null&&Yu(r.dependencies)?(typeof I=="function"&&(nf(o,a,I,u),K=o.memoizedState),(Q=ks||Ev(o,a,Q,u,$,K,P)||r!==null&&r.dependencies!==null&&Yu(r.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,K,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,K,P)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=K),y.props=u,y.state=K,y.context=P,u=Q):(typeof y.componentDidUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&$===r.memoizedState||(o.flags|=1024),u=!1)}return y=u,mc(r,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,r!==null&&u?(o.child=qo(o,r.child,null,g),o.child=qo(o,null,a,g)):Wt(r,o,a,g),o.memoizedState=y.state,r=o.child):r=Jr(r,o,g),r}function Uv(r,o,a,u){return Mo(),o.flags|=256,Wt(r,o,a,u),o.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(r){return{baseLanes:r,cachePool:Ag()}}function cf(r,o,a){return r=r!==null?r.childLanes&~a:0,o&&(r|=Cn),r}function Fv(r,o,a){var u=o.pendingProps,g=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=r!==null&&r.memoizedState===null?!1:(bt.current&2)!==0),S&&(g=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,r===null){if(Fe){if(g?Os(o):Rs(),(r=ot)?(r=$y(r,Mn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Cs!==null?{id:Tr,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},a=vg(r),a.return=o,o.child=a,$t=o,ot=null)):r=null,r===null)throw As(o);return $f(r)?o.lanes=32:o.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Rs(),g=o.mode,I=gc({mode:"hidden",children:I},g),u=Do(u,g,a,null),I.return=o,u.return=o,I.sibling=u,o.child=I,u=o.child,u.memoizedState=uf(a),u.childLanes=cf(r,S,a),o.memoizedState=lf,fl(null,u)):(Os(o),df(o,I))}var P=r.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(y)o.flags&256?(Os(o),o.flags&=-257,o=hf(r,o,a)):o.memoizedState!==null?(Rs(),o.child=r.child,o.flags|=128,o=null):(Rs(),I=u.fallback,g=o.mode,u=gc({mode:"visible",children:u.children},g),I=Do(I,g,a,null),I.flags|=2,u.return=o,I.return=o,u.sibling=I,o.child=u,qo(o,r.child,null,a),u=o.child,u.memoizedState=uf(a),u.childLanes=cf(r,S,a),o.memoizedState=lf,o=fl(null,u));else if(Os(o),$f(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var B=S.dgst;S=B,u=Error(s(419)),u.stack="",u.digest=S,tl({value:u,source:null,stack:null}),o=hf(r,o,a)}else if(xt||Ni(r,o,a,!1),S=(a&r.childLanes)!==0,xt||S){if(S=st,S!==null&&(u=Da(S,a),u!==0&&u!==P.retryLane))throw P.retryLane=u,Po(r,u),pn(S,r,u),of;Bf(I)||Ic(),o=hf(r,o,a)}else Bf(I)?(o.flags|=192,o.child=r.child,o=null):(r=P.treeContext,ot=Ln(I.nextSibling),$t=o,Fe=!0,Is=null,Mn=!1,r!==null&&wg(o,r),o=df(o,u.children),o.flags|=4096);return o}return g?(Rs(),I=u.fallback,g=o.mode,P=r.child,B=P.sibling,u=qr(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,B!==null?I=qr(B,I):(I=Do(I,g,a,null),I.flags|=2),I.return=o,u.return=o,u.sibling=I,o.child=u,fl(null,u),u=o.child,I=r.child.memoizedState,I===null?I=uf(a):(g=I.cachePool,g!==null?(P=kt._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=Ag(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=cf(r,S,a),o.memoizedState=lf,fl(r.child,u)):(Os(o),a=r.child,r=a.sibling,a=qr(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,r!==null&&(S=o.deletions,S===null?(o.deletions=[r],o.flags|=16):S.push(r)),o.child=a,o.memoizedState=null,a)}function df(r,o){return o=gc({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function gc(r,o){return r=wn(22,r,null,o),r.lanes=0,r}function hf(r,o,a){return qo(o,r.child,null,a),r=df(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function jv(r,o,a){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o),Ah(r.return,o,a)}function ff(r,o,a,u,g,y){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=y)}function Vv(r,o,a){var u=o.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var S=bt.current,I=(S&2)!==0;if(I?(S=S&1|2,o.flags|=128):S&=1,ue(bt,S),Wt(r,o,u,a),u=Fe?el:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&jv(r,a,o);else if(r.tag===19)jv(r,a,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)r=a.alternate,r!==null&&sc(r)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),ff(o,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&sc(r)===null){o.child=g;break}r=g.sibling,g.sibling=a,a=g,g=r}ff(o,!0,a,null,y,u);break;case"together":ff(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Jr(r,o,a){if(r!==null&&(o.dependencies=r.dependencies),Ms|=o.lanes,(a&o.childLanes)===0)if(r!==null){if(Ni(r,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,a=qr(r,r.pendingProps),o.child=a,a.return=o;r.sibling!==null;)r=r.sibling,a=a.sibling=qr(r,r.pendingProps),a.return=o;a.sibling=null}return o.child}function pf(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Yu(r)))}function uI(r,o,a){switch(o.tag){case 3:Dt(o,o.stateNode.containerInfo),_s(o,kt,r.memoizedState.cache),Mo();break;case 27:case 5:mo(o);break;case 4:Dt(o,o.stateNode.containerInfo);break;case 10:_s(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Fh(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Os(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Fv(r,o,a):(Os(o),r=Jr(r,o,a),r!==null?r.sibling:null);Os(o);break;case 19:var g=(r.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(Ni(r,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return Vv(r,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(bt,bt.current),u)break;return null;case 22:return o.lanes=0,Rv(r,o,a,o.pendingProps);case 24:_s(o,kt,r.memoizedState.cache)}return Jr(r,o,a)}function qv(r,o,a){if(r!==null)if(r.memoizedProps!==o.pendingProps)xt=!0;else{if(!pf(r,a)&&(o.flags&128)===0)return xt=!1,uI(r,o,a);xt=(r.flags&131072)!==0}else xt=!1,Fe&&(o.flags&1048576)!==0&&bg(o,el,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(r=jo(o.elementType),o.type=r,typeof r=="function")yh(r)?(u=zo(r,u),o.tag=1,o=Lv(null,o,r,u,a)):(o.tag=0,o=af(null,o,r,u,a));else{if(r!=null){var g=r.$$typeof;if(g===ie){o.tag=11,o=Nv(null,o,r,u,a);break e}else if(g===x){o.tag=14,o=xv(null,o,r,u,a);break e}}throw o=$e(r)||r,Error(s(306,o,""))}}return o;case 0:return af(r,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=zo(u,o.pendingProps),Lv(r,o,u,g,a);case 3:e:{if(Dt(o,o.stateNode.containerInfo),r===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;g=y.element,Ph(r,o),ll(o,u,null,a);var S=o.memoizedState;if(u=S.cache,_s(o,kt,u),u!==y.cache&&_h(o,[kt],a,!0),al(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Uv(r,o,u,a);break e}else if(u!==g){g=Rn(Error(s(424)),o),tl(g),o=Uv(r,o,u,a);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ot=Ln(r.firstChild),$t=o,Fe=!0,Is=null,Mn=!0,a=Rg(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),u===g){o=Jr(r,o,a);break e}Wt(r,o,u,a)}o=o.child}return o;case 26:return mc(r,o),r===null?(a=Xy(o.type,null,o.pendingProps,null))?o.memoizedState=a:Fe||(a=o.type,r=o.pendingProps,u=Rc(ke.current).createElement(a),u[It]=o,u[jt]=r,Kt(u,a,r),At(u),o.stateNode=u):o.memoizedState=Xy(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return mo(o),r===null&&Fe&&(u=o.stateNode=Ky(o.type,o.pendingProps,ke.current),$t=o,Mn=!0,g=ot,Vs(o.type)?(Jf=g,ot=Ln(u.firstChild)):ot=g),Wt(r,o,o.pendingProps.children,a),mc(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Fe&&((g=u=ot)&&(u=jI(u,o.type,o.pendingProps,Mn),u!==null?(o.stateNode=u,$t=o,ot=Ln(u.firstChild),Mn=!1,g=!0):g=!1),g||As(o)),mo(o),g=o.type,y=o.pendingProps,S=r!==null?r.memoizedProps:null,u=y.children,Hf(g,y)?u=null:S!==null&&Hf(g,S)&&(o.flags|=32),o.memoizedState!==null&&(g=Vh(r,o,eI,null,null,a),kl._currentValue=g),mc(r,o),Wt(r,o,u,a),o.child;case 6:return r===null&&Fe&&((r=a=ot)&&(a=VI(a,o.pendingProps,Mn),a!==null?(o.stateNode=a,$t=o,ot=null,r=!0):r=!1),r||As(o)),null;case 13:return Fv(r,o,a);case 4:return Dt(o,o.stateNode.containerInfo),u=o.pendingProps,r===null?o.child=qo(o,null,u,a):Wt(r,o,u,a),o.child;case 11:return Nv(r,o,o.type,o.pendingProps,a);case 7:return Wt(r,o,o.pendingProps,a),o.child;case 8:return Wt(r,o,o.pendingProps.children,a),o.child;case 12:return Wt(r,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,_s(o,o.type,u.value),Wt(r,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,Uo(o),g=Jt(g),u=u(g),o.flags|=1,Wt(r,o,u,a),o.child;case 14:return xv(r,o,o.type,o.pendingProps,a);case 15:return Ov(r,o,o.type,o.pendingProps,a);case 19:return Vv(r,o,a);case 31:return lI(r,o,a);case 22:return Rv(r,o,a,o.pendingProps);case 24:return Uo(o),u=Jt(kt),r===null?(g=xh(),g===null&&(g=st,y=kh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),o.memoizedState={parent:u,cache:g},Rh(o),_s(o,kt,g)):((r.lanes&a)!==0&&(Ph(r,o),ll(o,null,null,a),al()),g=r.memoizedState,y=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),_s(o,kt,u)):(u=y.cache,_s(o,kt,u),u!==g.cache&&_h(o,[kt],a,!0))),Wt(r,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Wr(r){r.flags|=4}function mf(r,o,a,u,g){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(py())r.flags|=8192;else throw Vo=ec,Oh}else r.flags&=-16777217}function Hv(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!r0(o))if(py())r.flags|=8192;else throw Vo=ec,Oh}function vc(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Tu():536870912,r.lanes|=o,qi|=o)}function pl(r,o){if(!Fe)switch(r.tailMode){case"hidden":o=r.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function it(r){var o=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(o)for(var g=r.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=a,o}function cI(r,o,a){var u=o.pendingProps;switch(Sh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(o),null;case 1:return it(o),null;case 3:return a=o.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Gr(kt),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(ki(o)?Wr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ch())),it(o),null;case 26:var g=o.type,y=o.memoizedState;return r===null?(Wr(o),y!==null?(it(o),Hv(o,y)):(it(o),mf(o,g,null,u,a))):y?y!==r.memoizedState?(Wr(o),it(o),Hv(o,y)):(it(o),o.flags&=-16777217):(r=r.memoizedProps,r!==u&&Wr(o),it(o),mf(o,g,r,u,a)),null;case 27:if(ii(o),a=ke.current,g=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&Wr(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return it(o),null}r=he.current,ki(o)?Eg(o):(r=Ky(g,u,a),o.stateNode=r,Wr(o))}return it(o),null;case 5:if(ii(o),g=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&Wr(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return it(o),null}if(y=he.current,ki(o))Eg(o);else{var S=Rc(ke.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}y[It]=o,y[jt]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(Kt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Wr(o)}}return it(o),mf(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,a),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==u&&Wr(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(r=ke.current,ki(o)){if(r=o.stateNode,a=o.memoizedProps,u=null,g=$t,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[It]=o,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Fy(r.nodeValue,a)),r||As(o,!0)}else r=Rc(r).createTextNode(u),r[It]=o,o.stateNode=r}return it(o),null;case 31:if(a=o.memoizedState,r===null||r.memoizedState!==null){if(u=ki(o),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[It]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;it(o),r=!1}else a=Ch(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return o.flags&256?(Sn(o),o):(Sn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return it(o),null;case 13:if(u=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=ki(o),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[It]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;it(o),g=!1}else g=Ch(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Sn(o),o):(Sn(o),null)}return Sn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==r&&a&&(o.child.flags|=8192),vc(o,o.updateQueue),it(o),null);case 4:return ut(),r===null&&Uf(o.stateNode.containerInfo),it(o),null;case 10:return Gr(o.type),it(o),null;case 19:if(ee(bt),u=o.memoizedState,u===null)return it(o),null;if(g=(o.flags&128)!==0,y=u.rendering,y===null)if(g)pl(u,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(y=sc(r),y!==null){for(o.flags|=128,pl(u,!1),r=y.updateQueue,o.updateQueue=r,vc(o,r),o.subtreeFlags=0,r=a,a=o.child;a!==null;)gg(a,r),a=a.sibling;return ue(bt,bt.current&1|2),Fe&&Hr(o,u.treeForkCount),o.child}r=r.sibling}u.tail!==null&&on()>Sc&&(o.flags|=128,g=!0,pl(u,!1),o.lanes=4194304)}else{if(!g)if(r=sc(y),r!==null){if(o.flags|=128,g=!0,r=r.updateQueue,o.updateQueue=r,vc(o,r),pl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Fe)return it(o),null}else 2*on()-u.renderingStartTime>Sc&&a!==536870912&&(o.flags|=128,g=!0,pl(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(r=u.last,r!==null?r.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=on(),r.sibling=null,a=bt.current,ue(bt,g?a&1|2:a&1),Fe&&Hr(o,u.treeForkCount),r):(it(o),null);case 22:case 23:return Sn(o),Uh(),u=o.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(it(o),o.subtreeFlags&6&&(o.flags|=8192)):it(o),a=o.updateQueue,a!==null&&vc(o,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),r!==null&&ee(Fo),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Gr(kt),it(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function dI(r,o){switch(Sh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Gr(kt),ut(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ii(o),null;case 31:if(o.memoizedState!==null){if(Sn(o),o.alternate===null)throw Error(s(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Sn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ee(bt),null;case 4:return ut(),null;case 10:return Gr(o.type),null;case 22:case 23:return Sn(o),Uh(),r!==null&&ee(Fo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Gr(kt),null;case 25:return null;default:return null}}function zv(r,o){switch(Sh(o),o.tag){case 3:Gr(kt),ut();break;case 26:case 27:case 5:ii(o);break;case 4:ut();break;case 31:o.memoizedState!==null&&Sn(o);break;case 13:Sn(o);break;case 19:ee(bt);break;case 10:Gr(o.type);break;case 22:case 23:Sn(o),Uh(),r!==null&&ee(Fo);break;case 24:Gr(kt)}}function ml(r,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&r)===r){u=void 0;var y=a.create,S=a.inst;u=y(),S.destroy=u}a=a.next}while(a!==g)}}catch(I){Ze(o,o.return,I)}}function Ps(r,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&r)===r){var S=u.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,g=o;var P=a,B=I;try{B()}catch(Q){Ze(g,P,Q)}}}u=u.next}while(u!==y)}}catch(Q){Ze(o,o.return,Q)}}function Gv(r){var o=r.updateQueue;if(o!==null){var a=r.stateNode;try{Dg(o,a)}catch(u){Ze(r,r.return,u)}}}function Bv(r,o,a){a.props=zo(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(r,o,u)}}function gl(r,o){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(g){Ze(r,o,g)}}function Ir(r,o){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ze(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ze(r,o,g)}else a.current=null}function $v(r){var o=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ze(r,r.return,g)}}function gf(r,o,a){try{var u=r.stateNode;PI(u,r.type,a,o),u[jt]=o}catch(g){Ze(r,r.return,g)}}function Jv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Vs(r.type)||r.tag===4}function vf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Vs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function yf(r,o,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(r),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=$n));else if(u!==4&&(u===27&&Vs(r.type)&&(a=r.stateNode,o=null),r=r.child,r!==null))for(yf(r,o,a),r=r.sibling;r!==null;)yf(r,o,a),r=r.sibling}function yc(r,o,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?a.insertBefore(r,o):a.appendChild(r);else if(u!==4&&(u===27&&Vs(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(yc(r,o,a),r=r.sibling;r!==null;)yc(r,o,a),r=r.sibling}function Wv(r){var o=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Kt(o,u,a),o[It]=r,o[jt]=a}catch(y){Ze(r,r.return,y)}}var Kr=!1,Ot=!1,bf=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function hI(r,o){if(r=r.containerInfo,Vf=jc,r=ag(r),dh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var S=0,I=-1,P=-1,B=0,Q=0,te=r,$=null;t:for(;;){for(var K;te!==a||g!==0&&te.nodeType!==3||(I=S+g),te!==y||u!==0&&te.nodeType!==3||(P=S+u),te.nodeType===3&&(S+=te.nodeValue.length),(K=te.firstChild)!==null;)$=te,te=K;for(;;){if(te===r)break t;if($===a&&++B===g&&(I=S),$===y&&++Q===u&&(P=S),(K=te.nextSibling)!==null)break;te=$,$=te.parentNode}te=K}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(qf={focusedElem:r,selectionRange:a},jc=!1,qt=o;qt!==null;)if(o=qt,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,qt=r;else for(;qt!==null;){switch(o=qt,y=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)g=r[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,a=o,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var fe=zo(a.type,g);r=u.getSnapshotBeforeUpdate(fe,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(we){Ze(a,a.return,we)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,a=r.nodeType,a===9)Gf(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Gf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=o.sibling,r!==null){r.return=o.return,qt=r;break}qt=o.return}}function Yv(r,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(r,a),u&4&&ml(5,a);break;case 1:if(Qr(r,a),u&4)if(r=a.stateNode,o===null)try{r.componentDidMount()}catch(S){Ze(a,a.return,S)}else{var g=zo(a.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Ze(a,a.return,S)}}u&64&&Gv(a),u&512&&gl(a,a.return);break;case 3:if(Qr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Dg(r,o)}catch(S){Ze(a,a.return,S)}}break;case 27:o===null&&u&4&&Wv(a);case 26:case 5:Qr(r,a),o===null&&u&4&&$v(a),u&512&&gl(a,a.return);break;case 12:Qr(r,a);break;case 31:Qr(r,a),u&4&&Zv(r,a);break;case 13:Qr(r,a),u&4&&ey(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=EI.bind(null,a),qI(r,a))));break;case 22:if(u=a.memoizedState!==null||Kr,!u){o=o!==null&&o.memoizedState!==null||Ot,g=Kr;var y=Ot;Kr=u,(Ot=o)&&!y?Xr(r,a,(a.subtreeFlags&8772)!==0):Qr(r,a),Kr=g,Ot=y}break;case 30:break;default:Qr(r,a)}}function Qv(r){var o=r.alternate;o!==null&&(r.alternate=null,Qv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&di(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,cn=!1;function Yr(r,o,a){for(a=a.child;a!==null;)Xv(r,o,a),a=a.sibling}function Xv(r,o,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:Ot||Ir(a,o),Yr(r,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Ir(a,o);var u=dt,g=cn;Vs(a.type)&&(dt=a.stateNode,cn=!1),Yr(r,o,a),Il(a.stateNode),dt=u,cn=g;break;case 5:Ot||Ir(a,o);case 6:if(u=dt,g=cn,dt=null,Yr(r,o,a),dt=u,cn=g,dt!==null)if(cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(y){Ze(a,o,y)}else try{dt.removeChild(a.stateNode)}catch(y){Ze(a,o,y)}break;case 18:dt!==null&&(cn?(r=dt,Gy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),Ki(r)):Gy(dt,a.stateNode));break;case 4:u=dt,g=cn,dt=a.stateNode.containerInfo,cn=!0,Yr(r,o,a),dt=u,cn=g;break;case 0:case 11:case 14:case 15:Ps(2,a,o),Ot||Ps(4,a,o),Yr(r,o,a);break;case 1:Ot||(Ir(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Bv(a,o,u)),Yr(r,o,a);break;case 21:Yr(r,o,a);break;case 22:Ot=(u=Ot)||a.memoizedState!==null,Yr(r,o,a),Ot=u;break;default:Yr(r,o,a)}}function Zv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ki(r)}catch(a){Ze(o,o.return,a)}}}function ey(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ki(r)}catch(a){Ze(o,o.return,a)}}function fI(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Kv),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Kv),o;default:throw Error(s(435,r.tag))}}function bc(r,o){var a=fI(r);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=SI.bind(null,r,u);u.then(g,g)}})}function dn(r,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=r,S=o,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Vs(I.type)){dt=I.stateNode,cn=!1;break e}break;case 5:dt=I.stateNode,cn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,cn=!0;break e}I=I.return}if(dt===null)throw Error(s(160));Xv(y,S,g),dt=null,cn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ty(o,r),o=o.sibling}var Zn=null;function ty(r,o){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:dn(o,r),hn(r),u&4&&(Ps(3,r,r.return),ml(3,r),Ps(5,r,r.return));break;case 1:dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),u&64&&Kr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=Zn;if(dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[hr]||y[It]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Kt(y,u,a),y[It]=r,At(y),u=y;break e;case"link":var S=t0("link","href",g).get(u+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(y=S[I],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break t}}y=g.createElement(u),Kt(y,u,a),g.head.appendChild(y);break;case"meta":if(S=t0("meta","content",g).get(u+(a.content||""))){for(I=0;I<S.length;I++)if(y=S[I],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break t}}y=g.createElement(u),Kt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[It]=r,At(y),u=y}r.stateNode=u}else n0(g,r.type,r.stateNode);else r.stateNode=e0(g,u,r.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?n0(g,r.type,r.stateNode):e0(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&gf(r,r.memoizedProps,a.memoizedProps)}break;case 27:dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),a!==null&&u&4&&gf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),r.flags&32){g=r.stateNode;try{un(g,"")}catch(fe){Ze(r,r.return,fe)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,gf(r,g,a!==null?a.memoizedProps:g)),u&1024&&(bf=!0);break;case 6:if(dn(o,r),hn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(fe){Ze(r,r.return,fe)}}break;case 3:if(Mc=null,g=Zn,Zn=Pc(o.containerInfo),dn(o,r),Zn=g,hn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ki(o.containerInfo)}catch(fe){Ze(r,r.return,fe)}bf&&(bf=!1,ny(r));break;case 4:u=Zn,Zn=Pc(r.stateNode.containerInfo),dn(o,r),hn(r),Zn=u;break;case 12:dn(o,r),hn(r);break;case 31:dn(o,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 13:dn(o,r),hn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ec=on()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 22:g=r.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,B=Kr,Q=Ot;if(Kr=B||g,Ot=Q||P,dn(o,r),Ot=Q,Kr=B,hn(r),u&8192)e:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||P||Kr||Ot||Go(r)),a=null,o=r;;){if(o.tag===5||o.tag===26){if(a===null){P=a=o;try{if(y=P.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=P.stateNode;var te=P.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(fe){Ze(P,P.return,fe)}}}else if(o.tag===6){if(a===null){P=o;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(fe){Ze(P,P.return,fe)}}}else if(o.tag===18){if(a===null){P=o;try{var K=P.stateNode;g?By(K,!0):By(P.stateNode,!1)}catch(fe){Ze(P,P.return,fe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,bc(r,a))));break;case 19:dn(o,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 30:break;case 21:break;default:dn(o,r),hn(r)}}function hn(r){var o=r.flags;if(o&2){try{for(var a,u=r.return;u!==null;){if(Jv(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=vf(r);yc(r,y,g);break;case 5:var S=a.stateNode;a.flags&32&&(un(S,""),a.flags&=-33);var I=vf(r);yc(r,I,S);break;case 3:case 4:var P=a.stateNode.containerInfo,B=vf(r);yf(r,B,P);break;default:throw Error(s(161))}}catch(Q){Ze(r,r.return,Q)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ny(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ny(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Qr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Yv(r,o.alternate,o),o=o.sibling}function Go(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ps(4,o,o.return),Go(o);break;case 1:Ir(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Bv(o,o.return,a),Go(o);break;case 27:Il(o.stateNode);case 26:case 5:Ir(o,o.return),Go(o);break;case 22:o.memoizedState===null&&Go(o);break;case 30:Go(o);break;default:Go(o)}r=r.sibling}}function Xr(r,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=r,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:Xr(g,y,a),ml(4,y);break;case 1:if(Xr(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){Ze(u,u.return,B)}if(u=y,g=u.updateQueue,g!==null){var I=u.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Pg(P[g],I)}catch(B){Ze(u,u.return,B)}}a&&S&64&&Gv(y),gl(y,y.return);break;case 27:Wv(y);case 26:case 5:Xr(g,y,a),a&&u===null&&S&4&&$v(y),gl(y,y.return);break;case 12:Xr(g,y,a);break;case 31:Xr(g,y,a),a&&S&4&&Zv(g,y);break;case 13:Xr(g,y,a),a&&S&4&&ey(g,y);break;case 22:y.memoizedState===null&&Xr(g,y,a),gl(y,y.return);break;case 30:break;default:Xr(g,y,a)}o=o.sibling}}function wf(r,o){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&nl(a))}function Ef(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&nl(r))}function er(r,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ry(r,o,a,u),o=o.sibling}function ry(r,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:er(r,o,a,u),g&2048&&ml(9,o);break;case 1:er(r,o,a,u);break;case 3:er(r,o,a,u),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&nl(r)));break;case 12:if(g&2048){er(r,o,a,u),r=o.stateNode;try{var y=o.memoizedProps,S=y.id,I=y.onPostCommit;typeof I=="function"&&I(S,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){Ze(o,o.return,P)}}else er(r,o,a,u);break;case 31:er(r,o,a,u);break;case 13:er(r,o,a,u);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?er(r,o,a,u):vl(r,o):y._visibility&2?er(r,o,a,u):(y._visibility|=2,Fi(r,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&wf(S,o);break;case 24:er(r,o,a,u),g&2048&&Ef(o.alternate,o);break;default:er(r,o,a,u)}}function Fi(r,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=r,S=o,I=a,P=u,B=S.flags;switch(S.tag){case 0:case 11:case 15:Fi(y,S,I,P,g),ml(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?Fi(y,S,I,P,g):vl(y,S):(Q._visibility|=2,Fi(y,S,I,P,g)),g&&B&2048&&wf(S.alternate,S);break;case 24:Fi(y,S,I,P,g),g&&B&2048&&Ef(S.alternate,S);break;default:Fi(y,S,I,P,g)}o=o.sibling}}function vl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=r,u=o,g=u.flags;switch(u.tag){case 22:vl(a,u),g&2048&&wf(u.alternate,u);break;case 24:vl(a,u),g&2048&&Ef(u.alternate,u);break;default:vl(a,u)}o=o.sibling}}var yl=8192;function ji(r,o,a){if(r.subtreeFlags&yl)for(r=r.child;r!==null;)sy(r,o,a),r=r.sibling}function sy(r,o,a){switch(r.tag){case 26:ji(r,o,a),r.flags&yl&&r.memoizedState!==null&&ZI(a,Zn,r.memoizedState,r.memoizedProps);break;case 5:ji(r,o,a);break;case 3:case 4:var u=Zn;Zn=Pc(r.stateNode.containerInfo),ji(r,o,a),Zn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=yl,yl=16777216,ji(r,o,a),yl=u):ji(r,o,a));break;default:ji(r,o,a)}}function oy(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function bl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];qt=u,ay(u,r)}oy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iy(r),r=r.sibling}function iy(r){switch(r.tag){case 0:case 11:case 15:bl(r),r.flags&2048&&Ps(9,r,r.return);break;case 3:bl(r);break;case 12:bl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,wc(r)):bl(r);break;default:bl(r)}}function wc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];qt=u,ay(u,r)}oy(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ps(8,o,o.return),wc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,wc(o));break;default:wc(o)}r=r.sibling}}function ay(r,o){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Ps(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,qt=u;else e:for(a=r;qt!==null;){u=qt;var g=u.sibling,y=u.return;if(Qv(u),u===a){qt=null;break e}if(g!==null){g.return=y,qt=g;break e}qt=y}}}var pI={getCacheForType:function(r){var o=Jt(kt),a=o.data.get(r);return a===void 0&&(a=r(),o.data.set(r,a)),a},cacheSignal:function(){return Jt(kt).controller.signal}},mI=typeof WeakMap=="function"?WeakMap:Map,Je=0,st=null,Oe=null,Pe=0,Xe=0,Tn=null,Ds=!1,Vi=!1,Sf=!1,Zr=0,gt=0,Ms=0,Bo=0,Tf=0,Cn=0,qi=0,wl=null,fn=null,Cf=!1,Ec=0,ly=0,Sc=1/0,Tc=null,Ls=null,Lt=0,Us=null,Hi=null,es=0,If=0,Af=null,uy=null,El=0,_f=null;function In(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:Y.T!==null?Pf():Cu()}function cy(){if(Cn===0)if((Pe&536870912)===0||Fe){var r=yo;yo<<=1,(yo&3932160)===0&&(yo=262144),Cn=r}else Cn=536870912;return r=En.current,r!==null&&(r.flags|=32),Cn}function pn(r,o,a){(r===st&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(zi(r,0),Fs(r,Pe,Cn,!1)),bo(r,a),((Je&2)===0||r!==st)&&(r===st&&((Je&2)===0&&(Bo|=a),gt===4&&Fs(r,Pe,Cn,!1)),Ar(r))}function dy(r,o,a){if((Je&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&r.expiredLanes)===0||zn(r,o),g=u?yI(r,o):Nf(r,o,!0),y=u;do{if(g===0){Vi&&!u&&Fs(r,o,0,!1);break}else{if(a=r.current.alternate,y&&!gI(a)){g=Nf(r,o,!1),y=!1;continue}if(g===2){if(y=o,r.errorRecoveryDisabledLanes&y)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var I=r;g=wl;var P=I.current.memoizedState.isDehydrated;if(P&&(zi(I,S).flags|=256),S=Nf(I,S,!1),S!==2){if(Sf&&!P){I.errorRecoveryDisabledLanes|=y,Bo|=y,g=4;break e}y=fn,fn=g,y!==null&&(fn===null?fn=y:fn.push.apply(fn,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){zi(r,0),Fs(r,o,0,!0);break}e:{switch(u=r,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Fs(u,o,Cn,!Ds);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Ec+300-on(),10<g)){if(Fs(u,o,Cn,!Ds),ur(u,0,!0)!==0)break e;es=o,u.timeoutHandle=Hy(hy.bind(null,u,a,fn,Tc,Cf,o,Cn,Bo,qi,Ds,y,"Throttled",-0,0),g);break e}hy(u,a,fn,Tc,Cf,o,Cn,Bo,qi,Ds,y,null,-0,0)}}break}while(!0);Ar(r)}function hy(r,o,a,u,g,y,S,I,P,B,Q,te,$,K){if(r.timeoutHandle=-1,te=o.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},sy(o,y,te);var fe=(y&62914560)===y?Ec-on():(y&4194048)===y?ly-on():0;if(fe=eA(te,fe),fe!==null){es=y,r.cancelPendingCommit=fe(wy.bind(null,r,o,y,a,u,g,S,I,P,Q,te,null,$,K)),Fs(r,y,S,!B);return}}wy(r,o,y,a,u,g,S,I,P)}function gI(r){for(var o=r;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!bn(y(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fs(r,o,a,u){o&=~Tf,o&=~Bo,r.suspendedLanes|=o,r.pingedLanes&=~o,u&&(r.warmLanes|=o),u=r.expirationTimes;for(var g=o;0<g;){var y=31-vt(g),S=1<<y;u[y]=-1,g&=~S}a!==0&&wo(r,a,o)}function Cc(){return(Je&6)===0?(Sl(0),!1):!0}function kf(){if(Oe!==null){if(Xe===0)var r=Oe.return;else r=Oe,zr=Lo=null,zh(r),Pi=null,sl=0,r=Oe;for(;r!==null;)zv(r.alternate,r),r=r.return;Oe=null}}function zi(r,o){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,LI(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),es=0,kf(),st=r,Oe=a=qr(r.current,null),Pe=o,Xe=0,Tn=null,Ds=!1,Vi=zn(r,o),Sf=!1,qi=Cn=Tf=Bo=Ms=gt=0,fn=wl=null,Cf=!1,(o&8)!==0&&(o|=o&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=o;0<u;){var g=31-vt(u),y=1<<g;o|=r[g],u&=~y}return Zr=o,Bu(),a}function fy(r,o){_e=null,Y.H=hl,o===Ri||o===Zu?(o=Ng(),Xe=3):o===Oh?(o=Ng(),Xe=4):Xe=o===of?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Tn=o,Oe===null&&(gt=1,fc(r,Rn(o,r.current)))}function py(){var r=En.current;return r===null?!0:(Pe&4194048)===Pe?Xn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?r===Xn:!1}function my(){var r=Y.H;return Y.H=hl,r===null?hl:r}function gy(){var r=Y.A;return Y.A=pI,r}function Ic(){gt=4,Ds||(Pe&4194048)!==Pe&&En.current!==null||(Vi=!0),(Ms&134217727)===0&&(Bo&134217727)===0||st===null||Fs(st,Pe,Cn,!1)}function Nf(r,o,a){var u=Je;Je|=2;var g=my(),y=gy();(st!==r||Pe!==o)&&(Tc=null,zi(r,o)),o=!1;var S=gt;e:do try{if(Xe!==0&&Oe!==null){var I=Oe,P=Tn;switch(Xe){case 8:kf(),S=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(o=!0);var B=Xe;if(Xe=0,Tn=null,Gi(r,I,P,B),a&&Vi){S=0;break e}break;default:B=Xe,Xe=0,Tn=null,Gi(r,I,P,B)}}vI(),S=gt;break}catch(Q){fy(r,Q)}while(!0);return o&&r.shellSuspendCounter++,zr=Lo=null,Je=u,Y.H=g,Y.A=y,Oe===null&&(st=null,Pe=0,Bu()),S}function vI(){for(;Oe!==null;)vy(Oe)}function yI(r,o){var a=Je;Je|=2;var u=my(),g=gy();st!==r||Pe!==o?(Tc=null,Sc=on()+500,zi(r,o)):Vi=zn(r,o);e:do try{if(Xe!==0&&Oe!==null){o=Oe;var y=Tn;t:switch(Xe){case 1:Xe=0,Tn=null,Gi(r,o,y,1);break;case 2:case 9:if(_g(y)){Xe=0,Tn=null,yy(o);break}o=function(){Xe!==2&&Xe!==9||st!==r||(Xe=7),Ar(r)},y.then(o,o);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:_g(y)?(Xe=0,Tn=null,yy(o)):(Xe=0,Tn=null,Gi(r,o,y,7));break;case 5:var S=null;switch(Oe.tag){case 26:S=Oe.memoizedState;case 5:case 27:var I=Oe;if(S?r0(S):I.stateNode.complete){Xe=0,Tn=null;var P=I.sibling;if(P!==null)Oe=P;else{var B=I.return;B!==null?(Oe=B,Ac(B)):Oe=null}break t}}Xe=0,Tn=null,Gi(r,o,y,5);break;case 6:Xe=0,Tn=null,Gi(r,o,y,6);break;case 8:kf(),gt=6;break e;default:throw Error(s(462))}}bI();break}catch(Q){fy(r,Q)}while(!0);return zr=Lo=null,Y.H=u,Y.A=g,Je=a,Oe!==null?0:(st=null,Pe=0,Bu(),gt)}function bI(){for(;Oe!==null&&!sh();)vy(Oe)}function vy(r){var o=qv(r.alternate,r,Zr);r.memoizedProps=r.pendingProps,o===null?Ac(r):Oe=o}function yy(r){var o=r,a=o.alternate;switch(o.tag){case 15:case 0:o=Mv(a,o,o.pendingProps,o.type,void 0,Pe);break;case 11:o=Mv(a,o,o.pendingProps,o.type.render,o.ref,Pe);break;case 5:zh(o);default:zv(a,o),o=Oe=gg(o,Zr),o=qv(a,o,Zr)}r.memoizedProps=r.pendingProps,o===null?Ac(r):Oe=o}function Gi(r,o,a,u){zr=Lo=null,zh(o),Pi=null,sl=0;var g=o.return;try{if(aI(r,g,o,a,Pe)){gt=1,fc(r,Rn(a,r.current)),Oe=null;return}}catch(y){if(g!==null)throw Oe=g,y;gt=1,fc(r,Rn(a,r.current)),Oe=null;return}o.flags&32768?(Fe||u===1?r=!0:Vi||(Pe&536870912)!==0?r=!1:(Ds=r=!0,(u===2||u===9||u===3||u===6)&&(u=En.current,u!==null&&u.tag===13&&(u.flags|=16384))),by(o,r)):Ac(o)}function Ac(r){var o=r;do{if((o.flags&32768)!==0){by(o,Ds);return}r=o.return;var a=cI(o.alternate,o,Zr);if(a!==null){Oe=a;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=r}while(o!==null);gt===0&&(gt=5)}function by(r,o){do{var a=dI(r.alternate,r);if(a!==null){a.flags&=32767,Oe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=a}while(r!==null);gt=6,Oe=null}function wy(r,o,a,u,g,y,S,I,P){r.cancelPendingCommit=null;do _c();while(Lt!==0);if((Je&6)!==0)throw Error(s(327));if(o!==null){if(o===r.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=gh,ah(r,a,y,S,I,P),r===st&&(Oe=st=null,Pe=0),Hi=o,Us=r,es=a,If=y,Af=g,uy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,TI(ps,function(){return Iy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=le.p,le.p=2,S=Je,Je|=4;try{hI(r,o,a)}finally{Je=S,le.p=g,Y.T=u}}Lt=1,Ey(),Sy(),Ty()}}function Ey(){if(Lt===1){Lt=0;var r=Us,o=Hi,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{ty(o,r);var y=qf,S=ag(r.containerInfo),I=y.focusedElem,P=y.selectionRange;if(S!==I&&I&&I.ownerDocument&&ig(I.ownerDocument.documentElement,I)){if(P!==null&&dh(I)){var B=P.start,Q=P.end;if(Q===void 0&&(Q=B),"selectionStart"in I)I.selectionStart=B,I.selectionEnd=Math.min(Q,I.value.length);else{var te=I.ownerDocument||document,$=te&&te.defaultView||window;if($.getSelection){var K=$.getSelection(),fe=I.textContent.length,we=Math.min(P.start,fe),rt=P.end===void 0?we:Math.min(P.end,fe);!K.extend&&we>rt&&(S=rt,rt=we,we=S);var V=og(I,we),U=og(I,rt);if(V&&U&&(K.rangeCount!==1||K.anchorNode!==V.node||K.anchorOffset!==V.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var G=te.createRange();G.setStart(V.node,V.offset),K.removeAllRanges(),we>rt?(K.addRange(G),K.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),K.addRange(G))}}}}for(te=[],K=I;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var X=te[I];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}jc=!!Vf,qf=Vf=null}finally{Je=g,le.p=u,Y.T=a}}r.current=o,Lt=2}}function Sy(){if(Lt===2){Lt=0;var r=Us,o=Hi,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{Yv(r,o.alternate,o)}finally{Je=g,le.p=u,Y.T=a}}Lt=3}}function Ty(){if(Lt===4||Lt===3){Lt=0,vu();var r=Us,o=Hi,a=es,u=uy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,Hi=Us=null,Cy(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Ls=null),Lr(a),o=o.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Hn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=Y.T,g=le.p,le.p=2,Y.T=null;try{for(var y=r.onRecoverableError,S=0;S<u.length;S++){var I=u[S];y(I.value,{componentStack:I.stack})}}finally{Y.T=o,le.p=g}}(es&3)!==0&&_c(),Ar(r),g=r.pendingLanes,(a&261930)!==0&&(g&42)!==0?r===_f?El++:(El=0,_f=r):El=0,Sl(0)}}function Cy(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,nl(o)))}function _c(){return Ey(),Sy(),Ty(),Iy()}function Iy(){if(Lt!==5)return!1;var r=Us,o=If;If=0;var a=Lr(es),u=Y.T,g=le.p;try{le.p=32>a?32:a,Y.T=null,a=Af,Af=null;var y=Us,S=es;if(Lt=0,Hi=Us=null,es=0,(Je&6)!==0)throw Error(s(331));var I=Je;if(Je|=4,iy(y.current),ry(y,y.current,S,a),Je=I,Sl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Hn,y)}catch{}return!0}finally{le.p=g,Y.T=u,Cy(r,o)}}function Ay(r,o,a){o=Rn(a,o),o=sf(r.stateNode,o,2),r=xs(r,o,2),r!==null&&(bo(r,2),Ar(r))}function Ze(r,o,a){if(r.tag===3)Ay(r,r,a);else for(;o!==null;){if(o.tag===3){Ay(o,r,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ls===null||!Ls.has(u))){r=Rn(a,r),a=_v(2),u=xs(o,a,2),u!==null&&(kv(a,u,o,r),bo(u,2),Ar(u));break}}o=o.return}}function xf(r,o,a){var u=r.pingCache;if(u===null){u=r.pingCache=new mI;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Sf=!0,g.add(a),r=wI.bind(null,r,o,a),o.then(r,r))}function wI(r,o,a){var u=r.pingCache;u!==null&&u.delete(o),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,st===r&&(Pe&a)===a&&(gt===4||gt===3&&(Pe&62914560)===Pe&&300>on()-Ec?(Je&2)===0&&zi(r,0):Tf|=a,qi===Pe&&(qi=0)),Ar(r)}function _y(r,o){o===0&&(o=Tu()),r=Po(r,o),r!==null&&(bo(r,o),Ar(r))}function EI(r){var o=r.memoizedState,a=0;o!==null&&(a=o.retryLane),_y(r,a)}function SI(r,o){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),_y(r,a)}function TI(r,o){return Mt(r,o)}var kc=null,Bi=null,Of=!1,Nc=!1,Rf=!1,js=0;function Ar(r){r!==Bi&&r.next===null&&(Bi===null?kc=Bi=r:Bi=Bi.next=r),Nc=!0,Of||(Of=!0,II())}function Sl(r,o){if(!Rf&&Nc){Rf=!0;do for(var a=!1,u=kc;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-vt(42|r)+1)-1,y&=g&~(S&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Oy(u,y))}else y=Pe,y=ur(u,u===st?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||zn(u,y)||(a=!0,Oy(u,y));u=u.next}while(a);Rf=!1}}function CI(){ky()}function ky(){Nc=Of=!1;var r=0;js!==0&&MI()&&(r=js);for(var o=on(),a=null,u=kc;u!==null;){var g=u.next,y=Ny(u,o);y===0?(u.next=null,a===null?kc=g:a.next=g,g===null&&(Bi=a)):(a=u,(r!==0||(y&3)!==0)&&(Nc=!0)),u=g}Lt!==0&&Lt!==5||Sl(r),js!==0&&(js=0)}function Ny(r,o){for(var a=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var S=31-vt(y),I=1<<S,P=g[S];P===-1?((I&a)===0||(I&u)!==0)&&(g[S]=ih(I,o)):P<=o&&(r.expiredLanes|=I),y&=~I}if(o=st,a=Pe,a=ur(r,r===o?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===o&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&fs(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||zn(r,a)){if(o=a&-a,o===r.callbackPriority)return o;switch(u!==null&&fs(u),Lr(a)){case 2:case 8:a=Ra;break;case 32:a=ps;break;case 268435456:a=yu;break;default:a=ps}return u=xy.bind(null,r),a=Mt(a,u),r.callbackPriority=o,r.callbackNode=a,o}return u!==null&&u!==null&&fs(u),r.callbackPriority=2,r.callbackNode=null,2}function xy(r,o){if(Lt!==0&&Lt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(_c()&&r.callbackNode!==a)return null;var u=Pe;return u=ur(r,r===st?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(dy(r,u,o),Ny(r,on()),r.callbackNode!=null&&r.callbackNode===a?xy.bind(null,r):null)}function Oy(r,o){if(_c())return null;dy(r,o,!0)}function II(){UI(function(){(Je&6)!==0?Mt(Oa,CI):ky()})}function Pf(){if(js===0){var r=xi;r===0&&(r=ar,ar<<=1,(ar&261888)===0&&(ar=256)),js=r}return js}function Ry(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:mi(""+r)}function Py(r,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,r.id&&a.setAttribute("form",r.id),o.parentNode.insertBefore(a,o),r=new FormData(r),a.parentNode.removeChild(a),r}function AI(r,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var y=Ry((g[jt]||null).action),S=u.submitter;S&&(o=(o=S[jt]||null)?Ry(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var I=new wr("action","action",null,u,g);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(js!==0){var P=S?Py(g,S):new FormData(g);Xh(a,{pending:!0,data:P,method:g.method,action:y},null,P)}}else typeof y=="function"&&(I.preventDefault(),P=S?Py(g,S):new FormData(g),Xh(a,{pending:!0,data:P,method:g.method,action:y},y,P))},currentTarget:g}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],_I=Mf.toLowerCase(),kI=Mf[0].toUpperCase()+Mf.slice(1);Qn(_I,"on"+kI)}Qn(cg,"onAnimationEnd"),Qn(dg,"onAnimationIteration"),Qn(hg,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(GC,"onTransitionRun"),Qn(BC,"onTransitionStart"),Qn($C,"onTransitionCancel"),Qn(fg,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Dy(r,o){o=(o&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],g=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var S=u.length-1;0<=S;S--){var I=u[S],P=I.instance,B=I.currentTarget;if(I=I.listener,P!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=B;try{y(g)}catch(Q){Gu(Q)}g.currentTarget=null,y=P}else for(S=0;S<u.length;S++){if(I=u[S],P=I.instance,B=I.currentTarget,I=I.listener,P!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=B;try{y(g)}catch(Q){Gu(Q)}g.currentTarget=null,y=P}}}}function Re(r,o){var a=o[ci];a===void 0&&(a=o[ci]=new Set);var u=r+"__bubble";a.has(u)||(My(o,r,2,!1),a.add(u))}function Lf(r,o,a){var u=0;o&&(u|=4),My(a,r,u,o)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Uf(r){if(!r[xc]){r[xc]=!0,Ma.forEach(function(a){a!=="selectionchange"&&(NI.has(a)||Lf(a,!1,r),Lf(a,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[xc]||(o[xc]=!0,Lf("selectionchange",!1,o))}}function My(r,o,a,u){switch(c0(o)){case 2:var g=rA;break;case 8:g=sA;break;default:g=Xf}a=g.bind(null,o,a,r),g=void 0,!Io||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(o,a,{capture:!0,passive:g}):r.addEventListener(o,a,!0):g!==void 0?r.addEventListener(o,a,{passive:g}):r.addEventListener(o,a,!1)}function Ff(r,o,a,u,g){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var I=u.stateNode.containerInfo;if(I===g)break;if(S===4)for(S=u.return;S!==null;){var P=S.tag;if((P===3||P===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;I!==null;){if(S=fr(I),S===null)return;if(P=S.tag,P===5||P===6||P===26||P===27){u=y=S;continue e}I=I.parentNode}}u=u.return}ws(function(){var B=y,Q=kn(a),te=[];e:{var $=pg.get(r);if($!==void 0){var K=wr,fe=r;switch(r){case"keypress":if(_o(a)===0)break e;case"keydown":case"keyup":K=qu;break;case"focusin":fe="focus",K=No;break;case"focusout":fe="blur",K=No;break;case"beforeblur":case"afterblur":K=No;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=w;break;case cg:case dg:case hg:K=Du;break;case fg:K=A;break;case"scroll":case"scrollend":K=Ja;break;case"wheel":K=W;break;case"copy":case"cut":case"paste":K=Mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=jr;break;case"toggle":case"beforetoggle":K=Ne}var we=(o&4)!==0,rt=!we&&(r==="scroll"||r==="scrollend"),V=we?$!==null?$+"Capture":null:$;we=[];for(var U=B,G;U!==null;){var X=U;if(G=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||G===null||V===null||(X=Jn(U,V),X!=null&&we.push(Cl(U,X,G))),rt)break;U=U.return}0<we.length&&($=new K($,fe,null,a,Q),te.push({event:$,listeners:we}))}}if((o&7)===0){e:{if($=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",$&&a!==Ga&&(fe=a.relatedTarget||a.fromElement)&&(fr(fe)||fe[dr]))break e;if((K||$)&&($=Q.window===Q?Q:($=Q.ownerDocument)?$.defaultView||$.parentWindow:window,K?(fe=a.relatedTarget||a.toElement,K=B,fe=fe?fr(fe):null,fe!==null&&(rt=l(fe),we=fe.tag,fe!==rt||we!==5&&we!==27&&we!==6)&&(fe=null)):(K=null,fe=B),K!==fe)){if(we=Wa,X="onMouseLeave",V="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(we=jr,X="onPointerLeave",V="onPointerEnter",U="pointer"),rt=K==null?$:gn(K),G=fe==null?$:gn(fe),$=new we(X,U+"leave",K,a,Q),$.target=rt,$.relatedTarget=G,X=null,fr(Q)===B&&(we=new we(V,U+"enter",fe,a,Q),we.target=G,we.relatedTarget=rt,X=we),rt=X,K&&fe)t:{for(we=xI,V=K,U=fe,G=0,X=V;X;X=we(X))G++;X=0;for(var ve=U;ve;ve=we(ve))X++;for(;0<G-X;)V=we(V),G--;for(;0<X-G;)U=we(U),X--;for(;G--;){if(V===U||U!==null&&V===U.alternate){we=V;break t}V=we(V),U=we(U)}we=null}else we=null;K!==null&&Ly(te,$,K,we,!1),fe!==null&&rt!==null&&Ly(te,rt,fe,we,!0)}}e:{if($=B?gn(B):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var ze=Zm;else if(Qm($))if(eg)ze=qC;else{ze=jC;var me=FC}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?B&&pi(B.elementType)&&(ze=Zm):ze=VC;if(ze&&(ze=ze(r,B))){Xm(te,ze,a,Q);break e}me&&me(r,$,B),r==="focusout"&&B&&$.type==="number"&&B.memoizedProps.value!=null&&qa($,"number",$.value)}switch(me=B?gn(B):window,r){case"focusin":(Qm(me)||me.contentEditable==="true")&&(Si=me,hh=B,Za=null);break;case"focusout":Za=hh=Si=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,lg(te,a,Q);break;case"selectionchange":if(zC)break;case"keydown":case"keyup":lg(te,a,Q)}var xe;if(Qe)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ei?xo(r,a)&&(De="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Vr&&a.locale!=="ko"&&(Ei||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ei&&(xe=$a()):(br=Q,Ba="value"in br?br.value:br.textContent,Ei=!0)),me=Oc(B,De),0<me.length&&(De=new Sr(De,r,null,a,Q),te.push({event:De,listeners:me}),xe?De.data=xe:(xe=wi(a),xe!==null&&(De.data=xe)))),(xe=xn?DC(r,a):MC(r,a))&&(De=Oc(B,"onBeforeInput"),0<De.length&&(me=new Sr("onBeforeInput","beforeinput",null,a,Q),te.push({event:me,listeners:De}),me.data=xe)),AI(te,r,B,a,Q)}Dy(te,o)})}function Cl(r,o,a){return{instance:r,listener:o,currentTarget:a}}function Oc(r,o){for(var a=o+"Capture",u=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Jn(r,a),g!=null&&u.unshift(Cl(r,g,y)),g=Jn(r,o),g!=null&&u.push(Cl(r,g,y))),r.tag===3)return u;r=r.return}return[]}function xI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ly(r,o,a,u,g){for(var y=o._reactName,S=[];a!==null&&a!==u;){var I=a,P=I.alternate,B=I.stateNode;if(I=I.tag,P!==null&&P===u)break;I!==5&&I!==26&&I!==27||B===null||(P=B,g?(B=Jn(a,y),B!=null&&S.unshift(Cl(a,B,P))):g||(B=Jn(a,y),B!=null&&S.push(Cl(a,B,P)))),a=a.return}S.length!==0&&r.push({event:o,listeners:S})}var OI=/\r\n?/g,RI=/\u0000|\uFFFD/g;function Uy(r){return(typeof r=="string"?r:""+r).replace(OI,`
`).replace(RI,"")}function Fy(r,o){return o=Uy(o),Uy(r)===o}function nt(r,o,a,u,g,y){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||un(r,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&un(r,""+u);break;case"className":vn(r,"class",u);break;case"tabIndex":vn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(r,a,u);break;case"style":za(r,u,y);break;case"data":if(o!=="object"){vn(r,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=mi(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(o!=="input"&&nt(r,o,"name",g.name,g,null),nt(r,o,"formEncType",g.formEncType,g,null),nt(r,o,"formMethod",g.formMethod,g,null),nt(r,o,"formTarget",g.formTarget,g,null)):(nt(r,o,"encType",g.encType,g,null),nt(r,o,"method",g.method,g,null),nt(r,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=mi(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=$n);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=mi(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Re("beforetoggle",r),Re("toggle",r),hi(r,"popover",u);break;case"xlinkActuate":_t(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":_t(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":_t(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":_t(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":_t(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":_t(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":_t(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":_t(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":_t(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ou.get(a)||a,hi(r,a,u))}}function jf(r,o,a,u,g,y){switch(a){case"style":za(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?un(r,u):(typeof u=="number"||typeof u=="bigint")&&un(r,""+u);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"onClick":u!=null&&(r.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),y=r[jt]||null,y=y!=null?y[a]:null,typeof y=="function"&&r.removeEventListener(o,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(o,u,g);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):hi(r,a,u)}}}function Kt(r,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",r),Re("load",r);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var S=a[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(r,o,y,S,a,null)}}g&&nt(r,o,"srcSet",a.srcSet,a,null),u&&nt(r,o,"src",a.src,a,null);return;case"input":Re("invalid",r);var I=y=S=g=null,P=null,B=null;for(u in a)if(a.hasOwnProperty(u)){var Q=a[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":S=Q;break;case"checked":P=Q;break;case"defaultChecked":B=Q;break;case"value":y=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,o));break;default:nt(r,o,u,Q,a,null)}}ku(r,y,I,P,B,S,g,!1);return;case"select":Re("invalid",r),u=S=y=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":S=I;break;case"multiple":u=I;default:nt(r,o,g,I,a,null)}o=y,a=S,r.multiple=!!u,o!=null?gs(r,!!u,o,!1):a!=null&&gs(r,!!u,a,!0);return;case"textarea":Re("invalid",r),y=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":u=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:nt(r,o,S,I,a,null)}vs(r,u,g,y);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,o,P,u,a,null)}return;case"dialog":Re("beforetoggle",r),Re("toggle",r),Re("cancel",r),Re("close",r);break;case"iframe":case"object":Re("load",r);break;case"video":case"audio":for(u=0;u<Tl.length;u++)Re(Tl[u],r);break;case"image":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"embed":case"source":case"link":Re("error",r),Re("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(u=a[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(r,o,B,u,a,null)}return;default:if(pi(o)){for(Q in a)a.hasOwnProperty(Q)&&(u=a[Q],u!==void 0&&jf(r,o,Q,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&nt(r,o,I,u,a,null))}function PI(r,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,I=null,P=null,B=null,Q=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=te;default:u.hasOwnProperty(K)||nt(r,o,K,null,u,te)}}for(var $ in u){var K=u[$];if(te=a[$],u.hasOwnProperty($)&&(K!=null||te!=null))switch($){case"type":y=K;break;case"name":g=K;break;case"checked":B=K;break;case"defaultChecked":Q=K;break;case"value":S=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:K!==te&&nt(r,o,$,K,u,te)}}fi(r,S,I,P,B,Q,y,g);return;case"select":K=S=I=$=null;for(y in a)if(P=a[y],a.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":K=P;default:u.hasOwnProperty(y)||nt(r,o,y,null,u,P)}for(g in u)if(y=u[g],P=a[g],u.hasOwnProperty(g)&&(y!=null||P!=null))switch(g){case"value":$=y;break;case"defaultValue":I=y;break;case"multiple":S=y;default:y!==P&&nt(r,o,g,y,u,P)}o=I,a=S,u=K,$!=null?gs(r,!!a,$,!1):!!u!=!!a&&(o!=null?gs(r,!!a,o,!0):gs(r,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(r,o,I,null,u,g)}for(S in u)if(g=u[S],y=a[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":$=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&nt(r,o,S,g,u,y)}Nu(r,$,K);return;case"option":for(var fe in a)if($=a[fe],a.hasOwnProperty(fe)&&$!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":r.selected=!1;break;default:nt(r,o,fe,null,u,$)}for(P in u)if($=u[P],K=a[P],u.hasOwnProperty(P)&&$!==K&&($!=null||K!=null))switch(P){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:nt(r,o,P,$,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)$=a[we],a.hasOwnProperty(we)&&$!=null&&!u.hasOwnProperty(we)&&nt(r,o,we,null,u,$);for(B in u)if($=u[B],K=a[B],u.hasOwnProperty(B)&&$!==K&&($!=null||K!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:nt(r,o,B,$,u,K)}return;default:if(pi(o)){for(var rt in a)$=a[rt],a.hasOwnProperty(rt)&&$!==void 0&&!u.hasOwnProperty(rt)&&jf(r,o,rt,void 0,u,$);for(Q in u)$=u[Q],K=a[Q],!u.hasOwnProperty(Q)||$===K||$===void 0&&K===void 0||jf(r,o,Q,$,u,K);return}}for(var V in a)$=a[V],a.hasOwnProperty(V)&&$!=null&&!u.hasOwnProperty(V)&&nt(r,o,V,null,u,$);for(te in u)$=u[te],K=a[te],!u.hasOwnProperty(te)||$===K||$==null&&K==null||nt(r,o,te,$,u,K)}function jy(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,S=g.initiatorType,I=g.duration;if(y&&I&&jy(S)){for(S=0,I=g.responseEnd,u+=1;u<a.length;u++){var P=a[u],B=P.startTime;if(B>I)break;var Q=P.transferSize,te=P.initiatorType;Q&&jy(te)&&(P=P.responseEnd,S+=Q*(P<I?1:(I-B)/(P-B)))}if(--u,o+=8*(y+S)/(g.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Vf=null,qf=null;function Rc(r){return r.nodeType===9?r:r.ownerDocument}function Vy(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qy(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Hf(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zf=null;function MI(){var r=window.event;return r&&r.type==="popstate"?r===zf?!1:(zf=r,!0):(zf=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,UI=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(r){return zy.resolve(null).then(r).catch(FI)}:Hy;function FI(r){setTimeout(function(){throw r})}function Vs(r){return r==="head"}function Gy(r,o){var a=o,u=0;do{var g=a.nextSibling;if(r.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(g),Ki(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Il(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Il(a);for(var y=a.firstChild;y;){var S=y.nextSibling,I=y.nodeName;y[hr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=S}}else a==="body"&&Il(r.ownerDocument.body);a=g}while(a);Ki(o)}function By(r,o){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Gf(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gf(a),di(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function jI(r,o,a,u){for(;r.nodeType===1;){var g=a;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[hr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence")||y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ln(r.nextSibling),r===null)break}return null}function VI(r,o,a){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Ln(r.nextSibling),r===null))return null;return r}function $y(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ln(r.nextSibling),r===null))return null;return r}function Bf(r){return r.data==="$?"||r.data==="$~"}function $f(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function qI(r,o){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ln(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Jf=null;function Jy(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(o===0)return Ln(r.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}r=r.nextSibling}return null}function Wy(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return r;o--}else a!=="/$"&&a!=="/&"||o++}r=r.previousSibling}return null}function Ky(r,o,a){switch(o=Rc(a),r){case"html":if(r=o.documentElement,!r)throw Error(s(452));return r;case"head":if(r=o.head,!r)throw Error(s(453));return r;case"body":if(r=o.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Il(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);di(r)}var Un=new Map,Yy=new Set;function Pc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ts=le.d;le.d={f:HI,r:zI,D:GI,C:BI,L:$I,m:JI,X:KI,S:WI,M:YI};function HI(){var r=ts.f(),o=Cc();return r||o}function zI(r){var o=_n(r);o!==null&&o.tag===5&&o.type==="form"?fv(o):ts.r(r)}var $i=typeof document>"u"?null:document;function Qy(r,o,a){var u=$i;if(u&&typeof o=="string"&&o){var g=yn(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Yy.has(g)||(Yy.add(g),r={rel:r,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Kt(o,"link",r),At(o),u.head.appendChild(o)))}}function GI(r){ts.D(r),Qy("dns-prefetch",r,null)}function BI(r,o){ts.C(r,o),Qy("preconnect",r,o)}function $I(r,o,a){ts.L(r,o,a);var u=$i;if(u&&r&&o){var g='link[rel="preload"][as="'+yn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+yn(a.imageSizes)+'"]')):g+='[href="'+yn(r)+'"]';var y=g;switch(o){case"style":y=Ji(r);break;case"script":y=Wi(r)}Un.has(y)||(r=E({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:r,as:o},a),Un.set(y,r),u.querySelector(g)!==null||o==="style"&&u.querySelector(Al(y))||o==="script"&&u.querySelector(_l(y))||(o=u.createElement("link"),Kt(o,"link",r),At(o),u.head.appendChild(o)))}}function JI(r,o){ts.m(r,o);var a=$i;if(a&&r){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(r)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Wi(r)}if(!Un.has(y)&&(r=E({rel:"modulepreload",href:r},o),Un.set(y,r),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_l(y)))return}u=a.createElement("link"),Kt(u,"link",r),At(u),a.head.appendChild(u)}}}function WI(r,o,a){ts.S(r,o,a);var u=$i;if(u&&r){var g=pr(u).hoistableStyles,y=Ji(r);o=o||"default";var S=g.get(y);if(!S){var I={loading:0,preload:null};if(S=u.querySelector(Al(y)))I.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},a),(a=Un.get(y))&&Wf(r,a);var P=S=u.createElement("link");At(P),Kt(P,"link",r),P._p=new Promise(function(B,Q){P.onload=B,P.onerror=Q}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Dc(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:I},g.set(y,S)}}}function KI(r,o){ts.X(r,o);var a=$i;if(a&&r){var u=pr(a).hoistableScripts,g=Wi(r),y=u.get(g);y||(y=a.querySelector(_l(g)),y||(r=E({src:r,async:!0},o),(o=Un.get(g))&&Kf(r,o),y=a.createElement("script"),At(y),Kt(y,"link",r),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function YI(r,o){ts.M(r,o);var a=$i;if(a&&r){var u=pr(a).hoistableScripts,g=Wi(r),y=u.get(g);y||(y=a.querySelector(_l(g)),y||(r=E({src:r,async:!0,type:"module"},o),(o=Un.get(g))&&Kf(r,o),y=a.createElement("script"),At(y),Kt(y,"link",r),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Xy(r,o,a,u){var g=(g=ke.current)?Pc(g):null;if(!g)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Ji(a.href),a=pr(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Ji(a.href);var y=pr(g).hoistableStyles,S=y.get(r);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,S),(y=g.querySelector(Al(r)))&&!y._p&&(S.instance=y,S.state.loading=5),Un.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(r,a),y||QI(g,r,a,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Wi(a),a=pr(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ji(r){return'href="'+yn(r)+'"'}function Al(r){return'link[rel="stylesheet"]['+r+"]"}function Zy(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function QI(r,o,a,u){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=r.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Kt(o,"link",a),At(o),r.head.appendChild(o))}function Wi(r){return'[src="'+yn(r)+'"]'}function _l(r){return"script[async]"+r}function e0(r,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=r.querySelector('style[data-href~="'+yn(a.href)+'"]');if(u)return o.instance=u,At(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),Kt(u,"style",g),Dc(u,a.precedence,r),o.instance=u;case"stylesheet":g=Ji(a.href);var y=r.querySelector(Al(g));if(y)return o.state.loading|=4,o.instance=y,At(y),y;u=Zy(a),(g=Un.get(g))&&Wf(u,g),y=(r.ownerDocument||r).createElement("link"),At(y);var S=y;return S._p=new Promise(function(I,P){S.onload=I,S.onerror=P}),Kt(y,"link",u),o.state.loading|=4,Dc(y,a.precedence,r),o.instance=y;case"script":return y=Wi(a.src),(g=r.querySelector(_l(y)))?(o.instance=g,At(g),g):(u=a,(g=Un.get(y))&&(u=E({},a),Kf(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),At(g),Kt(g,"link",u),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Dc(u,a.precedence,r));return o.instance}function Dc(r,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var I=u[S];if(I.dataset.precedence===o)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(r,o.firstChild))}function Wf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Kf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Mc=null;function t0(r,o,a){if(Mc===null){var u=new Map,g=Mc=new Map;g.set(a,u)}else g=Mc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),g=0;g<a.length;g++){var y=a[g];if(!(y[hr]||y[It]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=r+S;var I=u.get(S);I?I.push(y):u.set(S,[y])}}return u}function n0(r,o,a){r=r.ownerDocument||r,r.head.insertBefore(a,o==="title"?r.querySelector("head > title"):null)}function XI(r,o,a){if(a===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function r0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function ZI(r,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Ji(u.href),y=o.querySelector(Al(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Lc.bind(r),o.then(r,r)),a.state.loading|=4,a.instance=y,At(y);return}y=o.ownerDocument||o,u=Zy(u),(g=Un.get(g))&&Wf(u,g),y=y.createElement("link"),At(y);var S=y;S._p=new Promise(function(I,P){S.onload=I,S.onerror=P}),Kt(y,"link",u),a.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Lc.bind(r),o.addEventListener("load",a),o.addEventListener("error",a))}}var Yf=0;function eA(r,o){return r.stylesheets&&r.count===0&&Fc(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Fc(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+o);0<r.imgBytes&&Yf===0&&(Yf=62500*DI());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Fc(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Yf?50:800)+o);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Uc=null;function Fc(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Uc=new Map,o.forEach(tA,r),Uc=null,Lc.call(r))}function tA(r,o){if(!(o.state.loading&4)){var a=Uc.get(r);if(a)var u=a.get(null);else{a=new Map,Uc.set(r,a);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=o.instance,S=g.getAttribute("data-precedence"),y=a.get(S)||u,y===u&&a.set(null,g),a.set(S,g),this.count++,u=Lc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var kl={$$typeof:se,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function nA(r,o,a,u,g,y,S,I,P){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function s0(r,o,a,u,g,y,S,I,P,B,Q,te){return r=new nA(r,o,a,S,P,B,Q,te,I),o=1,y===!0&&(o|=24),y=wn(3,null,null,o),r.current=y,y.stateNode=r,o=kh(),o.refCount++,r.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:o},Rh(y),r}function o0(r){return r?(r=Ii,r):Ii}function i0(r,o,a,u,g,y){g=o0(g),u.context===null?u.context=g:u.pendingContext=g,u=Ns(o),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=xs(r,u,o),a!==null&&(pn(a,r,o),il(a,r,o))}function a0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<o?a:o}}function Qf(r,o){a0(r,o),(r=r.alternate)&&a0(r,o)}function l0(r){if(r.tag===13||r.tag===31){var o=Po(r,67108864);o!==null&&pn(o,r,67108864),Qf(r,67108864)}}function u0(r){if(r.tag===13||r.tag===31){var o=In();o=Eo(o);var a=Po(r,o);a!==null&&pn(a,r,o),Qf(r,o)}}var jc=!0;function rA(r,o,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=2,Xf(r,o,a,u)}finally{le.p=y,Y.T=g}}function sA(r,o,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=8,Xf(r,o,a,u)}finally{le.p=y,Y.T=g}}function Xf(r,o,a,u){if(jc){var g=Zf(u);if(g===null)Ff(r,o,u,Vc,a),d0(r,u);else if(iA(g,r,o,a,u))u.stopPropagation();else if(d0(r,u),o&4&&-1<oA.indexOf(r)){for(;g!==null;){var y=_n(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=lr(y.pendingLanes);if(S!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var P=1<<31-vt(S);I.entanglements[1]|=P,S&=~P}Ar(y),(Je&6)===0&&(Sc=on()+500,Sl(0))}}break;case 31:case 13:I=Po(y,2),I!==null&&pn(I,y,2),Cc(),Qf(y,2)}if(y=Zf(u),y===null&&Ff(r,o,u,Vc,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else Ff(r,o,u,null,a)}}function Zf(r){return r=kn(r),ep(r)}var Vc=null;function ep(r){if(Vc=null,r=fr(r),r!==null){var o=l(r);if(o===null)r=null;else{var a=o.tag;if(a===13){if(r=c(o),r!==null)return r;r=null}else if(a===31){if(r=f(o),r!==null)return r;r=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Vc=r,null}function c0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vo()){case Oa:return 2;case Ra:return 8;case ps:case oh:return 32;case yu:return 268435456;default:return 32}default:return 32}}var tp=!1,qs=null,Hs=null,zs=null,Nl=new Map,xl=new Map,Gs=[],oA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d0(r,o){switch(r){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Nl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(o.pointerId)}}function Ol(r,o,a,u,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},o!==null&&(o=_n(o),o!==null&&l0(o)),r):(r.eventSystemFlags|=u,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function iA(r,o,a,u,g){switch(o){case"focusin":return qs=Ol(qs,r,o,a,u,g),!0;case"dragenter":return Hs=Ol(Hs,r,o,a,u,g),!0;case"mouseover":return zs=Ol(zs,r,o,a,u,g),!0;case"pointerover":var y=g.pointerId;return Nl.set(y,Ol(Nl.get(y)||null,r,o,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,xl.set(y,Ol(xl.get(y)||null,r,o,a,u,g)),!0}return!1}function h0(r){var o=fr(r.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){r.blockedOn=o,Gn(r.priority,function(){u0(a)});return}}else if(o===31){if(o=f(a),o!==null){r.blockedOn=o,Gn(r.priority,function(){u0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var a=Zf(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Ga=u,a.target.dispatchEvent(u),Ga=null}else return o=_n(a),o!==null&&l0(o),r.blockedOn=a,!1;o.shift()}return!0}function f0(r,o,a){qc(r)&&a.delete(o)}function aA(){tp=!1,qs!==null&&qc(qs)&&(qs=null),Hs!==null&&qc(Hs)&&(Hs=null),zs!==null&&qc(zs)&&(zs=null),Nl.forEach(f0),xl.forEach(f0)}function Hc(r,o){r.blockedOn===o&&(r.blockedOn=null,tp||(tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aA)))}var zc=null;function p0(r){zc!==r&&(zc=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===r&&(zc=null);for(var o=0;o<r.length;o+=3){var a=r[o],u=r[o+1],g=r[o+2];if(typeof u!="function"){if(ep(u||a)===null)continue;break}var y=_n(a);y!==null&&(r.splice(o,3),o-=3,Xh(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Ki(r){function o(P){return Hc(P,r)}qs!==null&&Hc(qs,r),Hs!==null&&Hc(Hs,r),zs!==null&&Hc(zs,r),Nl.forEach(o),xl.forEach(o);for(var a=0;a<Gs.length;a++){var u=Gs[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Gs.length&&(a=Gs[0],a.blockedOn===null);)h0(a),a.blockedOn===null&&Gs.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],S=g[jt]||null;if(typeof y=="function")S||p0(a);else if(S){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[jt]||null)I=S.formAction;else if(ep(g)!==null)continue}else I=S.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),p0(a)}}}function m0(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function np(r){this._internalRoot=r}Gc.prototype.render=np.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=In();i0(a,u,r,o,null,null)},Gc.prototype.unmount=np.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;i0(r.current,2,null,r,null,null),Cc(),o[dr]=null}};function Gc(r){this._internalRoot=r}Gc.prototype.unstable_scheduleHydration=function(r){if(r){var o=Cu();r={blockedOn:null,target:r,priority:o};for(var a=0;a<Gs.length&&o!==0&&o<Gs[a].priority;a++);Gs.splice(a,0,r),a===0&&h0(r)}};var g0=e.version;if(g0!=="19.2.0")throw Error(s(527,g0,"19.2.0"));le.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=v(o),r=r!==null?b(r):null,r=r===null?null:r.stateNode,r};var lA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Hn=Bc.inject(lA),Gt=Bc}catch{}}return Pl.createRoot=function(r,o){if(!i(r))throw Error(s(299));var a=!1,u="",g=Tv,y=Cv,S=Iv;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=s0(r,1,!1,null,null,a,u,null,g,y,S,m0),r[dr]=o.current,Uf(r),new np(o)},Pl.hydrateRoot=function(r,o,a){if(!i(r))throw Error(s(299));var u=!1,g="",y=Tv,S=Cv,I=Iv,P=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),o=s0(r,1,!0,o,a??null,u,g,P,y,S,I,m0),o.context=o0(null),a=o.current,u=In(),u=Eo(u),g=Ns(u),g.callback=null,xs(a,g,u),a=u,o.current.lanes=a,bo(o,a),Ar(o),r[dr]=o.current,Uf(r),new Gc(o)},Pl.version="19.2.0",Pl}var x0;function bA(){if(x0)return rp.exports;x0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=yA(),rp.exports}var wA=bA();const EA=PE(wA);var Js=(n=>(n.CUSTOMER="CUSTOMER",n.ADMIN="ADMIN",n))(Js||{});/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const SA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),O0=n=>{const e=TA(n);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),CA=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var IA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const AA=qe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...f},m)=>qe.createElement("svg",{ref:m,...IA,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:DE("lucide",i),...!l&&!CA(f)&&{"aria-hidden":"true"},...f},[...c.map(([v,b])=>qe.createElement(v,b)),...Array.isArray(l)?l:[l]]));/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const St=(n,e)=>{const t=qe.forwardRef(({className:s,...i},l)=>qe.createElement(AA,{ref:l,iconNode:e,className:DE(`lucide-${SA(O0(n))}`,`lucide-${n}`,s),...i}));return t.displayName=O0(n),t};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const _A=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],kA=St("bot",_A);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const NA=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xA=St("circle-play",NA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const OA=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],R0=St("database",OA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const RA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],PA=St("layout-grid",RA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const DA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],MA=St("loader-circle",DA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const LA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UA=St("log-out",LA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const FA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],jA=St("message-circle",FA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const VA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],op=St("pencil",VA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dl=St("plus",qA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const HA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zA=St("save",HA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const GA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],BA=St("search",GA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $A=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],JA=St("send",$A);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const WA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P0=St("settings",WA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const KA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],YA=St("shield-check",KA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const QA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],XA=St("sparkles",QA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ZA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ip=St("trash-2",ZA);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const e_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],t_=St("user",e_);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const n_=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],r_=St("video",n_);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const s_=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],o_=St("volume-2",s_);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const i_=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],a_=St("youtube",i_);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const l_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],em=St("x",l_),u_=()=>{};var D0={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ME=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},c_=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[s++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],c=n[t++],f=n[t++],m=((i&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const l=n[i],c=i+1<n.length,f=c?n[i+1]:0,m=i+2<n.length,v=m?n[i+2]:0,b=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|v>>6,N=v&63;m||(N=64,c||(C=64)),s.push(t[b],t[E],t[C],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ME(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||c==null||f==null||m==null)throw new d_;const v=l<<2|c>>4;if(s.push(v),f!==64){const b=c<<4&240|f>>2;if(s.push(b),m!==64){const E=f<<6&192|m;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class d_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h_=function(n){const e=ME(n);return LE.encodeByteArray(e,!0)},cd=function(n){return h_(n).replace(/\./g,"")},UE=function(n){try{return LE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p_=()=>f_().__FIREBASE_DEFAULTS__,m_=()=>{if(typeof process>"u"||typeof D0>"u")return;const n=D0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},g_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&UE(n[1]);return e&&JSON.parse(e)},Dd=()=>{try{return u_()||p_()||m_()||g_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FE=n=>{var e,t;return(t=(e=Dd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},v_=n=>{const e=FE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},jE=()=>{var n;return(n=Dd())==null?void 0:n.config},VE=n=>{var e;return(e=Dd())==null?void 0:e[`_${n}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qE(n){return(await fetch(n,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function b_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[cd(JSON.stringify(t)),cd(JSON.stringify(c)),""].join(".")}const Hl={};function w_(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?n.emulator.push(e):n.prod.push(e);return n}function E_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M0=!1;function HE(n,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||Hl[n]===e||Hl[n]||M0)return;Hl[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",i=w_().prod.length>0;function l(){const E=document.getElementById(s);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{M0=!0,l()},E}function v(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){const E=E_(s),C=t("text"),N=document.getElementById(C)||document.createElement("span"),H=t("learnmore"),L=document.getElementById(H)||document.createElement("a"),q=t("preprendIcon"),J=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Z=E.element;c(Z),v(L,H);const se=m();f(J,q),Z.append(J,N,L,se),document.body.appendChild(Z)}i?(N.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function T_(){var n;const e=(n=Dd())==null?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function A_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function __(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k_(){return!T_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N_(){try{return typeof indexedDB=="object"}catch{return!1}}function x_(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const O_="FirebaseError";class cs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=O_,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?R_(l,s):"Error",f=`${this.serviceName}: ${c} (${i}).`;return new cs(i,f,s)}}function R_(n,e){return n.replace(P_,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const P_=/\{\$([^}]+)}/g;function D_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ko(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const l=n[i],c=e[i];if(L0(l)&&L0(c)){if(!Ko(l,c))return!1}else if(l!==c)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function L0(n){return n!==null&&typeof n=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[s,i]=t.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ul(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function M_(n,e){const t=new L_(n,e);return t.subscribe.bind(t)}class L_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");U_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=ap),i.error===void 0&&(i.error=ap),i.complete===void 0&&(i.complete=ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U_(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qn(n){return n&&n._delegate?n._delegate:n}class Yo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $o="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new y_;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V_(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});s.resolve(l)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:j_(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j_(n){return n===$o?void 0:n}function V_(n){return n.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class q_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const H_={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},z_=Me.INFO,G_={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},B_=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=G_[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=z_,this._logHandler=B_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const $_=(n,e)=>e.some(t=>n instanceof t);let U0,F0;function J_(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W_(){return F0||(F0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,bp=new WeakMap,GE=new WeakMap,lp=new WeakMap,nm=new WeakMap;function K_(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(eo(n.result)),i()},c=()=>{s(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zE.set(t,n)}).catch(()=>{}),nm.set(e,n),e}function Y_(n){if(bp.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),i()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bp.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return eo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q_(n){wp=n(wp)}function X_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(up(this),e,...t);return GE.set(s,e.sort?e.sort():[e]),eo(s)}:W_().includes(n)?function(...e){return n.apply(up(this),e),eo(zE.get(this))}:function(...e){return eo(n.apply(up(this),e))}}function Z_(n){return typeof n=="function"?X_(n):(n instanceof IDBTransaction&&Y_(n),$_(n,J_())?new Proxy(n,wp):n)}function eo(n){if(n instanceof IDBRequest)return K_(n);if(lp.has(n))return lp.get(n);const e=Z_(n);return e!==n&&(lp.set(n,e),nm.set(e,n)),e}const up=n=>nm.get(n);function e1(n,e,{blocked:t,upgrade:s,blocking:i,terminated:l}={}){const c=indexedDB.open(n,e),f=eo(c);return s&&c.addEventListener("upgradeneeded",m=>{s(eo(c.result),m.oldVersion,m.newVersion,eo(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),i&&m.addEventListener("versionchange",v=>i(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const t1=["get","getKey","getAll","getAllKeys","count"],n1=["put","add","delete","clear"],cp=new Map;function j0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=n1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||t1.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,i?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),i&&m.done]))[0]};return cp.set(e,l),l}Q_(n=>({...n,get:(e,t,s)=>j0(e,t)||n.get(e,t,s),has:(e,t)=>!!j0(e,t)||n.has(e,t)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(s1(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(" ")}}function s1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",V0="0.14.6";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const os=new tm("@firebase/app"),o1="@firebase/app-compat",i1="@firebase/analytics-compat",a1="@firebase/analytics",l1="@firebase/app-check-compat",u1="@firebase/app-check",c1="@firebase/auth",d1="@firebase/auth-compat",h1="@firebase/database",f1="@firebase/data-connect",p1="@firebase/database-compat",m1="@firebase/functions",g1="@firebase/functions-compat",v1="@firebase/installations",y1="@firebase/installations-compat",b1="@firebase/messaging",w1="@firebase/messaging-compat",E1="@firebase/performance",S1="@firebase/performance-compat",T1="@firebase/remote-config",C1="@firebase/remote-config-compat",I1="@firebase/storage",A1="@firebase/storage-compat",_1="@firebase/firestore",k1="@firebase/ai",N1="@firebase/firestore-compat",x1="firebase",O1="12.6.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Sp="[DEFAULT]",R1={[Ep]:"fire-core",[o1]:"fire-core-compat",[a1]:"fire-analytics",[i1]:"fire-analytics-compat",[u1]:"fire-app-check",[l1]:"fire-app-check-compat",[c1]:"fire-auth",[d1]:"fire-auth-compat",[h1]:"fire-rtdb",[f1]:"fire-data-connect",[p1]:"fire-rtdb-compat",[m1]:"fire-fn",[g1]:"fire-fn-compat",[v1]:"fire-iid",[y1]:"fire-iid-compat",[b1]:"fire-fcm",[w1]:"fire-fcm-compat",[E1]:"fire-perf",[S1]:"fire-perf-compat",[T1]:"fire-rc",[C1]:"fire-rc-compat",[I1]:"fire-gcs",[A1]:"fire-gcs-compat",[_1]:"fire-fst",[N1]:"fire-fst-compat",[k1]:"fire-vertex","fire-js":"fire-js",[x1]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dd=new Map,P1=new Map,Tp=new Map;function q0(n,e){try{n.container.addComponent(e)}catch(t){os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ua(n){const e=n.name;if(Tp.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,n);for(const t of dd.values())q0(t,n);for(const t of P1.values())q0(t,n);return!0}function rm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const D1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new au("app","Firebase",D1);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M1{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ya=O1;function BE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Sp,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw to.create("bad-app-name",{appName:String(i)});if(t||(t=jE()),!t)throw to.create("no-options");const l=dd.get(i);if(l){if(Ko(t,l.options)&&Ko(s,l.config))return l;throw to.create("duplicate-app",{appName:i})}const c=new q_(i);for(const m of Tp.values())c.addComponent(m);const f=new M1(t,s,c);return dd.set(i,f),f}function $E(n=Sp){const e=dd.get(n);if(!e&&n===Sp&&jE())return BE();if(!e)throw to.create("no-app",{appName:n});return e}function no(n,e,t){let s=R1[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(c.join(" "));return}ua(new Yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const L1="firebase-heartbeat-database",U1=1,Yl="firebase-heartbeat-store";let dp=null;function JE(){return dp||(dp=e1(L1,U1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),dp}async function F1(n){try{const e=(await JE()).transaction(Yl),t=await e.objectStore(Yl).get(WE(n));return await e.done,t}catch(e){if(e instanceof cs)os.warn(e.message);else{const t=to.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(t.message)}}}async function H0(n,e){try{const t=(await JE()).transaction(Yl,"readwrite");await t.objectStore(Yl).put(e,WE(n)),await t.done}catch(t){if(t instanceof cs)os.warn(t.message);else{const s=to.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});os.warn(s.message)}}}function WE(n){return`${n.name}!${n.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const j1=1024,V1=30;class q1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>V1){const l=G1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){os.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=z0(),{heartbeatsToSend:s,unsentEntries:i}=H1(this._heartbeatsCache.heartbeats),l=cd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return os.warn(t),""}}}function z0(){return new Date().toISOString().substring(0,10)}function H1(n,e=j1){const t=[];let s=n.slice();for(const i of n){const l=t.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),G0(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),G0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class z1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N_()?x_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await F1(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return H0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}}function G0(n){return cd(JSON.stringify({version:2,heartbeats:n})).length}function G1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function B1(n){ua(new Yo("platform-logger",e=>new r1(e),"PRIVATE")),ua(new Yo("heartbeat",e=>new q1(e),"PRIVATE")),no(Ep,V0,n),no(Ep,V0,"esm2020"),no("fire-js","")}B1("");var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,KE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,_){function k(){}k.prototype=_.prototype,x.F=_.prototype,x.prototype=new k,x.prototype.constructor=x,x.D=function(M,D,F){for(var O=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)O[$e-2]=arguments[$e];return _.prototype[D].apply(M,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,_,k){k||(k=0);const M=Array(16);if(typeof _=="string")for(var D=0;D<16;++D)M[D]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(D=0;D<16;++D)M[D]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=x.g[0],k=x.g[1],D=x.g[2];let F=x.g[3],O;O=_+(F^k&(D^F))+M[0]+3614090360&4294967295,_=k+(O<<7&4294967295|O>>>25),O=F+(D^_&(k^D))+M[1]+3905402710&4294967295,F=_+(O<<12&4294967295|O>>>20),O=D+(k^F&(_^k))+M[2]+606105819&4294967295,D=F+(O<<17&4294967295|O>>>15),O=k+(_^D&(F^_))+M[3]+3250441966&4294967295,k=D+(O<<22&4294967295|O>>>10),O=_+(F^k&(D^F))+M[4]+4118548399&4294967295,_=k+(O<<7&4294967295|O>>>25),O=F+(D^_&(k^D))+M[5]+1200080426&4294967295,F=_+(O<<12&4294967295|O>>>20),O=D+(k^F&(_^k))+M[6]+2821735955&4294967295,D=F+(O<<17&4294967295|O>>>15),O=k+(_^D&(F^_))+M[7]+4249261313&4294967295,k=D+(O<<22&4294967295|O>>>10),O=_+(F^k&(D^F))+M[8]+1770035416&4294967295,_=k+(O<<7&4294967295|O>>>25),O=F+(D^_&(k^D))+M[9]+2336552879&4294967295,F=_+(O<<12&4294967295|O>>>20),O=D+(k^F&(_^k))+M[10]+4294925233&4294967295,D=F+(O<<17&4294967295|O>>>15),O=k+(_^D&(F^_))+M[11]+2304563134&4294967295,k=D+(O<<22&4294967295|O>>>10),O=_+(F^k&(D^F))+M[12]+1804603682&4294967295,_=k+(O<<7&4294967295|O>>>25),O=F+(D^_&(k^D))+M[13]+4254626195&4294967295,F=_+(O<<12&4294967295|O>>>20),O=D+(k^F&(_^k))+M[14]+2792965006&4294967295,D=F+(O<<17&4294967295|O>>>15),O=k+(_^D&(F^_))+M[15]+1236535329&4294967295,k=D+(O<<22&4294967295|O>>>10),O=_+(D^F&(k^D))+M[1]+4129170786&4294967295,_=k+(O<<5&4294967295|O>>>27),O=F+(k^D&(_^k))+M[6]+3225465664&4294967295,F=_+(O<<9&4294967295|O>>>23),O=D+(_^k&(F^_))+M[11]+643717713&4294967295,D=F+(O<<14&4294967295|O>>>18),O=k+(F^_&(D^F))+M[0]+3921069994&4294967295,k=D+(O<<20&4294967295|O>>>12),O=_+(D^F&(k^D))+M[5]+3593408605&4294967295,_=k+(O<<5&4294967295|O>>>27),O=F+(k^D&(_^k))+M[10]+38016083&4294967295,F=_+(O<<9&4294967295|O>>>23),O=D+(_^k&(F^_))+M[15]+3634488961&4294967295,D=F+(O<<14&4294967295|O>>>18),O=k+(F^_&(D^F))+M[4]+3889429448&4294967295,k=D+(O<<20&4294967295|O>>>12),O=_+(D^F&(k^D))+M[9]+568446438&4294967295,_=k+(O<<5&4294967295|O>>>27),O=F+(k^D&(_^k))+M[14]+3275163606&4294967295,F=_+(O<<9&4294967295|O>>>23),O=D+(_^k&(F^_))+M[3]+4107603335&4294967295,D=F+(O<<14&4294967295|O>>>18),O=k+(F^_&(D^F))+M[8]+1163531501&4294967295,k=D+(O<<20&4294967295|O>>>12),O=_+(D^F&(k^D))+M[13]+2850285829&4294967295,_=k+(O<<5&4294967295|O>>>27),O=F+(k^D&(_^k))+M[2]+4243563512&4294967295,F=_+(O<<9&4294967295|O>>>23),O=D+(_^k&(F^_))+M[7]+1735328473&4294967295,D=F+(O<<14&4294967295|O>>>18),O=k+(F^_&(D^F))+M[12]+2368359562&4294967295,k=D+(O<<20&4294967295|O>>>12),O=_+(k^D^F)+M[5]+4294588738&4294967295,_=k+(O<<4&4294967295|O>>>28),O=F+(_^k^D)+M[8]+2272392833&4294967295,F=_+(O<<11&4294967295|O>>>21),O=D+(F^_^k)+M[11]+1839030562&4294967295,D=F+(O<<16&4294967295|O>>>16),O=k+(D^F^_)+M[14]+4259657740&4294967295,k=D+(O<<23&4294967295|O>>>9),O=_+(k^D^F)+M[1]+2763975236&4294967295,_=k+(O<<4&4294967295|O>>>28),O=F+(_^k^D)+M[4]+1272893353&4294967295,F=_+(O<<11&4294967295|O>>>21),O=D+(F^_^k)+M[7]+4139469664&4294967295,D=F+(O<<16&4294967295|O>>>16),O=k+(D^F^_)+M[10]+3200236656&4294967295,k=D+(O<<23&4294967295|O>>>9),O=_+(k^D^F)+M[13]+681279174&4294967295,_=k+(O<<4&4294967295|O>>>28),O=F+(_^k^D)+M[0]+3936430074&4294967295,F=_+(O<<11&4294967295|O>>>21),O=D+(F^_^k)+M[3]+3572445317&4294967295,D=F+(O<<16&4294967295|O>>>16),O=k+(D^F^_)+M[6]+76029189&4294967295,k=D+(O<<23&4294967295|O>>>9),O=_+(k^D^F)+M[9]+3654602809&4294967295,_=k+(O<<4&4294967295|O>>>28),O=F+(_^k^D)+M[12]+3873151461&4294967295,F=_+(O<<11&4294967295|O>>>21),O=D+(F^_^k)+M[15]+530742520&4294967295,D=F+(O<<16&4294967295|O>>>16),O=k+(D^F^_)+M[2]+3299628645&4294967295,k=D+(O<<23&4294967295|O>>>9),O=_+(D^(k|~F))+M[0]+4096336452&4294967295,_=k+(O<<6&4294967295|O>>>26),O=F+(k^(_|~D))+M[7]+1126891415&4294967295,F=_+(O<<10&4294967295|O>>>22),O=D+(_^(F|~k))+M[14]+2878612391&4294967295,D=F+(O<<15&4294967295|O>>>17),O=k+(F^(D|~_))+M[5]+4237533241&4294967295,k=D+(O<<21&4294967295|O>>>11),O=_+(D^(k|~F))+M[12]+1700485571&4294967295,_=k+(O<<6&4294967295|O>>>26),O=F+(k^(_|~D))+M[3]+2399980690&4294967295,F=_+(O<<10&4294967295|O>>>22),O=D+(_^(F|~k))+M[10]+4293915773&4294967295,D=F+(O<<15&4294967295|O>>>17),O=k+(F^(D|~_))+M[1]+2240044497&4294967295,k=D+(O<<21&4294967295|O>>>11),O=_+(D^(k|~F))+M[8]+1873313359&4294967295,_=k+(O<<6&4294967295|O>>>26),O=F+(k^(_|~D))+M[15]+4264355552&4294967295,F=_+(O<<10&4294967295|O>>>22),O=D+(_^(F|~k))+M[6]+2734768916&4294967295,D=F+(O<<15&4294967295|O>>>17),O=k+(F^(D|~_))+M[13]+1309151649&4294967295,k=D+(O<<21&4294967295|O>>>11),O=_+(D^(k|~F))+M[4]+4149444226&4294967295,_=k+(O<<6&4294967295|O>>>26),O=F+(k^(_|~D))+M[11]+3174756917&4294967295,F=_+(O<<10&4294967295|O>>>22),O=D+(_^(F|~k))+M[2]+718787259&4294967295,D=F+(O<<15&4294967295|O>>>17),O=k+(F^(D|~_))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+_&4294967295,x.g[1]=x.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+F&4294967295}s.prototype.v=function(x,_){_===void 0&&(_=x.length);const k=_-this.blockSize,M=this.C;let D=this.h,F=0;for(;F<_;){if(D==0)for(;F<=k;)i(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<_;)if(M[D++]=x.charCodeAt(F++),D==this.blockSize){i(this,M),D=0;break}}else for(;F<_;)if(M[D++]=x[F++],D==this.blockSize){i(this,M),D=0;break}}this.h=D,this.o+=_},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var _=1;_<x.length-8;++_)x[_]=0;_=this.o*8;for(var k=x.length-8;k<x.length;++k)x[k]=_&255,_/=256;for(this.v(x),x=Array(16),_=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)x[_++]=this.g[k]>>>M&255;return x};function l(x,_){var k=f;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=_(x)}function c(x,_){this.h=_;const k=[];let M=!0;for(let D=x.length-1;D>=0;D--){const F=x[D]|0;M&&F==_||(k[D]=F,M=!1)}this.g=k}var f={};function m(x){return-128<=x&&x<128?l(x,function(_){return new c([_|0],_<0?-1:0)}):new c([x|0],x<0?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return q(v(-x));const _=[];let k=1;for(let M=0;x>=k;M++)_[M]=x/k|0,k*=4294967296;return new c(_,0)}function b(x,_){if(x.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(x.charAt(0)=="-")return q(b(x.substring(1),_));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=v(Math.pow(_,8));let M=E;for(let F=0;F<x.length;F+=8){var D=Math.min(8,x.length-F);const O=parseInt(x.substring(F,F+D),_);D<8?(D=v(Math.pow(_,D)),M=M.j(D).add(v(O))):(M=M.j(k),M=M.add(v(O)))}return M}var E=m(0),C=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-q(this).m();let x=0,_=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);x+=(M>=0?M:4294967296+M)*_,_*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(H(this))return"0";if(L(this))return"-"+q(this).toString(x);const _=v(Math.pow(x,6));var k=this;let M="";for(;;){const D=ie(k,_).g;k=J(k,D.j(_));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(x);if(k=D,H(k))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function H(x){if(x.h!=0)return!1;for(let _=0;_<x.g.length;_++)if(x.g[_]!=0)return!1;return!0}function L(x){return x.h==-1}n.l=function(x){return x=J(this,x),L(x)?-1:H(x)?0:1};function q(x){const _=x.g.length,k=[];for(let M=0;M<_;M++)k[M]=~x.g[M];return new c(k,~x.h).add(C)}n.abs=function(){return L(this)?q(this):this},n.add=function(x){const _=Math.max(this.g.length,x.g.length),k=[];let M=0;for(let D=0;D<=_;D++){let F=M+(this.i(D)&65535)+(x.i(D)&65535),O=(F>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);M=O>>>16,F&=65535,O&=65535,k[D]=O<<16|F}return new c(k,k[k.length-1]&-2147483648?-1:0)};function J(x,_){return x.add(q(_))}n.j=function(x){if(H(this)||H(x))return E;if(L(this))return L(x)?q(this).j(q(x)):q(q(this).j(x));if(L(x))return q(this.j(q(x)));if(this.l(N)<0&&x.l(N)<0)return v(this.m()*x.m());const _=this.g.length+x.g.length,k=[];for(var M=0;M<2*_;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<x.g.length;D++){const F=this.i(M)>>>16,O=this.i(M)&65535,$e=x.i(D)>>>16,pt=x.i(D)&65535;k[2*M+2*D]+=O*pt,Z(k,2*M+2*D),k[2*M+2*D+1]+=F*pt,Z(k,2*M+2*D+1),k[2*M+2*D+1]+=O*$e,Z(k,2*M+2*D+1),k[2*M+2*D+2]+=F*$e,Z(k,2*M+2*D+2)}for(x=0;x<_;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=_;x<2*_;x++)k[x]=0;return new c(k,0)};function Z(x,_){for(;(x[_]&65535)!=x[_];)x[_+1]+=x[_]>>>16,x[_]&=65535,_++}function se(x,_){this.g=x,this.h=_}function ie(x,_){if(H(_))throw Error("division by zero");if(H(x))return new se(E,E);if(L(x))return _=ie(q(x),_),new se(q(_.g),q(_.h));if(L(_))return _=ie(x,q(_)),new se(q(_.g),_.h);if(x.g.length>30){if(L(x)||L(_))throw Error("slowDivide_ only works with positive integers.");for(var k=C,M=_;M.l(x)<=0;)k=pe(k),M=pe(M);var D=re(k,1),F=re(M,1);for(M=re(M,2),k=re(k,2);!H(M);){var O=F.add(M);O.l(x)<=0&&(D=D.add(k),F=O),M=re(M,1),k=re(k,1)}return _=J(x,D.j(_)),new se(D,_)}for(D=E;x.l(_)>=0;){for(k=Math.max(1,Math.floor(x.m()/_.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=v(k),O=F.j(_);L(O)||O.l(x)>0;)k-=M,F=v(k),O=F.j(_);H(F)&&(F=C),D=D.add(F),x=J(x,O)}return new se(D,x)}n.B=function(x){return ie(this,x).h},n.and=function(x){const _=Math.max(this.g.length,x.g.length),k=[];for(let M=0;M<_;M++)k[M]=this.i(M)&x.i(M);return new c(k,this.h&x.h)},n.or=function(x){const _=Math.max(this.g.length,x.g.length),k=[];for(let M=0;M<_;M++)k[M]=this.i(M)|x.i(M);return new c(k,this.h|x.h)},n.xor=function(x){const _=Math.max(this.g.length,x.g.length),k=[];for(let M=0;M<_;M++)k[M]=this.i(M)^x.i(M);return new c(k,this.h^x.h)};function pe(x){const _=x.g.length+1,k=[];for(let M=0;M<_;M++)k[M]=x.i(M)<<1|x.i(M-1)>>>31;return new c(k,x.h)}function re(x,_){const k=_>>5;_%=32;const M=x.g.length-k,D=[];for(let F=0;F<M;F++)D[F]=_>0?x.i(F+k)>>>_|x.i(F+k+1)<<32-_:x.i(F+k);return new c(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,KE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=b,ro=c}).apply(typeof B0<"u"?B0:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YE,Fl,QE,Xc,Cp,XE,ZE,eS;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var w=0;w<p.length;++w){var T=p[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function i(p,w){if(w)e:{var T=s;p=p.split(".");for(var A=0;A<p.length-1;A++){var z=p[A];if(!(z in T))break e;T=T[z]}p=p[p.length-1],A=T[p],w=w(A),w!=A&&w!=null&&e(T,p,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(w){var T=[],A;for(A in w)Object.prototype.hasOwnProperty.call(w,A)&&T.push([A,w[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function m(p,w,T){return p.call.apply(p.bind,arguments)}function v(p,w,T){return v=m,v.apply(null,arguments)}function b(p,w){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),p.apply(this,A)}}function E(p,w){function T(){}T.prototype=w.prototype,p.Z=w.prototype,p.prototype=new T,p.prototype.constructor=p,p.Ob=function(A,z,W){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return w.prototype[z].apply(A,ae)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function N(p){const w=p.length;if(w>0){const T=Array(w);for(let A=0;A<w;A++)T[A]=p[A];return T}return[]}function H(p,w){for(let A=1;A<arguments.length;A++){const z=arguments[A];var T=typeof z;if(T=T!="object"?T:z?Array.isArray(z)?"array":T:"null",T=="array"||T=="object"&&typeof z.length=="number"){T=p.length||0;const W=z.length||0;p.length=T+W;for(let ae=0;ae<W;ae++)p[T+ae]=z[ae]}else p.push(z)}}class L{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function q(p){c.setTimeout(()=>{throw p},0)}function J(){var p=x;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class Z{constructor(){this.h=this.g=null}add(w,T){const A=se.get();A.set(w,T),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new L(()=>new ie,p=>p.reset());class ie{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,re=!1,x=new Z,_=()=>{const p=Promise.resolve(void 0);pe=()=>{p.then(k)}};function k(){for(var p;p=J();){try{p.h.call(p.g)}catch(T){q(T)}var w=se;w.j(p),w.h<100&&(w.h++,p.next=w.g,w.g=p)}re=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};c.addEventListener("test",T,w),c.removeEventListener("test",T,w)}catch{}return p})();function O(p){return/^[\s\xa0]*$/.test(p)}function $e(p,w){D.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,w)}E($e,D),$e.prototype.init=function(p,w){const T=this.type=p.type,A=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget,w||(T=="mouseover"?w=p.fromElement:T=="mouseout"&&(w=p.toElement)),this.relatedTarget=w,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(p,w,T,A,z){this.listener=p,this.proxy=null,this.src=w,this.type=T,this.capture=!!A,this.ha=z,this.key=++Y,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function He(p,w,T){for(const A in p)w.call(T,p[A],A,p)}function Ke(p,w){for(const T in p)w.call(void 0,p[T],T,p)}function j(p){const w={};for(const T in p)w[T]=p[T];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,w){let T,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(T in A)p[T]=A[T];for(let W=0;W<ee.length;W++)T=ee[W],Object.prototype.hasOwnProperty.call(A,T)&&(p[T]=A[T])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,w,T,A,z){const W=p.toString();p=this.g[W],p||(p=this.g[W]=[],this.h++);const ae=ke(p,w,A,z);return ae>-1?(w=p[ae],T||(w.fa=!1)):(w=new le(w,this.src,W,!!A,z),w.fa=T,p.push(w)),w};function Te(p,w){const T=w.type;if(T in p.g){var A=p.g[T],z=Array.prototype.indexOf.call(A,w,void 0),W;(W=z>=0)&&Array.prototype.splice.call(A,z,1),W&&(ye(w),p.g[T].length==0&&(delete p.g[T],p.h--))}}function ke(p,w,T,A){for(let z=0;z<p.length;++z){const W=p[z];if(!W.da&&W.listener==w&&W.capture==!!T&&W.ha==A)return z}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(p,w,T,A,z){if(Array.isArray(w)){for(let W=0;W<w.length;W++)ut(p,w[W],T,A,z);return null}return T=xa(T),p&&p[pt]?p.J(w,T,f(A)?!!A.capture:!1,z):mo(p,w,T,!1,A,z)}function mo(p,w,T,A,z,W){if(!w)throw Error("Invalid event type");const ae=f(z)?!!z.capture:!!z;let Ne=go(p);if(Ne||(p[je]=Ne=new he(p)),T=Ne.add(w,T,A,ae,W),T.proxy)return T;if(A=ii(),T.proxy=A,A.src=p,A.listener=T,p.addEventListener)F||(z=ae),z===void 0&&(z=!1),p.addEventListener(w.toString(),A,z);else if(p.attachEvent)p.attachEvent(ir(w.toString()),A);else if(p.addListener&&p.removeListener)p.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ii(){function p(T){return w.call(p.src,p.listener,T)}const w=ka;return p}function ai(p,w,T,A,z){if(Array.isArray(w))for(var W=0;W<w.length;W++)ai(p,w[W],T,A,z);else A=f(A)?!!A.capture:!!A,T=xa(T),p&&p[pt]?(p=p.i,W=String(w).toString(),W in p.g&&(w=p.g[W],T=ke(w,T,A,z),T>-1&&(ye(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete p.g[W],p.h--)))):p&&(p=go(p))&&(w=p.g[w.toString()],p=-1,w&&(p=ke(w,T,A,z)),(T=p>-1?w[p]:null)&&li(T))}function li(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[pt])Te(w.i,p);else{var T=p.type,A=p.proxy;w.removeEventListener?w.removeEventListener(T,A,p.capture):w.detachEvent?w.detachEvent(ir(T),A):w.addListener&&w.removeListener&&w.removeListener(A),(T=go(w))?(Te(T,p),T.h==0&&(T.src=null,w[je]=null)):ye(p)}}}function ir(p){return p in Dt?Dt[p]:Dt[p]="on"+p}function ka(p,w){if(p.da)p=!0;else{w=new $e(w,this);const T=p.listener,A=p.ha||p.src;p.fa&&li(p),p=T.call(A,w)}return p}function go(p){return p=p[je],p instanceof he?p:null}var Na="__closure_events_fn_"+(Math.random()*1e9>>>0);function xa(p){return typeof p=="function"?p:(p[Na]||(p[Na]=function(w){return p.handleEvent(w)}),p[Na])}function Tt(){M.call(this),this.i=new he(this),this.M=this,this.G=null}E(Tt,M),Tt.prototype[pt]=!0,Tt.prototype.removeEventListener=function(p,w,T,A){ai(this,p,w,T,A)};function Mt(p,w){var T,A=p.G;if(A)for(T=[];A;A=A.G)T.push(A);if(p=p.M,A=w.type||w,typeof w=="string")w=new D(w,p);else if(w instanceof D)w.target=w.target||p;else{var z=w;w=new D(A,p),ue(w,z)}z=!0;let W,ae;if(T)for(ae=T.length-1;ae>=0;ae--)W=w.g=T[ae],z=fs(W,A,!0,w)&&z;if(W=w.g=p,z=fs(W,A,!0,w)&&z,z=fs(W,A,!1,w)&&z,T)for(ae=0;ae<T.length;ae++)W=w.g=T[ae],z=fs(W,A,!1,w)&&z}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var p=this.i;for(const w in p.g){const T=p.g[w];for(let A=0;A<T.length;A++)ye(T[A]);delete p.g[w],p.h--}}this.G=null},Tt.prototype.J=function(p,w,T,A){return this.i.add(String(p),w,!1,T,A)},Tt.prototype.K=function(p,w,T,A){return this.i.add(String(p),w,!0,T,A)};function fs(p,w,T,A){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();let z=!0;for(let W=0;W<w.length;++W){const ae=w[W];if(ae&&!ae.da&&ae.capture==T){const Ne=ae.listener,yt=ae.ha||ae.src;ae.fa&&Te(p.i,ae),z=Ne.call(yt,A)!==!1&&z}}return z&&!A.defaultPrevented}function sh(p,w){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(p,w||0)}function vu(p){p.g=sh(()=>{p.g=null,p.i&&(p.i=!1,vu(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class on extends M{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vo(p){M.call(this),this.h=p,this.g={}}E(vo,M);var Oa=[];function Ra(p){He(p.g,function(w,T){this.g.hasOwnProperty(T)&&li(w)},p),p.g={}}vo.prototype.N=function(){vo.Z.N.call(this),Ra(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=c.JSON.stringify,oh=c.JSON.parse,yu=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function bu(){}function wu(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){D.call(this,"d")}E(Gt,D);function An(){D.call(this,"c")}E(An,D);var vt={},Eu=null;function ui(){return Eu=Eu||new Tt}vt.Ia="serverreachability";function Su(p){D.call(this,vt.Ia,p)}E(Su,D);function ar(p){const w=ui();Mt(w,new Su(w))}vt.STAT_EVENT="statevent";function yo(p,w){D.call(this,vt.STAT_EVENT,p),this.stat=w}E(yo,D);function Ct(p){const w=ui();Mt(w,new yo(w,p))}vt.Ja="timingevent";function lr(p,w){D.call(this,vt.Ja,p),this.size=w}E(lr,D);function ur(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},w)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function ih(p,w,T,A,z,W){p.info(function(){if(p.g)if(W){var ae="",Ne=W.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var yt=Ne[Qe].split("=");if(yt.length>1){const ct=yt[0];yt=yt[1];const xn=ct.split("_");ae=xn.length>=2&&xn[1]=="type"?ae+(ct+"="+yt+"&"):ae+(ct+"=redacted&")}}}else ae=null;else ae=W;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+w+`
`+T+`
`+ae})}function Tu(p,w,T,A,z,W,ae){p.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+w+`
`+T+`
`+W+" "+ae})}function cr(p,w,T,A){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+ah(p,T)+(A?" "+A:"")})}function bo(p,w){p.info(function(){return"TIMEOUT: "+w})}zn.prototype.info=function(){};function ah(p,w){if(!p.g)return w;if(!w)return null;try{const W=JSON.parse(w);if(W){for(p=0;p<W.length;p++)if(Array.isArray(W[p])){var T=W[p];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ae=1;ae<A.length;ae++)A[ae]=""}}}}return ps(W)}catch{return w}}var wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Da;function Eo(){}E(Eo,bu),Eo.prototype.g=function(){return new XMLHttpRequest},Da=new Eo;function Lr(p){return encodeURIComponent(String(p))}function Cu(p){var w=1;p=p.split(":");const T=[];for(;w>0&&p.length;)T.push(p.shift()),w--;return p.length&&T.push(p.join(":")),T}function Gn(p,w,T,A){this.j=p,this.i=w,this.l=T,this.S=A||1,this.V=new vo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var It={},jt={};function dr(p,w,T){p.M=1,p.A=So(_t(w)),p.u=T,p.R=!0,ci(p,null)}function ci(p,w){p.F=Date.now(),hr(p),p.B=_t(p.A);var T=p.B,A=p.S;Array.isArray(A)||(A=[String(A)]),pi(T.i,"t",A),p.C=0,T=p.j.L,p.h=new Bn,p.g=ju(p.j,T?w:null,!p.u),p.P>0&&(p.O=new on(v(p.Y,p,p.g),p.P)),w=p.V,T=p.g,A=p.ba;var z="readystatechange";Array.isArray(z)||(z&&(Oa[0]=z.toString()),z=Oa);for(let W=0;W<z.length;W++){const ae=ut(T,z[W],A||w.handleEvent,!1,w.h||w);if(!ae)break;w.g[ae.key]=ae}w=p.J?j(p.J):{},p.u?(p.v||(p.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,w)):(p.v="GET",p.g.ea(p.B,p.v,null,w)),ar(),ih(p.i,p.v,p.B,p.l,p.S,p.u)}Gn.prototype.ba=function(p){p=p.target;const w=this.O;w&&Wn(p)==3?w.j():this.Y(p)},Gn.prototype.Y=function(p){try{if(p==this.g)e:{const Ne=Wn(this.g),yt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||Ne!=4||yt==7||(yt==8||Qe<=0?ar(3):ar(2)),fr(this);var w=this.g.ca();this.X=w;var T=lh(this);if(this.o=w==200,Tu(this.i,this.v,this.B,this.l,this.S,Ne,w),this.o){if(this.U&&!this.L){t:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(A)){var W=A;break t}}W=null}if(p=W)cr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pr(this,p);else{this.o=!1,this.m=3,Ct(12),gn(this),_n(this);break e}}if(this.R){p=!0;let ct;for(;!this.K&&this.C<T.length;)if(ct=Au(this,T),ct==jt){Ne==4&&(this.m=4,Ct(14),p=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==It){this.m=4,Ct(15),cr(this.i,this.l,T,"[Invalid Chunk]"),p=!1;break}else cr(this.i,this.l,ct,null),pr(this,ct);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||T.length!=0||this.h.h||(this.m=1,Ct(16),p=!1),this.o=this.o&&p,!p)cr(this.i,this.l,T,"[Invalid Chunked Response]"),gn(this),_n(this);else if(T.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ka(ae),ae.P=!0,Ct(11))}}else cr(this.i,this.l,T,null),pr(this,T);Ne==4&&gn(this),this.o&&!this.K&&(Ne==4?Mu(this.j,this):(this.o=!1,hr(this)))}else Fr(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),gn(this),_n(this)}}}catch{}finally{}};function lh(p){if(!Iu(p))return p.g.la();const w=Bt(p.g);if(w==="")return"";let T="";const A=w.length,z=Wn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return gn(p),_n(p),"";p.h.i=new c.TextDecoder}for(let W=0;W<A;W++)p.h.h=!0,T+=p.h.i.decode(w[W],{stream:!(z&&W==A-1)});return w.length=0,p.h.g+=T,p.C=0,p.h.g}function Iu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Au(p,w){var T=p.C,A=w.indexOf(`
`,T);return A==-1?jt:(T=Number(w.substring(T,A)),isNaN(T)?It:(A+=1,A+T>w.length?jt:(w=w.slice(A,A+T),p.C=A+T,w)))}Gn.prototype.cancel=function(){this.K=!0,gn(this)};function hr(p){p.T=Date.now()+p.H,di(p,p.H)}function di(p,w){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ur(v(p.aa,p),w)}function fr(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Gn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(bo(this.i,this.B),this.M!=2&&(ar(),Ct(17)),gn(this),this.m=2,_n(this)):di(this,this.T-p)};function _n(p){p.j.I==0||p.K||Mu(p.j,p)}function gn(p){fr(p);var w=p.O;w&&typeof w.dispose=="function"&&w.dispose(),p.O=null,Ra(p.V),p.g&&(w=p.g,p.g=null,w.abort(),w.dispose())}function pr(p,w){try{var T=p.j;if(T.I!=0&&(T.g==p||gr(T.h,p))){if(!p.L&&gr(T.h,p)&&T.I==3){try{var A=T.Ba.g.parse(w)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<p.F)bi(T),Ss(T);else break e;No(T),Ct(18)}}else T.xa=z[1],0<T.xa-T.K&&z[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ur(v(T.Va,T),6e3));mr(T.h)<=1&&T.ta&&(T.ta=void 0)}else Sr(T,11)}else if((p.L||T.g==p)&&bi(T),!O(w))for(z=T.Ba.g.parse(w),w=0;w<z.length;w++){let Qe=z[w];const ct=Qe[0];if(!(ct<=T.K))if(T.K=ct,Qe=Qe[1],T.I==2)if(Qe[0]=="c"){T.M=Qe[1],T.ba=Qe[2];const xn=Qe[3];xn!=null&&(T.ka=xn,T.j.info("VER="+T.ka));const Vr=Qe[4];Vr!=null&&(T.za=Vr,T.j.info("SVER="+T.za));const Kn=Qe[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(A=1.5*Kn,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Yn=p.g;if(Yn){const xo=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var W=A.h;W.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ua(W,W.h),W.h=null))}if(A.G){const wi=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(A.wa=wi,Ye(A.J,A.G,wi))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-p.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var ae=p;if(A.na=Fu(A,A.L?A.ba:null,A.W),ae.L){Fa(A.h,ae);var Ne=ae,yt=A.O;yt&&(Ne.H=yt),Ne.D&&(fr(Ne),hr(Ne)),A.g=ae}else Pu(A);T.i.length>0&&Er(T)}else Qe[0]!="stop"&&Qe[0]!="close"||Sr(T,7);else T.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Sr(T,7):Ja(T):Qe[0]!="noop"&&T.l&&T.l.qa(Qe),T.A=0)}}ar(4)}catch{}}var At=class{constructor(p,w){this.g=p,this.map=w}};function Ma(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function La(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mr(p){return p.h?1:p.g?p.g.size:0}function gr(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function Ua(p,w){p.g?p.g.add(w):p.h=w}function Fa(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}Ma.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ja(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const T of p.g.values())w=w.concat(T.G);return w}return N(p.i)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(p,w){if(p){p=p.split("&");for(let T=0;T<p.length;T++){const A=p[T].indexOf("=");let z,W=null;A>=0?(z=p[T].substring(0,A),W=p[T].substring(A+1)):z=p[T],w(z,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function vn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;p instanceof vn?(this.l=p.l,Vt(this,p.j),this.o=p.o,this.g=p.g,ms(this,p.u),this.h=p.h,Va(this,Ou(p.i)),this.m=p.m):p&&(w=String(p).match(_u))?(this.l=!1,Vt(this,w[1]||"",!0),this.o=vr(w[2]||""),this.g=vr(w[3]||"",!0),ms(this,w[4]),this.h=vr(w[5]||"",!0),Va(this,w[6]||"",!0),this.m=vr(w[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}vn.prototype.toString=function(){const p=[];var w=this.j;w&&p.push(To(w,fi,!0),":");var T=this.g;return(T||w=="file")&&(p.push("//"),(w=this.o)&&p.push(To(w,fi,!0),"@"),p.push(Lr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&p.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(To(T,T.charAt(0)=="/"?qa:ku,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",To(T,Nu)),p.join("")},vn.prototype.resolve=function(p){const w=_t(this);let T=!!p.j;T?Vt(w,p.j):T=!!p.o,T?w.o=p.o:T=!!p.g,T?w.g=p.g:T=p.u!=null;var A=p.h;if(T)ms(w,p.u);else if(T=!!p.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=w.h.lastIndexOf("/");z!=-1&&(A=w.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const W=[];for(let ae=0;ae<z.length;){const Ne=z[ae++];Ne=="."?A&&ae==z.length&&W.push(""):Ne==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&ae==z.length&&W.push("")):(W.push(Ne),A=!0)}A=W.join("/")}else A=z}return T?w.h=A:T=p.i.toString()!=="",T?Va(w,Ou(p.i)):T=!!p.m,T&&(w.m=p.m),w};function _t(p){return new vn(p)}function Vt(p,w,T){p.j=T?vr(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function ms(p,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);p.u=w}else p.u=null}function Va(p,w,T){w instanceof vs?(p.i=w,mi(p.i,p.l)):(T||(w=To(w,gs)),p.i=new vs(w,p.l))}function Ye(p,w,T){p.i.set(w,T)}function So(p){return Ye(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vr(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function To(p,w,T){return typeof p=="string"?(p=encodeURI(p).replace(w,yn),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function yn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var fi=/[#\/\?@]/g,ku=/[#\?:]/g,qa=/[#\?]/g,gs=/[#\?@]/g,Nu=/#/g;function vs(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function un(p){p.g||(p.g=new Map,p.h=0,p.i&&hi(p.i,function(w,T){p.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=vs.prototype,n.add=function(p,w){un(this),this.i=null,p=ys(this,p);let T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(w),this.h+=1,this};function xu(p,w){un(p),w=ys(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function Ha(p,w){return un(p),w=ys(p,w),p.g.has(w)}n.forEach=function(p,w){un(this),this.g.forEach(function(T,A){T.forEach(function(z){p.call(w,z,A,this)},this)},this)};function za(p,w){un(p);let T=[];if(typeof w=="string")Ha(p,w)&&(T=T.concat(p.g.get(ys(p,w))));else for(p=Array.from(p.g.values()),w=0;w<p.length;w++)T=T.concat(p[w]);return T}n.set=function(p,w){return un(this),this.i=null,p=ys(this,p),Ha(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},n.get=function(p,w){return p?(p=za(this,p),p.length>0?String(p[0]):w):w};function pi(p,w,T){xu(p,w),T.length>0&&(p.i=null,p.g.set(ys(p,w),N(T)),p.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(let A=0;A<w.length;A++){var T=w[A];const z=Lr(T);T=za(this,T);for(let W=0;W<T.length;W++){let ae=z;T[W]!==""&&(ae+="="+Lr(T[W])),p.push(ae)}}return this.i=p.join("&")};function Ou(p){const w=new vs;return w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),w}function ys(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function mi(p,w){w&&!p.j&&(un(p),p.i=null,p.g.forEach(function(T,A){const z=A.toLowerCase();A!=z&&(xu(this,A),pi(this,z,T))},p)),p.j=w}function $n(p,w){const T=new zn;if(c.Image){const A=new Image;A.onload=b(kn,T,"TestLoadImage: loaded",!0,w,A),A.onerror=b(kn,T,"TestLoadImage: error",!1,w,A),A.onabort=b(kn,T,"TestLoadImage: abort",!1,w,A),A.ontimeout=b(kn,T,"TestLoadImage: timeout",!1,w,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=p}else w(!1)}function Ga(p,w){const T=new zn,A=new AbortController,z=setTimeout(()=>{A.abort(),kn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:A.signal}).then(W=>{clearTimeout(z),W.ok?kn(T,"TestPingServer: ok",!0,w):kn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),kn(T,"TestPingServer: error",!1,w)})}function kn(p,w,T,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(T)}catch{}}function bs(){this.g=new yu}function yr(p){this.i=p.Sb||null,this.h=p.ab||!1}E(yr,bu),yr.prototype.g=function(){return new Co(this.i,this.h)};function Co(p,w){Tt.call(this),this.H=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Co,Tt),n=Co.prototype,n.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=w,this.readyState=1,Jn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(w.body=p),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gi(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function gi(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?ws(this):Jn(this),this.readyState==3&&gi(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,ws(this))},n.Na=function(p){this.g&&(this.response=p,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Jn(p)}n.setRequestHeader=function(p,w){this.A.append(p,w)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=w.next();return p.join(`\r
`)};function Jn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Nn(p){let w="";return He(p,function(T,A){w+=A,w+=":",w+=T,w+=`\r
`}),w}function Io(p,w,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=Nn(T),typeof p=="string"?T!=null&&Lr(T):Ye(p,w,T))}function et(p){Tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,Tt);var br=/^https?$/i,Ba=["POST","PUT"];n=et.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,w,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Da.g(),this.g.onreadystatechange=C(v(this.Ca,this));try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(W){Ao(this,W);return}if(p=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)T.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())T.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),z=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(Ba,w,void 0)>=0)||A||z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of T)this.g.setRequestHeader(W,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(W){Ao(this,W)}};function Ao(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.o=5,$a(p),Ur(p)}function $a(p){p.A||(p.A=!0,Mt(p,"complete"),Mt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Mt(this,"complete"),Mt(this,"abort"),Ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_o(this):this.Xa())},n.Xa=function(){_o(this)};function _o(p){if(p.h&&typeof l<"u"){if(p.v&&Wn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Mt(p,"readystatechange"),Wn(p)==4){p.h=!1;try{const W=p.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var A;if(A=W===0){let ae=String(p.D).match(_u)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),A=!br.test(ae?ae.toLowerCase():"")}T=A}if(T)Mt(p,"complete"),Mt(p,"success");else{p.o=6;try{var z=Wn(p)>2?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.ca()+"]",$a(p)}}finally{Ur(p)}}}}function Ur(p,w){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const T=p.g;p.g=null,w||Mt(p,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Wn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),oh(w)}};function Bt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Fr(p){const w={};p=(p.g&&Wn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<p.length;A++){if(O(p[A]))continue;var T=Cu(p[A]);const z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=w[z]||[];w[z]=W,W.push(T)}Ke(w,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(p,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||w}function Es(p){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,p),this.Za=wr("retryDelaySeedMs",1e4,p),this.Ta=wr("forwardChannelMaxRetries",2,p),this.va=wr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ma(p&&p.concurrentRequestLimit),this.Ba=new bs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Es.prototype,n.ka=8,n.I=1,n.connect=function(p,w,T,A){Ct(0),this.W=p,this.H=w||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=Fu(this,null,this.W),Er(this)};function Ja(p){if(vi(p),p.I==3){var w=p.V++,T=_t(p.J);if(Ye(T,"SID",p.M),Ye(T,"RID",w),Ye(T,"TYPE","terminate"),ko(p,T),w=new Gn(p,p.j,w),w.M=2,w.A=So(_t(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=w.A,T=!0),T||(w.g=ju(w.j,null),w.g.ea(w.A)),w.F=Date.now(),hr(w)}Uu(p)}function Ss(p){p.g&&(Ka(p),p.g.cancel(),p.g=null)}function vi(p){Ss(p),p.v&&(c.clearTimeout(p.v),p.v=null),bi(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Er(p){if(!La(p.h)&&!p.m){p.m=!0;var w=p.Ea;pe||_(),re||(pe(),re=!0),x.add(w,p),p.D=0}}function yi(p,w){return mr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=w.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ur(v(p.Ea,p,w),Lu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const z=new Gn(this,this.j,p);let W=this.o;if(this.U&&(W?(W=j(W),ue(W,this.U)):W=this.U),this.u!==null||this.R||(z.J=W,W=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(w+=A,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Ru(this,z,w),T=_t(this.J),Ye(T,"RID",p),Ye(T,"CVER",22),this.G&&Ye(T,"X-HTTP-Session-Id",this.G),ko(this,T),W&&(this.R?w="headers="+Lr(Nn(W))+"&"+w:this.u&&Io(T,this.u,W)),Ua(this.h,z),this.Ra&&Ye(T,"TYPE","init"),this.S?(Ye(T,"$req",w),Ye(T,"SID","null"),z.U=!0,dr(z,T,null)):dr(z,T,w),this.I=2}}else this.I==3&&(p?Wa(this,p):this.i.length==0||La(this.h)||Wa(this))};function Wa(p,w){var T;w?T=w.l:T=p.V++;const A=_t(p.J);Ye(A,"SID",p.M),Ye(A,"RID",T),Ye(A,"AID",p.K),ko(p,A),p.u&&p.o&&Io(A,p.u,p.o),T=new Gn(p,p.j,T,p.D+1),p.u===null&&(T.J=p.o),w&&(p.i=w.G.concat(p.i)),w=Ru(p,T,1e3),T.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ua(p.h,T),dr(T,A,w)}function ko(p,w){p.H&&He(p.H,function(T,A){Ye(w,A,T)}),p.l&&He({},function(T,A){Ye(w,A,T)})}function Ru(p,w,T){T=Math.min(p.i.length,T);const A=p.l?v(p.l.Ka,p.l,p):null;e:{var z=p.i;let Ne=-1;for(;;){const yt=["count="+T];Ne==-1?T>0?(Ne=z[0].g,yt.push("ofs="+Ne)):Ne=0:yt.push("ofs="+Ne);let Qe=!0;for(let ct=0;ct<T;ct++){var W=z[ct].g;const xn=z[ct].map;if(W-=Ne,W<0)Ne=Math.max(0,z[ct].g-100),Qe=!1;else try{W="req"+W+"_"||"";try{var ae=xn instanceof Map?xn:Object.entries(xn);for(const[Vr,Kn]of ae){let Yn=Kn;f(Kn)&&(Yn=ps(Kn)),yt.push(W+Vr+"="+encodeURIComponent(Yn))}}catch(Vr){throw yt.push(W+"type="+encodeURIComponent("_badmap")),Vr}}catch{A&&A(xn)}}if(Qe){ae=yt.join("&");break e}}ae=void 0}return p=p.i.splice(0,T),w.G=p,ae}function Pu(p){if(!p.g&&!p.v){p.Y=1;var w=p.Da;pe||_(),re||(pe(),re=!0),x.add(w,p),p.A=0}}function No(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ur(v(p.Da,p),Lu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ur(v(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ss(this),Du(this))};function Ka(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function Du(p){p.g=new Gn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var w=_t(p.na);Ye(w,"RID","rpc"),Ye(w,"SID",p.M),Ye(w,"AID",p.K),Ye(w,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ye(w,"TO",p.ia),Ye(w,"TYPE","xmlhttp"),ko(p,w),p.u&&p.o&&Io(w,p.u,p.o),p.O&&(p.g.H=p.O);var T=p.g;p=p.ba,T.M=1,T.A=So(_t(w)),T.u=null,T.R=!0,ci(T,p)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),No(this),Ct(19))};function bi(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Mu(p,w){var T=null;if(p.g==w){bi(p),Ka(p),p.g=null;var A=2}else if(gr(p.h,w))T=w.G,Fa(p.h,w),A=1;else return;if(p.I!=0){if(w.o)if(A==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var z=p.D;A=ui(),Mt(A,new lr(A,T)),Er(p)}else Pu(p);else if(z=w.m,z==3||z==0&&w.X>0||!(A==1&&yi(p,w)||A==2&&No(p)))switch(T&&T.length>0&&(w=p.h,w.i=w.i.concat(T)),z){case 1:Sr(p,5);break;case 4:Sr(p,10);break;case 3:Sr(p,6);break;default:Sr(p,2)}}}function Lu(p,w){let T=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(T*=2),T*w}function Sr(p,w){if(p.j.info("Error code "+w),w==2){var T=v(p.bb,p),A=p.Ua;const z=!A;A=new vn(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Vt(A,"https"),So(A),z?$n(A.toString(),T):Ga(A.toString(),T)}else Ct(2);p.I=0,p.l&&p.l.pa(w),Uu(p),vi(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Uu(p){if(p.I=0,p.ja=[],p.l){const w=ja(p.h);(w.length!=0||p.i.length!=0)&&(H(p.ja,w),H(p.ja,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.oa()}}function Fu(p,w,T){var A=T instanceof vn?_t(T):new vn(T);if(A.g!="")w&&(A.g=w+"."+A.g),ms(A,A.u);else{var z=c.location;A=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;const W=new vn(null);A&&Vt(W,A),w&&(W.g=w),z&&ms(W,z),T&&(W.h=T),A=W}return T=p.G,w=p.wa,T&&w&&Ye(A,T,w),Ye(A,"VER",p.ka),ko(p,A),A}function ju(p,w,T){if(w&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Aa&&!p.ma?new et(new yr({ab:T})):new et(p.ma),w.Fa(p.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}n=Vu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ts(){}Ts.prototype.g=function(p,w){return new an(p,w)};function an(p,w){Tt.call(this),this.g=new Es(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(p?p["X-WebChannel-Client-Profile"]=w.sa:p={"X-WebChannel-Client-Profile":w.sa}),this.g.U=p,(p=w&&w.Qb)&&!O(p)&&(this.g.u=p),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!O(w)&&(this.g.G=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new jr(this)}E(an,Tt),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ja(this.g)},an.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.v&&(T={},T.__data__=ps(p),p=T);w.i.push(new At(w.Ya++,p)),w.I==3&&Er(w)},an.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,an.Z.N.call(this)};function qu(p){Gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const T in w){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}E(qu,Gt);function Hu(){An.call(this),this.status=1}E(Hu,An);function jr(p){this.g=p}E(jr,Vu),jr.prototype.ra=function(){Mt(this.g,"a")},jr.prototype.qa=function(p){Mt(this.g,new qu(p))},jr.prototype.pa=function(p){Mt(this.g,new Hu)},jr.prototype.oa=function(){Mt(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,eS=function(){return new Ts},ZE=function(){return ui()},XE=vt,Cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,Xc=wo,Pa.COMPLETE="complete",QE=Pa,wu.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Fl=wu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,YE=et}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore",J0="4.9.2";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ba="12.3.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qo=new tm("@firebase/firestore");function Yi(){return Qo.logLevel}function de(n,...e){if(Qo.logLevel<=Me.DEBUG){const t=e.map(sm);Qo.debug(`Firestore (${ba}): ${n}`,...t)}}function is(n,...e){if(Qo.logLevel<=Me.ERROR){const t=e.map(sm);Qo.error(`Firestore (${ba}): ${n}`,...t)}}function ca(n,...e){if(Qo.logLevel<=Me.WARN){const t=e.map(sm);Qo.warn(`Firestore (${ba}): ${n}`,...t)}}function sm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Se(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,tS(n,s,t)}function tS(n,e,t){let s=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw is(s),new Error(s)}function We(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||tS(e,i,s)}function Ae(n,e){return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class J1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class W1{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const i=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new so;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new so,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new so)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new nS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class K1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new K1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const i=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new W0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=X1(40);for(let l=0;l<i.length;++l)s.length<20&&i[l]<t&&(s+=e.charAt(i[l]%62))}return s}}function Le(n,e){return n<e?-1:n>e?1:0}function Ip(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const i=n.charAt(s),l=e.charAt(s);if(i!==l)return hp(i)===hp(l)?Le(i,l):hp(i)?1:-1}return Le(n.length,e.length)}const Z1=55296,ek=57343;function hp(n){const e=n.charCodeAt(0);return e>=Z1&&e<=ek}function da(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K0="__name__";class _r{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const l=_r.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=_r.isNumericId(e),i=_r.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?_r.extractNumericId(e).compare(_r.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class ht extends _r{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const tk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends _r{construct(e,t,s){return new Qt(e,t,s)}static isValidIdentifier(e){return tk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K0}static keyField(){return new Qt([K0])}static fromServerFormat(e){const t=[];let s="",i=0;const l=()=>{if(s.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,i+=2}else f==="`"?(c=!c,i++):f!=="."||c?(s+=f,i++):(l(),i++)}if(l(),c)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nk(n,e,t){if(!t)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rk(n,e,t,s){if(e===!0&&s===!0)throw new ge(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y0(n){if(!be.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function im(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(t){return t.constructor?t.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Ql(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=im(n);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!rS(n))throw new ge(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(i&&typeof c!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(oe.INVALID_ARGUMENT,t);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q0=-62135596800,X0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*X0);return new lt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new lt(0,0))}static max(){return new Ce(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xl=-1;function sk(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(s===1e9?new lt(t+1,0):new lt(t,s));return new io(i,be.empty(),e)}function ok(n){return new io(n.readTime,n.key,Xl)}class io{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new io(Ce.min(),be.empty(),Xl)}static max(){return new io(Ce.max(),be.empty(),Xl)}}function ik(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ak="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function wa(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==ak)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let i=0,l=0,c=!1;e.forEach((f=>{++i,f.next((()=>{++l,c&&l===i&&t()}),(m=>s(m)))})),c=!0,l===i&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((i=>i?ne.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,l)=>{s.push(t.call(this,i,l))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,i)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((b=>{c[v]=b,++f,f===l&&s(c)}),(b=>i(b)))}}))}static doWhile(e,t){return new ne(((s,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):s()};l()}))}}function uk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ea(n){return n.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const am=-1;function Ld(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function ck(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sS="";function dk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z0(e)),e=hk(n.get(t),e);return Z0(e)}function hk(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case sS:t+="";break;default:t+=l}}return t}function Z0(n){return n+sS+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ei(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ft{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,s,i,l){this.key=e,this.value=t,this.color=s??Yt.RED,this.left=i??Yt.EMPTY,this.right=l??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,l){return new Yt(e??this.key,t??this.value,s??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const l=s(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,s),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(n,e,t,s,i){return this}insert(n,e,t){return new Yt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ft{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new nr([])}unionWith(e){let t=new Ft(Qt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iS("Invalid base64 string: "+i):i}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let l=0;l<s.length;++l)i+=String.fromCharCode(s[l]);return i})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=fk.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aS="server_timestamp",lS="__type__",uS="__previous_value__",cS="__local_write_time__";function lm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[lS])==null?void 0:t.stringValue)===aS}function Ud(n){const e=n.mapValue.fields[uS];return lm(e)?Ud(e):e}function Zl(n){const e=ao(n.mapValue.fields[cS].timestampValue);return new lt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pk{constructor(e,t,s,i,l,c,f,m,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=b}}const fd="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||fd}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dS="__type__",mk="__max__",Wc={mapValue:{}},hS="__vector__",pd="value";function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:vk(n)?9007199254740991:gk(n)?10:11:Se(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const l=ao(s.timestampValue),c=ao(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return lo(s.bytesValue).isEqual(lo(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return Et(s.geoPointValue.latitude)===Et(i.geoPointValue.latitude)&&Et(s.geoPointValue.longitude)===Et(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Et(s.integerValue)===Et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const l=Et(s.doubleValue),c=Et(i.doubleValue);return l===c?hd(l)===hd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return da(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(s,i){const l=s.mapValue.fields||{},c=i.mapValue.fields||{};if(eb(l)!==eb(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Dr(l[f],c[f])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function tu(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function ha(n,e){if(n===e)return 0;const t=uo(n),s=uo(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(i,l){const c=Et(i.integerValue||i.doubleValue),f=Et(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return nb(n.timestampValue,e.timestampValue);case 4:return nb(Zl(n),Zl(e));case 5:return Ip(n.stringValue,e.stringValue);case 6:return(function(i,l){const c=lo(i),f=lo(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(i,l){const c=i.split("/"),f=l.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Le(c[m],f[m]);if(v!==0)return v}return Le(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,l){const c=Le(Et(i.latitude),Et(l.latitude));return c!==0?c:Le(Et(i.longitude),Et(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rb(n.arrayValue,e.arrayValue);case 10:return(function(i,l){var c,f,m,v;const b=i.fields||{},E=l.fields||{},C=(c=b[pd])==null?void 0:c.arrayValue,N=(f=E[pd])==null?void 0:f.arrayValue,H=Le(((m=C==null?void 0:C.values)==null?void 0:m.length)||0,((v=N==null?void 0:N.values)==null?void 0:v.length)||0);return H!==0?H:rb(C,N)})(n.mapValue,e.mapValue);case 11:return(function(i,l){if(i===Wc.mapValue&&l===Wc.mapValue)return 0;if(i===Wc.mapValue)return 1;if(l===Wc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const E=Ip(f[b],v[b]);if(E!==0)return E;const C=ha(c[f[b]],m[v[b]]);if(C!==0)return C}return Le(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function nb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=ao(n),s=ao(e),i=Le(t.seconds,s.seconds);return i!==0?i:Le(t.nanos,s.nanos)}function rb(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const l=ha(t[i],s[i]);if(l)return l}return Le(t.length,s.length)}function fa(n){return Ap(n)}function Ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const t=ao(e);return`time(${t.seconds},${t.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return lo(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return be.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let t="[",s=!0;for(const i of e.values||[])s?s=!1:t+=",",t+=Ap(i);return t+"]"})(n.arrayValue):"mapValue"in n?(function(e){const t=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const l of t)i?i=!1:s+=",",s+=`${l}:${Ap(e.fields[l])}`;return s+"}"})(n.mapValue):Se(61005,{value:n})}function Zc(n){switch(uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(n);return e?16+Zc(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(t){return(t.values||[]).reduce(((s,i)=>s+Zc(i)),0)})(n.arrayValue);case 10:case 11:return(function(t){let s=0;return ei(t.fields,((i,l)=>{s+=i.length+Zc(l)})),s})(n.mapValue);default:throw Se(13486,{value:n})}}function _p(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function sb(n){return!!n&&"nullValue"in n}function ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function gk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[dS])==null?void 0:t.stringValue)===hS}function zl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ei(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=zl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zl(n.arrayValue.values[t]);return e}return{...n}}function vk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mk}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(t)}setAll(e){let t=Qt.emptyPath(),s={},i=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,i),s={},i=[],t=f.popLast()}c?s[f.lastSegment()]=zl(c):i.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,i)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];ed(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){ei(t,((i,l)=>e[i]=l));for(const i of s)delete e[i]}clone(){return new Fn(zl(this.value))}}function fS(n){const e=[];return ei(n.fields,((t,s)=>{const i=new Qt([t]);if(ed(s)){const l=fS(s.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)})),new nr(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nn{constructor(e,t,s,i,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,Ce.min(),Ce.min(),Ce.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,i){return new nn(e,1,t,Ce.min(),s,i,0)}static newNoDocument(e,t){return new nn(e,2,t,Ce.min(),Ce.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Ce.min(),Ce.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class md{constructor(e,t){this.position=e,this.inclusive=t}}function ib(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=ha(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function ab(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function yk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pS{}class Ut extends pS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new wk(e,t,s):t==="array-contains"?new Tk(e,s):t==="in"?new Ck(e,s):t==="not-in"?new Ik(e,s):t==="array-contains-any"?new Ak(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Ek(e,s):new Sk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ha(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends pS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mr(e,t)}matches(e){return mS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(n){return n.op==="and"}function gS(n){return bk(n)&&mS(n)}function bk(n){for(const e of n.filters)if(e instanceof Mr)return!1;return!0}function kp(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+fa(n.value);if(gS(n))return n.filters.map((e=>kp(e))).join(",");{const e=n.filters.map((t=>kp(t))).join(",");return`${n.op}(${e})`}}function vS(n,e){return n instanceof Ut?(function(t,s){return s instanceof Ut&&t.op===s.op&&t.field.isEqual(s.field)&&Dr(t.value,s.value)})(n,e):n instanceof Mr?(function(t,s){return s instanceof Mr&&t.op===s.op&&t.filters.length===s.filters.length?t.filters.reduce(((i,l,c)=>i&&vS(l,s.filters[c])),!0):!1})(n,e):void Se(19439)}function yS(n){return n instanceof Ut?(function(e){return`${e.field.canonicalString()} ${e.op} ${fa(e.value)}`})(n):n instanceof Mr?(function(e){return e.op.toString()+" {"+e.getFilters().map(yS).join(" ,")+"}"})(n):"Filter"}class wk extends Ut{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ek extends Ut{constructor(e,t){super(e,"in",t),this.keys=bS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sk extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=bS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class Tk extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return um(t)&&tu(t.arrayValue,this.value)}}class Ck extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class Ik extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class Ak extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>tu(this.value.arrayValue,s)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _k{constructor(e,t=null,s=[],i=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function lb(n,e=null,t=[],s=[],i=null,l=null,c=null){return new _k(n,e,t,s,i,l,c)}function cm(n){const e=Ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),e.Te=t}return e.Te}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ab(n.startAt,e.startAt)&&ab(n.endAt,e.endAt)}function Np(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fd{constructor(e,t=null,s=[],i=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kk(n,e,t,s,i,l,c,f){return new Fd(n,e,t,s,i,l,c,f)}function hm(n){return new Fd(n)}function ub(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Nk(n){return n.collectionGroup!==null}function Gl(n){const e=Ae(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ft(Qt.comparator);return i.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new gd(i,s))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new gd(Qt.keyField(),s))}return e.Ie}function kr(n){const e=Ae(n);return e.Ee||(e.Ee=xk(e,Gl(n))),e.Ee}function xk(n,e){if(n.limitType==="F")return lb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new gd(i.field,l)}));const t=n.endAt?new md(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new md(n.startAt.position,n.startAt.inclusive):null;return lb(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function xp(n,e,t){return new Fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jd(n,e){return dm(kr(n),kr(e))&&n.limitType===e.limitType}function wS(n){return`${cm(kr(n))}|lt:${n.limitType}`}function Qi(n){return`Query(target=${(function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((s=>yS(s))).join(", ")}]`),Ld(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),`Target(${t})`})(kr(n))}; limitType=${n.limitType})`}function Vd(n,e){return e.isFoundDocument()&&(function(t,s){const i=s.key.path;return t.collectionGroup!==null?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)})(n,e)&&(function(t,s){for(const i of Gl(t))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(t,s){for(const i of t.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(t,s){return!(t.startAt&&!(function(i,l,c){const f=ib(i,l,c);return i.inclusive?f<=0:f<0})(t.startAt,Gl(t),s)||t.endAt&&!(function(i,l,c){const f=ib(i,l,c);return i.inclusive?f>=0:f>0})(t.endAt,Gl(t),s))})(n,e)}function Ok(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ES(n){return(e,t)=>{let s=!1;for(const i of Gl(n)){const l=Rk(i,e,t);if(l!==0)return l;s=s||i.field.isKeyField()}return 0}}function Rk(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(i,l,c){const f=l.data.field(i),m=c.data.field(i);return f!==null&&m!==null?ha(f,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:n.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ti{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,l]of s)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,s)=>{for(const[i,l]of s)e(i,l)}))}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pk=new ft(be.comparator);function as(){return Pk}const SS=new ft(be.comparator);function jl(...n){let e=SS;for(const t of n)e=e.insert(t.key,t);return e}function TS(n){let e=SS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Jo(){return Bl()}function CS(){return Bl()}function Bl(){return new ti((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Dk=new ft(be.comparator),Mk=new Ft(be.comparator);function Ue(...n){let e=Mk;for(const t of n)e=e.add(t);return e}const Lk=new Ft(Le);function Uk(){return Lk}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function IS(n){return{integerValue:""+n}}function Fk(n,e){return ck(e)?IS(e):fm(n,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qd{constructor(){this._=void 0}}function jk(n,e,t){return n instanceof vd?(function(s,i){const l={fields:{[lS]:{stringValue:aS},[cS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&lm(i)&&(i=Ud(i)),i&&(l.fields[uS]=i),{mapValue:l}})(t,e):n instanceof nu?_S(n,e):n instanceof ru?kS(n,e):(function(s,i){const l=AS(s,i),c=cb(l)+cb(s.Ae);return _p(l)&&_p(s.Ae)?IS(c):fm(s.serializer,c)})(n,e)}function Vk(n,e,t){return n instanceof nu?_S(n,e):n instanceof ru?kS(n,e):t}function AS(n,e){return n instanceof yd?(function(t){return _p(t)||(function(s){return!!s&&"doubleValue"in s})(t)})(e)?e:{integerValue:0}:null}class vd extends qd{}class nu extends qd{constructor(e){super(),this.elements=e}}function _S(n,e){const t=NS(e);for(const s of n.elements)t.some((i=>Dr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class ru extends qd{constructor(e){super(),this.elements=e}}function kS(n,e){let t=NS(e);for(const s of n.elements)t=t.filter((i=>!Dr(i,s)));return{arrayValue:{values:t}}}class yd extends qd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cb(n){return Et(n.integerValue||n.doubleValue)}function NS(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qk(n,e){return n.field.isEqual(e.field)&&(function(t,s){return t instanceof nu&&s instanceof nu||t instanceof ru&&s instanceof ru?da(t.elements,s.elements,Dr):t instanceof yd&&s instanceof yd?Dr(t.Ae,s.Ae):t instanceof vd&&s instanceof vd})(n.transform,e.transform)}class Hk{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hd{}function xS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RS(n.key,ss.none()):new cu(n.key,n.data,ss.none());{const t=n.data,s=Fn.empty();let i=new Ft(Qt.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),i=i.add(l)}return new ni(n.key,s,new nr(i.toArray()),ss.none())}}function zk(n,e,t){n instanceof cu?(function(s,i,l){const c=s.value.clone(),f=hb(s.fieldTransforms,i,l.transformResults);c.setAll(f),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof ni?(function(s,i,l){if(!td(s.precondition,i))return void i.convertToUnknownDocument(l.version);const c=hb(s.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(OS(s)),f.setAll(c),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function $l(n,e,t,s){return n instanceof cu?(function(i,l,c,f){if(!td(i.precondition,l))return c;const m=i.value.clone(),v=fb(i.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ni?(function(i,l,c,f){if(!td(i.precondition,l))return c;const m=fb(i.fieldTransforms,f,l),v=l.data;return v.setAll(OS(i)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(i,l,c){return td(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function Gk(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),l=AS(s.transform,i||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,l))}return t||null}function db(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(t,s){return t===void 0&&s===void 0||!(!t||!s)&&da(t,s,((i,l)=>qk(i,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Hd{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends Hd{constructor(e,t,s,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function OS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function hb(n,e,t){const s=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,f=e.data.field(l.field);s.set(l.field,Vk(c,f,t[i]))}return s}function fb(n,e,t){const s=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);s.set(i.field,jk(l,c,e))}return s}class RS extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $k{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&zk(l,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=$l(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=$l(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=CS();return this.mutations.forEach((i=>{const l=e.get(i.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(i.key)?null:f;const m=xS(c,f);m!==null&&s.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,((t,s)=>db(t,s)))&&da(this.baseMutations,e.baseMutations,((t,s)=>db(t,s)))}}class pm{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return Dk})();const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,s[c].version);return new pm(e,t,s,i)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rt,Ve;function Kk(n){switch(n){case oe.OK:return Se(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function PS(n){if(n===void 0)return is("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Rt.OK:return oe.OK;case Rt.CANCELLED:return oe.CANCELLED;case Rt.UNKNOWN:return oe.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return oe.INTERNAL;case Rt.UNAVAILABLE:return oe.UNAVAILABLE;case Rt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Rt.NOT_FOUND:return oe.NOT_FOUND;case Rt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Rt.ABORTED:return oe.ABORTED;case Rt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Rt.DATA_LOSS:return oe.DATA_LOSS;default:return Se(39323,{code:n})}}(Ve=Rt||(Rt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yk(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qk=new ro([4294967295,4294967295],0);function pb(n){const e=Yk().encode(n),t=new KE;return t.update(e),new Uint8Array(t.digest())}function mb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ro([t,s],0),new ro([i,l],0)]}class mm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(s<0)throw new Vl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(ro.fromNumber(s)));return i.compare(Qk)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pb(e),[s,i]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new mm(l,i,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=pb(e),[s,i]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zd{constructor(e,t,s,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zd(Ce.min(),i,new ft(Le),as(),Ue())}}class du{constructor(e,t,s,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,Ue(),Ue(),Ue())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nd{constructor(e,t,s,i){this.be=e,this.removedTargetIds=t,this.key=s,this.De=i}}class DS{constructor(e,t){this.targetId=e,this.Ce=t}}class MS{constructor(e,t,s=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class gb{constructor(){this.ve=0,this.Fe=vb(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),s=Ue();return this.Fe.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Se(38017,{changeType:l})}})),new du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=vb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xk{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Kc(),this.He=Kc(),this.Ye=new ft(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const l=i.target;if(Np(l))if(s===0){const c=new be(l.path);this.et(t,c,nn.newNoDocument(c,Ce.min()))}else We(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:l=0}=t;let c,f;try{c=lo(s).toUint8Array()}catch(m){if(m instanceof iS)return ca("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new mm(c,i,l)}catch(m){return ca(m instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Np(f.target)){const m=new be(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,nn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ue();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const i=new zd(e,t,this.Ye,this.je,s);return this.je=as(),this.Je=Kc(),this.He=Kc(),this.Ye=new ft(Le),i}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new ft(be.comparator)}function vb(){return new ft(be.comparator)}const Zk={asc:"ASCENDING",desc:"DESCENDING"},eN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tN={and:"AND",or:"OR"};class nN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Op(n,e){return n.useProto3Json||Ld(e)?e:{value:e}}function bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rN(n,e){return bd(n,e.toTimestamp())}function Nr(n){return We(!!n,49232),Ce.fromTimestamp((function(e){const t=ao(e);return new lt(t.seconds,t.nanos)})(n))}function gm(n,e){return Rp(n,e).canonicalString()}function Rp(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function US(n){const e=ht.fromString(n);return We(HS(e),10190,{key:e.toString()}),e}function Pp(n,e){return gm(n.databaseId,e.path)}function fp(n,e){const t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(jS(t))}function FS(n,e){return gm(n.databaseId,e)}function sN(n){const e=US(n);return e.length===4?ht.emptyPath():jS(e)}function Dp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jS(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yb(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function oN(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(We(v===void 0||typeof v=="string",58123),Xt.fromBase64String(v||"")):(We(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Xt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?oe.UNKNOWN:PS(m.code);return new ge(v,m.message||"")})(c);t=new MS(s,i,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=fp(n,s.document.name),l=Nr(s.document.updateTime),c=s.document.createTime?Nr(s.document.createTime):Ce.min(),f=new Fn({mapValue:{fields:s.document.fields}}),m=nn.newFoundDocument(i,l,c,f),v=s.targetIds||[],b=s.removedTargetIds||[];t=new nd(v,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=fp(n,s.document),l=s.readTime?Nr(s.readTime):Ce.min(),c=nn.newNoDocument(i,l),f=s.removedTargetIds||[];t=new nd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=fp(n,s.document),l=s.removedTargetIds||[];t=new nd([],l,i,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:l}=s,c=new Wk(i,l),f=s.targetId;t=new DS(f,c)}}return t}function iN(n,e){let t;if(e instanceof cu)t={update:yb(n,e.key,e.value)};else if(e instanceof RS)t={delete:Pp(n,e.key)};else if(e instanceof ni)t={update:yb(n,e.key,e.data),updateMask:mN(e.fieldMask)};else{if(!(e instanceof Bk))return Se(16599,{Vt:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,l){const c=l.transform;if(c instanceof vd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof nu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ru)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Se(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:rN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se(27497)})(n,e.precondition)),t}function aN(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(s,i){let l=s.updateTime?Nr(s.updateTime):Nr(i);return l.isEqual(Ce.min())&&(l=Nr(i)),new Hk(l,s.transformResults||[])})(t,e)))):[]}function lN(n,e){return{documents:[FS(n,e.path)]}}function uN(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=FS(n,i);const l=(function(m){if(m.length!==0)return qS(Mr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(b){return{field:Xi(b.field),direction:hN(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Op(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function cN(n){let e=sN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){We(s===1,65062);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(b){const E=VS(b);return E instanceof Mr&&gS(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((E=>(function(C){return new gd(Zi(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let E;return E=typeof b=="object"?b.value:b,Ld(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(b){const E=!!b.before,C=b.values||[];return new md(C,E)})(t.startAt));let v=null;return t.endAt&&(v=(function(b){const E=!b.before,C=b.values||[];return new md(C,E)})(t.endAt)),kk(e,i,c,l,f,"F",m,v)}function dN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VS(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zi(e.unaryFilter.field);return Ut.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Zi(e.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zi(e.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Zi(e.unaryFilter.field);return Ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ut.create(Zi(e.fieldFilter.field),(function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Mr.create(e.compositeFilter.filters.map((t=>VS(t))),(function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(e.compositeFilter.op))})(n):Se(30097,{filter:n})}function hN(n){return Zk[n]}function fN(n){return eN[n]}function pN(n){return tN[n]}function Xi(n){return{fieldPath:n.canonicalString()}}function Zi(n){return Qt.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof Ut?(function(e){if(e.op==="=="){if(ob(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NAN"}};if(sb(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ob(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NAN"}};if(sb(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(e.field),op:fN(e.op),value:e.value}}})(n):n instanceof Mr?(function(e){const t=e.getFilters().map((s=>qS(s)));return t.length===1?t[0]:{compositeFilter:{op:pN(e.op),filters:t}}})(n):Se(54877,{filter:n})}function mN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function HS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xs{constructor(e,t,s,i,l=Ce.min(),c=Ce.min(),f=Xt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gN{constructor(e){this.yt=e}}function vN(n){const e=cN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yN{constructor(){this.Cn=new bN}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(io.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(io.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class bN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new Ft(ht.comparator),l=!i.has(s);return this.index[t]=i.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ft(ht.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zS=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(zS,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wb="LruGarbageCollector",wN=1048576;function Eb([n,e],[t,s]){const i=Le(n,t);return i===0?Le(e,s):i}class EN{constructor(e){this.Ir=e,this.buffer=new Ft(Eb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Eb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(wb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ea(t)?de(wb,"Ignoring IndexedDB error during garbage collection: ",t):await wa(t)}await this.Vr(3e5)}))}}class TN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Md.ce);const s=new EN(t);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(bb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,i,l,c,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(v=Date.now(),Yi()<=Me.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${i} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(v-m)+`ms
Total Duration: ${v-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:E}))))}}function CN(n,e){return new TN(n,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IN{constructor(){this.changes=new ti((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _N{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&$l(s.mutation,i,nr.empty(),lt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ue()){const i=Jo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((l=>{let c=jl();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Jo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ue())))}populateOverlays(e,t,s){const i=[];return s.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,i){let l=as();const c=Bl(),f=(function(){return Bl()})();return t.forEach(((m,v)=>{const b=s.get(v.key);i.has(v.key)&&(b===void 0||b.mutation instanceof ni)?l=l.insert(v.key,v):b!==void 0?(c.set(v.key,b.mutation.getFieldMask()),$l(b.mutation,v,b.mutation.getFieldMask(),lt.now())):c.set(v.key,nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,b)=>c.set(v,b))),t.forEach(((v,b)=>f.set(v,new AN(b,c.get(v)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Bl();let i=new ft(((c,f)=>c-f)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let b=s.get(m)||nr.empty();b=f.applyToLocalView(v,b),s.set(m,b);const E=(i.get(f.batchId)||Ue()).add(m);i=i.insert(f.batchId,E)}))})).next((()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,E=CS();b.forEach((C=>{if(!l.has(C)){const N=xS(t.get(C),s.get(C));N!==null&&E.set(C,N),l=l.add(C)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,E))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(l){return be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-l.size):ne.resolve(Jo());let f=Xl,m=l;return c.next((v=>ne.forEach(v,((b,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next((C=>{m=m.insert(b,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Ue()))).next((b=>({batchId:f,changes:TS(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let i=jl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const l=t.collectionGroup;let c=jl();return this.indexManager.getCollectionParents(e,l).next((f=>ne.forEach(f,(m=>{const v=(function(b,E){return new Fd(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,i).next((b=>{b.forEach(((E,C)=>{c=c.insert(E,C)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,i)))).next((c=>{l.forEach(((m,v)=>{const b=v.getKey();c.get(b)===null&&(c=c.insert(b,nn.newInvalidDocument(b)))}));let f=jl();return c.forEach(((m,v)=>{const b=l.get(m);b!==void 0&&$l(b.mutation,v,nr.empty(),lt.now()),Vd(t,v)&&(f=f.insert(m,v))})),f}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nr(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:vN(s.bundledQuery),readTime:Nr(s.readTime)}})(t)),ne.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NN{constructor(){this.overlays=new ft(be.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Jo();return ne.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&s.set(i,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const i=Jo(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&i.set(m.getKey(),m)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let l=new ft(((v,b)=>v-b));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let b=l.get(v.largestBatchId);b===null&&(b=Jo(),l=l.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Jo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,b)=>f.set(v,b))),!(f.size()>=i)););return ne.resolve(f)}St(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Jk(t,s));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xN{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vm{constructor(){this.Qr=new Ft(Ht.$r),this.Ur=new Ft(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new ht([])),s=new Ht(t,e),i=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([s,i],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ht([])),s=new Ht(t,e),i=new Ht(t,e+1);let l=Ue();return this.Ur.forEachInRange([s,i],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ON{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Ht.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new $k(l,t,s,i);this.mutationQueue.push(c);for(const f of i)this.Zr=this.Zr.add(new Ht(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.ei(s),l=i<0?0:i;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?am:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,i],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ft(Le);return t.forEach((i=>{const l=new Ht(i,0),c=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new be(l),0);let f=new Ft(Le);return this.Zr.forEachWhile((m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.Yr)),!0)}),c),ne.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(i=>{const l=new Ht(i.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),i=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RN{constructor(e){this.ri=e,this.docs=(function(){return new ft(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),l=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=as();return t.forEach((i=>{const l=this.docs.get(i);s=s.insert(i,l?l.document.mutableCopy():nn.newInvalidDocument(i))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let l=as();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||ik(ok(b),s)<=0||(i.has(b.key)||Vd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,i){Se(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new PN(this)}getSize(e){return ne.resolve(this.size)}}class PN extends IN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DN{constructor(e){this.persistence=e,this.si=new ti((t=>cm(t)),dm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new vm,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,t){return this.si.forEach(((s,i)=>t(i))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let i=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),ne.waitFor(l).next((()=>i))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((c=>{l.push(i.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Md(0),this.li=!1,this.li=!0,this.hi=new xN,this.referenceDelegate=e(this),this.Pi=new DN(this),this.indexManager=new yN,this.remoteDocumentCache=(function(s){return new RN(s)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gN(t),this.Ii=new kN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ON(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const i=new MN(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((l=>this.referenceDelegate.di(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class MN extends lk{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Ri=new vm,this.Vi=null}static mi(e){return new ym(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const i=be.fromPath(s);return this.gi(e,i).next((l=>{l||t.removeEntry(i,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.pi=new ti((s=>dk(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=CN(this,t)}static mi(e,t){return new wd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,i)=>this.br(e,s,i).next((l=>l?ne.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zc(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ne.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bm{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=i}static As(e,t){let s=Ue(),i=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new bm(e,t.fromCache,s,i)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return k_()?8:uk(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,i,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new LN;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,i){return s.documentReadCount<this.fs?(Yi()<=Me.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Qi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Yi()<=Me.DEBUG&&de("QueryEngine","Query:",Qi(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Yi()<=Me.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Qi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(t))):ne.resolve())}ys(e,t){if(ub(t))return ne.resolve(null);let s=kr(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),s=kr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const v=this.Ds(t,f);return this.Cs(t,v,c,m.readTime)?this.ys(e,xp(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ws(e,t,s,i){return ub(t)||i.isEqual(Ce.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,i)?ne.resolve(null):(Yi()<=Me.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(t)),this.vs(e,c,t,sk(i,Xl)).next((f=>f)))}))}Ds(e,t){let s=new Ft(ES(e));return t.forEach(((i,l)=>{Vd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ss(e,t,s){return Yi()<=Me.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Qi(t)),this.ps.getDocumentsMatchingQuery(e,t,io.min(),s)}vs(e,t,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wm="LocalStore",FN=3e8;class jN{constructor(e,t,s,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ft(Le),this.xs=new ti((l=>cm(l)),dm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _N(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function VN(n,e,t,s){return new jN(n,e,t,s)}async function BS(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((l=>(i=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let m=Ue();for(const v of i){c.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of l){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(s,m).next((v=>({Ls:v,removedBatchIds:c,addedBatchIds:f})))}))}))}function qN(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,m,v){const b=m.batch,E=b.keys();let C=ne.resolve();return E.forEach((N=>{C=C.next((()=>v.getEntry(f,N))).next((H=>{const L=m.docVersions.get(N);We(L!==null,48541),H.version.compareTo(L)<0&&(b.applyToRemoteDocument(H,m),H.isValidDocument()&&(H.setReadTime(m.commitVersion),v.addEntry(H)))}))})),C.next((()=>c.mutationQueue.removeMutationBatch(f,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let f=Ue();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function $S(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HN(n,e){const t=Ae(n),s=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const f=[];e.targetChanges.forEach(((b,E)=>{const C=i.get(E);if(!C)return;f.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,E))));let N=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Xt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,s)),i=i.insert(E,N),(function(H,L,q){return H.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=FN?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(C,N,b)&&f.push(t.Pi.updateTargetData(l,N))}));let m=as(),v=Ue();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),f.push(zN(l,c,e.documentUpdates).next((b=>{m=b.ks,v=b.qs}))),!s.isEqual(Ce.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(b)}return ne.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Ms=i,l)))}function zN(n,e,t){let s=Ue(),i=Ue();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=as();return t.forEach(((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):de(wm,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)})),{ks:c,qs:i}}))}function GN(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=am),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function BN(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.Pi.getTargetData(s,e).next((l=>l?(i=l,ne.resolve(i)):t.Pi.allocateTargetId(s).next((c=>(i=new Xs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Mp(n,e,t){const s=Ae(n),i=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ea(c))throw c;de(wm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Sb(n,e,t){const s=Ae(n);let i=Ce.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,v){const b=Ae(f),E=b.xs.get(v);return E!==void 0?ne.resolve(b.Ms.get(E)):b.Pi.getTargetData(m,v)})(s,c,kr(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?i:Ce.min(),t?l:Ue()))).next((f=>($N(s,Ok(e),f),{documents:f,Qs:l})))))}function $N(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((i,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Tb{constructor(){this.activeTargetIds=Uk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JN{constructor(){this.Mo=new Tb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WN{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cb="ConnectivityMonitor";class Ib{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Cb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Yc=null;function Lp(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pp="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===fd?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,t,s,i,l){const c=Lp(),f=this.zo(e,t.toUriEncodedString());de(pp,`Sending RPC '${e}' ${c}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,l);const{host:v}=new URL(f),b=va(v);return this.Jo(e,f,m,s,b).then((E=>(de(pp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw ca(pp,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,i,l,c){return this.Go(e,t,s,i,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,l)=>e[l]=i)),s&&s.headers.forEach(((i,l)=>e[l]=i))}zo(e,t){const s=KN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const en="WebChannelConnection";class XN extends YN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,i,l){const c=Lp();return new Promise(((f,m)=>{const v=new YE;v.setWithCredentials(!0),v.listenOnce(QE.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Xc.NO_ERROR:const E=v.getResponseJson();de(en,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Xc.TIMEOUT:de(en,`RPC '${e}' ${c} timed out`),m(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const C=v.getStatus();if(de(en,`RPC '${e}' ${c} failed with status:`,C,"response text:",v.getResponseText()),C>0){let N=v.getResponseJson();Array.isArray(N)&&(N=N[0]);const H=N==null?void 0:N.error;if(H&&H.status&&H.message){const L=(function(q){const J=q.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(J)>=0?J:oe.UNKNOWN})(H.status);m(new ge(L,H.message))}else m(new ge(oe.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{de(en,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(i);de(en,`RPC '${e}' ${c} sending request:`,i),v.send(t,"POST",b,s,15)}))}T_(e,t,s){const i=Lp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=eS(),f=ZE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const b=l.join("");de(en,`Creating RPC '${e}' stream ${i}: ${b}`,m);const E=c.createWebChannel(b,m);this.I_(E);let C=!1,N=!1;const H=new QN({Yo:q=>{N?de(en,`Not sending because RPC '${e}' stream ${i} is closed:`,q):(C||(de(en,`Opening RPC '${e}' stream ${i} transport.`),E.open(),C=!0),de(en,`RPC '${e}' stream ${i} sending:`,q),E.send(q))},Zo:()=>E.close()}),L=(q,J,Z)=>{q.listen(J,(se=>{try{Z(se)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return L(E,Fl.EventType.OPEN,(()=>{N||(de(en,`RPC '${e}' stream ${i} transport opened.`),H.o_())})),L(E,Fl.EventType.CLOSE,(()=>{N||(N=!0,de(en,`RPC '${e}' stream ${i} transport closed`),H.a_(),this.E_(E))})),L(E,Fl.EventType.ERROR,(q=>{N||(N=!0,ca(en,`RPC '${e}' stream ${i} transport errored. Name:`,q.name,"Message:",q.message),H.a_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))})),L(E,Fl.EventType.MESSAGE,(q=>{var J;if(!N){const Z=q.data[0];We(!!Z,16349);const se=Z,ie=(se==null?void 0:se.error)||((J=se[0])==null?void 0:J.error);if(ie){de(en,`RPC '${e}' stream ${i} received error:`,ie);const pe=ie.status;let re=(function(_){const k=Rt[_];if(k!==void 0)return PS(k)})(pe),x=ie.message;re===void 0&&(re=oe.INTERNAL,x="Unknown error status: "+pe+" with message "+ie.message),N=!0,H.a_(new ge(re,x)),E.close()}else de(en,`RPC '${e}' stream ${i} received:`,Z),H.u_(Z)}})),L(f,XE.STAT_EVENT,(q=>{q.stat===Cp.PROXY?de(en,`RPC '${e}' stream ${i} detected buffering proxy`):q.stat===Cp.NOPROXY&&de(en,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mp(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gd(n){return new nN(n,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JS{constructor(e,t,s=1e3,i=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=i,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ab="PersistentStream";class WS{constructor(e,t,s,i,l,c,f,m){this.Mi=e,this.S_=s,this.b_=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new ge(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZN extends WS{constructor(e,t,s,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oN(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Ce.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Ce.min():l.readTime?Nr(l.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Dp(this.serializer),t.addTarget=(function(i,l){let c;const f=l.target;if(c=Np(f)?{documents:lN(i,f)}:{query:uN(i,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=LS(i,l.resumeToken);const m=Op(i,l.expectedCount);m!==null&&(c.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ce.min())>0){c.readTime=bd(i,l.snapshotVersion.toTimestamp());const m=Op(i,l.expectedCount);m!==null&&(c.expectedCount=m)}return c})(this.serializer,e);const s=dN(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Dp(this.serializer),t.removeTarget=e,this.q_(t)}}class ex extends WS{constructor(e,t,s,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aN(e.writeResults,e.commitTime),s=Nr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Dp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>iN(this.serializer,s)))};this.q_(t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tx{}class nx extends tx{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Rp(t,s),i,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(oe.UNKNOWN,l.toString())}))}Ho(e,t,s,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Rp(t,s),i,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xo="RemoteStore";class sx{constructor(e,t,s,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{ri(this)&&(de(Xo,"Restarting streams for network reachability change."),await(async function(f){const m=Ae(f);m.Ea.add(4),await hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Bd(m)})(this))}))})),this.Ra=new rx(s,i)}}async function Bd(n){if(ri(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function KS(n,e){const t=Ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cm(t)?Tm(t):Sa(t).O_()&&Sm(t,e))}function Em(n,e){const t=Ae(n),s=Sa(t);t.Ia.delete(e),s.O_()&&YS(t,e),t.Ia.size===0&&(s.O_()?s.L_():ri(t)&&t.Ra.set("Unknown"))}function Sm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sa(n).Y_(e)}function YS(n,e){n.Va.Ue(e),Sa(n).Z_(e)}function Tm(n){n.Va=new Xk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Sa(n).start(),n.Ra.ua()}function Cm(n){return ri(n)&&!Sa(n).x_()&&n.Ia.size>0}function ri(n){return Ae(n).Ea.size===0}function QS(n){n.Va=void 0}async function ox(n){n.Ra.set("Online")}async function ix(n){n.Ia.forEach(((e,t)=>{Sm(n,e)}))}async function ax(n,e){QS(n),Cm(n)?(n.Ra.ha(e),Tm(n)):n.Ra.set("Unknown")}async function lx(n,e,t){if(n.Ra.set("Online"),e instanceof MS&&e.state===2&&e.cause)try{await(async function(s,i){const l=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(s){de(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ed(n,s)}else if(e instanceof nd?n.Va.Ze(e):e instanceof DS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await $S(n.localStore);t.compareTo(s)>=0&&await(function(i,l){const c=i.Va.Tt(l);return c.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Ia.get(m);v&&i.Ia.set(m,v.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,m)=>{const v=i.Ia.get(f);if(!v)return;i.Ia.set(f,v.withResumeToken(Xt.EMPTY_BYTE_STRING,v.snapshotVersion)),YS(i,f);const b=new Xs(v.target,f,m,v.sequenceNumber);Sm(i,b)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(s){de(Xo,"Failed to raise snapshot:",s),await Ed(n,s)}}async function Ed(n,e,t){if(!Ea(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>$S(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Bd(n)}))}function XS(n,e){return e().catch((t=>Ed(n,t,e)))}async function $d(n){const e=Ae(n),t=co(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:am;for(;ux(e);)try{const i=await GN(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,cx(e,i)}catch(i){await Ed(e,i)}ZS(e)&&eT(e)}function ux(n){return ri(n)&&n.Ta.length<10}function cx(n,e){n.Ta.push(e);const t=co(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(n){return ri(n)&&!co(n).x_()&&n.Ta.length>0}function eT(n){co(n).start()}async function dx(n){co(n).ra()}async function hx(n){const e=co(n);for(const t of n.Ta)e.ea(t.mutations)}async function fx(n,e,t){const s=n.Ta.shift(),i=pm.from(s,e,t);await XS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await $d(n)}async function px(n,e){e&&co(n).X_&&await(async function(t,s){if((function(i){return Kk(i)&&i!==oe.ABORTED})(s.code)){const i=t.Ta.shift();co(t).B_(),await XS(t,(()=>t.remoteSyncer.rejectFailedWrite(i.batchId,s))),await $d(t)}})(n,e),ZS(n)&&eT(n)}async function _b(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),de(Xo,"RemoteStore received new credentials");const s=ri(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bd(t)}async function mx(n,e){const t=Ae(n);e?(t.Ea.delete(2),await Bd(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function Sa(n){return n.ma||(n.ma=(function(e,t,s){const i=Ae(e);return i.sa(),new ZN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:ox.bind(null,n),t_:ix.bind(null,n),r_:ax.bind(null,n),H_:lx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Cm(n)?Tm(n):n.Ra.set("Unknown")):(await n.ma.stop(),QS(n))}))),n.ma}function co(n){return n.fa||(n.fa=(function(e,t,s){const i=Ae(e);return i.sa(),new ex(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dx.bind(null,n),r_:px.bind(null,n),ta:hx.bind(null,n),na:fx.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $d(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Im{constructor(e,t,s,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=l,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,l){const c=Date.now()+s,f=new Im(e,t,c,i,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Am(n,e){if(is("AsyncQueue",`${e}: ${n}`),Ea(n))return new ge(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=jl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kb{constructor(){this.ga=new ft(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,i,l,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,i,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ma(e,t,na.emptySet(t),c,s,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vx{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,t){const s=Ae(e),i=s.queries;s.queries=Nb(),i.forEach(((l,c)=>{for(const f of c.Sa)f.onError(t)}))})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function Nb(){return new ti((n=>wS(n)),jd)}async function yx(n,e){const t=Ae(n);let s=3;const i=e.query;let l=t.queries.get(i);l?!l.ba()&&e.Da()&&(s=2):(l=new gx,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(i,!0);break;case 1:l.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const f=Am(c,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&_m(t)}async function bx(n,e){const t=Ae(n),s=e.query;let i=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?i=e.Da()?0:1:!l.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function wx(n,e){const t=Ae(n);let s=!1;for(const i of e){const l=i.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(i)&&(s=!0);c.wa=i}}s&&_m(t)}function Ex(n,e,t){const s=Ae(n),i=s.queries.get(e);if(i)for(const l of i.Sa)l.onError(t);s.queries.delete(e)}function _m(n){n.Ca.forEach((e=>{e.next()}))}var Up,xb;(xb=Up||(Up={})).Ma="default",xb.Cache="cache";class Sx{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tT{constructor(e){this.key=e}}class nT{constructor(e){this.key=e}}class Tx{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=ES(e),this.tu=new na(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new kb,i=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,v=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,E)=>{const C=i.get(b),N=Vd(this.query,E)?E:null,H=!!C&&this.mutatedKeys.has(C.key),L=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let q=!1;C&&N?C.data.isEqual(N.data)?H!==L&&(s.track({type:3,doc:N}),q=!0):this.su(C,N)||(s.track({type:2,doc:N}),q=!0,(m&&this.eu(N,m)>0||v&&this.eu(N,v)<0)&&(f=!0)):!C&&N?(s.track({type:0,doc:N}),q=!0):C&&!N&&(s.track({type:1,doc:C}),q=!0,(m||v)&&(f=!0)),q&&(N?(c=c.add(N),l=L?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,E)=>(function(C,N){const H=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:L})}};return H(C)-H(N)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(s),i=i??!1;const f=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,v=m!==this.Za;return this.Za=m,c.length!==0||v?{snapshot:new ma(this.query,e.tu,l,c,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new nT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new tT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const km="SyncEngine";class Cx{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Ix{constructor(e){this.key=e,this.hu=!1}}class Ax{constructor(e,t,s,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ti((f=>wS(f)),jd),this.Iu=new Map,this.Eu=new Set,this.du=new ft(be.comparator),this.Au=new Map,this.Ru=new vm,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _x(n,e,t=!0){const s=lT(n);let i;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.lu()):i=await rT(s,e,t,!0),i}async function kx(n,e){const t=lT(n);await rT(t,e,!0,!1)}async function rT(n,e,t,s){const i=await BN(n.localStore,kr(e)),l=i.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await Nx(n,e,l,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&KS(n.remoteStore,i),f}async function Nx(n,e,t,s,i){n.pu=(E,C,N)=>(async function(H,L,q,J){let Z=L.view.ru(q);Z.Cs&&(Z=await Sb(H.localStore,L.query,!1).then((({documents:re})=>L.view.ru(re,Z))));const se=J&&J.targetChanges.get(L.targetId),ie=J&&J.targetMismatches.get(L.targetId)!=null,pe=L.view.applyChanges(Z,H.isPrimaryClient,se,ie);return Rb(H,L.targetId,pe.au),pe.snapshot})(n,E,C,N);const l=await Sb(n.localStore,e,!0),c=new Tx(e,l.Qs),f=c.ru(l.documents),m=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),v=c.applyChanges(f,n.isPrimaryClient,m);Rb(n,t,v.au);const b=new Cx(e,t,c);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function xx(n,e,t){const s=Ae(n),i=s.Tu.get(e),l=s.Iu.get(i.targetId);if(l.length>1)return s.Iu.set(i.targetId,l.filter((c=>!jd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Mp(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&Em(s.remoteStore,i.targetId),Fp(s,i.targetId)})).catch(wa)):(Fp(s,i.targetId),await Mp(s.localStore,i.targetId,!0))}async function Ox(n,e){const t=Ae(n),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Em(t.remoteStore,s.targetId))}async function Rx(n,e,t){const s=jx(n);try{const i=await(function(l,c){const f=Ae(l),m=lt.now(),v=c.reduce(((C,N)=>C.add(N.key)),Ue());let b,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let N=as(),H=Ue();return f.Ns.getEntries(C,v).next((L=>{N=L,N.forEach(((q,J)=>{J.isValidDocument()||(H=H.add(q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,N))).next((L=>{b=L;const q=[];for(const J of c){const Z=Gk(J,b.get(J.key).overlayedDocument);Z!=null&&q.push(new ni(J.key,Z,fS(Z.value.mapValue),ss.exists(!0)))}return f.mutationQueue.addMutationBatch(C,m,q,c)})).next((L=>{E=L;const q=L.applyToLocalDocumentSet(b,H);return f.documentOverlayCache.saveOverlays(C,L.batchId,q)}))})).then((()=>({batchId:E.batchId,changes:TS(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(l,c,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new ft(Le)),m=m.insert(c,f),l.Vu[l.currentUser.toKey()]=m})(s,i.batchId,t),await fu(s,i.changes),await $d(s.remoteStore)}catch(i){const l=Am(i,"Failed to persist write");t.reject(l)}}async function sT(n,e){const t=Ae(n);try{const s=await HN(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const c=t.Au.get(l);c&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?We(c.hu,14607):i.removedDocuments.size>0&&(We(c.hu,42227),c.hu=!1))})),await fu(t,s,e)}catch(s){await wa(s)}}function Ob(n,e,t){const s=Ae(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(l,c){const f=Ae(l);f.onlineState=c;let m=!1;f.queries.forEach(((v,b)=>{for(const E of b.Sa)E.va(c)&&(m=!0)})),m&&_m(f)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Px(n,e,t){const s=Ae(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),l=i&&i.key;if(l){let c=new ft(be.comparator);c=c.insert(l,nn.newNoDocument(l,Ce.min()));const f=Ue().add(l),m=new zd(Ce.min(),new Map,new ft(Le),c,f);await sT(s,m),s.du=s.du.remove(l),s.Au.delete(e),Nm(s)}else await Mp(s.localStore,e,!1).then((()=>Fp(s,e,t))).catch(wa)}async function Dx(n,e){const t=Ae(n),s=e.batch.batchId;try{const i=await qN(t.localStore,e);iT(t,s,null),oT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await fu(t,i)}catch(i){await wa(i)}}async function Mx(n,e,t){const s=Ae(n);try{const i=await(function(l,c){const f=Ae(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next((b=>(We(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);iT(s,e,t),oT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await fu(s,i)}catch(i){await wa(i)}}function oT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function iT(n,e,t){const s=Ae(n);let i=s.Vu[s.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||aT(n,s)}))}function aT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Em(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Nm(n))}function Rb(n,e,t){for(const s of t)s instanceof tT?(n.Ru.addReference(s.key,e),Lx(n,s)):s instanceof nT?(de(km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||aT(n,s.key)):Se(19791,{wu:s})}function Lx(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(km,"New document in limbo: "+t),n.Eu.add(s),Nm(n))}function Nm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(ht.fromString(e)),s=n.fu.next();n.Au.set(s,new Ix(t)),n.du=n.du.insert(t,s),KS(n.remoteStore,new Xs(kr(hm(t.path)),s,"TargetPurposeLimboResolution",Md.ce))}}async function fu(n,e,t){const s=Ae(n),i=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,m)=>{c.push(s.pu(m,e,t).then((v=>{var b;if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:(b=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(v){i.push(v);const E=bm.As(m.targetId,v);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(i),await(async function(f,m){const v=Ae(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(m,(E=>ne.forEach(E.Es,(C=>v.persistence.referenceDelegate.addReference(b,E.targetId,C))).next((()=>ne.forEach(E.ds,(C=>v.persistence.referenceDelegate.removeReference(b,E.targetId,C)))))))))}catch(b){if(!Ea(b))throw b;de(wm,"Failed to update sequence numbers: "+b)}for(const b of m){const E=b.targetId;if(!b.fromCache){const C=v.Ms.get(E),N=C.snapshotVersion,H=C.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(E,H)}}})(s.localStore,l))}async function Ux(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){de(km,"User change. New user:",e.toKey());const s=await BS(t.localStore,e);t.currentUser=e,(function(i,l){i.mu.forEach((c=>{c.forEach((f=>{f.reject(new ge(oe.CANCELLED,l))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(t,s.Ls)}}function Fx(n,e){const t=Ae(n),s=t.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let i=Ue();const l=t.Iu.get(e);if(!l)return i;for(const c of l){const f=t.Tu.get(c);i=i.unionWith(f.view.nu)}return i}}function lT(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Px.bind(null,e),e.Pu.H_=wx.bind(null,e.eventManager),e.Pu.yu=Ex.bind(null,e.eventManager),e}function jx(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class Sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VN(this.persistence,new UN,e.initialUser,this.serializer)}Cu(e){return new GS(ym.mi,this.serializer)}Du(e){return new JN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sd.provider={build:()=>new Sd};class Vx extends Sd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof wd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SN(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new GS((s=>wd.mi(s,t)),this.serializer)}}class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ob(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ux.bind(null,this.syncEngine),await mx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vx})()}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),s=(function(i){return new XN(i)})(e.databaseInfo);return(function(i,l,c,f){return new nx(i,l,c,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(t,s,i,l,c){return new sx(t,s,i,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ob(this.syncEngine,t,0)),(function(){return Ib.v()?new Ib:new WN})())}createSyncEngine(e,t){return(function(s,i,l,c,f,m,v){const b=new Ax(s,i,l,c,f,m);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=Ae(s);de(Xo,"RemoteStore shutting down."),i.Ea.add(5),await hu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}jp.provider={build:()=>new jp};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ho="FirestoreClient";class Hx{constructor(e,t,s,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(ho,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(ho,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Am(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function gp(n,e){n.asyncQueue.verifyOperationInProgress(),de(ho,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await BS(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Pb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zx(n);de(ho,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>_b(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>_b(e.remoteStore,i))),n._onlineComponents=e}async function zx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ho,"Using user provided OfflineComponentProvider");try{await gp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ca("Error using user provided cache. Falling back to memory cache: "+t),await gp(n,new Sd)}}else de(ho,"Using default OfflineComponentProvider"),await gp(n,new Vx(void 0));return n._offlineComponents}async function uT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ho,"Using user provided OnlineComponentProvider"),await Pb(n,n._uninitializedComponentsProvider._online)):(de(ho,"Using default OnlineComponentProvider"),await Pb(n,new jp))),n._onlineComponents}function Gx(n){return uT(n).then((e=>e.syncEngine))}async function Bx(n){const e=await uT(n),t=e.eventManager;return t.onListen=_x.bind(null,e.syncEngine),t.onUnlisten=xx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ox.bind(null,e.syncEngine),t}function $x(n,e,t={}){const s=new so;return n.asyncQueue.enqueueAndForget((async()=>(function(i,l,c,f,m){const v=new qx({next:E=>{v.Nu(),l.enqueueAndForget((()=>bx(i,b)));const C=E.docs.has(c);!C&&E.fromCache?m.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&f&&f.source==="server"?m.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),b=new Sx(hm(c.path),v,{includeMetadataChanges:!0,qa:!0});return yx(i,b)})(await Bx(n),n.asyncQueue,e,t,s))),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Db=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dT="firestore.googleapis.com",Mb=!0;class Lb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dT,this.ssl=Mb}else this.host=e.host,this.ssl=e.ssl??Mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wN)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT(e.experimentalLongPollingOptions??{}),(function(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(t,s){return t.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(t){if(!t)return new $1;switch(t.type){case"firstParty":return new Y1(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const t=Db.get(e);t&&(de("ComponentProvider","Removing Datastore"),Db.delete(e),t.terminate())})(this),Promise.resolve()}}function Jx(n,e,t,s={}){var i;n=Ql(n,xm);const l=va(e),c=n._getSettings(),f={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;l&&(qE(`https://${m}`),HE("Firestore",!0)),c.host!==dT&&c.host!==m&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:m,ssl:l,emulatorOptions:s};if(!Ko(v,f)&&(n._setSettings(v),s.mockUserToken)){let b,E;if(typeof s.mockUserToken=="string")b=s.mockUserToken,E=tn.MOCK_USER;else{b=b_(s.mockUserToken,(i=n._app)==null?void 0:i.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new tn(C)}n._authCredentials=new J1(new nS(b,E))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Om{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Om(this.firestore,e,this._query)}}class zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uu(t,zt._jsonSchema))return new zt(e,s||null,new be(ht.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Pt("string",zt._jsonSchemaVersion),referencePath:Pt("string")};class su extends Om{constructor(e,t,s){super(e,t,hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new be(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function Jd(n,e,...t){if(n=qn(n),arguments.length===1&&(e=om.newId()),nk("doc","path",e),n instanceof xm){const s=ht.fromString(e,...t);return Y0(s),new zt(n,null,new be(s))}{if(!(n instanceof zt||n instanceof su))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Y0(s),new zt(n.firestore,n instanceof su?n.converter:null,new be(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ub="AsyncQueue";class Fb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JS(this,"async_queue_retry"),this._c=()=>{const s=mp();s&&de(Ub,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ea(e))throw e;de(Ub,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",jb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Im.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(i),i}uc(){this.nc&&Se(47125,{Pc:jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rm extends xm{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new Fb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fb(e),this._firestoreClient=void 0,await e}}}function Wx(n,e){const t=typeof n=="object"?n:$E(),s=typeof n=="string"?n:fd,i=rm(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const l=v_("firestore");l&&Jx(i,...l)}return i}function hT(n){if(n._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Kx(n),n._firestoreClient}function Kx(n){var e,t,s;const i=n._freezeSettings(),l=(function(c,f,m,v){return new pk(c,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)==null?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||(t=i.localCache)!=null&&t._offlineComponentProvider&&(s=i.localCache)!=null&&s._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Hx(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Xt.fromBase64String(e))}catch(t){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Pt("string",jn._jsonSchemaVersion),bytes:Pt("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fT{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(uu(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:Pt("string",xr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Or{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(t,s){if(t.length!==s.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,Or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Or(e.vectorValues);throw new ge(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:Pt("string",Or._jsonSchemaVersion),vectorValues:Pt("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yx=/^__.*__$/;class Qx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}function pT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class Dm{constructor(e,t,s,i,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Td(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pT(this.Ac)&&Yx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xx{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gd(e)}Cc(e,t,s,i=!1){return new Dm({Ac:e,methodName:t,Dc:s,path:Qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zx(n){const e=n._freezeSettings(),t=Gd(n._databaseId);return new Xx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eO(n,e,t,s,i,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,i);yT("Data must be an object, but it was:",c,s);const f=gT(s,c);let m,v;if(l.merge)m=new nr(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const E of l.mergeFields){const C=tO(e,E,t);if(!c.contains(C))throw new ge(oe.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);rO(b,C)||b.push(C)}m=new nr(b),v=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,v=c.fieldTransforms;return new Qx(new Fn(f),m,v)}function mT(n,e){if(vT(n=qn(n)))return yT("Unsupported field value:",e,n),gT(n,e);if(n instanceof fT)return(function(t,s){if(!pT(s.Ac))throw s.Sc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(t,s){const i=[];let l=0;for(const c of t){let f=mT(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}})(n,e)}return(function(t,s){if((t=qn(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return Fk(s.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const i=lt.fromDate(t);return{timestampValue:bd(s.serializer,i)}}if(t instanceof lt){const i=new lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bd(s.serializer,i)}}if(t instanceof xr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jn)return{bytesValue:LS(s.serializer,t._byteString)};if(t instanceof zt){const i=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gm(t.firestore._databaseId||s.databaseId,t._key.path)}}if(t instanceof Or)return(function(i,l){return{mapValue:{fields:{[dS]:{stringValue:hS},[pd]:{arrayValue:{values:i.toArray().map((c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return fm(l.serializer,c)}))}}}}}})(t,s);throw s.Sc(`Unsupported field value: ${im(t)}`)})(n,e)}function gT(n,e){const t={};return oS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(n,((s,i)=>{const l=mT(i,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function vT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof xr||n instanceof jn||n instanceof zt||n instanceof fT||n instanceof Or)}function yT(n,e,t){if(!vT(t)||!rS(t)){const s=im(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tO(n,e,t){if((e=qn(e))instanceof Pm)return e._internalPath;if(typeof e=="string")return bT(n,e);throw Td("Field path arguments must be of type string or ",n,!1,void 0,t)}const nO=new RegExp("[~\\*/\\[\\]]");function bT(n,e,t){if(e.search(nO)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pm(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Td(n,e,t,s,i){const l=s&&!s.isEmpty(),c=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${i}`),m+=")"),new ge(oe.INVALID_ARGUMENT,f+n+m)}function rO(n,e){return n.some((t=>t.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wT{constructor(e,t,s,i,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ET("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sO extends wT{data(){return super.data()}}function ET(n,e){return typeof e=="string"?bT(n,e):e instanceof Pm?e._internalPath:e._delegate._internalPath}class oO{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ei(e,((i,l)=>{s[i]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,i;const l=(i=(s=(t=e.fields)==null?void 0:t[pd].arrayValue)==null?void 0:s.values)==null?void 0:i.map((c=>Et(c.doubleValue)));return new Or(l)}convertGeoPoint(e){return new xr(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ud(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=ao(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);We(HS(s),9688,{name:e});const i=new eu(s.get(1),s.get(3)),l=new be(s.popFirst(5));return i.isEqual(t)||is(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iO(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class ql{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends wT{constructor(e,t,s,i,l,c){super(e,t,s,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ET("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),t}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:Pt("string",Wo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class rd extends Wo{data(e={}){return super.data(e)}}class Jl{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ql(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rd(this._firestore,this._userDataWriter,s.key,s,new ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new rd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ql(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const f=new rd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ql(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return c.type!==0&&(m=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:aO(c.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ST(n){n=Ql(n,zt);const e=Ql(n.firestore,Rm);return $x(hT(e),n._key).then((t=>cO(e,n,t)))}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:Pt("string",Jl._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class lO extends oO{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function TT(n,e,t){n=Ql(n,zt);const s=Ql(n.firestore,Rm),i=iO(n.converter,e);return uO(s,[eO(Zx(s),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ss.none())])}function uO(n,e){return(function(t,s){const i=new so;return t.asyncQueue.enqueueAndForget((async()=>Rx(await Gx(t),s,i))),i.promise})(hT(n),e)}function cO(n,e,t){const s=t.docs.get(e._key),i=new lO(n);return new Wo(n,i,e._key,s,new ql(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){ba=t})(ya),ua(new Yo("firestore",((t,{instanceIdentifier:s,options:i})=>{const l=t.getProvider("app").getImmediate(),c=new Rm(new W1(t.getProvider("auth-internal")),new Q1(l,t.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(f.options.projectId,m)})(l,s),l);return i={useFetchStreams:e,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),no($0,J0,n),no($0,J0,"esm2020")})();var dO="firebase",hO="12.6.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/no(dO,hO,"app");function CT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fO=CT,IT=new au("auth","Firebase",CT());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cd=new tm("@firebase/auth");function pO(n,...e){Cd.logLevel<=Me.WARN&&Cd.warn(`Auth (${ya}): ${n}`,...e)}function sd(n,...e){Cd.logLevel<=Me.ERROR&&Cd.error(`Auth (${ya}): ${n}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sr(n,...e){throw Mm(n,...e)}function Rr(n,...e){return Mm(n,...e)}function AT(n,e,t){const s={...fO(),[e]:t};return new au("auth","Firebase",s).create(e,{appName:n.name})}function oo(n){return AT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return IT.create(n,...e)}function Ee(n,e,...t){if(!n)throw Mm(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sd(e),new Error(e)}function ls(n,e){n||ns(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function mO(){return Vb()==="http:"||Vb()==="https:"}function Vb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mO()||I_()||"connection"in navigator)?navigator.onLine:!0}function vO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=S_()||A_()}get(){return gO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lm(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _T{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wO=new pu(3e4,6e4);function si(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fo(n,e,t,s,i={}){return kT(n,i,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=lu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:m,...l};return C_()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&va(n.emulatorConfig.host)&&(v.credentials="include"),_T.fetch()(await NT(n,n.config.apiHost,t,f),v)})}async function kT(n,e,t){n._canInitEmulator=!1;const s={...yO,...e};try{const i=new SO(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Qc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Qc(n,"user-disabled",c);const b=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw AT(n,b,v);sr(n,b)}}catch(i){if(i instanceof cs)throw i;sr(n,"network-request-failed",{message:String(i)})}}async function Wd(n,e,t,s,i={}){const l=await fo(n,e,t,s,i);return"mfaPendingCredential"in l&&sr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function NT(n,e,t,s){const i=`${e}${t}?${s}`,l=n,c=l.config.emulator?Lm(n.config,i):`${n.config.apiScheme}://${i}`;return bO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function EO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Rr(this.auth,"network-request-failed")),wO.get())})}}function Qc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=Rr(n,e,s);return i.customData._tokenResponse=t,i}function qb(n){return n!==void 0&&n.enterprise!==void 0}class TO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CO(n,e){return fo(n,"GET","/v2/recaptchaConfig",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function IO(n,e){return fo(n,"POST","/v1/accounts:delete",e)}async function Id(n,e){return fo(n,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AO(n,e=!1){const t=qn(n),s=await t.getIdToken(e),i=Um(s);Ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:s,authTime:Wl(vp(i.auth_time)),issuedAtTime:Wl(vp(i.iat)),expirationTime:Wl(vp(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function vp(n){return Number(n)*1e3}function Um(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return sd("JWT malformed, contained fewer than 3 sections"),null;try{const i=UE(t);return i?JSON.parse(i):(sd("Failed to decode base64 JWT payload"),null)}catch(i){return sd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hb(n){const e=Um(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ou(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof cs&&_O(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function _O({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const t=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,t)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ad(n){var e;const t=n.auth,s=await n.getIdToken(),i=await ou(n,Id(t,{idToken:s}));Ee(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const c=(e=l.providerUserInfo)!=null&&e.length?xT(l.providerUserInfo):[],f=xO(n.providerData,c),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),b=m?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new qp(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(n,E)}async function NO(n){const e=qn(n);await Ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xO(n,e){return[...n.filter(t=>!e.some(s=>s.providerId===t.providerId)),...e]}function xT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function OO(n,e){const t=await kT(n,{},async()=>{const s=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,c=await NT(n,i,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&va(n.emulatorConfig.host)&&(m.credentials="include"),_T.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RO(n,e){return fo(n,"POST","/v2/accounts:revokeToken",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Hb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:l}=await OO(e,t);this.updateTokensAndExpiration(s,i,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:l}=t,c=new ra;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),i&&(Ee(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(Ee(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $s(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new kO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AO(this,e)}reload(){return NO(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ad(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await ou(this,IO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:C,isAnonymous:N,providerData:H,stsTokenManager:L}=t;Ee(E&&L,e,"internal-error");const q=ra.fromJSON(this.name,L);Ee(typeof E=="string",e,"internal-error"),$s(s,e.name),$s(i,e.name),Ee(typeof C=="boolean",e,"internal-error"),Ee(typeof N=="boolean",e,"internal-error"),$s(l,e.name),$s(c,e.name),$s(f,e.name),$s(m,e.name),$s(v,e.name),$s(b,e.name);const J=new rr({uid:E,auth:e,email:i,emailVerified:C,displayName:s,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:q,createdAt:v,lastLoginAt:b});return H&&Array.isArray(H)&&(J.providerData=H.map(Z=>({...Z}))),m&&(J._redirectEventId=m),J}static async _fromIdTokenResponse(e,t,s=!1){const i=new ra;i.updateFromServerResponse(t);const l=new rr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Ad(l),l}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Ee(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?xT(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),f=new ra;f.updateFromIdToken(s);const m=new rr({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:c}),v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new qp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zb=new Map;function rs(n){ls(n instanceof Function,"Expected a class definition");let e=zb.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zb.set(n,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OT.type="NONE";const Gb=OT;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function od(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:l}=this.auth;this.fullUserKey=od(this.userKey,i.apiKey,l),this.fullPersistenceKey=od("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new sa(rs(Gb),e,s);const i=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=i[0]||rs(Gb);const c=od(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const b=await v._get(c);if(b){let E;if(typeof b=="string"){const C=await Id(e,{idToken:b}).catch(()=>{});if(!C)break;E=await rr._fromGetAccountInfoResponse(e,C,b)}else E=rr._fromJSON(e,b);v!==l&&(f=E),l=v;break}}catch{}const m=i.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new sa(l,e,s):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(c)}catch{}})),new sa(l,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UT(e))return"Blackberry";if(FT(e))return"Webos";if(PT(e))return"Safari";if((e.includes("chrome/")||DT(e))&&!e.includes("edge/"))return"Chrome";if(LT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function RT(n=sn()){return/firefox\//i.test(n)}function PT(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DT(n=sn()){return/crios\//i.test(n)}function MT(n=sn()){return/iemobile/i.test(n)}function LT(n=sn()){return/android/i.test(n)}function UT(n=sn()){return/blackberry/i.test(n)}function FT(n=sn()){return/webos/i.test(n)}function Fm(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function PO(n=sn()){var e;return Fm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function DO(){return __()&&document.documentMode===10}function jT(n=sn()){return Fm(n)||LT(n)||FT(n)||UT(n)||/windows phone/i.test(n)||MT(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VT(n,e=[]){let t;switch(n){case"Browser":t=Bb(sn());break;case"Worker":t=`${Bb(sn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function LO(n,e={}){return fo(n,"GET","/v2/passwordPolicy",si(n,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UO=6;class FO{constructor(e){var t;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??UO,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((t=e.allowedNonAlphanumericCharacters)==null?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jO{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $b(this),this.idTokenSubscription=new $b(this),this.beforeStateQueue=new MO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{var s,i,l;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)==null?void 0:t._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m!=null&&m.user&&(i=m.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ad(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(oo(this));const t=e?qn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LO(this),t=new FO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&pO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ta(n){return qn(n)}class $b{constructor(e){this.auth=e,this.observer=null,this.addObserver=M_(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VO(n){Kd=n}function qT(n){return Kd.loadJS(n)}function qO(){return Kd.recaptchaEnterpriseScript}function HO(){return Kd.gapiScript}function zO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GO{constructor(){this.enterprise=new BO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $O="recaptcha-enterprise",HT="NO_RECAPTCHA";class JO{constructor(e){this.type=$O,this.auth=Ta(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{CO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new TO(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,c(v.siteKey)}}).catch(m=>{f(m)})})}function i(l,c,f){const m=window.grecaptcha;qb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{c(v)}).catch(()=>{c(HT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&qb(window.grecaptcha))i(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=qO();m.length!==0&&(m+=f),qT(m).then(()=>{i(f,l,c)}).catch(v=>{c(v)})}}).catch(f=>{c(f)})})}}async function Jb(n,e,t,s=!1,i=!1){const l=new JO(n);let c;if(i)c=HT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Wb(n,e,t,s,i){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Jb(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Jb(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WO(n,e){const t=rm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Ko(i,e??{}))return s;sr(s,"already-initialized")}return t.initialize({options:e})}function KO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(rs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function YO(n,e,t){const s=Ta(n);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,l=zT(e),{host:c,port:f}=QO(e),m=f===null?"":`:${f}`,v={url:`${l}//${c}${m}/`},b=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(Ko(v,s.config.emulator)&&Ko(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,va(c)?(qE(`${l}//${c}${m}`),HE("Auth",!0)):XO()}function zT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QO(n){const e=zT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const l=i[1];return{host:l,port:Kb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Kb(c)}}}function Kb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function ZO(n,e){return fo(n,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function eR(n,e){return Wd(n,"POST","/v1/accounts:signInWithPassword",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function tR(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}async function nR(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iu extends jm{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new iu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&t!=null&&t.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wb(e,t,"signInWithPassword",eR);case"emailLink":return tR(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wb(e,s,"signUpPassword",ZO);case"emailLink":return nR(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function oa(n,e){return Wd(n,"POST","/v1/accounts:signInWithIdp",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rR="http://localhost";class Zo extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...l}=t;if(!s||!i)return null;const c=new Zo(s,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return oa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,oa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oa(e,t)}buildRequest(){const e={requestUri:rR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oR(n){const e=Ll(Ul(n)).link,t=e?Ll(Ul(e)).deep_link_id:null,s=Ll(Ul(n)).deep_link_id;return(s?Ll(Ul(s)).link:null)||s||t||e||n}class Vm{constructor(e){const t=Ll(Ul(e)),s=t.apiKey??null,i=t.oobCode??null,l=sR(t.mode??null);Ee(s&&i&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=oR(e);try{return new Vm(t)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Vm.parseLink(t);return Ee(s,"argument-error"),iu._fromEmailAndCode(e,s.code,s.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mu extends GT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ws extends mu{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ws.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ks extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zo._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ks.credential(t,s)}catch{return null}}}Ks.GOOGLE_SIGN_IN_METHOD="google.com";Ks.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ys extends mu{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qs extends mu{constructor(){super("twitter.com")}static credential(e,t){return Zo._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const l=await rr._fromIdTokenResponse(e,s,i),c=Yb(s);return new ga({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=Yb(s);return new ga({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _d extends cs{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new _d(e,t,s,i)}}function BT(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(n,i,e,s):i})}async function iR(n,e,t=!1){const s=await ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ga._forOperation(n,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function aR(n,e,t=!1){const{auth:s}=n;if(tr(s.app))return Promise.reject(oo(s));const i="reauthenticate";try{const l=await ou(n,BT(s,i,e,n),t);Ee(l.idToken,s,"internal-error");const c=Um(l.idToken);Ee(c,s,"internal-error");const{sub:f}=c;return Ee(n.uid===f,s,"user-mismatch"),ga._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(s,"user-mismatch"),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $T(n,e,t=!1){if(tr(n.app))return Promise.reject(oo(n));const s="signIn",i=await BT(n,s,e),l=await ga._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(l.user),l}async function lR(n,e){return $T(Ta(n),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uR(n){const e=Ta(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function cR(n,e,t){return tr(n.app)?Promise.reject(oo(n)):lR(qn(n),Ca.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uR(n),s})}function dR(n,e,t,s){return qn(n).onIdTokenChanged(e,t,s)}function hR(n,e,t){return qn(n).beforeAuthStateChanged(e,t)}function fR(n){return qn(n).signOut()}const kd="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pR=1e3,mR=10;class WT extends JT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);DO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mR):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WT.type="LOCAL";const gR=WT;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KT extends JT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KT.type="SESSION";const YT=KT;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new Yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:l}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const f=Array.from(c).map(async v=>v(t.origin,l)),m=await vR(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const v=qm("",20);i.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:i,onMessage(E){const C=E;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pr(){return window}function bR(n){Pr().location.href=n}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QT(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function wR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ER(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function SR(){return QT()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XT="firebaseLocalStorageDb",TR=1,Nd="firebaseLocalStorage",ZT="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qd(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function CR(){const n=indexedDB.deleteDatabase(XT);return new gu(n).toPromise()}function Hp(){const n=indexedDB.open(XT,TR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Nd,{keyPath:ZT})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Nd)?e(s):(s.close(),await CR(),e(await Hp()))})})}async function Qb(n,e,t){const s=Qd(n,!0).put({[ZT]:e,value:t});return new gu(s).toPromise()}async function IR(n,e){const t=Qd(n,!1).get(e),s=await new gu(t).toPromise();return s===void 0?null:s.value}function Xb(n,e){const t=Qd(n,!0).delete(e);return new gu(t).toPromise()}const AR=800,_R=3;class eC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_R)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new yR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&(e=s[0])!=null&&e.fulfilled&&(t=s[0])!=null&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ER()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await Qb(e,kd,"1"),await Xb(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>IR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=Qd(i,!1).getAll();return new gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eC.type="LOCAL";const kR=eC;new pu(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NR(n,e){return e?rs(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hm extends jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xR(n){return $T(n.auth,new Hm(n),n.bypassAuthState)}function OR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),aR(t,new Hm(n),n.bypassAuthState)}async function RR(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),iR(t,new Hm(n),n.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tC{constructor(e,t,s,i,l=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return RR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:sr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PR=new pu(2e3,1e4);class ea extends tC{constructor(e,t,s,i,l){super(e,t,i,l),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}ea.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DR="pendingRedirect",id=new Map;class MR extends tC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const t=await LR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LR(n,e){const t=jR(e),s=FR(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function UR(n,e){id.set(n._key(),e)}function FR(n){return rs(n._redirectPersistence)}function jR(n){return od(DR,n.config.apiKey,n.name)}async function VR(n,e,t=!1){if(tr(n.app))return Promise.reject(oo(n));const s=Ta(n),i=NR(s,e),l=await new MR(s,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qR=600*1e3;class HR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nC(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zb(e))}saveEventToCache(e){this.cachedEventUids.add(Zb(e)),this.lastProcessedEventTime=Date.now()}}function Zb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nC(n);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GR(n,e={}){return fo(n,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$R=/^https?/;async function JR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GR(n);for(const t of e)try{if(WR(t))return}catch{}sr(n,"unauthorized-domain")}function WR(n){const e=Vp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===s}if(!$R.test(t))return!1;if(BR.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KR=new pu(3e4,6e4);function ew(){const n=Pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YR(n){return new Promise((e,t)=>{var s,i,l;function c(){ew(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ew(),t(Rr(n,"network-request-failed"))},timeout:KR.get()})}if((i=(s=Pr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((l=Pr().gapi)!=null&&l.load)c();else{const f=zO("iframefcb");return Pr()[f]=()=>{gapi.load?c():t(Rr(n,"network-request-failed"))},qT(`${HO()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw ad=null,e})}let ad=null;function QR(n){return ad=ad||YR(n),ad}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XR=new pu(5e3,15e3),ZR="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lm(e,e2):`https://${n.config.authDomain}/${ZR}`,s={apiKey:e.apiKey,appName:n.name,v:ya},i=n2.get(n.config.apiHost);i&&(s.eid=i);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${lu(s).slice(1)}`}async function s2(n){const e=await QR(n),t=Pr().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:r2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},s=>new Promise(async(i,l)=>{await s.restyle({setHideOnLeave:!1});const c=Rr(n,"network-request-failed"),f=Pr().setTimeout(()=>{l(c)},XR.get());function m(){Pr().clearTimeout(f),i(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const o2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i2=500,a2=600,l2="_blank",u2="http://localhost";class tw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c2(n,e,t,s=i2,i=a2){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m={...o2,width:s.toString(),height:i.toString(),top:l,left:c},v=sn().toLowerCase();t&&(f=DT(v)?l2:t),RT(v)&&(e=e||u2,m.scrollbars="yes");const b=Object.entries(m).reduce((C,[N,H])=>`${C}${N}=${H},`,"");if(PO(v)&&f!=="_self")return d2(e||"",f),new tw(null);const E=window.open(e||"",f,b);Ee(E,n,"popup-blocked");try{E.focus()}catch{}return new tw(E)}function d2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h2="__/auth/handler",f2="emulator/auth/handler",p2=encodeURIComponent("fac");async function nw(n,e,t,s,i,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ya,eventId:i};if(e instanceof GT){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",D_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof mu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await n._getAppCheckToken(),v=m?`#${p2}=${encodeURIComponent(m)}`:"";return`${m2(n)}?${lu(f).slice(1)}${v}`}function m2({config:n}){return n.emulator?Lm(n,f2):`https://${n.authDomain}/${h2}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yp="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YT,this._completeRedirectFn=VR,this._overrideRedirectResult=UR}async _openPopup(e,t,s,i){var l;ls((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await nw(e,t,s,Vp(),i);return c2(e,c,qm())}async _openRedirect(e,t,s,i){await this._originValidation(e);const l=await nw(e,t,s,Vp(),i);return bR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(ls(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await s2(e),s=new HR(e);return t.register("authEvent",i=>(Ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yp,{type:yp},s=>{var i;const l=(i=s==null?void 0:s[0])==null?void 0:i[yp];l!==void 0&&t(!!l),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jT()||PT()||Fm()}}const v2=g2;var rw="@firebase/auth",sw="1.11.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function b2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w2(n){ua(new Yo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VT(n)},v=new jO(s,i,l,m);return KO(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new Yo("auth-internal",e=>{const t=Ta(e.getProvider("auth").getImmediate());return(s=>new y2(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),no(rw,sw,b2(n)),no(rw,sw,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const E2=300,S2=VE("authIdTokenMaxAge")||E2;let ow=null;const T2=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>S2)return;const i=t==null?void 0:t.token;ow!==i&&(ow=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function C2(n=$E()){const e=rm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WO(n,{popupRedirectResolver:v2,persistence:[kR,gR,YT]}),s=VE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=T2(l.toString());hR(t,c,()=>c(t.currentUser)),dR(t,f=>c(f))}}const i=FE("auth");return i&&YO(t,`http://${i}`),t}function I2(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const l=Rr("internal-error");l.customData=i,t(l)},s.type="text/javascript",s.charset="UTF-8",I2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w2("Browser");const A2={apiKey:"AIzaSyBsdPghRmOsLX7JIj-T8IYF4bRp-KxQAPc",authDomain:"cybee-ca5a2.firebaseapp.com",projectId:"cybee-ca5a2",storageBucket:"cybee-ca5a2.firebasestorage.app",messagingSenderId:"215321650697",appId:"1:215321650697:web:d0bbf35f6861a891c9bad8",measurementId:"G-K624Y57R5Q"},rC=BE(A2),Xd=Wx(rC),iw=C2(rC),Zd="supportApp",sC="videos",oC="config",_2=async n=>{console.log("Saving videos to Firebase:",n),await TT(Jd(Xd,Zd,sC),{videos:n}),console.log("Videos saved successfully")},k2=async()=>{const n=Jd(Xd,Zd,sC),e=await ST(n);if(e.exists()){const t=e.data();return console.log("Loaded videos from Firebase:",t.videos),t.videos||[]}return console.log("No videos document found in Firebase"),[]},zp=async n=>{await TT(Jd(Xd,Zd,oC),n)},N2=async()=>{const n=Jd(Xd,Zd,oC),e=await ST(n);return e.exists()?e.data():null},x2=({videos:n,setVideos:e,chatConfig:t,setChatConfig:s})=>{const[i,l]=qe.useState("videos"),[c,f]=qe.useState({title:"",description:"",url:""}),[m,v]=qe.useState(null),b=L=>{const q=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,J=L.match(q);return J&&J[2].length===11?J[2]:null},E=L=>{L.preventDefault();const q=b(c.url);if(!q){alert("Invalid YouTube URL");return}if(m)e(J=>J.map(Z=>Z.id===m?{...Z,title:c.title,description:c.description,url:c.url,videoId:q}:Z)),v(null);else{const J={id:Date.now().toString(),title:c.title,description:c.description,url:c.url,videoId:q};e(Z=>[J,...Z])}f({title:"",description:"",url:""})},C=L=>{f({title:L.title,description:L.description,url:L.url}),v(L.id),window.scrollTo({top:0,behavior:"smooth"})},N=()=>{f({title:"",description:"",url:""}),v(null)},H=(L,q)=>{q.stopPropagation(),window.confirm("Are you sure you want to delete this video?")&&(e(J=>J.filter(Z=>Z.id!==L)),m===L&&N())};return R.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[R.jsxs("div",{className:"mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Dashboard"}),R.jsx("p",{className:"text-slate-500",children:"Manage support content and AI configurations."})]}),R.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200",children:[R.jsxs("button",{onClick:()=>l("videos"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="videos"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(r_,{size:18}),R.jsx("span",{children:"Video Library"})]}),i==="videos"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("ai"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="ai"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(P0,{size:18}),R.jsx("span",{children:"AI Configuration"})]}),i==="ai"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("sql"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="sql"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(R0,{size:18}),R.jsx("span",{children:"SQL Queries"})]}),i==="sql"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),R.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:i==="videos"?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"lg:col-span-1",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 sticky top-6",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m?R.jsx(op,{size:20,className:"text-blue-600"}):R.jsx(Dl,{size:20,className:"text-blue-600"}),m?"Edit Video":"Add New Video"]}),m&&R.jsxs("button",{type:"button",onClick:N,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded-md transition-colors",children:[R.jsx(em,{size:14})," Cancel"]})]}),R.jsxs("form",{onSubmit:E,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Video Title"}),R.jsx("input",{type:"text",required:!0,value:c.title,onChange:L=>f({...c,title:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"e.g. How to Reset Password"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"YouTube URL"}),R.jsx("input",{type:"url",required:!0,value:c.url,onChange:L=>f({...c,url:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"https://youtube.com/watch?v=..."})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),R.jsx("textarea",{required:!0,value:c.description,onChange:L=>f({...c,description:L.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"Brief summary of the video content..."})]}),R.jsxs("button",{type:"submit",className:`w-full py-2.5 font-medium rounded-xl transition-colors shadow-lg flex items-center justify-center gap-2 text-white ${m?"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/20":"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}`,children:[m?R.jsx(zA,{size:18}):R.jsx(Dl,{size:18}),m?"Update Video":"Save Video"]})]})]})}),R.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[R.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Published Videos (",n.length,")"]}),n.length===0?R.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[R.jsx(a_,{size:48,className:"mx-auto text-slate-300 mb-3"}),R.jsx("p",{className:"text-slate-500",children:"No videos added yet."})]}):n.map(L=>R.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex gap-4 hover:shadow-md transition-all ${m===L.id?"border-blue-500 ring-2 ring-blue-500/10":"border-slate-100"}`,children:[R.jsx("div",{className:"w-32 h-20 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0 relative group",children:R.jsx("img",{src:`https://img.youtube.com/vi/${L.videoId}/mqdefault.jpg`,alt:L.title,className:"w-full h-full object-cover"})}),R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsx("h4",{className:"font-semibold text-slate-800 line-clamp-1",children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{type:"button",onClick:()=>C(L),className:`p-1.5 rounded-lg transition-colors ${m===L.id?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"Edit video",children:R.jsx(op,{size:16})}),R.jsx("button",{type:"button",onClick:q=>H(L.id,q),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Delete video",children:R.jsx(ip,{size:16})})]})]}),R.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mt-1",children:L.description}),R.jsx("a",{href:L.url,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 mt-2 inline-block hover:underline",children:"View on YouTube"})]})]},L.id))]})]}):i==="sql"?R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100",children:[R.jsx("div",{className:"p-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>{const L=document.getElementById("sqlForm"),q=(L==null?void 0:L.style.display)==="none";L&&(L.style.display=q?"block":"none")},children:R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[R.jsx(R0,{size:20,className:"text-green-600"}),"SQL Query Manager",R.jsx("span",{className:"text-sm text-slate-500",children:"(Click to expand)"})]})}),R.jsx("div",{id:"sqlForm",style:{display:"none"},className:"px-6 pb-6",children:R.jsxs("form",{onSubmit:L=>{L.preventDefault();const q=new FormData(L.target),J=q.get("title"),Z=q.get("query");if(J.trim()&&Z.trim()){const se={id:Date.now().toString(),title:J.trim(),query:Z.trim()};s({...t,sqlQueries:[...t.sqlQueries||[],se]}),L.target.reset()}},className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Query Title"}),R.jsx("input",{name:"title",type:"text",required:!0,placeholder:"e.g., Get all users",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SQL Query"}),R.jsx("textarea",{name:"query",required:!0,rows:6,placeholder:"SELECT * FROM users WHERE...;",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Save Query"]})]})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Saved Queries (",(t.sqlQueries||[]).length,")"]}),R.jsx("input",{type:"text",placeholder:"Search queries...",onChange:L=>{const q=L.target.value.toLowerCase();document.querySelectorAll("[data-query-item]").forEach(J=>{const Z=J.querySelector("h5").textContent.toLowerCase(),se=J.querySelector("p").textContent.toLowerCase();J.style.display=Z.includes(q)||se.includes(q)?"block":"none"})},className:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-64"})]}),(t.sqlQueries||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No queries saved yet."}):R.jsx("div",{className:"space-y-3",children:(t.sqlQueries||[]).map(L=>R.jsxs("div",{"data-query-item":!0,className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsx("h5",{className:"font-medium text-slate-800 cursor-pointer hover:text-blue-600",onClick:()=>{const q=document.createElement("div");q.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",q.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw] max-h-[80vh] overflow-auto">
                                  <h3 class="text-lg font-bold mb-4">${L.title}</h3>
                                  <textarea class="w-full h-64 p-3 border rounded-lg font-mono text-sm" readonly>${L.query}</textarea>
                                  <div class="flex gap-3 mt-4">
                                    <button onclick="navigator.clipboard.writeText('${L.query.replace(/'/g,"\\'")}')">Copy</button>
                                    <button onclick="this.closest('.fixed').remove()">Close</button>
                                  </div>
                                </div>
                              `,document.body.appendChild(q),q.onclick=J=>J.target===q&&q.remove()},children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{onClick:()=>{const q=document.createElement("div");q.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",q.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw]">
                                  <h3 class="text-lg font-bold mb-4">Edit Query</h3>
                                  <input id="editTitle" class="w-full p-3 border rounded-lg mb-3" value="${L.title}" placeholder="Query Title">
                                  <textarea id="editQuery" class="w-full h-64 p-3 border rounded-lg font-mono text-sm mb-4">${L.query}</textarea>
                                  <div class="flex gap-3">
                                    <button onclick="
                                      const title = document.getElementById('editTitle').value;
                                      const query = document.getElementById('editQuery').value;
                                      if (title && query) {
                                        window.updateQuery('${L.id}', title, query);
                                        this.closest('.fixed').remove();
                                      }
                                    " class="px-4 py-2 bg-blue-600 text-white rounded-lg">Save</button>
                                    <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-600 text-white rounded-lg">Cancel</button>
                                  </div>
                                </div>
                              `,window.updateQuery=(J,Z,se)=>{s({...t,sqlQueries:(t.sqlQueries||[]).map(ie=>ie.id===J?{...ie,title:Z,query:se}:ie)})},document.body.appendChild(q)},className:"text-blue-500 hover:text-blue-700 p-1",children:R.jsx(op,{size:14})}),R.jsx("button",{onClick:()=>s({...t,sqlQueries:(t.sqlQueries||[]).filter(q=>q.id!==L.id)}),className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(ip,{size:14})})]})]}),R.jsx("p",{className:"text-slate-600 text-xs font-mono truncate",children:L.query})]},L.id))})]})]}):R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(P0,{size:20,className:"text-blue-600"}),"Chat Assistant Settings"]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"System Instructions (Persona)"}),R.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Define how the AI should behave, what it knows, and its tone."}),R.jsx("textarea",{value:t.systemInstruction,onChange:L=>s({...t,systemInstruction:L.target.value}),rows:6,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Welcome Message"}),R.jsx("input",{type:"text",value:t.welcomeMessage,onChange:L=>s({...t,welcomeMessage:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(Dl,{size:20,className:"text-green-600"}),"Q&A Training"]}),R.jsxs("form",{onSubmit:async L=>{L.preventDefault();const q=new FormData(L.target),J=q.get("question"),Z=q.get("answer");if(J.trim()&&Z.trim()){const se={id:Date.now().toString(),question:J.trim(),answer:Z.trim()},ie={...t,qaTraining:[...t.qaTraining||[],se]};s(ie),await zp(ie),L.target.reset()}},className:"space-y-4 mb-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Question"}),R.jsx("input",{name:"question",type:"text",required:!0,placeholder:"e.g., What is your customer care number?",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Answer"}),R.jsx("textarea",{name:"answer",required:!0,rows:3,placeholder:"e.g., You can reach our customer care at +1-800-POLOSYS (765-6797)",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Add Q&A"]})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Trained Q&As (",(t.qaTraining||[]).length,")"]}),(t.qaTraining||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No Q&A pairs added yet."}):(t.qaTraining||[]).map(L=>R.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsxs("p",{className:"font-medium text-slate-800",children:["Q: ",L.question]}),R.jsx("button",{onClick:async()=>{if(!confirm("Delete this Q&A?"))return;const q={...t,qaTraining:(t.qaTraining||[]).filter(J=>J.id!==L.id)};try{await zp(q),s(q),console.log("Q&A deleted successfully")}catch(J){console.error("Failed to delete Q&A:",J),alert("Failed to delete. Please try again.")}},className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(ip,{size:14})})]}),R.jsxs("p",{className:"text-slate-600 text-sm",children:["A: ",L.answer]})]},L.id))]})]}),R.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800",children:R.jsxs("p",{children:[R.jsx("strong",{children:"Note:"})," Changes take effect for new chat sessions."]})})]})})]})};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let O2,R2;function P2(){return{geminiUrl:O2,vertexUrl:R2}}function D2(n,e,t,s){var i,l;if(!(n!=null&&n.baseUrl)){const c=P2();return e?(i=c.vertexUrl)!==null&&i!==void 0?i:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ds{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const l=e[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let v=0;v<m.length;v++){const b=m[v];h(b,e.slice(l+1),t[v])}else for(const v of m)h(v,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];h(m[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],i=n[s];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const i=e[s];if(i.endsWith("[]")){const l=i.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[i]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function M2(n,e){for(const[t,s]of Object.entries(e)){const i=t.split("."),l=s.split("."),c=new Set;let f=-1;for(let m=0;m<i.length;m++)if(i[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const v=l[m];v!=="*"&&!v.endsWith("[]")&&!v.endsWith("[0]")&&c.add(v)}Gp(n,i,l,0,c)}}function Gp(n,e,t,s,i){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const m of f[c])Gp(m,e,t,s+1,i)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(v=>!v.startsWith("_")&&!i.has(v)),m={};for(const v of f)m[v]=c[v];for(const[v,b]of Object.entries(m)){const E=[];for(const C of t.slice(s))C==="*"?E.push(v):E.push(C);h(c,E,b)}for(const v of f)delete c[v]}}else{const c=n;l in c&&Gp(c[l],e,t,s+1,i)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function L2(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function U2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],j2(c)),e}function F2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],V2(c)),e}function j2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>q2(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function V2(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>H2(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function q2(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],W2(t)),e}function H2(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],K2(t)),e}function z2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function G2(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function B2(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],$2(c)),e}function $2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function iC(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],J2(c)),e}function J2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function W2(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],zm(s));const i=d(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function K2(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],zm(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var aw;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aw||(aw={}));var lw;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lw||(lw={}));var uw;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uw||(uw={}));var Zs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Zs||(Zs={}));var cw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cw||(cw={}));var dw;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dw||(dw={}));var hw;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(hw||(hw={}));var fw;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fw||(fw={}));var pw;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pw||(pw={}));var mw;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(mw||(mw={}));var gw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gw||(gw={}));var vw;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(vw||(vw={}));var yw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(yw||(yw={}));var bw;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bw||(bw={}));var ww;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ww||(ww={}));var Ew;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ew||(Ew={}));var Sw;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sw||(Sw={}));var Tw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Tw||(Tw={}));var Cw;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Cw||(Cw={}));var xd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xd||(xd={}));var Iw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iw||(Iw={}));var Aw;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Aw||(Aw={}));var _w;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_w||(_w={}));var Bp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bp||(Bp={}));var kw;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kw||(kw={}));var Nw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Nw||(Nw={}));var xw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(xw||(xw={}));var Ow;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ow||(Ow={}));var Rw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Rw||(Rw={}));var Pw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Pw||(Pw={}));var Dw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Dw||(Dw={}));var Mw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Mw||(Mw={}));var Lw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Lw||(Lw={}));var Uw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Uw||(Uw={}));var Fw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fw||(Fw={}));var jw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jw||(jw={}));var Vw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Vw||(Vw={}));var qw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qw||(qw={}));var Hw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Hw||(Hw={}));var zw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(zw||(zw={}));var Gw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Gw||(Gw={}));var Bw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Bw||(Bw={}));var $w;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})($w||($w={}));var Jw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Jw||(Jw={}));var Ww;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ww||(Ww={}));var Kw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Kw||(Kw={}));var Yw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yw||(Yw={}));var Qw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Qw||(Qw={}));var Xw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xw||(Xw={}));var Zw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zw||(Zw={}));var eE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(eE||(eE={}));var tE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tE||(tE={}));var nE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nE||(nE={}));var rE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(rE||(rE={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class $p{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ml{get text(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let v="",b=!1;const E=[];for(const C of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,H]of Object.entries(C))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(H!==null||H!==void 0)&&E.push(N);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;b=!0,v+=C.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?v:void 0}get data(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let v="";const b=[];for(const E of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[C,N]of Object.entries(E))C!=="inlineData"&&(N!==null||N!==void 0)&&b.push(C);E.inlineData&&typeof E.inlineData.data=="string"&&(v+=atob(E.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),v.length>0?btoa(v):void 0}get functionCalls(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return v}get executableCode(){var e,t,s,i,l,c,f,m,v;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.code}get codeExecutionResult(){var e,t,s,i,l,c,f,m,v;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.output}}class sE{}class oE{}class Y2{}class Q2{}class X2{}class Z2{}class iE{}class aE{}class lE{}class eP{}class Od{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Od;let i;const l=e;return t?i=F2(l):i=U2(l),Object.assign(s,i),s}}class uE{}class cE{}class dE{}class tP{}class nP{}class rP{}class Gm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Gm,i=B2(e);return Object.assign(s,i),s}}class sP{}class oP{}class iP{}class hE{}class aP{get text(){var e,t,s;let i="",l=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,v]of Object.entries(f))m!=="text"&&m!=="thought"&&v!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,i+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?i:void 0}get data(){var e,t,s;let i="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(i+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class lP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Bm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Bm,i=iC(e);return Object.assign(s,i),s}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Be(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aC(n,e){const t=Be(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function lC(n){return Array.isArray(n)?n.map(e=>Rd(e)):[Rd(n)]}function Rd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function uC(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cC(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function dC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>fE(e)):[fE(n)]}function Jp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function pE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function mE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Jp(n)?n:{role:"user",parts:dC(n)}}function $m(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function Vn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(pE(n)||mE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Jp(n[0]);for(const i of n){const l=Jp(i);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(i);else{if(pE(i)||mE(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return s||e.push({role:"user",parts:dC(t)}),e}function uP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Zs).includes(t[0].toUpperCase())?t[0].toUpperCase():Zs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Zs).includes(s.toUpperCase())?s.toUpperCase():Zs.TYPE_UNSPECIFIED})}}function ia(n){const e={},t=["items"],s=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&uP(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Zs).includes(f.toUpperCase())?f.toUpperCase():Zs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ia(f);else if(s.includes(c)){const m=[];for(const v of f){if(v.type=="null"){e.nullable=!0;continue}m.push(ia(v))}e[c]=m}else if(i.includes(c)){const m={};for(const[v,b]of Object.entries(f))m[v]=ia(b);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Jm(n){return ia(n)}function Wm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Km(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ia(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ia(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ia(e.response));return n}function Aa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function cP(n,e,t,s=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function hs(n,e){if(typeof e!="string")throw new Error("name must be a string");return cP(n,e,"cachedContents")}function hC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function po(n){return zm(n)}function dP(n){return n!=null&&typeof n=="object"&&"name"in n}function hP(n){return n!=null&&typeof n=="object"&&"video"in n}function fP(n){return n!=null&&typeof n=="object"&&"uri"in n}function fC(n){var e;let t;if(dP(n)&&(t=n.name),!(fP(n)&&(t=n.uri,t===void 0))&&!(hP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function pC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mC(n){for(const e of["models","tunedModels","publisherModels"])if(pP(n,e))return n[e];return[]}function pP(n,e){return n!==null&&typeof n=="object"&&e in n}function mP(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function gP(n,e={}){const t=[],s=new Set;for(const i of n){const l=i.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=mP(i,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function gC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function vP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let i=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const c=l.response;if(!(typeof c!="object"||c===null)&&c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function _a(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function yP(n){const e={},t=d(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>XP(c))),h(e,["inlinedResponses"],l)}const i=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function bP(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const i=d(n,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function wP(n){const e={},t=d(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const i=d(n,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ld(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["metadata","state"]);i!=null&&h(e,["state"],yC(i));const l=d(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(n,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&h(e,["model"],m);const v=d(n,["metadata","output"]);return v!=null&&h(e,["dest"],yP(vC(v))),e}function Wp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["state"]);i!=null&&h(e,["state"],yC(i));const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(e,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(e,["updateTime"],v);const b=d(n,["model"]);b!=null&&h(e,["model"],b);const E=d(n,["inputConfig"]);E!=null&&h(e,["src"],EP(E));const C=d(n,["outputConfig"]);C!=null&&h(e,["dest"],bP(vC(C)));const N=d(n,["completionStats"]);return N!=null&&h(e,["completionStats"],N),e}function EP(n){const e={},t=d(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const i=d(n,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function SP(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(t,["fileName"],s);const i=d(e,["inlinedRequests"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>QP(n,c))),h(t,["requests","requests"],l)}return t}function TP(n){const e={},t=d(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const i=d(n,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CP(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function IP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function AP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function _P(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],kP(s));const i=d(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(N=>N)),h(e,["safetyRatings"],C)}const E=d(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function kP(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["citations"],s)}return e}function bC(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>oD(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function NP(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function xP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],wP(vP(i))),t}function gE(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["src"]);i!=null&&h(t,["batch","inputConfig"],SP(n,gC(n,i)));const l=d(e,["config"]);return l!=null&&NP(l,t),t}function OP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],Be(n,s));const i=d(e,["src"]);i!=null&&h(t,["inputConfig"],TP(gC(n,i)));const l=d(e,["config"]);return l!=null&&xP(l,t),t}function RP(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function PP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["src"]);i!=null&&h(t,["batch","inputConfig"],VP(n,i));const l=d(e,["config"]);return l!=null&&RP(l,t),t}function DP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function MP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function LP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function UP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function FP(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=$m(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const i=d(e,["config"]);return i!=null&&(h(t,["_self"],jP(i,t)),M2(t,{"requests[].*":"requests[].request.*"})),t}function jP(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VP(n,e){const t={},s=d(e,["fileName"]);s!=null&&h(t,["file_name"],s);const i=d(e,["inlinedRequests"]);return i!=null&&h(t,["requests"],FP(n,i)),t}function qP(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function HP(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zP(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GP(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],bC(rn(i)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const E=d(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=d(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const q=d(e,["responseMimeType"]);q!=null&&h(s,["responseMimeType"],q);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(O=>iD(O))),h(t,["safetySettings"],F)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let F=Aa(ie);Array.isArray(F)&&(F=F.map(O=>lD(Ia(O)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],aD(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&h(t,["cachedContent"],hs(n,re));const x=d(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const _=d(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const k=d(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],Wm(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],YP(D)),s}function BP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>_P(v))),h(e,["candidates"],m)}const i=d(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function $P(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function JP(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],_a(n,s)),t}function WP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function KP(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function YP(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QP(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["request","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let f=Vn(i);Array.isArray(f)&&(f=f.map(m=>bC(m))),h(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(t,["request","generationConfig"],GP(n,c,d(t,["request"],{}))),t}function XP(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],BP(t));const s=d(n,["error"]);return s!=null&&h(e,["error"],s),e}function ZP(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function eD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const l=d(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function tD(n){const e={},t=d(n,["config"]);return t!=null&&ZP(t,e),e}function nD(n){const e={},t=d(n,["config"]);return t!=null&&eD(t,e),e}function rD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["operations"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ld(c))),h(e,["batchJobs"],l)}return e}function sD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["batchPredictionJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Wp(c))),h(e,["batchJobs"],l)}return e}function oD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],qP(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],HP(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],CP(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const C=d(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function iD(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function aD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],zP(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function lD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(E=>E)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],WP(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],KP(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var us;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(us||(us={}));class oi{constructor(e,t,s,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,i)}init(e,t,s){var i,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class uD extends ds{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new oi(us.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=gE(this.apiClient,e),s=t._url,i=ce("{model}:batchGenerateContent",s),l=t.batch.inputConfig.requests,c=l.requests,f=[];for(const m of c){const v=Object.assign({},m);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const E=v.request;E.systemInstruction=b,v.request=E}f.push(v)}return l.requests=f,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},i=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${i}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${i}`;else if(c)s.dest=`${c}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=OP(this.apiClient,e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Wp(b))}else{const v=gE(this.apiClient,e);return f=ce("{model}:batchGenerateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async createEmbeddingsInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PP(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>ld(m))}}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=JP(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Wp(b))}else{const v=$P(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async cancel(e){var t,s,i,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=AP(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=IP(this.apiClient,e);c=ce("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=nD(e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=sD(b),C=new hE;return Object.assign(C,E),C})}else{const v=tD(e);return f=ce("batches",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=rD(b),C=new hE;return Object.assign(C,E),C})}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=MP(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>UP(b))}else{const v=DP(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>LP(b))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function cD(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vE(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>PD(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function dD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let b=Vn(c);Array.isArray(b)&&(b=b.map(E=>vE(E))),h(e,["contents"],b)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],vE(rn(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(E=>MD(E))),h(e,["tools"],b)}const v=d(n,["toolConfig"]);if(e!==void 0&&v!=null&&h(e,["toolConfig"],DD(v)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let E=Vn(c);Array.isArray(E)&&(E=E.map(C=>C)),h(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],rn(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(C=>LD(C))),h(e,["tools"],E)}const v=d(n,["toolConfig"]);e!==void 0&&v!=null&&h(e,["toolConfig"],v);const b=d(n,["kmsKeyName"]);return e!==void 0&&b!=null&&h(e,["encryption_spec","kmsKeyName"],b),t}function fD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aC(n,s));const i=d(e,["config"]);return i!=null&&dD(i,t),t}function pD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aC(n,s));const i=d(e,["config"]);return i!=null&&hD(i,t),t}function mD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function gD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function vD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function yD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function bD(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function wD(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ED(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SD(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function TD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function CD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function ID(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function AD(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _D(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function kD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function ND(n){const e={},t=d(n,["config"]);return t!=null&&_D(t,e),e}function xD(n){const e={},t=d(n,["config"]);return t!=null&&kD(t,e),e}function OD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function RD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function PD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],bD(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],wD(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],cD(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const C=d(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function DD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],ED(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function MD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(E=>E)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],ID(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],AD(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function LD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>SD(C))),h(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function UD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function FD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function jD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const i=d(e,["config"]);return i!=null&&UD(i,t),t}function VD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const i=d(e,["config"]);return i!=null&&FD(i,t),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class qD extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oi(us.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=pD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=fD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=CD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=TD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=gD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=yD(b),C=new cE;return Object.assign(C,E),C})}else{const v=mD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=vD(b),C=new cE;return Object.assign(C,E),C})}}async update(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=VD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=jD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=xD(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=RD(b),C=new dE;return Object.assign(C,E),C})}else{const v=ND(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=OD(b),C=new dE;return Object.assign(C,E),C})}}}function yE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(N){return function(H){return Promise.resolve(H).then(N,E)}}function f(N,H){s[N]&&(i[N]=function(L){return new Promise(function(q,J){l.push([N,L,q,J])>1||m(N,L)})},H&&(i[N]=H(i[N])))}function m(N,H){try{v(s[N](H))}catch(L){C(l[0][3],L)}}function v(N){N.value instanceof at?Promise.resolve(N.value.v).then(b,E):C(l[0][2],N)}function b(N){m("next",N)}function E(N){m("throw",N)}function C(N,H){N(H),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Kl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yE=="function"?yE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,m){c=n[l](c),i(f,m,c.done,c.value)})}}function i(l,c,f,m){Promise.resolve(m).then(function(v){l({value:v,done:f})},c)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function HD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:wC(t)}function wC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const i=[];let l=!0;for(;s<t&&n[s].role==="model";)i.push(n[s]),l&&!wC(n[s])&&(l=!1),s++;l?e.push(...i):e.pop()}return e}class GD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new BD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class BD{constructor(e,t,s,i={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),zD(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const m=await i,v=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,b=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let C=[];b!=null&&(C=(f=b.slice(E))!==null&&f!==void 0?f:[]);const N=v?[v]:[];this.recordHistory(s,N,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const l=await i;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?bE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,i;return aa(this,arguments,function*(){var l,c,f,m;const v=[];try{for(var b=!0,E=Kl(e),C;C=yield at(E.next()),l=C.done,!l;b=!0){m=C.value,b=!1;const N=m;if(HD(N)){const H=(i=(s=N.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content;H!==void 0&&v.push(H)}yield yield at(N)}}catch(N){c={error:N}}finally{try{!b&&!l&&(f=E.return)&&(yield at(f.call(E)))}finally{if(c)throw c.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let i=[];t.length>0&&t.every(l=>l.role!==void 0)?i=t:i.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...bE(s)):this.history.push(e),this.history.push(...i)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eh.prototype)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function $D(n){const e={},t=d(n,["file"]);return t!=null&&h(e,["file"],t),e}function JD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function WD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fC(t)),e}function KD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function YD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fC(t)),e}function QD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function XD(n){const e={},t=d(n,["config"]);return t!=null&&QD(t,e),e}function ZD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eM extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oi(us.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XD(e);return l=ce("files",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=ZD(m),b=new sP;return Object.assign(b,v),b})}}async createInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$D(e);return l=ce("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=JD(m),b=new oP;return Object.assign(b,v),b})}}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=WD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=KD(m),b=new iP;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function ud(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tM(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>vM(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function nM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function rM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function oM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const i=d(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const E=d(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const C=d(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const H=d(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const q=d(n,["routingConfig"]);q!=null&&h(e,["routingConfig"],q);const J=d(n,["seed"]);J!=null&&h(e,["seed"],J);const Z=d(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],EC(Z));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const ie=d(n,["temperature"]);ie!=null&&h(e,["temperature"],ie);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const re=d(n,["topK"]);re!=null&&h(e,["topK"],re);const x=d(n,["topP"]);if(x!=null&&h(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function lM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Km(E));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],tM(rn(H)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Aa(L);Array.isArray(re)&&(re=re.map(x=>bM(Ia(x)))),h(e,["setup","tools"],re)}const q=d(n,["sessionResumption"]);e!==void 0&&q!=null&&h(e,["setup","sessionResumption"],yM(q));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function uM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],oM(s));const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],EC(Km(E)));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],rn(H));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Aa(L);Array.isArray(re)&&(re=re.map(x=>wM(Ia(x)))),h(e,["setup","tools"],re)}const q=d(n,["sessionResumption"]);e!==void 0&&q!=null&&h(e,["setup","sessionResumption"],q);const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function cM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Be(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],lM(i,t)),t}function dM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Be(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],uM(i,t)),t}function hM(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function fM(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["weightedPrompts"],s)}return e}function pM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lC(t);Array.isArray(v)&&(v=v.map(b=>ud(b))),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],ud(cC(s)));const i=d(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const l=d(n,["video"]);l!=null&&h(e,["video"],ud(uC(l)));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function mM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lC(t);Array.isArray(v)&&(v=v.map(b=>b)),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],cC(s));const i=d(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const l=d(n,["video"]);l!=null&&h(e,["video"],uC(l));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function gM(n){const e={},t=d(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const i=d(n,["toolCall"]);i!=null&&h(e,["toolCall"],i);const l=d(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],EM(c));const f=d(n,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);return m!=null&&h(e,["sessionResumptionUpdate"],m),e}function vM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],nM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],rM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],ud(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const C=d(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function yM(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EC(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(E=>E)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],iM(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],aM(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function wM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>sM(C))),h(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function EM(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const i=d(n,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(n,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["promptTokensDetails"],N)}const v=d(n,["cacheTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["cacheTokensDetails"],N)}const b=d(n,["candidatesTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["responseTokensDetails"],N)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let N=E;Array.isArray(N)&&(N=N.map(H=>H)),h(e,["toolUsePromptTokensDetails"],N)}const C=d(n,["trafficType"]);return C!=null&&h(e,["trafficType"],C),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function SM(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function TM(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],CM(s));const i=d(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let C=b;Array.isArray(C)&&(C=C.map(N=>N)),h(e,["safetyRatings"],C)}const E=d(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function CM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["citations"],s)}return e}function IM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let l=Vn(i);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function AM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(e,["tokensInfo"],i)}return e}function _M(n){const e={},t=d(n,["values"]);t!=null&&h(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&h(e,["statistics"],kM(s)),e}function kM(n){const e={},t=d(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function th(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>UL(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function NM(n){const e={},t=d(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function xM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function OM(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],rn(s));const i=d(n,["tools"]);if(e!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>AC(f))),h(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],SL(l)),t}function RM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let c=Vn(i);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&xM(l),t}function PM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let c=Vn(i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&OM(l,t),t}function DM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const i=d(n,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function MM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function LM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Be(n,s)),t}function UM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Be(n,s)),t}function FM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function jM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function VM(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const C=d(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const q=d(n,["addWatermark"]);e!==void 0&&q!=null&&h(e,["parameters","addWatermark"],q);const J=d(n,["labels"]);e!==void 0&&J!=null&&h(e,["labels"],J);const Z=d(n,["editMode"]);e!==void 0&&Z!=null&&h(e,["parameters","editMode"],Z);const se=d(n,["baseSteps"]);return e!==void 0&&se!=null&&h(e,["parameters","editConfig","baseSteps"],se),t}function qM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>zL(m))),h(t,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&VM(c,t),t}function HM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>nh(l))),h(e,["generatedImages"],i)}return e}function zM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function GM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),t}function BM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let f=$m(n,i);Array.isArray(f)&&(f=f.map(m=>m)),h(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&zM(l,t);const c=d(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],Be(n,c)),t}function $M(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let c=$m(n,i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&GM(l,t),t}function JM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const i=d(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function WM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_M(c))),h(e,["embeddings"],l)}const i=d(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function KM(n){const e={},t=d(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function YM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XM(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function eL(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],th(rn(i)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const E=d(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=d(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const q=d(e,["responseMimeType"]);q!=null&&h(s,["responseMimeType"],q);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(O=>GL(O))),h(t,["safetySettings"],F)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let F=Aa(ie);Array.isArray(F)&&(F=F.map(O=>QL(Ia(O)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],YL(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&h(t,["cachedContent"],hs(n,re));const x=d(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const _=d(e,["mediaResolution"]);_!=null&&h(s,["mediaResolution"],_);const k=d(e,["speechConfig"]);if(k!=null&&h(s,["speechConfig"],Wm(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],_L(D)),s}function tL(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],rn(i));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const E=d(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=d(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const H=d(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const q=d(e,["responseMimeType"]);q!=null&&h(s,["responseMimeType"],q);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);Z!=null&&h(s,["responseJsonSchema"],Z);const se=d(e,["routingConfig"]);se!=null&&h(s,["routingConfig"],se);const ie=d(e,["modelSelectionConfig"]);ie!=null&&h(s,["modelConfig"],ie);const pe=d(e,["safetySettings"]);if(t!==void 0&&pe!=null){let Y=pe;Array.isArray(Y)&&(Y=Y.map(le=>le)),h(t,["safetySettings"],Y)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let Y=Aa(re);Array.isArray(Y)&&(Y=Y.map(le=>AC(Ia(le)))),h(t,["tools"],Y)}const x=d(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const _=d(e,["labels"]);t!==void 0&&_!=null&&h(t,["labels"],_);const k=d(e,["cachedContent"]);t!==void 0&&k!=null&&h(t,["cachedContent"],hs(n,k));const M=d(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const F=d(e,["speechConfig"]);F!=null&&h(s,["speechConfig"],IC(Wm(F)));const O=d(e,["audioTimestamp"]);O!=null&&h(s,["audioTimestamp"],O);const $e=d(e,["thinkingConfig"]);$e!=null&&h(s,["thinkingConfig"],$e);const pt=d(e,["imageConfig"]);return pt!=null&&h(s,["imageConfig"],kL(pt)),s}function wE(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let c=Vn(i);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],eL(n,l,t)),t}function EE(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["contents"]);if(i!=null){let c=Vn(i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],tL(n,l,t)),t}function SE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>TM(v))),h(e,["candidates"],m)}const i=d(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function TE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),h(e,["candidates"],v)}const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const l=d(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const f=d(n,["responseId"]);f!=null&&h(e,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function nL(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=d(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const b=d(n,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const C=d(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=d(n,["imageSize"]);if(e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function rL(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const C=d(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const H=d(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const q=d(n,["addWatermark"]);e!==void 0&&q!=null&&h(e,["parameters","addWatermark"],q);const J=d(n,["labels"]);e!==void 0&&J!=null&&h(e,["labels"],J);const Z=d(n,["imageSize"]);e!==void 0&&Z!=null&&h(e,["parameters","sampleImageSize"],Z);const se=d(n,["enhancePrompt"]);return e!==void 0&&se!=null&&h(e,["parameters","enhancePrompt"],se),t}function sL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["config"]);return l!=null&&nL(l,t),t}function oL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["config"]);return l!=null&&rL(l,t),t}function iL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yL(c))),h(e,["generatedImages"],l)}const i=d(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],TC(i)),e}function aL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>nh(c))),h(e,["generatedImages"],l)}const i=d(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],CC(i)),e}function lL(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=d(n,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=d(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=d(n,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],rh(b));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(N=>c4(N))),h(e,["instances[0]","referenceImages"],C)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uL(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const l=d(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=d(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const C=d(n,["negativePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","negativePrompt"],C);const N=d(n,["enhancePrompt"]);e!==void 0&&N!=null&&h(e,["parameters","enhancePrompt"],N);const H=d(n,["generateAudio"]);e!==void 0&&H!=null&&h(e,["parameters","generateAudio"],H);const L=d(n,["lastFrame"]);e!==void 0&&L!=null&&h(e,["instances[0]","lastFrame"],or(L));const q=d(n,["referenceImages"]);if(e!==void 0&&q!=null){let se=q;Array.isArray(se)&&(se=se.map(ie=>d4(ie))),h(e,["instances[0]","referenceImages"],se)}const J=d(n,["mask"]);e!==void 0&&J!=null&&h(e,["instances[0]","mask"],u4(J));const Z=d(n,["compressionQuality"]);return e!==void 0&&Z!=null&&h(e,["parameters","compressionQuality"],Z),t}function cL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],pL(c)),e}function dL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],mL(c)),e}function hL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],rh(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],_C(c));const f=d(e,["source"]);f!=null&&gL(f,t);const m=d(e,["config"]);return m!=null&&lL(m,t),t}function fL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],or(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],kC(c));const f=d(e,["source"]);f!=null&&vL(f,t);const m=d(e,["config"]);return m!=null&&uL(m,t),t}function pL(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>wL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function mL(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>EL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function gL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],rh(i));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],_C(l)),t}function vL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],or(i));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],kC(l)),t}function yL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],NL(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const i=d(n,["_self"]);return i!=null&&h(e,["safetyAttributes"],TC(i)),e}function nh(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],SC(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const i=d(n,["_self"]);i!=null&&h(e,["safetyAttributes"],CC(i));const l=d(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function bL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["mask"],SC(t));const s=d(n,["labels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(e,["labels"],i)}return e}function wL(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],a4(t)),e}function EL(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],l4(t)),e}function SL(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const i=d(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const E=d(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const C=d(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const H=d(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const q=d(n,["routingConfig"]);q!=null&&h(e,["routingConfig"],q);const J=d(n,["seed"]);J!=null&&h(e,["seed"],J);const Z=d(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],IC(Z));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const ie=d(n,["temperature"]);ie!=null&&h(e,["temperature"],ie);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const re=d(n,["topK"]);re!=null&&h(e,["topK"],re);const x=d(n,["topP"]);if(x!=null&&h(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TL(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Be(n,s)),t}function CL(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],Be(n,s)),t}function IL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function AL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function _L(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const i=d(n,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const l=d(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function NL(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],po(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function SC(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function rh(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],po(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function or(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function xL(n,e,t){const s={},i=d(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pC(n,f)),s}function OL(n,e,t){const s={},i=d(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pC(n,f)),s}function RL(n,e){const t={},s=d(e,["config"]);return s!=null&&xL(n,s,t),t}function PL(n,e){const t={},s=d(e,["config"]);return s!=null&&OL(n,s,t),t}function DL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["_self"]);if(i!=null){let l=mC(i);Array.isArray(l)&&(l=l.map(c=>Kp(c))),h(e,["models"],l)}return e}function ML(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["_self"]);if(i!=null){let l=mC(i);Array.isArray(l)&&(l=l.map(c=>Yp(c))),h(e,["models"],l)}return e}function LL(n){const e={},t=d(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const i=d(n,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function Kp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const l=d(n,["version"]);l!=null&&h(e,["version"],l);const c=d(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],XL(c));const f=d(n,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const m=d(n,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);const v=d(n,["supportedGenerationMethods"]);v!=null&&h(e,["supportedActions"],v);const b=d(n,["temperature"]);b!=null&&h(e,["temperature"],b);const E=d(n,["maxTemperature"]);E!=null&&h(e,["maxTemperature"],E);const C=d(n,["topP"]);C!=null&&h(e,["topP"],C);const N=d(n,["topK"]);N!=null&&h(e,["topK"],N);const H=d(n,["thinking"]);return H!=null&&h(e,["thinking"],H),e}function Yp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const l=d(n,["versionId"]);l!=null&&h(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(C=>KM(C))),h(e,["endpoints"],E)}const f=d(n,["labels"]);f!=null&&h(e,["labels"],f);const m=d(n,["_self"]);m!=null&&h(e,["tunedModelInfo"],ZL(m));const v=d(n,["defaultCheckpointId"]);v!=null&&h(e,["defaultCheckpointId"],v);const b=d(n,["checkpoints"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(C=>C)),h(e,["checkpoints"],E)}return e}function UL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],YM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],QM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],SM(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const C=d(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function FL(n){const e={},t=d(n,["productImage"]);return t!=null&&h(e,["image"],or(t)),e}function jL(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=d(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const C=d(n,["enhancePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","enhancePrompt"],C);const N=d(n,["labels"]);return e!==void 0&&N!=null&&h(e,["labels"],N),t}function VL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["source"]);i!=null&&HL(i,t);const l=d(e,["config"]);return l!=null&&jL(l,t),t}function qL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>nh(i))),h(e,["generatedImages"],s)}return e}function HL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],or(i));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>FL(f))),h(e,["instances[0]","productImages"],c)}return t}function zL(n){const e={},t=d(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],or(t));const s=d(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const i=d(n,["referenceType"]);i!=null&&h(e,["referenceType"],i);const l=d(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],LL(l));const c=d(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],NM(c));const f=d(n,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const m=d(n,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function TC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const i=d(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function CC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const i=d(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function GL(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function BL(n){const e={},t=d(n,["image"]);return t!=null&&h(e,["image"],or(t)),e}function $L(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const i=d(n,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const m=d(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),t}function JL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["source"]);i!=null&&KL(i,t);const l=d(e,["config"]);return l!=null&&$L(l,t),t}function WL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>bL(i))),h(e,["generatedMasks"],s)}return e}function KL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],or(i));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],BL(l)),t}function IC(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function YL(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],XM(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function QL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(E=>E)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],IL(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],AL(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function AC(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>ZM(C))),h(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function XL(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const i=d(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function ZL(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const i=d(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function e4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function t4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function n4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","name"],Be(n,s));const i=d(e,["config"]);return i!=null&&e4(i,t),t}function r4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["config"]);return i!=null&&t4(i,t),t}function s4(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=d(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=d(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const b=d(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const E=d(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const C=d(n,["numberOfImages"]);e!==void 0&&C!=null&&h(e,["parameters","sampleCount"],C);const N=d(n,["mode"]);return e!==void 0&&N!=null&&h(e,["parameters","mode"],N),t}function o4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],Be(n,s));const i=d(e,["image"]);i!=null&&h(t,["instances[0]","image"],or(i));const l=d(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&s4(c,t),t}function i4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>nh(l))),h(e,["generatedImages"],i)}return e}function a4(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],po(s));const i=d(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function l4(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function u4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["_self"],or(t));const s=d(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function c4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],rh(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function d4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],or(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function _C(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function kC(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const h4="Content-Type",f4="X-Server-Timeout",p4="User-Agent",Qp="x-goog-api-client",m4="1.30.0",g4=`google-genai-sdk/${m4}`,v4="v1beta1",y4="v1beta",CE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class b4{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:v4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:y4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const i=[this.getRequestUrlInternal(t)];return s&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))i.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,i.toString(),e.abortSignal),this.unaryApiCall(i,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[i,l]of Object.entries(t))typeof l=="object"?s[i]=Object.assign(Object.assign({},s[i]),l):l!==void 0&&(s[i]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,i.toString(),e.abortSignal),this.streamApiCall(i,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,i){if(t&&t.timeout||i){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}i&&i.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&w4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await IE(i),new $p(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await IE(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield at(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const b=JSON.parse(m);if("error"in b){const E=JSON.parse(JSON.stringify(b.error)),C=E.status,N=E.code,H=`got status: ${C}. ${JSON.stringify(b)}`;if(N>=400&&N<600)throw new eh({message:H,status:N})}}catch(b){if(b.name==="ApiError")throw b}l+=m;let v=l.match(CE);for(;v;){const b=v[1];try{const E=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new $p(E)),l=l.slice(v[0].length),v=l.match(CE)}catch(E){throw new Error(`exception parsing stream chunk ${b}. ${E}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=g4+" "+this.clientOptions.userAgentExtra;return e[p4]=t,e[Qp]=t,e[h4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[i,l]of Object.entries(e.headers))s.append(i,l);e.timeout&&e.timeout>0&&s.append(f4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);i.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=f;const m={file:i},v=this.getFileName(e),b=ce("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(b,i.sizeBytes,i.mimeType,v,m,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,s){var i;const l=this.clientOptions.uploader,c=await l.stat(t),f=String(c.size),m=(i=s==null?void 0:s.mimeType)!==null&&i!==void 0?i:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const v=`upload/v1beta/${e}:uploadToFileSearchStore`,b=this.getFileName(t),E={};s!=null&&s.customMetadata&&(E.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(E.chunkingConfig=s.chunkingConfig);const C=await this.fetchUploadUrl(v,f,m,b,E,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,C,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,i,l,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},i?{"X-Goog-Upload-File-Name":i}:{})};const v=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!v||!(v!=null&&v.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(f=v==null?void 0:v.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function IE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(s);throw t>=400&&t<600?new eh({message:i,status:t}):new Error(i)}}function w4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const v=c[m],b=f[m];v&&typeof v=="object"&&!Array.isArray(v)&&b&&typeof b=="object"&&!Array.isArray(b)?f[m]=s(b,v):(b&&v&&typeof b!=typeof v&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof b}, New type: ${typeof v}. Overwriting.`),f[m]=v)}return f}const i=s(t,e);n.body=JSON.stringify(i)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const E4="mcp_used/unknown";let S4=!1;function NC(n){for(const e of n)if(T4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return S4}function xC(n){var e;const t=(e=n[Qp])!==null&&e!==void 0?e:"";n[Qp]=(t+` ${E4}`).trimStart()}function T4(n){return n!==null&&typeof n=="object"&&n instanceof Ym}function C4(n,e=100){return aa(this,arguments,function*(){let t,s=0;for(;s<e;){const i=yield at(n.listTools({cursor:t}));for(const l of i.tools)yield yield at(l),s++;if(!i.nextCursor)break;t=i.nextCursor}})}class Ym{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ym(e,t)}async initialize(){var e,t,s,i;if(this.mcpTools.length>0)return;const l={},c=[];for(const b of this.mcpClients)try{for(var f=!0,m=(t=void 0,Kl(C4(b))),v;v=await m.next(),e=v.done,!e;f=!0){i=v.value,f=!1;const E=i;c.push(E);const C=E.name;if(l[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);l[C]=b}}catch(E){t={error:E}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),gP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await i.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function I4(n,e,t){const s=new lP;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(s,i),e(s)}class A4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=N4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${i}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let v=()=>{};const b=new Promise(J=>{v=J}),E=e.callbacks,C=function(){v({})},N=this.apiClient,H={onopen:C,onmessage:J=>{I4(N,E.onmessage,J)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(J){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(J){}},L=this.webSocketFactory.create(m,k4(c),H);L.connect(),await b;const q={setup:{model:Be(this.apiClient,e.model)}};return L.send(JSON.stringify(q)),new _4(L,this.apiClient)}}class _4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function k4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function N4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const x4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function O4(n,e,t){const s=new aP;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const l=JSON.parse(i);if(n.isVertexAI()){const c=gM(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class R4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new A4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,i,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),v=this.apiClient.getApiVersion();let b;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&NC(e.config.tools)&&xC(E);const C=L4(E);if(this.apiClient.isVertexAI())b=`${m}/ws/google.cloud.aiplatform.${v}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C,b);else{const k=this.apiClient.getApiKey();let M="BidiGenerateContent",D="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),v!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",D="access_token"),b=`${m}/ws/google.ai.generativelanguage.${v}.GenerativeService.${M}?${D}=${k}`}let N=()=>{};const H=new Promise(k=>{N=k}),L=e.callbacks,q=function(){var k;(k=L==null?void 0:L.onopen)===null||k===void 0||k.call(L),N({})},J=this.apiClient,Z={onopen:q,onmessage:k=>{O4(J,L.onmessage,k)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(k){},onclose:(s=L==null?void 0:L.onclose)!==null&&s!==void 0?s:function(k){}},se=this.webSocketFactory.create(b,M4(C),Z);se.connect(),await H;let ie=Be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const k=this.apiClient.getProject(),M=this.apiClient.getLocation();ie=`projects/${k}/locations/${M}/`+ie}let pe={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xd.AUDIO]}:e.config.responseModalities=[xd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],x=[];for(const k of re)if(this.isCallableTool(k)){const M=k;x.push(await M.tool())}else x.push(k);x.length>0&&(e.config.tools=x);const _={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?pe=dM(this.apiClient,_):pe=cM(this.apiClient,_),delete pe.config,se.send(JSON.stringify(pe)),new D4(se,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P4={turnComplete:!0};class D4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Vn(t.turns),e.isVertexAI()||(s=s.map(i=>th(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(x4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},P4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mM(e)}:t={realtimeInput:pM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function M4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function L4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const AE=10;function _E(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){i=!0;break}if(!i)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function U4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>la(i)))!==null&&s!==void 0?s:!1}function kE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,i)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(i)}),t}function NE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class F4 extends ds{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,i,l,c,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!U4(t)||_E(t.config))return await this.generateContentInternal(m);const v=kE(t);if(v.length>0){const L=v.map(q=>`tools[${q}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let b,E;const C=Vn(m.contents),N=(l=(i=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:AE;let H=0;for(;H<N&&(b=await this.generateContentInternal(m),!(!b.functionCalls||b.functionCalls.length===0));){const L=b.candidates[0].content,q=[];for(const J of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(la(J)){const Z=await J.callTool(b.functionCalls);q.push(...Z)}H++,E={role:"user",parts:q},m.contents=Vn(m.contents),m.contents.push(L),m.contents.push(E),NE(m.config)&&(C.push(L),C.push(E))}return NE(m.config)&&(b.automaticFunctionCallingHistory=C),b},this.generateContentStream=async t=>{var s,i,l,c,f;if(this.maybeMoveToResponseJsonSchem(t),_E(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const m=kE(t);if(m.length>0){const E=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const v=(l=(i=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,b=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(v&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var i;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&m!=null&&m.safetyAttributes&&((i=m==null?void 0:m.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const i={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((s=i.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new oi(us.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(i),i)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var s,i,l,c,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&!((i=t.video)===null||i===void 0)&&i.videoBytes?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,i;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>la(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&NC(e.config.tools)){const m=(i=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&i!==void 0?i:{};let v=Object.assign({},m);Object.keys(v).length===0&&(v=this.apiClient.getDefaultHeaders()),xC(v),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:v})}return f}async initAfcToolsMap(e){var t,s,i;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const f=c,m=await f.tool();for(const v of(i=m.functionDeclarations)!==null&&i!==void 0?i:[]){if(!v.name)throw new Error("Function declaration name is required.");if(l.has(v.name))throw new Error(`Duplicate tool declaration name: ${v.name}`);l.set(v.name,f)}}return l}async processAfcStream(e){var t,s,i;const l=(i=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:AE;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(v,b,E){var C,N;return aa(this,arguments,function*(){for(var H,L,q,J;f<l;){c&&(f++,c=!1);const pe=yield at(v.processParamsMaybeAddMcpUsage(E)),re=yield at(v.generateContentStreamInternal(pe)),x=[],_=[];try{for(var Z=!0,se=(L=void 0,Kl(re)),ie;ie=yield at(se.next()),H=ie.done,!H;Z=!0){J=ie.value,Z=!1;const k=J;if(yield yield at(k),k.candidates&&!((C=k.candidates[0])===null||C===void 0)&&C.content){_.push(k.candidates[0].content);for(const M of(N=k.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<l&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(M.functionCall.name)){const D=yield at(b.get(M.functionCall.name).callTool([M.functionCall]));x.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(k){L={error:k}}finally{try{!Z&&!H&&(q=se.return)&&(yield at(q.call(se)))}finally{if(L)throw L.error}}if(x.length>0){c=!0;const k=new Ml;k.candidates=[{content:{role:"user",parts:x}}],yield yield at(k);const M=[];M.push(..._),M.push({role:"user",parts:x});const D=Vn(E.contents).concat(M);E.contents=D}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=EE(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=TE(b),C=new Ml;return Object.assign(C,E),C})}else{const v=wE(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=SE(b),C=new Ml;return Object.assign(C,E),C})}}async generateContentStreamInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=EE(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var E,C,N,H;try{for(var L=!0,q=Kl(b),J;J=yield at(q.next()),E=J.done,!E;L=!0){H=J.value,L=!1;const Z=H,se=TE(yield at(Z.json()));se.sdkHttpResponse={headers:Z.headers};const ie=new Ml;Object.assign(ie,se),yield yield at(ie)}}catch(Z){C={error:Z}}finally{try{!L&&!E&&(N=q.return)&&(yield at(N.call(q)))}finally{if(C)throw C.error}}})})}else{const v=wE(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var E,C,N,H;try{for(var L=!0,q=Kl(b),J;J=yield at(q.next()),E=J.done,!E;L=!0){H=J.value,L=!1;const Z=H,se=SE(yield at(Z.json()));se.sdkHttpResponse={headers:Z.headers};const ie=new Ml;Object.assign(ie,se),yield yield at(ie)}}catch(Z){C={error:Z}}finally{try{!L&&!E&&(N=q.return)&&(yield at(N.call(q)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=$M(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=WM(b),C=new sE;return Object.assign(C,E),C})}else{const v=BM(this.apiClient,e);return f=ce("{model}:batchEmbedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=JM(b),C=new sE;return Object.assign(C,E),C})}}async generateImagesInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=oL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=aL(b),C=new oE;return Object.assign(C,E),C})}else{const v=sL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=iL(b),C=new oE;return Object.assign(C,E),C})}}async editImageInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=qM(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=HM(m),b=new Y2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=o4(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=i4(m),b=new Q2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=VL(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=qL(m),b=new X2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=JL(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=WL(m),b=new Z2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=CL(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=TL(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=ML(b),C=new iE;return Object.assign(C,E),C})}else{const v=RL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=DL(b),C=new iE;return Object.assign(C,E),C})}}async update(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=r4(this.apiClient,e);return f=ce("{model}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=n4(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=UM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=jM(b),C=new aE;return Object.assign(C,E),C})}else{const v=LM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=FM(b),C=new aE;return Object.assign(C,E),C})}}async countTokens(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=MM(b),C=new lE;return Object.assign(C,E),C})}else{const v=RM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=DM(b),C=new lE;return Object.assign(C,E),C})}}async computeTokens(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=IM(this.apiClient,e);return l=ce("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=AM(m),b=new eP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=fL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>{const E=dL(b),C=new Od;return Object.assign(C,E),C})}else{const v=hL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>{const E=cL(b),C=new Od;return Object.assign(C,E),C})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class j4 extends ds{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=G2(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c}else{const v=z2(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=L2(e);return l=ce("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function V4(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function q4(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>Y4(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function H4(n,e,t){const s={},i=d(e,["expireTime"]);t!==void 0&&i!=null&&h(t,["expireTime"],i);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=d(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&h(t,["bidiGenerateContentSetup"],K4(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),s}function z4(n,e){const t={},s=d(e,["config"]);return s!=null&&h(t,["config"],H4(n,s,t)),t}function G4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function B4(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function J4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function W4(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],Km(E));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const H=d(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],q4(rn(H)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Aa(L);Array.isArray(re)&&(re=re.map(x=>X4(Ia(x)))),h(e,["setup","tools"],re)}const q=d(n,["sessionResumption"]);e!==void 0&&q!=null&&h(e,["setup","sessionResumption"],Q4(q));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function K4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],Be(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],W4(i,t)),t}function Y4(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],G4(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],B4(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],V4(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const E=d(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const C=d(n,["videoMetadata"]);return C!=null&&h(e,["videoMetadata"],C),e}function Q4(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X4(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(E=>E)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],$4(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],J4(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Z4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const i=Object.keys(s).map(l=>`${t}.${l}`);e.push(...i)}else e.push(t)}return e.join(",")}function eU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const l=Z4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];i.length>0&&(f=i.map(v=>c.includes(v)?`generationConfig.${v}`:v));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class tU extends ds{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=z4(this.apiClient,e);l=ce("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=eU(f,e.config);return i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),i.then(v=>v)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function nU(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function rU(n){const e={},t=d(n,["config"]);return t!=null&&nU(t,e),e}function sU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function oU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&sU(s,e),e}function iU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function aU(n,e){const t={},s=d(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const i=d(n,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),t}function lU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],cU(c)),e}function uU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["fileName"]);s!=null&&h(e,["fileName"],s);const i=d(n,["config"]);return i!=null&&aU(i,e),e}function cU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function dU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function hU(n){const e={},t=d(n,["config"]);return t!=null&&dU(t,e),e}function fU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["fileSearchStores"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function pU(n,e){const t={},s=d(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function mU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["config"]);return s!=null&&pU(s,e),e}function gU(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function vU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function yU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&vU(s,e),e}function bU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function wU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function EU(n){const e={},t=d(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=d(n,["config"]);return s!=null&&wU(s,e),e}function SU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["documents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class TU extends ds{constructor(e){super(),this.apiClient=e,this.list=async t=>new oi(us.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yU(e);i=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EU(e);return l=ce("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=SU(m),b=new tP;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class CU extends ds{constructor(e,t=new TU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new oi(us.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oU(e);i=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=fU(m),b=new nP;return Object.assign(b,v),b})}}async uploadToFileSearchStoreInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mU(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=gU(m),b=new rP;return Object.assign(b,v),b})}}async importFile(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uU(e);return l=ce("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=lU(m),b=new Gm;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function IU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function AU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function _U(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=d(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(n,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function kU(n,e,t){const s={};let i=d(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec"],xE(N))}else if(i==="PREFERENCE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec"],xE(N))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(f==="PREFERENCE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="PREFERENCE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(v==="PREFERENCE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let b=d(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(b==="PREFERENCE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const C=d(n,["beta"]);return e!==void 0&&C!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],C),s}function NU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const i=d(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const l=d(n,["trainingDataset"]);l!=null&&VU(l);const c=d(n,["config"]);return c!=null&&_U(c,t),t}function xU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const i=d(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const l=d(n,["trainingDataset"]);l!=null&&qU(l,t,e);const c=d(n,["config"]);return c!=null&&kU(c,t,e),t}function OU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function RU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function PU(n,e,t){const s={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function DU(n,e,t){const s={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function MU(n,e){const t={},s=d(n,["config"]);return s!=null&&PU(s,t),t}function LU(n,e){const t={},s=d(n,["config"]);return s!=null&&DU(s,t),t}function UU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>OC(f))),h(t,["tuningJobs"],c)}return t}function FU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Xp(f))),h(t,["tuningJobs"],c)}return t}function jU(n,e){const t={},s=d(n,["name"]);s!=null&&h(t,["model"],s);const i=d(n,["name"]);return i!=null&&h(t,["endpoint"],i),t}function VU(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(t,["examples","examples"],i)}return t}function qU(n,e,t){const s={};let i=d(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(i==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function OC(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["state"]);l!=null&&h(t,["state"],hC(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["tuningTask","startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["tuningTask","completeTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["description"]);b!=null&&h(t,["description"],b);const E=d(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const C=d(n,["_self"]);return C!=null&&h(t,["tunedModel"],jU(C)),t}function Xp(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["state"]);l!=null&&h(t,["state"],hC(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["error"]);b!=null&&h(t,["error"],b);const E=d(n,["description"]);E!=null&&h(t,["description"],E);const C=d(n,["baseModel"]);C!=null&&h(t,["baseModel"],C);const N=d(n,["tunedModel"]);N!=null&&h(t,["tunedModel"],N);const H=d(n,["preTunedModel"]);H!=null&&h(t,["preTunedModel"],H);const L=d(n,["supervisedTuningSpec"]);L!=null&&h(t,["supervisedTuningSpec"],L);const q=d(n,["preferenceOptimizationSpec"]);q!=null&&h(t,["preferenceOptimizationSpec"],q);const J=d(n,["tuningDataStats"]);J!=null&&h(t,["tuningDataStats"],J);const Z=d(n,["encryptionSpec"]);Z!=null&&h(t,["encryptionSpec"],Z);const se=d(n,["partnerModelTuningSpec"]);se!=null&&h(t,["partnerModelTuningSpec"],se);const ie=d(n,["customBaseModel"]);ie!=null&&h(t,["customBaseModel"],ie);const pe=d(n,["experiment"]);pe!=null&&h(t,["experiment"],pe);const re=d(n,["labels"]);re!=null&&h(t,["labels"],re);const x=d(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const _=d(n,["pipelineJob"]);_!=null&&h(t,["pipelineJob"],_);const k=d(n,["serviceAccount"]);k!=null&&h(t,["serviceAccount"],k);const M=d(n,["tunedModelDisplayName"]);M!=null&&h(t,["tunedModelDisplayName"],M);const D=d(n,["veoTuningSpec"]);return D!=null&&h(t,["veoTuningSpec"],D),t}function HU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(n,["done"]);c!=null&&h(t,["done"],c);const f=d(n,["error"]);return f!=null&&h(t,["error"],f),t}function xE(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const i=d(n,["vertexDatasetResource"]);return i!=null&&h(t,["validationDatasetUri"],i),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class zU extends ds{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new oi(us.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:i});return l.baseModel=void 0,await this.tuneInternal(l)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),l=await this.tuneMldevInternal(i);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Bp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=RU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>Xp(b))}else{const v=OU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>OC(b))}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=LU(e);return f=ce("tuningJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=FU(b),C=new uE;return Object.assign(C,E),C})}else{const v=MU(e);return f=ce("tunedModels",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:b.headers},C})),c.then(b=>{const E=UU(b),C=new uE;return Object.assign(C,E),C})}}async cancel(e){var t,s,i,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=AU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=IU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=xU(e,e);return l=ce("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>Xp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NU(e);return l=ce("tunedModels",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>HU(m))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class GU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const BU=1024*1024*8,$U=3,JU=1e3,WU=2,Pd="x-goog-upload-status";async function KU(n,e,t){var s;const i=await RC(n,e,t),l=await(i==null?void 0:i.json());if(((s=i==null?void 0:i.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function YU(n,e,t){var s;const i=await RC(n,e,t),l=await(i==null?void 0:i.json());if(((s=i==null?void 0:i.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=iC(l),f=new Bm;return Object.assign(f,c),f}async function RC(n,e,t){var s,i;let l=0,c=0,f=new $p(new Response),m="upload";for(l=n.size;c<l;){const v=Math.min(BU,l-c),b=n.slice(c,c+v);c+v>=l&&(m+=", finalize");let E=0,C=JU;for(;E<$U&&(f=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[Pd]));)E++,await XU(C),C=C*WU;if(c+=v,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Pd])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function QU(n){return{size:n.size,type:n.type}}function XU(n){return new Promise(e=>setTimeout(e,n))}class ZU{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KU(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QU(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class e6{create(e,t,s){return new t6(e,t,s)}}class t6{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const OE="x-goog-api-key";class n6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(OE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(OE,this.apiKey)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const r6="gl-node/";class s6{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=D2(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const i=new n6(this.apiKey);this.apiClient=new b4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:r6+"web",uploader:new ZU,downloader:new GU}),this.models=new F4(this.apiClient),this.live=new R4(this.apiClient,i,new e6),this.batches=new uD(this.apiClient),this.chats=new GD(this.models,this.apiClient),this.caches=new qD(this.apiClient),this.files=new eM(this.apiClient),this.operations=new j4(this.apiClient),this.authTokens=new tU(this.apiClient),this.tunings=new zU(this.apiClient),this.fileSearchStores=new CU(this.apiClient)}}const o6=()=>{const n="AIzaSyCSFyCeDbb17S9girfB9pZJJ7Sg8_nxAJs";return new s6({apiKey:n})},RE=(n,e,t)=>{const s=o6();if(!s)return null;let i=n.systemInstruction+`

IMPORTANT: Do not use markdown formatting like ** or * in your responses. Use plain text only.`;if(t&&t!=="en"){const l={es:"Responde siempre en espaol.",fr:"Rponds toujours en franais.",de:"Antworte immer auf Deutsch.",it:"Rispondi sempre in italiano.",pt:"Responda sempre em portugus.",ar:"   .",hi:"    ",ml:"   ."}[t];l&&(i=l+" "+i)}if(e&&e.length>0){const l=e.map(c=>`- "${c.title}": ${c.description}`).join(`
`);i+=`

Available video tutorials:
${l}

When users ask questions related to these topics, suggest the relevant video tutorial by title.`}return n.qaTraining&&n.qaTraining.length>0&&(i=`KNOWLEDGE BASE - Use this information to answer questions naturally:
${n.qaTraining.map(l=>`${l.question}: ${l.answer}`).join(`
`)}

When users ask about these topics, use the information above but respond conversationally, not in Q&A format.

`+i),s.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:i}})},i6=async(n,e)=>{try{return await n.sendMessageStream({message:e})}catch(t){throw console.error("Error sending message to Gemini:",t),t}},a6=({config:n,videos:e=[]})=>{const[t,s]=qe.useState(!1),[i,l]=qe.useState([]),[c,f]=qe.useState(""),[m,v]=qe.useState(!1),[b,E]=qe.useState(null),[C,N]=qe.useState("en"),[H,L]=qe.useState(!1),q=qe.useRef(null),J=qe.useRef(null),Z=[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugus"},{code:"ar",name:""},{code:"hi",name:""},{code:"ml",name:""}];qe.useEffect(()=>{if(t){const re=RE(n,e,C);E(re),i.length===0&&l([{id:"welcome",role:"model",text:n.welcomeMessage,timestamp:Date.now()}])}},[t,n,e]),qe.useEffect(()=>{var re;(re=q.current)==null||re.scrollIntoView({behavior:"smooth"})},[i]);const se=async()=>{if(!c.trim()||!b)return;const re=c.trim();f("");const x={id:Date.now().toString(),role:"user",text:re,timestamp:Date.now()};l(_=>[..._,x]),v(!0);try{const _=await i6(b,re);let k="";const M=(Date.now()+1).toString();l(D=>[...D,{id:M,role:"model",text:"",timestamp:Date.now()}]);for await(const D of _){const F=D.text||"";k+=F,l(O=>O.map($e=>$e.id===M?{...$e,text:k}:$e))}}catch(_){console.error(_),l(k=>[...k,{id:Date.now().toString(),role:"model",text:"I'm sorry, I'm having trouble connecting right now. Please try again later.",timestamp:Date.now()}])}finally{v(!1),setTimeout(()=>{var _;(_=J.current)==null||_.focus()},100)}},ie=re=>{re.key==="Enter"&&!re.shiftKey&&(re.preventDefault(),se())},pe=re=>{if("speechSynthesis"in window){const x=new SpeechSynthesisUtterance(re),_={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT",pt:"pt-BR",ar:"ar-SA",hi:"hi-IN",ml:"ml-IN"};x.lang=_[C]||"en-US",x.rate=.9,speechSynthesis.speak(x)}};return R.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end",children:[t&&R.jsxs("div",{className:`mb-4 bg-white shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-slide-up ${H?"fixed inset-4 rounded-lg z-50":"w-[350px] sm:w-[400px] h-[500px] rounded-2xl origin-bottom-right"}`,children:[R.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 flex justify-between items-center text-white",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:R.jsx(XA,{size:18})}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-semibold text-sm",children:"AI Support Assistant"}),R.jsx("p",{className:"text-xs text-blue-100",children:"Powered by Gemini"})]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("select",{value:C,onChange:re=>{N(re.target.value),E(null);const x=RE(n,e,re.target.value);E(x)},className:"px-2 py-1 text-xs bg-white/20 border border-white/30 rounded text-white focus:outline-none focus:bg-white/30",children:Z.map(re=>R.jsx("option",{value:re.code,className:"text-slate-800",children:re.name},re.code))}),R.jsx("button",{onClick:()=>L(!H),className:"p-1 hover:bg-white/20 rounded-full transition",title:H?"Exit fullscreen":"Fullscreen",children:H?"":""}),R.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded-full transition",children:R.jsx(em,{size:20})})]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[i.map(re=>R.jsxs("div",{className:`flex gap-3 ${re.role==="user"?"flex-row-reverse":""}`,children:[R.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${re.role==="user"?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-600"}`,children:re.role==="user"?R.jsx(t_,{size:16}):R.jsx(kA,{size:16})}),R.jsx("div",{className:`max-w-[80%] rounded-2xl p-3 text-sm leading-relaxed ${re.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white border border-slate-200 text-slate-700 rounded-tl-none shadow-sm"}`,children:R.jsxs("div",{className:"flex items-start justify-between gap-2",children:[R.jsx("div",{className:"flex-1",children:re.text||R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-75"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-150"})]})}),re.role==="model"&&re.text&&R.jsx("button",{onClick:()=>pe(re.text),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Listen",children:R.jsx(o_,{size:14})})]})})]},re.id)),R.jsx("div",{ref:q})]}),R.jsxs("div",{className:"p-3 bg-white border-t border-slate-100",children:[R.jsxs("div",{className:"relative flex items-center gap-2",children:[R.jsx("input",{ref:J,type:"text",value:c,onChange:re=>f(re.target.value),onKeyDown:ie,placeholder:"Ask for help...",disabled:m,className:"flex-1 pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"}),R.jsx("button",{onClick:se,disabled:!c.trim()||m,className:"absolute right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?R.jsx(MA,{size:16,className:"animate-spin"}):R.jsx(JA,{size:16})})]}),R.jsx("div",{className:"text-center mt-2",children:R.jsx("p",{className:"text-[10px] text-slate-400",children:"AI can make mistakes. Please verify important info."})})]})]}),R.jsxs("button",{onClick:()=>s(!t),className:`group p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-105 flex items-center gap-2 ${t?"bg-slate-700 rotate-90 opacity-0 pointer-events-none absolute":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white"}`,children:[R.jsx(jA,{size:28,className:"animate-pulse"}),R.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium pr-0 group-hover:pr-2",children:"Support Chat"})]})]})},l6=({videoId:n,onClose:e})=>(qe.useEffect(()=>{const t=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),n?R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:e,children:R.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-xl overflow-hidden shadow-2xl animate-slide-up",onClick:t=>t.stopPropagation(),children:[R.jsx("div",{className:"absolute top-0 right-0 p-4 z-10",children:R.jsx("button",{onClick:e,className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:R.jsx(em,{size:24})})}),R.jsx("div",{className:"aspect-video w-full",children:R.jsx("iframe",{src:`https://www.youtube.com/embed/${n}?autoplay=1&rel=0`,title:"YouTube video player",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null),u6={systemInstruction:"You are a helpful customer support agent for 'Polosys Support'. You assist users with questions about accounting software, inventory management, and general troubleshooting. Be polite, concise, and professional. If you don't know the answer, advise them to contact human support at support@polosys.com or call our customer care number: +1-800-POLOSYS (765-6797). For urgent issues, recommend calling the customer care number.",welcomeMessage:"Hello! How can I help you with the system today?"},c6=()=>{const[n,e]=qe.useState(()=>localStorage.getItem("adminLoggedIn")==="true"?Js.ADMIN:Js.CUSTOMER),[t,s]=qe.useState(!1),[i,l]=qe.useState([]),[c,f]=qe.useState(u6),[m,v]=qe.useState(!0),[b,E]=qe.useState(null),[C,N]=qe.useState(""),[H,L]=qe.useState(!1),[q,J]=qe.useState({email:"",password:""}),[Z,se]=qe.useState(""),ie=()=>{L(!0),se("")},pe=async _=>{_.preventDefault();try{await cR(iw,q.email,q.password),localStorage.setItem("adminLoggedIn","true"),e(Js.ADMIN),L(!1),J({email:"",password:""})}catch{se("Invalid credentials")}},re=async()=>{await fR(iw),localStorage.removeItem("adminLoggedIn"),e(Js.CUSTOMER),s(!1)};qe.useEffect(()=>{(async()=>{try{const[_,k]=await Promise.all([k2(),N2()]);l(_),k&&f(k)}catch(_){console.error("Error loading data:",_)}finally{v(!1)}})()},[]),qe.useEffect(()=>{m||_2(i).catch(console.error)},[i,m]),qe.useEffect(()=>{m||zp(c).catch(console.error)},[c,m]);const x=i.filter(_=>_.title.toLowerCase().includes(C.toLowerCase())||_.description.toLowerCase().includes(C.toLowerCase()));return R.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900",children:[R.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between h-16",children:[R.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",onDoubleClick:()=>s(!t),title:"Double click for admin options",children:[R.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:R.jsx(PA,{size:24})}),R.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-600",children:"Polosys Support"})]}),R.jsx("div",{className:"flex items-center gap-4",children:n===Js.CUSTOMER?t&&R.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition-colors animate-fade-in",children:[R.jsx(YA,{size:18}),R.jsx("span",{children:"Admin Access"})]}):R.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 rounded-lg transition-colors",children:[R.jsx(UA,{size:18}),R.jsx("span",{children:"Logout"})]})})]})})}),R.jsxs("main",{className:"relative",children:[m?R.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),R.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):n===Js.ADMIN?R.jsx(x2,{videos:i,setVideos:l,chatConfig:c,setChatConfig:f}):R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[R.jsxs("div",{className:"text-center mb-16 space-y-4",children:[R.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight",children:"How can we help you today?"}),R.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Browse our video library for quick tutorials or chat with our AI assistant for instant support."}),R.jsxs("div",{className:"max-w-xl mx-auto mt-8 relative group",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors",children:R.jsx(BA,{size:20})}),R.jsx("input",{type:"text",placeholder:"Search for videos (e.g., 'invoice', 'setup')...",value:C,onChange:_=>N(_.target.value),className:"block w-full pl-11 pr-4 py-4 bg-white border border-slate-200 rounded-2xl shadow-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x.map(_=>R.jsxs("div",{onClick:()=>E(_.videoId),className:"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100 cursor-pointer flex flex-col h-full",children:[R.jsxs("div",{className:"relative aspect-video overflow-hidden bg-slate-100",children:[R.jsx("img",{src:`https://img.youtube.com/vi/${_.videoId}/hqdefault.jpg`,alt:_.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),R.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:R.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-lg transform scale-90 group-hover:scale-110 transition-all duration-300",children:R.jsx(xA,{size:24,className:"text-blue-600 ml-1"})})}),R.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-medium",children:"Video"})]}),R.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[R.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors",children:_.title}),R.jsx("p",{className:"text-slate-600 text-sm leading-relaxed flex-1",children:_.description}),R.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center text-blue-600 font-medium text-sm",children:["Watch Tutorial ",R.jsx("span",{className:"ml-1 group-hover:translate-x-1 transition-transform",children:""})]})]})]},_.id))}),x.length===0&&R.jsxs("div",{className:"text-center py-20",children:[R.jsx("p",{className:"text-slate-500 text-lg",children:"No videos found matching your search."}),R.jsx("button",{onClick:()=>N(""),className:"mt-4 text-blue-600 font-medium hover:underline",children:"Clear search"})]})]}),n===Js.CUSTOMER&&R.jsx(a6,{config:c,videos:i})]}),R.jsx(l6,{videoId:b,onClose:()=>E(null)}),H&&R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-[90vw]",children:[R.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Admin Login"}),R.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),R.jsx("input",{type:"email",required:!0,value:q.email,onChange:_=>J({...q,email:_.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),R.jsx("input",{type:"password",required:!0,value:q.password,onChange:_=>J({...q,password:_.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),Z&&R.jsx("p",{className:"text-red-500 text-sm text-center",children:Z}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx("button",{type:"button",onClick:()=>{L(!1),J({email:"",password:""}),se("")},className:"flex-1 py-2 px-4 border border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50",children:"Cancel"}),R.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Login"})]})]})]})})]})},PC=document.getElementById("root");if(!PC)throw new Error("Could not find root element to mount to");const d6=EA.createRoot(PC);d6.render(R.jsx(fA.StrictMode,{children:R.jsx(c6,{})}));
