(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function P0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ip={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function cR(){if(Ev)return xl;Ev=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return xl.Fragment=e,xl.jsx=t,xl.jsxs=t,xl}var Sv;function fR(){return Sv||(Sv=1,ip.exports=cR()),ip.exports}var x=fR(),sp={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function dR(){if(Av)return Ie;Av=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,F={};function $(O,ne,ue){this.props=O,this.context=ne,this.refs=F,this.updater=ue||H}$.prototype.isReactComponent={},$.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function j(){}j.prototype=$.prototype;function Z(O,ne,ue){this.props=O,this.context=ne,this.refs=F,this.updater=ue||H}var oe=Z.prototype=new j;oe.constructor=Z,V(oe,$.prototype),oe.isPureReactComponent=!0;var fe=Array.isArray;function se(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function b(O,ne,ue){var he=ue.ref;return{$$typeof:n,type:O,key:ne,ref:he!==void 0?he:null,props:ue}}function U(O,ne){return b(O.type,ne,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function q(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return ne[ue]})}var D=/\/+/g;function $e(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):ne.toString(36)}function rt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(se,se):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function X(O,ne,ue,he,Ae){var be=typeof O;(be==="undefined"||be==="boolean")&&(O=null);var qe=!1;if(O===null)qe=!0;else switch(be){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(O.$$typeof){case n:case e:qe=!0;break;case v:return qe=O._init,X(qe(O._payload),ne,ue,he,Ae)}}if(qe)return Ae=Ae(O),qe=he===""?"."+$e(O,0):he,fe(Ae)?(ue="",qe!=null&&(ue=qe.replace(D,"$&/")+"/"),X(Ae,ne,ue,"",function(pr){return pr})):Ae!=null&&(k(Ae)&&(Ae=U(Ae,ue+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+qe)),ne.push(Ae)),1;qe=0;var Vt=he===""?".":he+":";if(fe(O))for(var ct=0;ct<O.length;ct++)he=O[ct],be=Vt+$e(he,ct),qe+=X(he,ne,ue,be,Ae);else if(ct=w(O),typeof ct=="function")for(O=ct.call(O),ct=0;!(he=O.next()).done;)he=he.value,be=Vt+$e(he,ct++),qe+=X(he,ne,ue,be,Ae);else if(be==="object"){if(typeof O.then=="function")return X(rt(O),ne,ue,he,Ae);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return qe}function le(O,ne,ue){if(O==null)return O;var he=[],Ae=0;return X(O,he,"","",function(be){return ne.call(ue,be,Ae++)}),he}function _e(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var He=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Xe={map:le,forEach:function(O,ne,ue){le(O,function(){ne.apply(this,arguments)},ue)},count:function(O){var ne=0;return le(O,function(){ne++}),ne},toArray:function(O){return le(O,function(ne){return ne})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=E,Ie.Children=Xe,Ie.Component=$,Ie.Fragment=t,Ie.Profiler=o,Ie.PureComponent=Z,Ie.StrictMode=s,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,ne,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var he=V({},O.props),Ae=O.key;if(ne!=null)for(be in ne.key!==void 0&&(Ae=""+ne.key),ne)!N.call(ne,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ne.ref===void 0||(he[be]=ne[be]);var be=arguments.length-2;if(be===1)he.children=ue;else if(1<be){for(var qe=Array(be),Vt=0;Vt<be;Vt++)qe[Vt]=arguments[Vt+2];he.children=qe}return b(O.type,Ae,he)},Ie.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ie.createElement=function(O,ne,ue){var he,Ae={},be=null;if(ne!=null)for(he in ne.key!==void 0&&(be=""+ne.key),ne)N.call(ne,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=ne[he]);var qe=arguments.length-2;if(qe===1)Ae.children=ue;else if(1<qe){for(var Vt=Array(qe),ct=0;ct<qe;ct++)Vt[ct]=arguments[ct+2];Ae.children=Vt}if(O&&O.defaultProps)for(he in qe=O.defaultProps,qe)Ae[he]===void 0&&(Ae[he]=qe[he]);return b(O,be,Ae)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:d,render:O}},Ie.isValidElement=k,Ie.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:_e}},Ie.memo=function(O,ne){return{$$typeof:m,type:O,compare:ne===void 0?null:ne}},Ie.startTransition=function(O){var ne=M.T,ue={};M.T=ue;try{var he=O(),Ae=M.S;Ae!==null&&Ae(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(se,He)}catch(be){He(be)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),M.T=ne}},Ie.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ie.use=function(O){return M.H.use(O)},Ie.useActionState=function(O,ne,ue){return M.H.useActionState(O,ne,ue)},Ie.useCallback=function(O,ne){return M.H.useCallback(O,ne)},Ie.useContext=function(O){return M.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,ne){return M.H.useDeferredValue(O,ne)},Ie.useEffect=function(O,ne){return M.H.useEffect(O,ne)},Ie.useEffectEvent=function(O){return M.H.useEffectEvent(O)},Ie.useId=function(){return M.H.useId()},Ie.useImperativeHandle=function(O,ne,ue){return M.H.useImperativeHandle(O,ne,ue)},Ie.useInsertionEffect=function(O,ne){return M.H.useInsertionEffect(O,ne)},Ie.useLayoutEffect=function(O,ne){return M.H.useLayoutEffect(O,ne)},Ie.useMemo=function(O,ne){return M.H.useMemo(O,ne)},Ie.useOptimistic=function(O,ne){return M.H.useOptimistic(O,ne)},Ie.useReducer=function(O,ne,ue){return M.H.useReducer(O,ne,ue)},Ie.useRef=function(O){return M.H.useRef(O)},Ie.useState=function(O){return M.H.useState(O)},Ie.useSyncExternalStore=function(O,ne,ue){return M.H.useSyncExternalStore(O,ne,ue)},Ie.useTransition=function(){return M.H.useTransition()},Ie.version="19.2.0",Ie}var Cv;function im(){return Cv||(Cv=1,sp.exports=dR()),sp.exports}var Be=im();const hR=P0(Be);var rp={exports:{}},Pl={},op={exports:{}},ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function pR(){return Iv||(Iv=1,(function(n){function e(X,le){var _e=X.length;X.push(le);e:for(;0<_e;){var He=_e-1>>>1,Xe=X[He];if(0<o(Xe,le))X[He]=le,X[_e]=Xe,_e=He;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var le=X[0],_e=X.pop();if(_e!==le){X[0]=_e;e:for(var He=0,Xe=X.length,O=Xe>>>1;He<O;){var ne=2*(He+1)-1,ue=X[ne],he=ne+1,Ae=X[he];if(0>o(ue,_e))he<Xe&&0>o(Ae,ue)?(X[He]=Ae,X[he]=_e,He=he):(X[He]=ue,X[ne]=_e,He=ne);else if(he<Xe&&0>o(Ae,_e))X[He]=Ae,X[he]=_e,He=he;else break e}}return le}function o(X,le){var _e=X.sortIndex-le.sortIndex;return _e!==0?_e:X.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],v=1,E=null,A=3,w=!1,H=!1,V=!1,F=!1,$=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function oe(X){for(var le=t(m);le!==null;){if(le.callback===null)s(m);else if(le.startTime<=X)s(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(m)}}function fe(X){if(V=!1,oe(X),!H)if(t(g)!==null)H=!0,se||(se=!0,q());else{var le=t(m);le!==null&&rt(fe,le.startTime-X)}}var se=!1,M=-1,N=5,b=-1;function U(){return F?!0:!(n.unstable_now()-b<N)}function k(){if(F=!1,se){var X=n.unstable_now();b=X;var le=!0;try{e:{H=!1,V&&(V=!1,j(M),M=-1),w=!0;var _e=A;try{t:{for(oe(X),E=t(g);E!==null&&!(E.expirationTime>X&&U());){var He=E.callback;if(typeof He=="function"){E.callback=null,A=E.priorityLevel;var Xe=He(E.expirationTime<=X);if(X=n.unstable_now(),typeof Xe=="function"){E.callback=Xe,oe(X),le=!0;break t}E===t(g)&&s(g),oe(X)}else s(g);E=t(g)}if(E!==null)le=!0;else{var O=t(m);O!==null&&rt(fe,O.startTime-X),le=!1}}break e}finally{E=null,A=_e,w=!1}le=void 0}}finally{le?q():se=!1}}}var q;if(typeof Z=="function")q=function(){Z(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$e=D.port2;D.port1.onmessage=k,q=function(){$e.postMessage(null)}}else q=function(){$(k,0)};function rt(X,le){M=$(function(){X(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var le=3;break;default:le=A}var _e=A;A=le;try{return X()}finally{A=_e}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=A;A=X;try{return le()}finally{A=_e}},n.unstable_scheduleCallback=function(X,le,_e){var He=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?He+_e:He):_e=He,X){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=_e+Xe,X={id:v++,callback:le,priorityLevel:X,startTime:_e,expirationTime:Xe,sortIndex:-1},_e>He?(X.sortIndex=_e,e(m,X),t(g)===null&&X===t(m)&&(V?(j(M),M=-1):V=!0,rt(fe,_e-He))):(X.sortIndex=Xe,e(g,X),H||w||(H=!0,se||(se=!0,q()))),X},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(X){var le=A;return function(){var _e=A;A=le;try{return X.apply(this,arguments)}finally{A=_e}}}})(ap)),ap}var Rv;function mR(){return Rv||(Rv=1,op.exports=pR()),op.exports}var lp={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function gR(){if(wv)return jt;wv=1;var n=im();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},jt.flushSync=function(g){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=m,s.p=v,s.d.f()}},jt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},jt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},jt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:w}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},jt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},jt.requestFormReset=function(g){s.d.r(g)},jt.unstable_batchedUpdates=function(g,m){return g(m)},jt.useFormState=function(g,m,v){return u.H.useFormState(g,m,v)},jt.useFormStatus=function(){return u.H.useHostTransitionStatus()},jt.version="19.2.0",jt}var Nv;function yR(){if(Nv)return lp.exports;Nv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lp.exports=gR(),lp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function _R(){if(bv)return Pl;bv=1;var n=mR(),e=im(),t=yR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return g(y),i;if(_===c)return g(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=_;else{for(var S=!1,I=y.child;I;){if(I===a){S=!0,a=y,c=_;break}if(I===c){S=!0,c=y,a=_;break}I=I.sibling}if(!S){for(I=_.child;I;){if(I===a){S=!0,a=_,c=y;break}if(I===c){S=!0,c=_,a=y;break}I=I.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function $e(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case $:return"Profiler";case F:return"StrictMode";case fe:return"Suspense";case se:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case H:return"Portal";case Z:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:$e(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return $e(i(r))}catch{}}return null}var rt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},He=[],Xe=-1;function O(i){return{current:i}}function ne(i){0>Xe||(i.current=He[Xe],He[Xe]=null,Xe--)}function ue(i,r){Xe++,He[Xe]=i.current,i.current=r}var he=O(null),Ae=O(null),be=O(null),qe=O(null);function Vt(i,r){switch(ue(be,r),ue(Ae,i),ue(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?z_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=z_(r),i=Y_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(he),ue(he,i)}function ct(){ne(he),ne(Ae),ne(be)}function pr(i){i.memoizedState!==null&&ue(qe,i);var r=he.current,a=Y_(r,i.type);r!==a&&(ue(Ae,i),ue(he,a))}function ro(i){Ae.current===i&&(ne(he),ne(Ae)),qe.current===i&&(ne(qe),Nl._currentValue=_e)}var oo,ao;function oi(i){if(oo===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);oo=r&&r[1]||"",ao=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oo+i+ao}var Na=!1;function mr(i,r){if(!i||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var K=Q}Reflect.construct(i,[],te)}else{try{te.call()}catch(Q){K=Q}i.call(te.prototype)}}else{try{throw Error()}catch(Q){K=Q}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),S=_[0],I=_[1];if(S&&I){var P=S.split(`
`),Y=I.split(`
`);for(y=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===P.length||y===Y.length)for(c=P.length-1,y=Y.length-1;1<=c&&0<=y&&P[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(P[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||P[c]!==Y[y]){var W=`
`+P[c].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=c&&0<=y);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?oi(a):""}function ba(i,r){switch(i.tag){case 26:case 27:case 5:return oi(i.type);case 16:return oi("Lazy");case 13:return i.child!==r&&r!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return mr(i.type,!1);case 11:return mr(i.type.render,!1);case 1:return mr(i.type,!0);case 31:return oi("Activity");default:return""}}function Ma(i){try{var r="",a=null;do r+=ba(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,hs=n.unstable_cancelCallback,rd=n.unstable_shouldYield,yu=n.unstable_requestPaint,on=n.unstable_now,gr=n.unstable_getCurrentPriorityLevel,Da=n.unstable_ImmediatePriority,xa=n.unstable_UserBlockingPriority,ps=n.unstable_NormalPriority,od=n.unstable_LowPriority,_u=n.unstable_IdlePriority,vu=n.log,Tu=n.unstable_setDisableYieldValue,Gn=null,zt=null;function Rn(i){if(typeof vu=="function"&&Tu(i),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Gn,i)}catch{}}var yt=Math.clz32?Math.clz32:Su,Eu=Math.log,lo=Math.LN2;function Su(i){return i>>>=0,i===0?32:31-(Eu(i)/lo|0)|0}var ai=256,yr=262144,Ct=4194304;function li(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ui(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~_,c!==0?y=li(c):(S&=I,S!==0?y=li(S):a||(a=I&~i,a!==0&&(y=li(a))))):(I=c&~_,I!==0?y=li(I):S!==0?y=li(S):a||(a=c&~i,a!==0&&(y=li(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function zn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function ad(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Au(){var i=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),i}function ci(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function _r(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ld(i,r,a,c,y,_){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,P=i.expirationTimes,Y=i.hiddenUpdates;for(a=S&~a;0<a;){var W=31-yt(a),te=1<<W;I[W]=0,P[W]=-1;var K=Y[W];if(K!==null)for(Y[W]=null,W=0;W<K.length;W++){var Q=K[W];Q!==null&&(Q.lane&=-536870913)}a&=~te}c!==0&&vr(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~r))}function vr(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-yt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Pa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-yt(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Va(i,r){var a=r&-r;return a=(a&42)!==0?1:Tr(a),(a&(i.suspendedLanes|r))!==0?0:a}function Tr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Li(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Cu(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:pv(i.type))}function Yn(i,r){var a=le.p;try{return le.p=i,r()}finally{le.p=a}}var Kn=Math.random().toString(36).slice(2),It="__reactFiber$"+Kn,qt="__reactProps$"+Kn,fi="__reactContainer$"+Kn,uo="__reactEvents$"+Kn,ud="__reactListeners$"+Kn,Iu="__reactHandles$"+Kn,Ru="__reactResources$"+Kn,di="__reactMarker$"+Kn;function co(i){delete i[It],delete i[qt],delete i[uo],delete i[ud],delete i[Iu]}function hi(i){var r=i[It];if(r)return r;for(var a=i.parentNode;a;){if(r=a[fi]||a[It]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Z_(i);i!==null;){if(a=i[It])return a;i=Z_(i)}return r}i=a,a=i.parentNode}return null}function wn(i){if(i=i[It]||i[fi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function yn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function pi(i){var r=i[Ru];return r||(r=i[Ru]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(i){i[di]=!0}var Ua=new Set,ka={};function mi(i,r){gi(i,r),gi(i+"Capture",r)}function gi(i,r){for(ka[i]=r,i=0;i<r.length;i++)Ua.add(r[i])}var La=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oa={},qa={};function wu(i){return At.call(qa,i)?!0:At.call(Oa,i)?!1:La.test(i)?qa[i]=!0:(Oa[i]=!0,!1)}function fo(i,r,a){if(wu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function _n(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function wt(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ms(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Fa(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function We(i){if(!i._valueTracker){var r=ms(i)?"checked":"value";i._valueTracker=Fa(i,r,""+i[r])}}function Er(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=ms(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function yi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sr=/[\n"\\]/g;function un(i){return i.replace(Sr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ho(i,r,a,c,y,_,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ft(r)):i.value!==""+Ft(r)&&(i.value=""+Ft(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?Ba(i,S,Ft(r)):a!=null?Ba(i,S,Ft(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Ft(I):i.removeAttribute("name")}function Nu(i,r,a,c,y,_,S,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){We(i);return}a=a!=null?""+Ft(a):"",r=r!=null?""+Ft(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),We(i)}function Ba(i,r,a){r==="number"&&yi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function gs(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function bu(i,r,a){if(r!=null&&(r=""+Ft(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Ft(a):""}function ys(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(rt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Ft(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),We(i)}function cn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Mu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ha(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Mu.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Ga(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&Ha(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Ha(i,_,r[_])}function po(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Du=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(i){return _s.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Jn(){}var za=null;function Nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vs=null,_i=null;function Ar(i){var r=wn(i);if(r&&(i=r.stateNode)){var a=i[qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(ho(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[qt]||null;if(!y)throw Error(s(90));ho(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Er(c)}break e;case"textarea":bu(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&gs(i,!!a.multiple,r,!1)}}}var go=!1;function Ts(i,r,a){if(go)return i(r,a);go=!0;try{var c=i(r);return c}finally{if(go=!1,(vs!==null||_i!==null)&&(Cc(),vs&&(r=vs,i=_i,_i=vs=null,Ar(r),i)))for(r=0;r<i.length;r++)Ar(i[r])}}function Qn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cr=!1;if(bn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Cr=!1}var vi=null,Ya=null,Ir=null;function Ka(){if(Ir)return Ir;var i,r=Ya,a=r.length,c,y="value"in vi?vi.value:vi.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var S=a-i;for(c=1;c<=S&&r[a-c]===y[_-c];c++);return Ir=y.slice(i,1<c?1-c:void 0)}function Rr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Oi(){return!0}function $n(){return!1}function Yt(i){function r(a,c,y,_,S){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Oi:$n,this.isPropagationStopped=$n,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),r}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Yt(qi),Es=E({},qi,{view:0,detail:0}),Ja=Yt(Es),Ss,yo,Ei,_o=E({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ei&&(Ei&&i.type==="mousemove"?(Ss=i.screenX-Ei.screenX,yo=i.screenY-Ei.screenY):yo=Ss=0,Ei=i),Ss)},movementY:function(i){return"movementY"in i?i.movementY:yo}}),Qa=Yt(_o),wr=E({},_o,{dataTransfer:0}),xu=Yt(wr),Pu=E({},Es,{relatedTarget:0}),Nr=Yt(Pu),$a=E({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=Yt($a),vo=E({},qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Uu=Yt(vo),ku=E({},qi,{data:0}),Si=Yt(ku),Lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=qu[i])?!!r[i]:!1}function As(){return Fu}var an=E({},Es,{key:function(i){if(i.key){var r=Lu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Rr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ou[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(i){return i.type==="keypress"?Rr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bu=Yt(an),Hu=E({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=Yt(Hu),p=E({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),T=Yt(p),C=E({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Yt(C),G=E({},_o,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Yt(G),ae=E({},qi,{newState:0,oldState:0}),we=Yt(ae),_t=[9,13,27,32],Ke=bn&&"CompositionEvent"in window,ft=null;bn&&"documentMode"in document&&(ft=document.documentMode);var Mn=bn&&"TextEvent"in window&&!ft,Ai=bn&&(!Ke||ft&&8<ft&&11>=ft),Xn=" ",Wn=!1;function br(i,r){switch(i){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function To(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Eo=!1;function VC(i,r){switch(i){case"compositionend":return To(r);case"keypress":return r.which!==32?null:(Wn=!0,Xn);case"textInput":return i=r.data,i===Xn&&Wn?null:i;default:return null}}function UC(i,r){if(Eo)return i==="compositionend"||!Ke&&br(i,r)?(i=Ka(),Ir=Ya=vi=null,Eo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ai&&r.locale!=="ko"?null:r.data;default:return null}}var kC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!kC[i.type]:r==="textarea"}function ng(i,r,a,c){vs?_i?_i.push(c):_i=[c]:vs=c,r=Dc(r,"onChange"),0<r.length&&(a=new Ti("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var Xa=null,Wa=null;function LC(i){O_(i,0)}function Gu(i){var r=yn(i);if(Er(r))return i}function ig(i,r){if(i==="change")return r}var sg=!1;if(bn){var cd;if(bn){var fd="oninput"in document;if(!fd){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),fd=typeof rg.oninput=="function"}cd=fd}else cd=!1;sg=cd&&(!document.documentMode||9<document.documentMode)}function og(){Xa&&(Xa.detachEvent("onpropertychange",ag),Wa=Xa=null)}function ag(i){if(i.propertyName==="value"&&Gu(Wa)){var r=[];ng(r,Wa,i,Nn(i)),Ts(LC,r)}}function OC(i,r,a){i==="focusin"?(og(),Xa=r,Wa=a,Xa.attachEvent("onpropertychange",ag)):i==="focusout"&&og()}function qC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Gu(Wa)}function FC(i,r){if(i==="click")return Gu(r)}function BC(i,r){if(i==="input"||i==="change")return Gu(r)}function HC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var vn=typeof Object.is=="function"?Object.is:HC;function Za(i,r){if(vn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!At.call(r,y)||!vn(i[y],r[y]))return!1}return!0}function lg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ug(i,r){var a=lg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lg(a)}}function cg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?cg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function fg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=yi(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=yi(i.document)}return r}function dd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var GC=bn&&"documentMode"in document&&11>=document.documentMode,So=null,hd=null,ja=null,pd=!1;function dg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pd||So==null||So!==yi(c)||(c=So,"selectionStart"in c&&dd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ja&&Za(ja,c)||(ja=c,c=Dc(hd,"onSelect"),0<c.length&&(r=new Ti("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=So)))}function Mr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Ao={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionrun:Mr("Transition","TransitionRun"),transitionstart:Mr("Transition","TransitionStart"),transitioncancel:Mr("Transition","TransitionCancel"),transitionend:Mr("Transition","TransitionEnd")},md={},hg={};bn&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Dr(i){if(md[i])return md[i];if(!Ao[i])return i;var r=Ao[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in hg)return md[i]=r[a];return i}var pg=Dr("animationend"),mg=Dr("animationiteration"),gg=Dr("animationstart"),zC=Dr("transitionrun"),YC=Dr("transitionstart"),KC=Dr("transitioncancel"),yg=Dr("transitionend"),_g=new Map,gd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gd.push("scrollEnd");function Zn(i,r){_g.set(i,r),mi(r,[i])}var zu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Dn=[],Co=0,yd=0;function Yu(){for(var i=Co,r=yd=Co=0;r<i;){var a=Dn[r];Dn[r++]=null;var c=Dn[r];Dn[r++]=null;var y=Dn[r];Dn[r++]=null;var _=Dn[r];if(Dn[r++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}_!==0&&vg(a,y,_)}}function Ku(i,r,a,c){Dn[Co++]=i,Dn[Co++]=r,Dn[Co++]=a,Dn[Co++]=c,yd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function _d(i,r,a,c){return Ku(i,r,a,c),Ju(i)}function xr(i,r){return Ku(i,null,null,r),Ju(i)}function vg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-yt(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function Ju(i){if(50<El)throw El=0,wh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Io={};function JC(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(i,r,a,c){return new JC(i,r,a,c)}function vd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,r){var a=i.alternate;return a===null?(a=Tn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Tg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Qu(i,r,a,c,y,_){var S=0;if(c=i,typeof i=="function")vd(i)&&(S=1);else if(typeof i=="string")S=ZI(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=Tn(31,a,r,y),i.elementType=b,i.lanes=_,i;case V:return Pr(a.children,y,_,r);case F:S=8,y|=24;break;case $:return i=Tn(12,a,r,y|2),i.elementType=$,i.lanes=_,i;case fe:return i=Tn(13,a,r,y),i.elementType=fe,i.lanes=_,i;case se:return i=Tn(19,a,r,y),i.elementType=se,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:S=10;break e;case j:S=9;break e;case oe:S=11;break e;case M:S=14;break e;case N:S=16,c=null;break e}S=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=Tn(S,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function Pr(i,r,a,c){return i=Tn(7,i,c,r),i.lanes=a,i}function Td(i,r,a){return i=Tn(6,i,null,r),i.lanes=a,i}function Eg(i){var r=Tn(18,null,null,0);return r.stateNode=i,r}function Ed(i,r,a){return r=Tn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Sg=new WeakMap;function xn(i,r){if(typeof i=="object"&&i!==null){var a=Sg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Ma(r)},Sg.set(i,r),r)}return{value:i,source:r,stack:Ma(r)}}var Ro=[],wo=0,$u=null,el=0,Pn=[],Vn=0,Cs=null,Ci=1,Ii="";function Hi(i,r){Ro[wo++]=el,Ro[wo++]=$u,$u=i,el=r}function Ag(i,r,a){Pn[Vn++]=Ci,Pn[Vn++]=Ii,Pn[Vn++]=Cs,Cs=i;var c=Ci;i=Ii;var y=32-yt(c)-1;c&=~(1<<y),a+=1;var _=32-yt(r)+y;if(30<_){var S=y-y%5;_=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Ci=1<<32-yt(r)+y|a<<y|c,Ii=_+i}else Ci=1<<_|a<<y|c,Ii=i}function Sd(i){i.return!==null&&(Hi(i,1),Ag(i,1,0))}function Ad(i){for(;i===$u;)$u=Ro[--wo],Ro[wo]=null,el=Ro[--wo],Ro[wo]=null;for(;i===Cs;)Cs=Pn[--Vn],Pn[Vn]=null,Ii=Pn[--Vn],Pn[Vn]=null,Ci=Pn[--Vn],Pn[Vn]=null}function Cg(i,r){Pn[Vn++]=Ci,Pn[Vn++]=Ii,Pn[Vn++]=Cs,Ci=r.id,Ii=r.overflow,Cs=i}var Kt=null,ot=null,Oe=!1,Is=null,Un=!1,Cd=Error(s(519));function Rs(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(xn(r,i)),Cd}function Ig(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[It]=i,r[qt]=c,a){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(a=0;a<Al.length;a++)xe(Al[a],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":xe("invalid",r),Nu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":xe("invalid",r);break;case"textarea":xe("invalid",r),ys(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||H_(r.textContent,a)?(c.popover!=null&&(xe("beforetoggle",r),xe("toggle",r)),c.onScroll!=null&&xe("scroll",r),c.onScrollEnd!=null&&xe("scrollend",r),c.onClick!=null&&(r.onclick=Jn),r=!0):r=!1,r||Rs(i,!0)}function Rg(i){for(Kt=i.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Kt=Kt.return}}function No(i){if(i!==Kt)return!1;if(!Oe)return Rg(i),Oe=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Hh(i.type,i.memoizedProps)),a=!a),a&&ot&&Rs(i),Rg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ot=W_(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ot=W_(i)}else r===27?(r=ot,Fs(i.type)?(i=Jh,Jh=null,ot=i):ot=r):ot=Kt?Ln(i.stateNode.nextSibling):null;return!0}function Vr(){ot=Kt=null,Oe=!1}function Id(){var i=Is;return i!==null&&(pn===null?pn=i:pn.push.apply(pn,i),Is=null),i}function tl(i){Is===null?Is=[i]:Is.push(i)}var Rd=O(null),Ur=null,Gi=null;function ws(i,r,a){ue(Rd,r._currentValue),r._currentValue=a}function zi(i){i._currentValue=Rd.current,ne(Rd)}function wd(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function Nd(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var S=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var P=0;P<r.length;P++)if(I.context===r[P]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),wd(_.return,a,i),c||(S=null);break e}_=I.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(s(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),wd(S,a,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function bo(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=y.type;vn(y.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(y===qe.current){if(S=y.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Nl):i=[Nl])}y=y.return}i!==null&&Nd(r,i,a,c),r.flags|=262144}function Xu(i){for(i=i.firstContext;i!==null;){if(!vn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function kr(i){Ur=i,Gi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jt(i){return wg(Ur,i)}function Wu(i,r){return Ur===null&&kr(i),wg(i,r)}function wg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Gi===null){if(i===null)throw Error(s(308));Gi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Gi=Gi.next=r;return a}var QC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},$C=n.unstable_scheduleCallback,XC=n.unstable_NormalPriority,Nt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new QC,data:new Map,refCount:0}}function nl(i){i.refCount--,i.refCount===0&&$C(XC,function(){i.controller.abort()})}var il=null,Md=0,Mo=0,Do=null;function WC(i,r){if(il===null){var a=il=[];Md=0,Mo=Ph(),Do={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Md++,r.then(Ng,Ng),r}function Ng(){if(--Md===0&&il!==null){Do!==null&&(Do.status="fulfilled");var i=il;il=null,Mo=0,Do=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function ZC(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var bg=X.S;X.S=function(i,r){d_=on(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&WC(i,r),bg!==null&&bg(i,r)};var Lr=O(null);function Dd(){var i=Lr.current;return i!==null?i:st.pooledCache}function Zu(i,r){r===null?ue(Lr,Lr.current):ue(Lr,r.pool)}function Mg(){var i=Dd();return i===null?null:{parent:Nt._currentValue,pool:i}}var xo=Error(s(460)),xd=Error(s(474)),ju=Error(s(542)),ec={then:function(){}};function Dg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Jn,Jn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Vg(i),i;default:if(typeof r.status=="string")r.then(Jn,Jn);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Vg(i),i}throw qr=r,xo}}function Or(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qr=a,xo):a}}var qr=null;function Pg(){if(qr===null)throw Error(s(459));var i=qr;return qr=null,i}function Vg(i){if(i===xo||i===ju)throw Error(s(483))}var Po=null,sl=0;function tc(i){var r=sl;return sl+=1,Po===null&&(Po=[]),xg(Po,i,r)}function rl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function nc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ug(i){function r(B,L){if(i){var z=B.deletions;z===null?(B.deletions=[L],B.flags|=16):z.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=Bi(B,L),B.index=0,B.sibling=null,B}function _(B,L,z){return B.index=z,i?(z=B.alternate,z!==null?(z=z.index,z<L?(B.flags|=67108866,L):z):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function S(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,z,ee){return L===null||L.tag!==6?(L=Td(z,B.mode,ee),L.return=B,L):(L=y(L,z),L.return=B,L)}function P(B,L,z,ee){var ye=z.type;return ye===V?W(B,L,z.props.children,ee,z.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&Or(ye)===L.type)?(L=y(L,z.props),rl(L,z),L.return=B,L):(L=Qu(z.type,z.key,z.props,null,B.mode,ee),rl(L,z),L.return=B,L)}function Y(B,L,z,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=Ed(z,B.mode,ee),L.return=B,L):(L=y(L,z.children||[]),L.return=B,L)}function W(B,L,z,ee,ye){return L===null||L.tag!==7?(L=Pr(z,B.mode,ee,ye),L.return=B,L):(L=y(L,z),L.return=B,L)}function te(B,L,z){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Td(""+L,B.mode,z),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return z=Qu(L.type,L.key,L.props,null,B.mode,z),rl(z,L),z.return=B,z;case H:return L=Ed(L,B.mode,z),L.return=B,L;case N:return L=Or(L),te(B,L,z)}if(rt(L)||q(L))return L=Pr(L,B.mode,z,null),L.return=B,L;if(typeof L.then=="function")return te(B,tc(L),z);if(L.$$typeof===Z)return te(B,Wu(B,L),z);nc(B,L)}return null}function K(B,L,z,ee){var ye=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:I(B,L,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===ye?P(B,L,z,ee):null;case H:return z.key===ye?Y(B,L,z,ee):null;case N:return z=Or(z),K(B,L,z,ee)}if(rt(z)||q(z))return ye!==null?null:W(B,L,z,ee,null);if(typeof z.then=="function")return K(B,L,tc(z),ee);if(z.$$typeof===Z)return K(B,L,Wu(B,z),ee);nc(B,z)}return null}function Q(B,L,z,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(z)||null,I(L,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return B=B.get(ee.key===null?z:ee.key)||null,P(L,B,ee,ye);case H:return B=B.get(ee.key===null?z:ee.key)||null,Y(L,B,ee,ye);case N:return ee=Or(ee),Q(B,L,z,ee,ye)}if(rt(ee)||q(ee))return B=B.get(z)||null,W(L,B,ee,ye,null);if(typeof ee.then=="function")return Q(B,L,z,tc(ee),ye);if(ee.$$typeof===Z)return Q(B,L,z,Wu(L,ee),ye);nc(L,ee)}return null}function pe(B,L,z,ee){for(var ye=null,Ge=null,me=L,Me=L=0,Ve=null;me!==null&&Me<z.length;Me++){me.index>Me?(Ve=me,me=null):Ve=me.sibling;var ze=K(B,me,z[Me],ee);if(ze===null){me===null&&(me=Ve);break}i&&me&&ze.alternate===null&&r(B,me),L=_(ze,L,Me),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze,me=Ve}if(Me===z.length)return a(B,me),Oe&&Hi(B,Me),ye;if(me===null){for(;Me<z.length;Me++)me=te(B,z[Me],ee),me!==null&&(L=_(me,L,Me),Ge===null?ye=me:Ge.sibling=me,Ge=me);return Oe&&Hi(B,Me),ye}for(me=c(me);Me<z.length;Me++)Ve=Q(me,B,Me,z[Me],ee),Ve!==null&&(i&&Ve.alternate!==null&&me.delete(Ve.key===null?Me:Ve.key),L=_(Ve,L,Me),Ge===null?ye=Ve:Ge.sibling=Ve,Ge=Ve);return i&&me.forEach(function(Ys){return r(B,Ys)}),Oe&&Hi(B,Me),ye}function Te(B,L,z,ee){if(z==null)throw Error(s(151));for(var ye=null,Ge=null,me=L,Me=L=0,Ve=null,ze=z.next();me!==null&&!ze.done;Me++,ze=z.next()){me.index>Me?(Ve=me,me=null):Ve=me.sibling;var Ys=K(B,me,ze.value,ee);if(Ys===null){me===null&&(me=Ve);break}i&&me&&Ys.alternate===null&&r(B,me),L=_(Ys,L,Me),Ge===null?ye=Ys:Ge.sibling=Ys,Ge=Ys,me=Ve}if(ze.done)return a(B,me),Oe&&Hi(B,Me),ye;if(me===null){for(;!ze.done;Me++,ze=z.next())ze=te(B,ze.value,ee),ze!==null&&(L=_(ze,L,Me),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze);return Oe&&Hi(B,Me),ye}for(me=c(me);!ze.done;Me++,ze=z.next())ze=Q(me,B,Me,ze.value,ee),ze!==null&&(i&&ze.alternate!==null&&me.delete(ze.key===null?Me:ze.key),L=_(ze,L,Me),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze);return i&&me.forEach(function(uR){return r(B,uR)}),Oe&&Hi(B,Me),ye}function it(B,L,z,ee){if(typeof z=="object"&&z!==null&&z.type===V&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var ye=z.key;L!==null;){if(L.key===ye){if(ye=z.type,ye===V){if(L.tag===7){a(B,L.sibling),ee=y(L,z.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&Or(ye)===L.type){a(B,L.sibling),ee=y(L,z.props),rl(ee,z),ee.return=B,B=ee;break e}a(B,L);break}else r(B,L);L=L.sibling}z.type===V?(ee=Pr(z.props.children,B.mode,ee,z.key),ee.return=B,B=ee):(ee=Qu(z.type,z.key,z.props,null,B.mode,ee),rl(ee,z),ee.return=B,B=ee)}return S(B);case H:e:{for(ye=z.key;L!==null;){if(L.key===ye)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){a(B,L.sibling),ee=y(L,z.children||[]),ee.return=B,B=ee;break e}else{a(B,L);break}else r(B,L);L=L.sibling}ee=Ed(z,B.mode,ee),ee.return=B,B=ee}return S(B);case N:return z=Or(z),it(B,L,z,ee)}if(rt(z))return pe(B,L,z,ee);if(q(z)){if(ye=q(z),typeof ye!="function")throw Error(s(150));return z=ye.call(z),Te(B,L,z,ee)}if(typeof z.then=="function")return it(B,L,tc(z),ee);if(z.$$typeof===Z)return it(B,L,Wu(B,z),ee);nc(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,L!==null&&L.tag===6?(a(B,L.sibling),ee=y(L,z),ee.return=B,B=ee):(a(B,L),ee=Td(z,B.mode,ee),ee.return=B,B=ee),S(B)):a(B,L)}return function(B,L,z,ee){try{sl=0;var ye=it(B,L,z,ee);return Po=null,ye}catch(me){if(me===xo||me===ju)throw me;var Ge=Tn(29,me,null,B.mode);return Ge.lanes=ee,Ge.return=B,Ge}finally{}}}var Fr=Ug(!0),kg=Ug(!1),Ns=!1;function Pd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function bs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ms(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Ju(i),vg(i,null,a),r}return Ku(i,c,r,a),Ju(i)}function ol(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Pa(i,a)}}function Ud(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var kd=!1;function al(){if(kd){var i=Do;if(i!==null)throw i}}function ll(i,r,a,c){kd=!1;var y=i.updateQueue;Ns=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var P=I,Y=P.next;P.next=null,S===null?_=Y:S.next=Y,S=P;var W=i.alternate;W!==null&&(W=W.updateQueue,I=W.lastBaseUpdate,I!==S&&(I===null?W.firstBaseUpdate=Y:I.next=Y,W.lastBaseUpdate=P))}if(_!==null){var te=y.baseState;S=0,W=Y=P=null,I=_;do{var K=I.lane&-536870913,Q=K!==I.lane;if(Q?(Pe&K)===K:(c&K)===K){K!==0&&K===Mo&&(kd=!0),W!==null&&(W=W.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var pe=i,Te=I;K=r;var it=a;switch(Te.tag){case 1:if(pe=Te.payload,typeof pe=="function"){te=pe.call(it,te,K);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Te.payload,K=typeof pe=="function"?pe.call(it,te,K):pe,K==null)break e;te=E({},te,K);break e;case 2:Ns=!0}}K=I.callback,K!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},W===null?(Y=W=Q,P=te):W=W.next=Q,S|=K;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);W===null&&(P=te),y.baseState=P,y.firstBaseUpdate=Y,y.lastBaseUpdate=W,_===null&&(y.shared.lanes=0),Us|=S,i.lanes=S,i.memoizedState=te}}function Lg(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Og(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Lg(a[i],r)}var Vo=O(null),ic=O(0);function qg(i,r){i=ji,ue(ic,i),ue(Vo,r),ji=i|r.baseLanes}function Ld(){ue(ic,ji),ue(Vo,Vo.current)}function Od(){ji=ic.current,ne(Vo),ne(ic)}var En=O(null),kn=null;function Ds(i){var r=i.alternate;ue(vt,vt.current&1),ue(En,i),kn===null&&(r===null||Vo.current!==null||r.memoizedState!==null)&&(kn=i)}function qd(i){ue(vt,vt.current),ue(En,i),kn===null&&(kn=i)}function Fg(i){i.tag===22?(ue(vt,vt.current),ue(En,i),kn===null&&(kn=i)):xs()}function xs(){ue(vt,vt.current),ue(En,En.current)}function Sn(i){ne(En),kn===i&&(kn=null),ne(vt)}var vt=O(0);function sc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Yh(a)||Kh(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Yi=0,Ne=null,tt=null,bt=null,rc=!1,Uo=!1,Br=!1,oc=0,ul=0,ko=null,jC=0;function mt(){throw Error(s(321))}function Fd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!vn(i[a],r[a]))return!1;return!0}function Bd(i,r,a,c,y,_){return Yi=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?Ay:nh,Br=!1,_=a(c,y),Br=!1,Uo&&(_=Hg(r,a,c,y)),Bg(i),_}function Bg(i){X.H=dl;var r=tt!==null&&tt.next!==null;if(Yi=0,bt=tt=Ne=null,rc=!1,ul=0,ko=null,r)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&Xu(i)&&(Mt=!0))}function Hg(i,r,a,c){Ne=i;var y=0;do{if(Uo&&(ko=null),ul=0,Uo=!1,25<=y)throw Error(s(301));if(y+=1,bt=tt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}X.H=Cy,_=r(a,c)}while(Uo);return _}function eI(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?cl(r):r,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(Ne.flags|=1024),r}function Hd(){var i=oc!==0;return oc=0,i}function Gd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function zd(i){if(rc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}rc=!1}Yi=0,bt=tt=Ne=null,Uo=!1,ul=oc=0,ko=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ne.memoizedState=bt=i:bt=bt.next=i,bt}function Tt(){if(tt===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var r=bt===null?Ne.memoizedState:bt.next;if(r!==null)bt=r,tt=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},bt===null?Ne.memoizedState=bt=i:bt=bt.next=i}return bt}function ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(i){var r=ul;return ul+=1,ko===null&&(ko=[]),i=xg(ko,i,r),r=Ne,(bt===null?r.memoizedState:bt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Ay:nh),i}function lc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return cl(i);if(i.$$typeof===Z)return Jt(i)}throw Error(s(438,String(i)))}function Yd(i){var r=null,a=Ne.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ac(),Ne.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=U;return r.index++,a}function Ki(i,r){return typeof r=="function"?r(i):r}function uc(i){var r=Tt();return Kd(r,tt,i)}function Kd(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=S=null,P=null,Y=r,W=!1;do{var te=Y.lane&-536870913;if(te!==Y.lane?(Pe&te)===te:(Yi&te)===te){var K=Y.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),te===Mo&&(W=!0);else if((Yi&K)===K){Y=Y.next,K===Mo&&(W=!0);continue}else te={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(I=P=te,S=_):P=P.next=te,Ne.lanes|=K,Us|=K;te=Y.action,Br&&a(_,te),_=Y.hasEagerState?Y.eagerState:a(_,te)}else K={lane:te,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(I=P=K,S=_):P=P.next=K,Ne.lanes|=te,Us|=te;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?S=_:P.next=I,!vn(_,i.memoizedState)&&(Mt=!0,W&&(a=Do,a!==null)))throw a;i.memoizedState=_,i.baseState=S,i.baseQueue=P,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Jd(i){var r=Tt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var S=y=y.next;do _=i(_,S.action),S=S.next;while(S!==y);vn(_,r.memoizedState)||(Mt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function Gg(i,r,a){var c=Ne,y=Tt(),_=Oe;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var S=!vn((tt||y).memoizedState,a);if(S&&(y.memoizedState=a,Mt=!0),y=y.queue,Xd(Kg.bind(null,c,y,i),[i]),y.getSnapshot!==r||S||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,Lo(9,{destroy:void 0},Yg.bind(null,c,y,a,r),null),st===null)throw Error(s(349));_||(Yi&127)!==0||zg(c,r,a)}return a}function zg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ne.updateQueue,r===null?(r=ac(),Ne.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Yg(i,r,a,c){r.value=a,r.getSnapshot=c,Jg(r)&&Qg(i)}function Kg(i,r,a){return a(function(){Jg(r)&&Qg(i)})}function Jg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!vn(i,a)}catch{return!0}}function Qg(i){var r=xr(i,2);r!==null&&mn(r,i,2)}function Qd(i){var r=ln();if(typeof i=="function"){var a=i;if(i=a(),Br){Rn(!0);try{a()}finally{Rn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:i},r}function $g(i,r,a,c){return i.baseState=a,Kd(i,tt,typeof c=="function"?c:Ki)}function tI(i,r,a,c,y){if(dc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};X.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,Xg(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Xg(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=X.T,S={};X.T=S;try{var I=a(y,c),P=X.S;P!==null&&P(S,I),Wg(i,r,I)}catch(Y){$d(i,r,Y)}finally{_!==null&&S.types!==null&&(_.types=S.types),X.T=_}}else try{_=a(y,c),Wg(i,r,_)}catch(Y){$d(i,r,Y)}}function Wg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Zg(i,r,c)},function(c){return $d(i,r,c)}):Zg(i,r,a)}function Zg(i,r,a){r.status="fulfilled",r.value=a,jg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Xg(i,a)))}function $d(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,jg(r),r=r.next;while(r!==c)}i.action=null}function jg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ey(i,r){return r}function ty(i,r){if(Oe){var a=st.formState;if(a!==null){e:{var c=Ne;if(Oe){if(ot){t:{for(var y=ot,_=Un;y.nodeType!==8;){if(!_){y=null;break t}if(y=Ln(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ot=Ln(y.nextSibling),c=y.data==="F!";break e}}Rs(c)}c=!1}c&&(r=a[0])}}return a=ln(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:r},a.queue=c,a=Ty.bind(null,Ne,c),c.dispatch=a,c=Qd(!1),_=th.bind(null,Ne,!1,c.queue),c=ln(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=tI.bind(null,Ne,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function ny(i){var r=Tt();return iy(r,tt,i)}function iy(i,r,a){if(r=Kd(i,r,ey)[0],i=uc(Ki)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=cl(r)}catch(S){throw S===xo?ju:S}else c=r;r=Tt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(Ne.flags|=2048,Lo(9,{destroy:void 0},nI.bind(null,y,a),null)),[c,_,i]}function nI(i,r){i.action=r}function sy(i){var r=Tt(),a=tt;if(a!==null)return iy(r,a,i);Tt(),r=r.memoizedState,a=Tt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Lo(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=ac(),Ne.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function ry(){return Tt().memoizedState}function cc(i,r,a,c){var y=ln();Ne.flags|=i,y.memoizedState=Lo(1|r,{destroy:void 0},a,c===void 0?null:c)}function fc(i,r,a,c){var y=Tt();c=c===void 0?null:c;var _=y.memoizedState.inst;tt!==null&&c!==null&&Fd(c,tt.memoizedState.deps)?y.memoizedState=Lo(r,_,a,c):(Ne.flags|=i,y.memoizedState=Lo(1|r,_,a,c))}function oy(i,r){cc(8390656,8,i,r)}function Xd(i,r){fc(2048,8,i,r)}function iI(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=ac(),Ne.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function ay(i){var r=Tt().memoizedState;return iI({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function ly(i,r){return fc(4,2,i,r)}function uy(i,r){return fc(4,4,i,r)}function cy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function fy(i,r,a){a=a!=null?a.concat([i]):null,fc(4,4,cy.bind(null,r,i),a)}function Wd(){}function dy(i,r){var a=Tt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Fd(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function hy(i,r){var a=Tt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Fd(r,c[1]))return c[0];if(c=i(),Br){Rn(!0);try{i()}finally{Rn(!1)}}return a.memoizedState=[c,r],c}function Zd(i,r,a){return a===void 0||(Yi&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=p_(),Ne.lanes|=i,Us|=i,a)}function py(i,r,a,c){return vn(a,r)?a:Vo.current!==null?(i=Zd(i,a,c),vn(i,r)||(Mt=!0),i):(Yi&42)===0||(Yi&1073741824)!==0&&(Pe&261930)===0?(Mt=!0,i.memoizedState=a):(i=p_(),Ne.lanes|=i,Us|=i,r)}function my(i,r,a,c,y){var _=le.p;le.p=_!==0&&8>_?_:8;var S=X.T,I={};X.T=I,th(i,!1,r,a);try{var P=y(),Y=X.S;if(Y!==null&&Y(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var W=ZC(P,c);fl(i,r,W,In(i))}else fl(i,r,c,In(i))}catch(te){fl(i,r,{then:function(){},status:"rejected",reason:te},In())}finally{le.p=_,S!==null&&I.types!==null&&(S.types=I.types),X.T=S}}function sI(){}function jd(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=gy(i).queue;my(i,y,r,_e,a===null?sI:function(){return yy(i),a(c)})}function gy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:_e},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function yy(i){var r=gy(i);r.next===null&&(r=i.alternate.memoizedState),fl(i,r.next.queue,{},In())}function eh(){return Jt(Nl)}function _y(){return Tt().memoizedState}function vy(){return Tt().memoizedState}function rI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=In();i=bs(a);var c=Ms(r,i,a);c!==null&&(mn(c,r,a),ol(c,r,a)),r={cache:bd()},i.payload=r;return}r=r.return}}function oI(i,r,a){var c=In();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},dc(i)?Ey(r,a):(a=_d(i,r,a,c),a!==null&&(mn(a,i,c),Sy(a,r,c)))}function Ty(i,r,a){var c=In();fl(i,r,a,c)}function fl(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(i))Ey(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var S=r.lastRenderedState,I=_(S,a);if(y.hasEagerState=!0,y.eagerState=I,vn(I,S))return Ku(i,r,y,0),st===null&&Yu(),!1}catch{}finally{}if(a=_d(i,r,y,c),a!==null)return mn(a,i,c),Sy(a,r,c),!0}return!1}function th(i,r,a,c){if(c={lane:2,revertLane:Ph(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dc(i)){if(r)throw Error(s(479))}else r=_d(i,a,c,2),r!==null&&mn(r,i,2)}function dc(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function Ey(i,r){Uo=rc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Sy(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Pa(i,a)}}var dl={readContext:Jt,use:lc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};dl.useEffectEvent=mt;var Ay={readContext:Jt,use:lc,useCallback:function(i,r){return ln().memoizedState=[i,r===void 0?null:r],i},useContext:Jt,useEffect:oy,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,cc(4194308,4,cy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return cc(4194308,4,i,r)},useInsertionEffect:function(i,r){cc(4,2,i,r)},useMemo:function(i,r){var a=ln();r=r===void 0?null:r;var c=i();if(Br){Rn(!0);try{i()}finally{Rn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=ln();if(a!==void 0){var y=a(r);if(Br){Rn(!0);try{a(r)}finally{Rn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=oI.bind(null,Ne,i),[c.memoizedState,i]},useRef:function(i){var r=ln();return i={current:i},r.memoizedState=i},useState:function(i){i=Qd(i);var r=i.queue,a=Ty.bind(null,Ne,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Wd,useDeferredValue:function(i,r){var a=ln();return Zd(a,i,r)},useTransition:function(){var i=Qd(!1);return i=my.bind(null,Ne,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Ne,y=ln();if(Oe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),st===null)throw Error(s(349));(Pe&127)!==0||zg(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,oy(Kg.bind(null,c,_,i),[i]),c.flags|=2048,Lo(9,{destroy:void 0},Yg.bind(null,c,_,a,r),null),a},useId:function(){var i=ln(),r=st.identifierPrefix;if(Oe){var a=Ii,c=Ci;a=(c&~(1<<32-yt(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=oc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=jC++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:eh,useFormState:ty,useActionState:ty,useOptimistic:function(i){var r=ln();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=th.bind(null,Ne,!0,a),a.dispatch=r,[i,r]},useMemoCache:Yd,useCacheRefresh:function(){return ln().memoizedState=rI.bind(null,Ne)},useEffectEvent:function(i){var r=ln(),a={impl:i};return r.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},nh={readContext:Jt,use:lc,useCallback:dy,useContext:Jt,useEffect:Xd,useImperativeHandle:fy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:hy,useReducer:uc,useRef:ry,useState:function(){return uc(Ki)},useDebugValue:Wd,useDeferredValue:function(i,r){var a=Tt();return py(a,tt.memoizedState,i,r)},useTransition:function(){var i=uc(Ki)[0],r=Tt().memoizedState;return[typeof i=="boolean"?i:cl(i),r]},useSyncExternalStore:Gg,useId:_y,useHostTransitionStatus:eh,useFormState:ny,useActionState:ny,useOptimistic:function(i,r){var a=Tt();return $g(a,tt,i,r)},useMemoCache:Yd,useCacheRefresh:vy};nh.useEffectEvent=ay;var Cy={readContext:Jt,use:lc,useCallback:dy,useContext:Jt,useEffect:Xd,useImperativeHandle:fy,useInsertionEffect:ly,useLayoutEffect:uy,useMemo:hy,useReducer:Jd,useRef:ry,useState:function(){return Jd(Ki)},useDebugValue:Wd,useDeferredValue:function(i,r){var a=Tt();return tt===null?Zd(a,i,r):py(a,tt.memoizedState,i,r)},useTransition:function(){var i=Jd(Ki)[0],r=Tt().memoizedState;return[typeof i=="boolean"?i:cl(i),r]},useSyncExternalStore:Gg,useId:_y,useHostTransitionStatus:eh,useFormState:sy,useActionState:sy,useOptimistic:function(i,r){var a=Tt();return tt!==null?$g(a,tt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:vy};Cy.useEffectEvent=ay;function ih(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var sh={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=In(),y=bs(c);y.payload=r,a!=null&&(y.callback=a),r=Ms(i,y,c),r!==null&&(mn(r,i,c),ol(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=In(),y=bs(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ms(i,y,c),r!==null&&(mn(r,i,c),ol(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=In(),c=bs(a);c.tag=2,r!=null&&(c.callback=r),r=Ms(i,c,a),r!==null&&(mn(r,i,a),ol(r,i,a))}};function Iy(i,r,a,c,y,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,S):r.prototype&&r.prototype.isPureReactComponent?!Za(a,c)||!Za(y,_):!0}function Ry(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&sh.enqueueReplaceState(r,r.state,null)}function Hr(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function wy(i){zu(i)}function Ny(i){console.error(i)}function by(i){zu(i)}function hc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function My(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function rh(i,r,a){return a=bs(a),a.tag=3,a.payload={element:null},a.callback=function(){hc(i,r)},a}function Dy(i){return i=bs(i),i.tag=3,i}function xy(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){My(r,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){My(r,a,c),typeof y!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function aI(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&bo(r,a,y,!0),a=En.current,a!==null){switch(a.tag){case 31:case 13:return kn===null?Ic():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===ec?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Mh(i,c,y)),!1;case 22:return a.flags|=65536,c===ec?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Mh(i,c,y)),!1}throw Error(s(435,a.tag))}return Mh(i,c,y),Ic(),!1}if(Oe)return r=En.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Cd&&(i=Error(s(422),{cause:c}),tl(xn(i,a)))):(c!==Cd&&(r=Error(s(423),{cause:c}),tl(xn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=xn(c,a),y=rh(i.stateNode,c,y),Ud(i,y),gt!==4&&(gt=2)),!1;var _=Error(s(520),{cause:c});if(_=xn(_,a),Tl===null?Tl=[_]:Tl.push(_),gt!==4&&(gt=2),r===null)return!0;c=xn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=rh(a.stateNode,c,i),Ud(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ks===null||!ks.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Dy(y),xy(y,i,a,c),Ud(a,y),!1}a=a.return}while(a!==null);return!1}var oh=Error(s(461)),Mt=!1;function Qt(i,r,a,c){r.child=i===null?kg(r,null,a,c):Fr(r,i.child,a,c)}function Py(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var S={};for(var I in c)I!=="ref"&&(S[I]=c[I])}else S=c;return kr(r),c=Bd(i,r,a,S,_,y),I=Hd(),i!==null&&!Mt?(Gd(i,r,y),Ji(i,r,y)):(Oe&&I&&Sd(r),r.flags|=1,Qt(i,r,c,y),r.child)}function Vy(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!vd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Uy(i,r,_,c,y)):(i=Qu(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!ph(i,y)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:Za,a(S,c)&&i.ref===r.ref)return Ji(i,r,y)}return r.flags|=1,i=Bi(_,c),i.ref=r.ref,i.return=r,r.child=i}function Uy(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(Za(_,c)&&i.ref===r.ref)if(Mt=!1,r.pendingProps=c=_,ph(i,y))(i.flags&131072)!==0&&(Mt=!0);else return r.lanes=i.lanes,Ji(i,r,y)}return ah(i,r,a,c,y)}function ky(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return Ly(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zu(r,_!==null?_.cachePool:null),_!==null?qg(r,_):Ld(),Fg(r);else return c=r.lanes=536870912,Ly(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(Zu(r,_.cachePool),qg(r,_),xs(),r.memoizedState=null):(i!==null&&Zu(r,null),Ld(),xs());return Qt(i,r,y,a),r.child}function hl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ly(i,r,a,c,y){var _=Dd();return _=_===null?null:{parent:Nt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Zu(r,null),Ld(),Fg(r),i!==null&&bo(i,r,c,!0),r.childLanes=y,null}function pc(i,r){return r=gc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Oy(i,r,a){return Fr(r,i.child,null,a),i=pc(r,r.pendingProps),i.flags|=2,Sn(r),r.memoizedState=null,i}function lI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Oe){if(c.mode==="hidden")return i=pc(r,c),r.lanes=536870912,hl(null,i);if(qd(r),(i=ot)?(i=X_(i,Un),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Cs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=Eg(i),a.return=r,r.child=a,Kt=r,ot=null)):i=null,i===null)throw Rs(r);return r.lanes=536870912,null}return pc(r,c)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(qd(r),y)if(r.flags&256)r.flags&=-257,r=Oy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Mt||bo(i,r,a,!1),y=(a&i.childLanes)!==0,Mt||y){if(c=st,c!==null&&(S=Va(c,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,xr(i,S),mn(c,i,S),oh;Ic(),r=Oy(i,r,a)}else i=_.treeContext,ot=Ln(S.nextSibling),Kt=r,Oe=!0,Is=null,Un=!1,i!==null&&Cg(r,i),r=pc(r,c),r.flags|=4096;return r}return i=Bi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function mc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function ah(i,r,a,c,y){return kr(r),a=Bd(i,r,a,c,void 0,y),c=Hd(),i!==null&&!Mt?(Gd(i,r,y),Ji(i,r,y)):(Oe&&c&&Sd(r),r.flags|=1,Qt(i,r,a,y),r.child)}function qy(i,r,a,c,y,_){return kr(r),r.updateQueue=null,a=Hg(r,c,a,y),Bg(i),c=Hd(),i!==null&&!Mt?(Gd(i,r,_),Ji(i,r,_)):(Oe&&c&&Sd(r),r.flags|=1,Qt(i,r,a,_),r.child)}function Fy(i,r,a,c,y){if(kr(r),r.stateNode===null){var _=Io,S=a.contextType;typeof S=="object"&&S!==null&&(_=Jt(S)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=sh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Pd(r),S=a.contextType,_.context=typeof S=="object"&&S!==null?Jt(S):Io,_.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ih(r,a,S,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&sh.enqueueReplaceState(_,_.state,null),ll(r,c,_,y),al(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,P=Hr(a,I);_.props=P;var Y=_.context,W=a.contextType;S=Io,typeof W=="object"&&W!==null&&(S=Jt(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||Y!==S)&&Ry(r,_,c,S),Ns=!1;var K=r.memoizedState;_.state=K,ll(r,c,_,y),al(),Y=r.memoizedState,I||K!==Y||Ns?(typeof te=="function"&&(ih(r,a,te,c),Y=r.memoizedState),(P=Ns||Iy(r,a,P,c,K,Y,S))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=S,c=P):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Vd(i,r),S=r.memoizedProps,W=Hr(a,S),_.props=W,te=r.pendingProps,K=_.context,Y=a.contextType,P=Io,typeof Y=="object"&&Y!==null&&(P=Jt(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==te||K!==P)&&Ry(r,_,c,P),Ns=!1,K=r.memoizedState,_.state=K,ll(r,c,_,y),al();var Q=r.memoizedState;S!==te||K!==Q||Ns||i!==null&&i.dependencies!==null&&Xu(i.dependencies)?(typeof I=="function"&&(ih(r,a,I,c),Q=r.memoizedState),(W=Ns||Iy(r,a,W,c,K,Q,P)||i!==null&&i.dependencies!==null&&Xu(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=P,c=W):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,mc(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=Fr(r,i.child,null,y),r.child=Fr(r,null,a,y)):Qt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Ji(i,r,y),i}function By(i,r,a,c){return Vr(),r.flags|=256,Qt(i,r,a,c),r.child}var lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uh(i){return{baseLanes:i,cachePool:Mg()}}function ch(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Cn),i}function Hy(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(vt.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(Oe){if(y?Ds(r):xs(),(i=ot)?(i=X_(i,Un),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Cs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=Eg(i),a.return=r,r.child=a,Kt=r,ot=null)):i=null,i===null)throw Rs(r);return Kh(i)?r.lanes=32:r.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(xs(),y=r.mode,I=gc({mode:"hidden",children:I},y),c=Pr(c,y,a,null),I.return=r,c.return=r,I.sibling=c,r.child=I,c=r.child,c.memoizedState=uh(a),c.childLanes=ch(i,S,a),r.memoizedState=lh,hl(null,c)):(Ds(r),fh(r,I))}var P=i.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(_)r.flags&256?(Ds(r),r.flags&=-257,r=dh(i,r,a)):r.memoizedState!==null?(xs(),r.child=i.child,r.flags|=128,r=null):(xs(),I=c.fallback,y=r.mode,c=gc({mode:"visible",children:c.children},y),I=Pr(I,y,a,null),I.flags|=2,c.return=r,I.return=r,c.sibling=I,r.child=c,Fr(r,i.child,null,a),c=r.child,c.memoizedState=uh(a),c.childLanes=ch(i,S,a),r.memoizedState=lh,r=hl(null,c));else if(Ds(r),Kh(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var Y=S.dgst;S=Y,c=Error(s(419)),c.stack="",c.digest=S,tl({value:c,source:null,stack:null}),r=dh(i,r,a)}else if(Mt||bo(i,r,a,!1),S=(a&i.childLanes)!==0,Mt||S){if(S=st,S!==null&&(c=Va(S,a),c!==0&&c!==P.retryLane))throw P.retryLane=c,xr(i,c),mn(S,i,c),oh;Yh(I)||Ic(),r=dh(i,r,a)}else Yh(I)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,ot=Ln(I.nextSibling),Kt=r,Oe=!0,Is=null,Un=!1,i!==null&&Cg(r,i),r=fh(r,c.children),r.flags|=4096);return r}return y?(xs(),I=c.fallback,y=r.mode,P=i.child,Y=P.sibling,c=Bi(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,Y!==null?I=Bi(Y,I):(I=Pr(I,y,a,null),I.flags|=2),I.return=r,c.return=r,c.sibling=I,r.child=c,hl(null,c),c=r.child,I=i.child.memoizedState,I===null?I=uh(a):(y=I.cachePool,y!==null?(P=Nt._currentValue,y=y.parent!==P?{parent:P,pool:P}:y):y=Mg(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=ch(i,S,a),r.memoizedState=lh,hl(i.child,c)):(Ds(r),a=i.child,i=a.sibling,a=Bi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=a,r.memoizedState=null,a)}function fh(i,r){return r=gc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function gc(i,r){return i=Tn(22,i,null,r),i.lanes=0,i}function dh(i,r,a){return Fr(r,i.child,null,a),i=fh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Gy(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),wd(i.return,r,a)}function hh(i,r,a,c,y,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=a,S.tailMode=y,S.treeForkCount=_)}function zy(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var S=vt.current,I=(S&2)!==0;if(I?(S=S&1|2,r.flags|=128):S&=1,ue(vt,S),Qt(i,r,c,a),c=Oe?el:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gy(i,a,r);else if(i.tag===19)Gy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&sc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),hh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&sc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}hh(r,!0,a,null,_,c);break;case"together":hh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ji(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Us|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(bo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Bi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Bi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function ph(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Xu(i)))}function uI(i,r,a){switch(r.tag){case 3:Vt(r,r.stateNode.containerInfo),ws(r,Nt,i.memoizedState.cache),Vr();break;case 27:case 5:pr(r);break;case 4:Vt(r,r.stateNode.containerInfo);break;case 10:ws(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,qd(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ds(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Hy(i,r,a):(Ds(r),i=Ji(i,r,a),i!==null?i.sibling:null);Ds(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(bo(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return zy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(vt,vt.current),c)break;return null;case 22:return r.lanes=0,ky(i,r,a,r.pendingProps);case 24:ws(r,Nt,i.memoizedState.cache)}return Ji(i,r,a)}function Yy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Mt=!0;else{if(!ph(i,a)&&(r.flags&128)===0)return Mt=!1,uI(i,r,a);Mt=(i.flags&131072)!==0}else Mt=!1,Oe&&(r.flags&1048576)!==0&&Ag(r,el,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=Or(r.elementType),r.type=i,typeof i=="function")vd(i)?(c=Hr(i,c),r.tag=1,r=Fy(null,r,i,c,a)):(r.tag=0,r=ah(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===oe){r.tag=11,r=Py(null,r,i,c,a);break e}else if(y===M){r.tag=14,r=Vy(null,r,i,c,a);break e}}throw r=$e(i)||i,Error(s(306,r,""))}}return r;case 0:return ah(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=Hr(c,r.pendingProps),Fy(i,r,c,y,a);case 3:e:{if(Vt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Vd(i,r),ll(r,c,null,a);var S=r.memoizedState;if(c=S.cache,ws(r,Nt,c),c!==_.cache&&Nd(r,[Nt],a,!0),al(),c=S.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=By(i,r,c,a);break e}else if(c!==y){y=xn(Error(s(424)),r),tl(y),r=By(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ot=Ln(i.firstChild),Kt=r,Oe=!0,Is=null,Un=!0,a=kg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vr(),c===y){r=Ji(i,r,a);break e}Qt(i,r,c,a)}r=r.child}return r;case 26:return mc(i,r),i===null?(a=nv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Oe||(a=r.type,i=r.pendingProps,c=xc(be.current).createElement(a),c[It]=r,c[qt]=i,$t(c,a,i),Rt(c),r.stateNode=c):r.memoizedState=nv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return pr(r),i===null&&Oe&&(c=r.stateNode=j_(r.type,r.pendingProps,be.current),Kt=r,Un=!0,y=ot,Fs(r.type)?(Jh=y,ot=Ln(c.firstChild)):ot=y),Qt(i,r,r.pendingProps.children,a),mc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Oe&&((y=c=ot)&&(c=qI(c,r.type,r.pendingProps,Un),c!==null?(r.stateNode=c,Kt=r,ot=Ln(c.firstChild),Un=!1,y=!0):y=!1),y||Rs(r)),pr(r),y=r.type,_=r.pendingProps,S=i!==null?i.memoizedProps:null,c=_.children,Hh(y,_)?c=null:S!==null&&Hh(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=Bd(i,r,eI,null,null,a),Nl._currentValue=y),mc(i,r),Qt(i,r,c,a),r.child;case 6:return i===null&&Oe&&((i=a=ot)&&(a=FI(a,r.pendingProps,Un),a!==null?(r.stateNode=a,Kt=r,ot=null,i=!0):i=!1),i||Rs(r)),null;case 13:return Hy(i,r,a);case 4:return Vt(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=Fr(r,null,c,a):Qt(i,r,c,a),r.child;case 11:return Py(i,r,r.type,r.pendingProps,a);case 7:return Qt(i,r,r.pendingProps,a),r.child;case 8:return Qt(i,r,r.pendingProps.children,a),r.child;case 12:return Qt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,ws(r,r.type,c.value),Qt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,kr(r),y=Jt(y),c=c(y),r.flags|=1,Qt(i,r,c,a),r.child;case 14:return Vy(i,r,r.type,r.pendingProps,a);case 15:return Uy(i,r,r.type,r.pendingProps,a);case 19:return zy(i,r,a);case 31:return lI(i,r,a);case 22:return ky(i,r,a,r.pendingProps);case 24:return kr(r),c=Jt(Nt),i===null?(y=Dd(),y===null&&(y=st,_=bd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},Pd(r),ws(r,Nt,y)):((i.lanes&a)!==0&&(Vd(i,r),ll(r,null,null,a),al()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),ws(r,Nt,c)):(c=_.cache,ws(r,Nt,c),c!==y.cache&&Nd(r,[Nt],a,!0))),Qt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Qi(i){i.flags|=4}function mh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(__())i.flags|=8192;else throw qr=ec,xd}else i.flags&=-16777217}function Ky(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!av(r))if(__())i.flags|=8192;else throw qr=ec,xd}function yc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Au():536870912,i.lanes|=r,Bo|=r)}function pl(i,r){if(!Oe)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function at(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function cI(i,r,a){var c=r.pendingProps;switch(Ad(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),zi(Nt),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(No(r)?Qi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Id())),at(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Qi(r),_!==null?(at(r),Ky(r,_)):(at(r),mh(r,y,null,c,a))):_?_!==i.memoizedState?(Qi(r),at(r),Ky(r,_)):(at(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&Qi(r),at(r),mh(r,y,i,c,a)),null;case 27:if(ro(r),a=be.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return at(r),null}i=he.current,No(r)?Ig(r):(i=j_(y,c,a),r.stateNode=i,Qi(r))}return at(r),null;case 5:if(ro(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&Qi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return at(r),null}if(_=he.current,No(r))Ig(r);else{var S=xc(be.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}_[It]=r,_[qt]=c;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=_;e:switch($t(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(r)}}return at(r),mh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&Qi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=be.current,No(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=Kt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[It]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||H_(i.nodeValue,a)),i||Rs(r,!0)}else i=xc(i).createTextNode(c),i[It]=r,r.stateNode=i}return at(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=No(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[It]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),i=!1}else a=Id(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Sn(r),r):(Sn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return at(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=No(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[It]=r}else Vr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),y=!1}else y=Id(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Sn(r),r):(Sn(r),null)}return Sn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),yc(r,r.updateQueue),at(r),null);case 4:return ct(),i===null&&Lh(r.stateNode.containerInfo),at(r),null;case 10:return zi(r.type),at(r),null;case 19:if(ne(vt),c=r.memoizedState,c===null)return at(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)pl(c,!1);else{if(gt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=sc(i),_!==null){for(r.flags|=128,pl(c,!1),i=_.updateQueue,r.updateQueue=i,yc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Tg(a,i),a=a.sibling;return ue(vt,vt.current&1|2),Oe&&Hi(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&on()>Sc&&(r.flags|=128,y=!0,pl(c,!1),r.lanes=4194304)}else{if(!y)if(i=sc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,yc(r,i),pl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Oe)return at(r),null}else 2*on()-c.renderingStartTime>Sc&&a!==536870912&&(r.flags|=128,y=!0,pl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=on(),i.sibling=null,a=vt.current,ue(vt,y?a&1|2:a&1),Oe&&Hi(r,c.treeForkCount),i):(at(r),null);case 22:case 23:return Sn(r),Od(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),a=r.updateQueue,a!==null&&yc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&ne(Lr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),zi(Nt),at(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function fI(i,r){switch(Ad(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return zi(Nt),ct(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ro(r),null;case 31:if(r.memoizedState!==null){if(Sn(r),r.alternate===null)throw Error(s(340));Vr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Sn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Vr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(vt),null;case 4:return ct(),null;case 10:return zi(r.type),null;case 22:case 23:return Sn(r),Od(),i!==null&&ne(Lr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return zi(Nt),null;case 25:return null;default:return null}}function Jy(i,r){switch(Ad(r),r.tag){case 3:zi(Nt),ct();break;case 26:case 27:case 5:ro(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&Sn(r);break;case 13:Sn(r);break;case 19:ne(vt);break;case 10:zi(r.type);break;case 22:case 23:Sn(r),Od(),i!==null&&ne(Lr);break;case 24:zi(Nt)}}function ml(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,S=a.inst;c=_(),S.destroy=c}a=a.next}while(a!==y)}}catch(I){je(r,r.return,I)}}function Ps(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var S=c.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,y=r;var P=a,Y=I;try{Y()}catch(W){je(y,P,W)}}}c=c.next}while(c!==_)}}catch(W){je(r,r.return,W)}}function Qy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{Og(r,a)}catch(c){je(i,i.return,c)}}}function $y(i,r,a){a.props=Hr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){je(i,r,c)}}function gl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){je(i,r,y)}}function Ri(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){je(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){je(i,r,y)}else a.current=null}function Xy(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){je(i,i.return,y)}}function gh(i,r,a){try{var c=i.stateNode;PI(c,i.type,a,r),c[qt]=r}catch(y){je(i,i.return,y)}}function Wy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function yh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _h(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Jn));else if(c!==4&&(c===27&&Fs(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(_h(i,r,a),i=i.sibling;i!==null;)_h(i,r,a),i=i.sibling}function _c(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&Fs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(_c(i,r,a),i=i.sibling;i!==null;)_c(i,r,a),i=i.sibling}function Zy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$t(r,c,a),r[It]=i,r[qt]=a}catch(_){je(i,i.return,_)}}var $i=!1,Dt=!1,vh=!1,jy=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function dI(i,r){if(i=i.containerInfo,Fh=qc,i=fg(i),dd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var S=0,I=-1,P=-1,Y=0,W=0,te=i,K=null;t:for(;;){for(var Q;te!==a||y!==0&&te.nodeType!==3||(I=S+y),te!==_||c!==0&&te.nodeType!==3||(P=S+c),te.nodeType===3&&(S+=te.nodeValue.length),(Q=te.firstChild)!==null;)K=te,te=Q;for(;;){if(te===i)break t;if(K===a&&++Y===y&&(I=S),K===_&&++W===c&&(P=S),(Q=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=Q}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bh={focusedElem:i,selectionRange:a},qc=!1,Bt=r;Bt!==null;)if(r=Bt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Bt=i;else for(;Bt!==null;){switch(r=Bt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var pe=Hr(a.type,y);i=c.getSnapshotBeforeUpdate(pe,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Te){je(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)zh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Bt=i;break}Bt=r.return}}function e_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(i,a),c&4&&ml(5,a);break;case 1:if(Wi(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(S){je(a,a.return,S)}else{var y=Hr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){je(a,a.return,S)}}c&64&&Qy(a),c&512&&gl(a,a.return);break;case 3:if(Wi(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Og(i,r)}catch(S){je(a,a.return,S)}}break;case 27:r===null&&c&4&&Zy(a);case 26:case 5:Wi(i,a),r===null&&c&4&&Xy(a),c&512&&gl(a,a.return);break;case 12:Wi(i,a);break;case 31:Wi(i,a),c&4&&i_(i,a);break;case 13:Wi(i,a),c&4&&s_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=EI.bind(null,a),BI(i,a))));break;case 22:if(c=a.memoizedState!==null||$i,!c){r=r!==null&&r.memoizedState!==null||Dt,y=$i;var _=Dt;$i=c,(Dt=r)&&!_?Zi(i,a,(a.subtreeFlags&8772)!==0):Wi(i,a),$i=y,Dt=_}break;case 30:break;default:Wi(i,a)}}function t_(i){var r=i.alternate;r!==null&&(i.alternate=null,t_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&co(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dt=null,fn=!1;function Xi(i,r,a){for(a=a.child;a!==null;)n_(i,r,a),a=a.sibling}function n_(i,r,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Gn,a)}catch{}switch(a.tag){case 26:Dt||Ri(a,r),Xi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ri(a,r);var c=dt,y=fn;Fs(a.type)&&(dt=a.stateNode,fn=!1),Xi(i,r,a),Il(a.stateNode),dt=c,fn=y;break;case 5:Dt||Ri(a,r);case 6:if(c=dt,y=fn,dt=null,Xi(i,r,a),dt=c,fn=y,dt!==null)if(fn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(_){je(a,r,_)}else try{dt.removeChild(a.stateNode)}catch(_){je(a,r,_)}break;case 18:dt!==null&&(fn?(i=dt,Q_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),$o(i)):Q_(dt,a.stateNode));break;case 4:c=dt,y=fn,dt=a.stateNode.containerInfo,fn=!0,Xi(i,r,a),dt=c,fn=y;break;case 0:case 11:case 14:case 15:Ps(2,a,r),Dt||Ps(4,a,r),Xi(i,r,a);break;case 1:Dt||(Ri(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&$y(a,r,c)),Xi(i,r,a);break;case 21:Xi(i,r,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,Xi(i,r,a),Dt=c;break;default:Xi(i,r,a)}}function i_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$o(i)}catch(a){je(r,r.return,a)}}}function s_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$o(i)}catch(a){je(r,r.return,a)}}function hI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new jy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new jy),r;default:throw Error(s(435,i.tag))}}function vc(i,r){var a=hI(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=SI.bind(null,i,c);c.then(y,y)}})}function dn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,S=r,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Fs(I.type)){dt=I.stateNode,fn=!1;break e}break;case 5:dt=I.stateNode,fn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(dt===null)throw Error(s(160));n_(_,S,y),dt=null,fn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)r_(r,i),r=r.sibling}var jn=null;function r_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(r,i),hn(i),c&4&&(Ps(3,i,i.return),ml(3,i),Ps(5,i,i.return));break;case 1:dn(r,i),hn(i),c&512&&(Dt||a===null||Ri(a,a.return)),c&64&&$i&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=jn;if(dn(r,i),hn(i),c&512&&(Dt||a===null||Ri(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[di]||_[It]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),$t(_,c,a),_[It]=i,Rt(_),c=_;break e;case"link":var S=rv("link","href",y).get(c+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(_=S[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break t}}_=y.createElement(c),$t(_,c,a),y.head.appendChild(_);break;case"meta":if(S=rv("meta","content",y).get(c+(a.content||""))){for(I=0;I<S.length;I++)if(_=S[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break t}}_=y.createElement(c),$t(_,c,a),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[It]=i,Rt(_),c=_}i.stateNode=c}else ov(y,i.type,i.stateNode);else i.stateNode=sv(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?ov(y,i.type,i.stateNode):sv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&gh(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(r,i),hn(i),c&512&&(Dt||a===null||Ri(a,a.return)),a!==null&&c&4&&gh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(r,i),hn(i),c&512&&(Dt||a===null||Ri(a,a.return)),i.flags&32){y=i.stateNode;try{cn(y,"")}catch(pe){je(i,i.return,pe)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,gh(i,y,a!==null?a.memoizedProps:y)),c&1024&&(vh=!0);break;case 6:if(dn(r,i),hn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(pe){je(i,i.return,pe)}}break;case 3:if(Uc=null,y=jn,jn=Pc(r.containerInfo),dn(r,i),jn=y,hn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{$o(r.containerInfo)}catch(pe){je(i,i.return,pe)}vh&&(vh=!1,o_(i));break;case 4:c=jn,jn=Pc(i.stateNode.containerInfo),dn(r,i),hn(i),jn=c;break;case 12:dn(r,i),hn(i);break;case 31:dn(r,i),hn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,vc(i,c)));break;case 13:dn(r,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ec=on()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,vc(i,c)));break;case 22:y=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=$i,W=Dt;if($i=Y||y,Dt=W||P,dn(r,i),Dt=W,$i=Y,hn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||P||$i||Dt||Gr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(_=P.stateNode,y)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=P.stateNode;var te=P.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pe){je(P,P.return,pe)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(pe){je(P,P.return,pe)}}}else if(r.tag===18){if(a===null){P=r;try{var Q=P.stateNode;y?$_(Q,!0):$_(P.stateNode,!1)}catch(pe){je(P,P.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,vc(i,a))));break;case 19:dn(r,i),hn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,vc(i,c)));break;case 30:break;case 21:break;default:dn(r,i),hn(i)}}function hn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(Wy(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=yh(i);_c(i,_,y);break;case 5:var S=a.stateNode;a.flags&32&&(cn(S,""),a.flags&=-33);var I=yh(i);_c(i,I,S);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=yh(i);_h(i,Y,P);break;default:throw Error(s(161))}}catch(W){je(i,i.return,W)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function o_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;o_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Wi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)e_(i,r.alternate,r),r=r.sibling}function Gr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ps(4,r,r.return),Gr(r);break;case 1:Ri(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&$y(r,r.return,a),Gr(r);break;case 27:Il(r.stateNode);case 26:case 5:Ri(r,r.return),Gr(r);break;case 22:r.memoizedState===null&&Gr(r);break;case 30:Gr(r);break;default:Gr(r)}i=i.sibling}}function Zi(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,S=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(y,_,a),ml(4,_);break;case 1:if(Zi(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){je(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var I=c.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)Lg(P[y],I)}catch(Y){je(c,c.return,Y)}}a&&S&64&&Qy(_),gl(_,_.return);break;case 27:Zy(_);case 26:case 5:Zi(y,_,a),a&&c===null&&S&4&&Xy(_),gl(_,_.return);break;case 12:Zi(y,_,a);break;case 31:Zi(y,_,a),a&&S&4&&i_(y,_);break;case 13:Zi(y,_,a),a&&S&4&&s_(y,_);break;case 22:_.memoizedState===null&&Zi(y,_,a),gl(_,_.return);break;case 30:break;default:Zi(y,_,a)}r=r.sibling}}function Th(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&nl(a))}function Eh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&nl(i))}function ei(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)a_(i,r,a,c),r=r.sibling}function a_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ei(i,r,a,c),y&2048&&ml(9,r);break;case 1:ei(i,r,a,c);break;case 3:ei(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&nl(i)));break;case 12:if(y&2048){ei(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,S=_.id,I=_.onPostCommit;typeof I=="function"&&I(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){je(r,r.return,P)}}else ei(i,r,a,c);break;case 31:ei(i,r,a,c);break;case 13:ei(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,S=r.alternate,r.memoizedState!==null?_._visibility&2?ei(i,r,a,c):yl(i,r):_._visibility&2?ei(i,r,a,c):(_._visibility|=2,Oo(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Th(S,r);break;case 24:ei(i,r,a,c),y&2048&&Eh(r.alternate,r);break;default:ei(i,r,a,c)}}function Oo(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,S=r,I=a,P=c,Y=S.flags;switch(S.tag){case 0:case 11:case 15:Oo(_,S,I,P,y),ml(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?Oo(_,S,I,P,y):yl(_,S):(W._visibility|=2,Oo(_,S,I,P,y)),y&&Y&2048&&Th(S.alternate,S);break;case 24:Oo(_,S,I,P,y),y&&Y&2048&&Eh(S.alternate,S);break;default:Oo(_,S,I,P,y)}r=r.sibling}}function yl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:yl(a,c),y&2048&&Th(c.alternate,c);break;case 24:yl(a,c),y&2048&&Eh(c.alternate,c);break;default:yl(a,c)}r=r.sibling}}var _l=8192;function qo(i,r,a){if(i.subtreeFlags&_l)for(i=i.child;i!==null;)l_(i,r,a),i=i.sibling}function l_(i,r,a){switch(i.tag){case 26:qo(i,r,a),i.flags&_l&&i.memoizedState!==null&&jI(a,jn,i.memoizedState,i.memoizedProps);break;case 5:qo(i,r,a);break;case 3:case 4:var c=jn;jn=Pc(i.stateNode.containerInfo),qo(i,r,a),jn=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=_l,_l=16777216,qo(i,r,a),_l=c):qo(i,r,a));break;default:qo(i,r,a)}}function u_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function vl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Bt=c,f_(c,i)}u_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)c_(i),i=i.sibling}function c_(i){switch(i.tag){case 0:case 11:case 15:vl(i),i.flags&2048&&Ps(9,i,i.return);break;case 3:vl(i);break;case 12:vl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Tc(i)):vl(i);break;default:vl(i)}}function Tc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Bt=c,f_(c,i)}u_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ps(8,r,r.return),Tc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(r));break;default:Tc(r)}i=i.sibling}}function f_(i,r){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Ps(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:nl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Bt=c;else e:for(a=i;Bt!==null;){c=Bt;var y=c.sibling,_=c.return;if(t_(c),c===a){Bt=null;break e}if(y!==null){y.return=_,Bt=y;break e}Bt=_}}}var pI={getCacheForType:function(i){var r=Jt(Nt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Jt(Nt).controller.signal}},mI=typeof WeakMap=="function"?WeakMap:Map,Je=0,st=null,De=null,Pe=0,Ze=0,An=null,Vs=!1,Fo=!1,Sh=!1,ji=0,gt=0,Us=0,zr=0,Ah=0,Cn=0,Bo=0,Tl=null,pn=null,Ch=!1,Ec=0,d_=0,Sc=1/0,Ac=null,ks=null,kt=0,Ls=null,Ho=null,es=0,Ih=0,Rh=null,h_=null,El=0,wh=null;function In(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:X.T!==null?Ph():Cu()}function p_(){if(Cn===0)if((Pe&536870912)===0||Oe){var i=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),Cn=i}else Cn=536870912;return i=En.current,i!==null&&(i.flags|=32),Cn}function mn(i,r,a){(i===st&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(Go(i,0),Os(i,Pe,Cn,!1)),_r(i,a),((Je&2)===0||i!==st)&&(i===st&&((Je&2)===0&&(zr|=a),gt===4&&Os(i,Pe,Cn,!1)),wi(i))}function m_(i,r,a){if((Je&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||zn(i,r),y=c?_I(i,r):bh(i,r,!0),_=c;do{if(y===0){Fo&&!c&&Os(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!gI(a)){y=bh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var I=i;y=Tl;var P=I.current.memoizedState.isDehydrated;if(P&&(Go(I,S).flags|=256),S=bh(I,S,!1),S!==2){if(Sh&&!P){I.errorRecoveryDisabledLanes|=_,zr|=_,y=4;break e}_=pn,pn=y,_!==null&&(pn===null?pn=_:pn.push.apply(pn,_))}y=S}if(_=!1,y!==2)continue}}if(y===1){Go(i,0),Os(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Os(c,r,Cn,!Vs);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Ec+300-on(),10<y)){if(Os(c,r,Cn,!Vs),ui(c,0,!0)!==0)break e;es=r,c.timeoutHandle=K_(g_.bind(null,c,a,pn,Ac,Ch,r,Cn,zr,Bo,Vs,_,"Throttled",-0,0),y);break e}g_(c,a,pn,Ac,Ch,r,Cn,zr,Bo,Vs,_,null,-0,0)}}break}while(!0);wi(i)}function g_(i,r,a,c,y,_,S,I,P,Y,W,te,K,Q){if(i.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},l_(r,_,te);var pe=(_&62914560)===_?Ec-on():(_&4194048)===_?d_-on():0;if(pe=eR(te,pe),pe!==null){es=_,i.cancelPendingCommit=pe(C_.bind(null,i,r,_,a,c,y,S,I,P,W,te,null,K,Q)),Os(i,_,S,!Y);return}}C_(i,r,_,a,c,y,S,I,P)}function gI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!vn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Os(i,r,a,c){r&=~Ah,r&=~zr,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-yt(y),S=1<<_;c[_]=-1,y&=~S}a!==0&&vr(i,a,r)}function Cc(){return(Je&6)===0?(Sl(0),!1):!0}function Nh(){if(De!==null){if(Ze===0)var i=De.return;else i=De,Gi=Ur=null,zd(i),Po=null,sl=0,i=De;for(;i!==null;)Jy(i.alternate,i),i=i.return;De=null}}function Go(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,kI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),es=0,Nh(),st=i,De=a=Bi(i.current,null),Pe=r,Ze=0,An=null,Vs=!1,Fo=zn(i,r),Sh=!1,Bo=Cn=Ah=zr=Us=gt=0,pn=Tl=null,Ch=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-yt(c),_=1<<y;r|=i[y],c&=~_}return ji=r,Yu(),a}function y_(i,r){Ne=null,X.H=dl,r===xo||r===ju?(r=Pg(),Ze=3):r===xd?(r=Pg(),Ze=4):Ze=r===oh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,An=r,De===null&&(gt=1,hc(i,xn(r,i.current)))}function __(){var i=En.current;return i===null?!0:(Pe&4194048)===Pe?kn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===kn:!1}function v_(){var i=X.H;return X.H=dl,i===null?dl:i}function T_(){var i=X.A;return X.A=pI,i}function Ic(){gt=4,Vs||(Pe&4194048)!==Pe&&En.current!==null||(Fo=!0),(Us&134217727)===0&&(zr&134217727)===0||st===null||Os(st,Pe,Cn,!1)}function bh(i,r,a){var c=Je;Je|=2;var y=v_(),_=T_();(st!==i||Pe!==r)&&(Ac=null,Go(i,r)),r=!1;var S=gt;e:do try{if(Ze!==0&&De!==null){var I=De,P=An;switch(Ze){case 8:Nh(),S=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(r=!0);var Y=Ze;if(Ze=0,An=null,zo(i,I,P,Y),a&&Fo){S=0;break e}break;default:Y=Ze,Ze=0,An=null,zo(i,I,P,Y)}}yI(),S=gt;break}catch(W){y_(i,W)}while(!0);return r&&i.shellSuspendCounter++,Gi=Ur=null,Je=c,X.H=y,X.A=_,De===null&&(st=null,Pe=0,Yu()),S}function yI(){for(;De!==null;)E_(De)}function _I(i,r){var a=Je;Je|=2;var c=v_(),y=T_();st!==i||Pe!==r?(Ac=null,Sc=on()+500,Go(i,r)):Fo=zn(i,r);e:do try{if(Ze!==0&&De!==null){r=De;var _=An;t:switch(Ze){case 1:Ze=0,An=null,zo(i,r,_,1);break;case 2:case 9:if(Dg(_)){Ze=0,An=null,S_(r);break}r=function(){Ze!==2&&Ze!==9||st!==i||(Ze=7),wi(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Dg(_)?(Ze=0,An=null,S_(r)):(Ze=0,An=null,zo(i,r,_,7));break;case 5:var S=null;switch(De.tag){case 26:S=De.memoizedState;case 5:case 27:var I=De;if(S?av(S):I.stateNode.complete){Ze=0,An=null;var P=I.sibling;if(P!==null)De=P;else{var Y=I.return;Y!==null?(De=Y,Rc(Y)):De=null}break t}}Ze=0,An=null,zo(i,r,_,5);break;case 6:Ze=0,An=null,zo(i,r,_,6);break;case 8:Nh(),gt=6;break e;default:throw Error(s(462))}}vI();break}catch(W){y_(i,W)}while(!0);return Gi=Ur=null,X.H=c,X.A=y,Je=a,De!==null?0:(st=null,Pe=0,Yu(),gt)}function vI(){for(;De!==null&&!rd();)E_(De)}function E_(i){var r=Yy(i.alternate,i,ji);i.memoizedProps=i.pendingProps,r===null?Rc(i):De=r}function S_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=qy(a,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=qy(a,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:zd(r);default:Jy(a,r),r=De=Tg(r,ji),r=Yy(a,r,ji)}i.memoizedProps=i.pendingProps,r===null?Rc(i):De=r}function zo(i,r,a,c){Gi=Ur=null,zd(r),Po=null,sl=0;var y=r.return;try{if(aI(i,y,r,a,Pe)){gt=1,hc(i,xn(a,i.current)),De=null;return}}catch(_){if(y!==null)throw De=y,_;gt=1,hc(i,xn(a,i.current)),De=null;return}r.flags&32768?(Oe||c===1?i=!0:Fo||(Pe&536870912)!==0?i=!1:(Vs=i=!0,(c===2||c===9||c===3||c===6)&&(c=En.current,c!==null&&c.tag===13&&(c.flags|=16384))),A_(r,i)):Rc(r)}function Rc(i){var r=i;do{if((r.flags&32768)!==0){A_(r,Vs);return}i=r.return;var a=cI(r.alternate,r,ji);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=i}while(r!==null);gt===0&&(gt=5)}function A_(i,r){do{var a=fI(i.alternate,i);if(a!==null){a.flags&=32767,De=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){De=i;return}De=i=a}while(i!==null);gt=6,De=null}function C_(i,r,a,c,y,_,S,I,P){i.cancelPendingCommit=null;do wc();while(kt!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=yd,ld(i,a,_,S,I,P),i===st&&(De=st=null,Pe=0),Ho=r,Ls=i,es=a,Ih=_,Rh=y,h_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,AI(ps,function(){return b_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=le.p,le.p=2,S=Je,Je|=4;try{dI(i,r,a)}finally{Je=S,le.p=y,X.T=c}}kt=1,I_(),R_(),w_()}}function I_(){if(kt===1){kt=0;var i=Ls,r=Ho,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=le.p;le.p=2;var y=Je;Je|=4;try{r_(r,i);var _=Bh,S=fg(i.containerInfo),I=_.focusedElem,P=_.selectionRange;if(S!==I&&I&&I.ownerDocument&&cg(I.ownerDocument.documentElement,I)){if(P!==null&&dd(I)){var Y=P.start,W=P.end;if(W===void 0&&(W=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(W,I.value.length);else{var te=I.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var Q=K.getSelection(),pe=I.textContent.length,Te=Math.min(P.start,pe),it=P.end===void 0?Te:Math.min(P.end,pe);!Q.extend&&Te>it&&(S=it,it=Te,Te=S);var B=ug(I,Te),L=ug(I,it);if(B&&L&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var z=te.createRange();z.setStart(B.node,B.offset),Q.removeAllRanges(),Te>it?(Q.addRange(z),Q.extend(L.node,L.offset)):(z.setEnd(L.node,L.offset),Q.addRange(z))}}}}for(te=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var ee=te[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}qc=!!Fh,Bh=Fh=null}finally{Je=y,le.p=c,X.T=a}}i.current=r,kt=2}}function R_(){if(kt===2){kt=0;var i=Ls,r=Ho,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=le.p;le.p=2;var y=Je;Je|=4;try{e_(i,r.alternate,r)}finally{Je=y,le.p=c,X.T=a}}kt=3}}function w_(){if(kt===4||kt===3){kt=0,yu();var i=Ls,r=Ho,a=es,c=h_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?kt=5:(kt=0,Ho=Ls=null,N_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ks=null),Li(a),r=r.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Gn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=X.T,y=le.p,le.p=2,X.T=null;try{for(var _=i.onRecoverableError,S=0;S<c.length;S++){var I=c[S];_(I.value,{componentStack:I.stack})}}finally{X.T=r,le.p=y}}(es&3)!==0&&wc(),wi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===wh?El++:(El=0,wh=i):El=0,Sl(0)}}function N_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,nl(r)))}function wc(){return I_(),R_(),w_(),b_()}function b_(){if(kt!==5)return!1;var i=Ls,r=Ih;Ih=0;var a=Li(es),c=X.T,y=le.p;try{le.p=32>a?32:a,X.T=null,a=Rh,Rh=null;var _=Ls,S=es;if(kt=0,Ho=Ls=null,es=0,(Je&6)!==0)throw Error(s(331));var I=Je;if(Je|=4,c_(_.current),a_(_,_.current,S,a),Je=I,Sl(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Gn,_)}catch{}return!0}finally{le.p=y,X.T=c,N_(i,r)}}function M_(i,r,a){r=xn(a,r),r=rh(i.stateNode,r,2),i=Ms(i,r,2),i!==null&&(_r(i,2),wi(i))}function je(i,r,a){if(i.tag===3)M_(i,i,a);else for(;r!==null;){if(r.tag===3){M_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ks===null||!ks.has(c))){i=xn(a,i),a=Dy(2),c=Ms(r,a,2),c!==null&&(xy(a,c,r,i),_r(c,2),wi(c));break}}r=r.return}}function Mh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new mI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Sh=!0,y.add(a),i=TI.bind(null,i,r,a),r.then(i,i))}function TI(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,st===i&&(Pe&a)===a&&(gt===4||gt===3&&(Pe&62914560)===Pe&&300>on()-Ec?(Je&2)===0&&Go(i,0):Ah|=a,Bo===Pe&&(Bo=0)),wi(i)}function D_(i,r){r===0&&(r=Au()),i=xr(i,r),i!==null&&(_r(i,r),wi(i))}function EI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),D_(i,a)}function SI(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),D_(i,a)}function AI(i,r){return Ut(i,r)}var Nc=null,Yo=null,Dh=!1,bc=!1,xh=!1,qs=0;function wi(i){i!==Yo&&i.next===null&&(Yo===null?Nc=Yo=i:Yo=Yo.next=i),bc=!0,Dh||(Dh=!0,II())}function Sl(i,r){if(!xh&&bc){xh=!0;do for(var a=!1,c=Nc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var S=c.suspendedLanes,I=c.pingedLanes;_=(1<<31-yt(42|i)+1)-1,_&=y&~(S&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,U_(c,_))}else _=Pe,_=ui(c,c===st?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||zn(c,_)||(a=!0,U_(c,_));c=c.next}while(a);xh=!1}}function CI(){x_()}function x_(){bc=Dh=!1;var i=0;qs!==0&&UI()&&(i=qs);for(var r=on(),a=null,c=Nc;c!==null;){var y=c.next,_=P_(c,r);_===0?(c.next=null,a===null?Nc=y:a.next=y,y===null&&(Yo=a)):(a=c,(i!==0||(_&3)!==0)&&(bc=!0)),c=y}kt!==0&&kt!==5||Sl(i),qs!==0&&(qs=0)}function P_(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-yt(_),I=1<<S,P=y[S];P===-1?((I&a)===0||(I&c)!==0)&&(y[S]=ad(I,r)):P<=r&&(i.expiredLanes|=I),_&=~I}if(r=st,a=Pe,a=ui(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&hs(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||zn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&hs(c),Li(a)){case 2:case 8:a=xa;break;case 32:a=ps;break;case 268435456:a=_u;break;default:a=ps}return c=V_.bind(null,i),a=Ut(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&hs(c),i.callbackPriority=2,i.callbackNode=null,2}function V_(i,r){if(kt!==0&&kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(wc()&&i.callbackNode!==a)return null;var c=Pe;return c=ui(i,i===st?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(m_(i,c,r),P_(i,on()),i.callbackNode!=null&&i.callbackNode===a?V_.bind(null,i):null)}function U_(i,r){if(wc())return null;m_(i,r,!0)}function II(){LI(function(){(Je&6)!==0?Ut(Da,CI):x_()})}function Ph(){if(qs===0){var i=Mo;i===0&&(i=ai,ai<<=1,(ai&261888)===0&&(ai=256)),qs=i}return qs}function k_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:mo(""+i)}function L_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function RI(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=k_((y[qt]||null).action),S=c.submitter;S&&(r=(r=S[qt]||null)?k_(r.formAction):S.getAttribute("formAction"),r!==null&&(_=r,S=null));var I=new Ti("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(qs!==0){var P=S?L_(y,S):new FormData(y);jd(a,{pending:!0,data:P,method:y.method,action:_},null,P)}}else typeof _=="function"&&(I.preventDefault(),P=S?L_(y,S):new FormData(y),jd(a,{pending:!0,data:P,method:y.method,action:_},_,P))},currentTarget:y}]})}}for(var Vh=0;Vh<gd.length;Vh++){var Uh=gd[Vh],wI=Uh.toLowerCase(),NI=Uh[0].toUpperCase()+Uh.slice(1);Zn(wI,"on"+NI)}Zn(pg,"onAnimationEnd"),Zn(mg,"onAnimationIteration"),Zn(gg,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(zC,"onTransitionRun"),Zn(YC,"onTransitionStart"),Zn(KC,"onTransitionCancel"),Zn(yg,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function O_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var S=c.length-1;0<=S;S--){var I=c[S],P=I.instance,Y=I.currentTarget;if(I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(W){zu(W)}y.currentTarget=null,_=P}else for(S=0;S<c.length;S++){if(I=c[S],P=I.instance,Y=I.currentTarget,I=I.listener,P!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=Y;try{_(y)}catch(W){zu(W)}y.currentTarget=null,_=P}}}}function xe(i,r){var a=r[uo];a===void 0&&(a=r[uo]=new Set);var c=i+"__bubble";a.has(c)||(q_(r,i,2,!1),a.add(c))}function kh(i,r,a){var c=0;r&&(c|=4),q_(a,i,c,r)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function Lh(i){if(!i[Mc]){i[Mc]=!0,Ua.forEach(function(a){a!=="selectionchange"&&(bI.has(a)||kh(a,!1,i),kh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Mc]||(r[Mc]=!0,kh("selectionchange",!1,r))}}function q_(i,r,a,c){switch(pv(r)){case 2:var y=iR;break;case 8:y=sR;break;default:y=Zh}a=y.bind(null,r,a,i),y=void 0,!Cr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Oh(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var I=c.stateNode.containerInfo;if(I===y)break;if(S===4)for(S=c.return;S!==null;){var P=S.tag;if((P===3||P===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;I!==null;){if(S=hi(I),S===null)return;if(P=S.tag,P===5||P===6||P===26||P===27){c=_=S;continue e}I=I.parentNode}}c=c.return}Ts(function(){var Y=_,W=Nn(a),te=[];e:{var K=_g.get(i);if(K!==void 0){var Q=Ti,pe=i;switch(i){case"keypress":if(Rr(a)===0)break e;case"keydown":case"keyup":Q=Bu;break;case"focusin":pe="focus",Q=Nr;break;case"focusout":pe="blur",Q=Nr;break;case"beforeblur":case"afterblur":Q=Nr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=T;break;case pg:case mg:case gg:Q=Vu;break;case yg:Q=R;break;case"scroll":case"scrollend":Q=Ja;break;case"wheel":Q=J;break;case"copy":case"cut":case"paste":Q=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Fi;break;case"toggle":case"beforetoggle":Q=we}var Te=(r&4)!==0,it=!Te&&(i==="scroll"||i==="scrollend"),B=Te?K!==null?K+"Capture":null:K;Te=[];for(var L=Y,z;L!==null;){var ee=L;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||B===null||(ee=Qn(L,B),ee!=null&&Te.push(Cl(L,ee,z))),it)break;L=L.return}0<Te.length&&(K=new Q(K,pe,null,a,W),te.push({event:K,listeners:Te}))}}if((r&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",K&&a!==za&&(pe=a.relatedTarget||a.fromElement)&&(hi(pe)||pe[fi]))break e;if((Q||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(pe=a.relatedTarget||a.toElement,Q=Y,pe=pe?hi(pe):null,pe!==null&&(it=l(pe),Te=pe.tag,pe!==it||Te!==5&&Te!==27&&Te!==6)&&(pe=null)):(Q=null,pe=Y),Q!==pe)){if(Te=Qa,ee="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Fi,ee="onPointerLeave",B="onPointerEnter",L="pointer"),it=Q==null?K:yn(Q),z=pe==null?K:yn(pe),K=new Te(ee,L+"leave",Q,a,W),K.target=it,K.relatedTarget=z,ee=null,hi(W)===Y&&(Te=new Te(B,L+"enter",pe,a,W),Te.target=z,Te.relatedTarget=it,ee=Te),it=ee,Q&&pe)t:{for(Te=MI,B=Q,L=pe,z=0,ee=B;ee;ee=Te(ee))z++;ee=0;for(var ye=L;ye;ye=Te(ye))ee++;for(;0<z-ee;)B=Te(B),z--;for(;0<ee-z;)L=Te(L),ee--;for(;z--;){if(B===L||L!==null&&B===L.alternate){Te=B;break t}B=Te(B),L=Te(L)}Te=null}else Te=null;Q!==null&&F_(te,K,Q,Te,!1),pe!==null&&it!==null&&F_(te,it,pe,Te,!0)}}e:{if(K=Y?yn(Y):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Ge=ig;else if(tg(K))if(sg)Ge=BC;else{Ge=qC;var me=OC}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&po(Y.elementType)&&(Ge=ig):Ge=FC;if(Ge&&(Ge=Ge(i,Y))){ng(te,Ge,a,W);break e}me&&me(i,K,Y),i==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Ba(K,"number",K.value)}switch(me=Y?yn(Y):window,i){case"focusin":(tg(me)||me.contentEditable==="true")&&(So=me,hd=Y,ja=null);break;case"focusout":ja=hd=So=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,dg(te,a,W);break;case"selectionchange":if(GC)break;case"keydown":case"keyup":dg(te,a,W)}var Me;if(Ke)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Eo?br(i,a)&&(Ve="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ai&&a.locale!=="ko"&&(Eo||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Eo&&(Me=Ka()):(vi=W,Ya="value"in vi?vi.value:vi.textContent,Eo=!0)),me=Dc(Y,Ve),0<me.length&&(Ve=new Si(Ve,i,null,a,W),te.push({event:Ve,listeners:me}),Me?Ve.data=Me:(Me=To(a),Me!==null&&(Ve.data=Me)))),(Me=Mn?VC(i,a):UC(i,a))&&(Ve=Dc(Y,"onBeforeInput"),0<Ve.length&&(me=new Si("onBeforeInput","beforeinput",null,a,W),te.push({event:me,listeners:Ve}),me.data=Me)),RI(te,i,Y,a,W)}O_(te,r)})}function Cl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Dc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Qn(i,a),y!=null&&c.unshift(Cl(i,y,_)),y=Qn(i,r),y!=null&&c.push(Cl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function MI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function F_(i,r,a,c,y){for(var _=r._reactName,S=[];a!==null&&a!==c;){var I=a,P=I.alternate,Y=I.stateNode;if(I=I.tag,P!==null&&P===c)break;I!==5&&I!==26&&I!==27||Y===null||(P=Y,y?(Y=Qn(a,_),Y!=null&&S.unshift(Cl(a,Y,P))):y||(Y=Qn(a,_),Y!=null&&S.push(Cl(a,Y,P)))),a=a.return}S.length!==0&&i.push({event:r,listeners:S})}var DI=/\r\n?/g,xI=/\u0000|\uFFFD/g;function B_(i){return(typeof i=="string"?i:""+i).replace(DI,`
`).replace(xI,"")}function H_(i,r){return r=B_(r),B_(i)===r}function nt(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||cn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&cn(i,""+c);break;case"className":_n(i,"class",c);break;case"tabIndex":_n(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(i,a,c);break;case"style":Ga(i,c,_);break;case"data":if(r!=="object"){_n(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=mo(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&nt(i,r,"name",y.name,y,null),nt(i,r,"formEncType",y.formEncType,y,null),nt(i,r,"formMethod",y.formMethod,y,null),nt(i,r,"formTarget",y.formTarget,y,null)):(nt(i,r,"encType",y.encType,y,null),nt(i,r,"method",y.method,y,null),nt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=mo(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Jn);break;case"onScroll":c!=null&&xe("scroll",i);break;case"onScrollEnd":c!=null&&xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=mo(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":xe("beforetoggle",i),xe("toggle",i),fo(i,"popover",c);break;case"xlinkActuate":wt(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wt(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wt(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wt(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wt(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wt(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wt(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":fo(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Du.get(a)||a,fo(i,a,c))}}function qh(i,r,a,c,y,_){switch(a){case"style":Ga(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?cn(i,c):(typeof c=="number"||typeof c=="bigint")&&cn(i,""+c);break;case"onScroll":c!=null&&xe("scroll",i);break;case"onScrollEnd":c!=null&&xe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ka.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[qt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):fo(i,a,c)}}}function $t(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",i),xe("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,_,S,a,null)}}y&&nt(i,r,"srcSet",a.srcSet,a,null),c&&nt(i,r,"src",a.src,a,null);return;case"input":xe("invalid",i);var I=_=S=y=null,P=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var W=a[c];if(W!=null)switch(c){case"name":y=W;break;case"type":S=W;break;case"checked":P=W;break;case"defaultChecked":Y=W;break;case"value":_=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:nt(i,r,c,W,a,null)}}Nu(i,_,I,P,Y,S,y,!1);return;case"select":xe("invalid",i),c=S=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":S=I;break;case"multiple":c=I;default:nt(i,r,y,I,a,null)}r=_,a=S,i.multiple=!!c,r!=null?gs(i,!!c,r,!1):a!=null&&gs(i,!!c,a,!0);return;case"textarea":xe("invalid",i),_=y=c=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":c=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:nt(i,r,S,I,a,null)}ys(i,c,y,_);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(i,r,P,c,a,null)}return;case"dialog":xe("beforetoggle",i),xe("toggle",i),xe("cancel",i),xe("close",i);break;case"iframe":case"object":xe("load",i);break;case"video":case"audio":for(c=0;c<Al.length;c++)xe(Al[c],i);break;case"image":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"embed":case"source":case"link":xe("error",i),xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,Y,c,a,null)}return;default:if(po(r)){for(W in a)a.hasOwnProperty(W)&&(c=a[W],c!==void 0&&qh(i,r,W,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&nt(i,r,I,c,a,null))}function PI(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,S=null,I=null,P=null,Y=null,W=null;for(Q in a){var te=a[Q];if(a.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=te;default:c.hasOwnProperty(Q)||nt(i,r,Q,null,c,te)}}for(var K in c){var Q=c[K];if(te=a[K],c.hasOwnProperty(K)&&(Q!=null||te!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":W=Q;break;case"value":S=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==te&&nt(i,r,K,Q,c,te)}}ho(i,S,I,P,Y,W,_,y);return;case"select":Q=S=I=K=null;for(_ in a)if(P=a[_],a.hasOwnProperty(_)&&P!=null)switch(_){case"value":break;case"multiple":Q=P;default:c.hasOwnProperty(_)||nt(i,r,_,null,c,P)}for(y in c)if(_=c[y],P=a[y],c.hasOwnProperty(y)&&(_!=null||P!=null))switch(y){case"value":K=_;break;case"defaultValue":I=_;break;case"multiple":S=_;default:_!==P&&nt(i,r,y,_,c,P)}r=I,a=S,c=Q,K!=null?gs(i,!!a,K,!1):!!c!=!!a&&(r!=null?gs(i,!!a,r,!0):gs(i,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(i,r,I,null,c,y)}for(S in c)if(y=c[S],_=a[S],c.hasOwnProperty(S)&&(y!=null||_!=null))switch(S){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&nt(i,r,S,y,c,_)}bu(i,K,Q);return;case"option":for(var pe in a)if(K=a[pe],a.hasOwnProperty(pe)&&K!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:nt(i,r,pe,null,c,K)}for(P in c)if(K=c[P],Q=a[P],c.hasOwnProperty(P)&&K!==Q&&(K!=null||Q!=null))switch(P){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(i,r,P,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!c.hasOwnProperty(Te)&&nt(i,r,Te,null,c,K);for(Y in c)if(K=c[Y],Q=a[Y],c.hasOwnProperty(Y)&&K!==Q&&(K!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:nt(i,r,Y,K,c,Q)}return;default:if(po(r)){for(var it in a)K=a[it],a.hasOwnProperty(it)&&K!==void 0&&!c.hasOwnProperty(it)&&qh(i,r,it,void 0,c,K);for(W in c)K=c[W],Q=a[W],!c.hasOwnProperty(W)||K===Q||K===void 0&&Q===void 0||qh(i,r,W,K,c,Q);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&nt(i,r,B,null,c,K);for(te in c)K=c[te],Q=a[te],!c.hasOwnProperty(te)||K===Q||K==null&&Q==null||nt(i,r,te,K,c,Q)}function G_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,S=y.initiatorType,I=y.duration;if(_&&I&&G_(S)){for(S=0,I=y.responseEnd,c+=1;c<a.length;c++){var P=a[c],Y=P.startTime;if(Y>I)break;var W=P.transferSize,te=P.initiatorType;W&&G_(te)&&(P=P.responseEnd,S+=W*(P<I?1:(I-Y)/(P-Y)))}if(--c,r+=8*(_+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Fh=null,Bh=null;function xc(i){return i.nodeType===9?i:i.ownerDocument}function z_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Hh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gh=null;function UI(){var i=window.event;return i&&i.type==="popstate"?i===Gh?!1:(Gh=i,!0):(Gh=null,!1)}var K_=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,J_=typeof Promise=="function"?Promise:void 0,LI=typeof queueMicrotask=="function"?queueMicrotask:typeof J_<"u"?function(i){return J_.resolve(null).then(i).catch(OI)}:K_;function OI(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function Q_(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),$o(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Il(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Il(a);for(var _=a.firstChild;_;){var S=_.nextSibling,I=_.nodeName;_[di]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&Il(i.ownerDocument.body);a=y}while(a);$o(r)}function $_(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function zh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zh(a),co(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function qI(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[di])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Ln(i.nextSibling),i===null)break}return null}function FI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ln(i.nextSibling),i===null))return null;return i}function X_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ln(i.nextSibling),i===null))return null;return i}function Yh(i){return i.data==="$?"||i.data==="$~"}function Kh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function BI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Ln(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Jh=null;function W_(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Ln(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Z_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function j_(i,r,a){switch(r=xc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Il(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);co(i)}var On=new Map,ev=new Set;function Pc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ts=le.d;le.d={f:HI,r:GI,D:zI,C:YI,L:KI,m:JI,X:$I,S:QI,M:XI};function HI(){var i=ts.f(),r=Cc();return i||r}function GI(i){var r=wn(i);r!==null&&r.tag===5&&r.type==="form"?yy(r):ts.r(i)}var Ko=typeof document>"u"?null:document;function tv(i,r,a){var c=Ko;if(c&&typeof r=="string"&&r){var y=un(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),ev.has(y)||(ev.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),$t(r,"link",i),Rt(r),c.head.appendChild(r)))}}function zI(i){ts.D(i),tv("dns-prefetch",i,null)}function YI(i,r){ts.C(i,r),tv("preconnect",i,r)}function KI(i,r,a){ts.L(i,r,a);var c=Ko;if(c&&i&&r){var y='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+un(a.imageSizes)+'"]')):y+='[href="'+un(i)+'"]';var _=y;switch(r){case"style":_=Jo(i);break;case"script":_=Qo(i)}On.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),On.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Rl(_))||r==="script"&&c.querySelector(wl(_))||(r=c.createElement("link"),$t(r,"link",i),Rt(r),c.head.appendChild(r)))}}function JI(i,r){ts.m(i,r);var a=Ko;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+un(c)+'"][href="'+un(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Qo(i)}if(!On.has(_)&&(i=E({rel:"modulepreload",href:i},r),On.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(_)))return}c=a.createElement("link"),$t(c,"link",i),Rt(c),a.head.appendChild(c)}}}function QI(i,r,a){ts.S(i,r,a);var c=Ko;if(c&&i){var y=pi(c).hoistableStyles,_=Jo(i);r=r||"default";var S=y.get(_);if(!S){var I={loading:0,preload:null};if(S=c.querySelector(Rl(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=On.get(_))&&Qh(i,a);var P=S=c.createElement("link");Rt(P),$t(P,"link",i),P._p=new Promise(function(Y,W){P.onload=Y,P.onerror=W}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Vc(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:I},y.set(_,S)}}}function $I(i,r){ts.X(i,r);var a=Ko;if(a&&i){var c=pi(a).hoistableScripts,y=Qo(i),_=c.get(y);_||(_=a.querySelector(wl(y)),_||(i=E({src:i,async:!0},r),(r=On.get(y))&&$h(i,r),_=a.createElement("script"),Rt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function XI(i,r){ts.M(i,r);var a=Ko;if(a&&i){var c=pi(a).hoistableScripts,y=Qo(i),_=c.get(y);_||(_=a.querySelector(wl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=On.get(y))&&$h(i,r),_=a.createElement("script"),Rt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function nv(i,r,a,c){var y=(y=be.current)?Pc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Jo(a.href),a=pi(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Jo(a.href);var _=pi(y).hoistableStyles,S=_.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=y.querySelector(Rl(i)))&&!_._p&&(S.instance=_,S.state.loading=5),On.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(i,a),_||WI(y,i,a,S.state))),r&&c===null)throw Error(s(528,""));return S}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Qo(a),a=pi(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Jo(i){return'href="'+un(i)+'"'}function Rl(i){return'link[rel="stylesheet"]['+i+"]"}function iv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function WI(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),$t(r,"link",a),Rt(r),i.head.appendChild(r))}function Qo(i){return'[src="'+un(i)+'"]'}function wl(i){return"script[async]"+i}function sv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+un(a.href)+'"]');if(c)return r.instance=c,Rt(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Rt(c),$t(c,"style",y),Vc(c,a.precedence,i),r.instance=c;case"stylesheet":y=Jo(a.href);var _=i.querySelector(Rl(y));if(_)return r.state.loading|=4,r.instance=_,Rt(_),_;c=iv(a),(y=On.get(y))&&Qh(c,y),_=(i.ownerDocument||i).createElement("link"),Rt(_);var S=_;return S._p=new Promise(function(I,P){S.onload=I,S.onerror=P}),$t(_,"link",c),r.state.loading|=4,Vc(_,a.precedence,i),r.instance=_;case"script":return _=Qo(a.src),(y=i.querySelector(wl(_)))?(r.instance=y,Rt(y),y):(c=a,(y=On.get(_))&&(c=E({},a),$h(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Rt(y),$t(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Vc(c,a.precedence,i));return r.instance}function Vc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,S=0;S<c.length;S++){var I=c[S];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Qh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function $h(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Uc=null;function rv(i,r,a){if(Uc===null){var c=new Map,y=Uc=new Map;y.set(a,c)}else y=Uc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[di]||_[It]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(r)||"";S=i+S;var I=c.get(S);I?I.push(_):c.set(S,[_])}}return c}function ov(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function ZI(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function av(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function jI(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Jo(c.href),_=r.querySelector(Rl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=kc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Rt(_);return}_=r.ownerDocument||r,c=iv(c),(y=On.get(y))&&Qh(c,y),_=_.createElement("link"),Rt(_);var S=_;S._p=new Promise(function(I,P){S.onload=I,S.onerror=P}),$t(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=kc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Xh=0;function eR(i,r){return i.stylesheets&&i.count===0&&Oc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Oc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&Xh===0&&(Xh=62500*VI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Oc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Xh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Lc=null;function Oc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Lc=new Map,r.forEach(tR,i),Lc=null,kc.call(i))}function tR(i,r){if(!(r.state.loading&4)){var a=Lc.get(i);if(a)var c=a.get(null);else{a=new Map,Lc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var S=y[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}y=r.instance,S=y.getAttribute("data-precedence"),_=a.get(S)||c,_===c&&a.set(null,y),a.set(S,y),this.count++,c=kc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Nl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function nR(i,r,a,c,y,_,S,I,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function lv(i,r,a,c,y,_,S,I,P,Y,W,te){return i=new nR(i,r,a,S,P,Y,W,te,I),r=1,_===!0&&(r|=24),_=Tn(3,null,null,r),i.current=_,_.stateNode=i,r=bd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},Pd(_),i}function uv(i){return i?(i=Io,i):Io}function cv(i,r,a,c,y,_){y=uv(y),c.context===null?c.context=y:c.pendingContext=y,c=bs(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Ms(i,c,r),a!==null&&(mn(a,i,r),ol(a,i,r))}function fv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function Wh(i,r){fv(i,r),(i=i.alternate)&&fv(i,r)}function dv(i){if(i.tag===13||i.tag===31){var r=xr(i,67108864);r!==null&&mn(r,i,67108864),Wh(i,67108864)}}function hv(i){if(i.tag===13||i.tag===31){var r=In();r=Tr(r);var a=xr(i,r);a!==null&&mn(a,i,r),Wh(i,r)}}var qc=!0;function iR(i,r,a,c){var y=X.T;X.T=null;var _=le.p;try{le.p=2,Zh(i,r,a,c)}finally{le.p=_,X.T=y}}function sR(i,r,a,c){var y=X.T;X.T=null;var _=le.p;try{le.p=8,Zh(i,r,a,c)}finally{le.p=_,X.T=y}}function Zh(i,r,a,c){if(qc){var y=jh(c);if(y===null)Oh(i,r,c,Fc,a),mv(i,c);else if(oR(y,i,r,a,c))c.stopPropagation();else if(mv(i,c),r&4&&-1<rR.indexOf(i)){for(;y!==null;){var _=wn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=li(_.pendingLanes);if(S!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var P=1<<31-yt(S);I.entanglements[1]|=P,S&=~P}wi(_),(Je&6)===0&&(Sc=on()+500,Sl(0))}}break;case 31:case 13:I=xr(_,2),I!==null&&mn(I,_,2),Cc(),Wh(_,2)}if(_=jh(c),_===null&&Oh(i,r,c,Fc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else Oh(i,r,c,null,a)}}function jh(i){return i=Nn(i),ep(i)}var Fc=null;function ep(i){if(Fc=null,i=hi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Fc=i,null}function pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case Da:return 2;case xa:return 8;case ps:case od:return 32;case _u:return 268435456;default:return 32}default:return 32}}var tp=!1,Bs=null,Hs=null,Gs=null,bl=new Map,Ml=new Map,zs=[],rR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mv(i,r){switch(i){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":bl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Dl(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=wn(r),r!==null&&dv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function oR(i,r,a,c,y){switch(r){case"focusin":return Bs=Dl(Bs,i,r,a,c,y),!0;case"dragenter":return Hs=Dl(Hs,i,r,a,c,y),!0;case"mouseover":return Gs=Dl(Gs,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return bl.set(_,Dl(bl.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ml.set(_,Dl(Ml.get(_)||null,i,r,a,c,y)),!0}return!1}function gv(i){var r=hi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Yn(i.priority,function(){hv(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Yn(i.priority,function(){hv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=jh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);za=c,a.target.dispatchEvent(c),za=null}else return r=wn(a),r!==null&&dv(r),i.blockedOn=a,!1;r.shift()}return!0}function yv(i,r,a){Bc(i)&&a.delete(r)}function aR(){tp=!1,Bs!==null&&Bc(Bs)&&(Bs=null),Hs!==null&&Bc(Hs)&&(Hs=null),Gs!==null&&Bc(Gs)&&(Gs=null),bl.forEach(yv),Ml.forEach(yv)}function Hc(i,r){i.blockedOn===r&&(i.blockedOn=null,tp||(tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aR)))}var Gc=null;function _v(i){Gc!==i&&(Gc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gc===i&&(Gc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(ep(c||a)===null)continue;break}var _=wn(a);_!==null&&(i.splice(r,3),r-=3,jd(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function $o(i){function r(P){return Hc(P,i)}Bs!==null&&Hc(Bs,i),Hs!==null&&Hc(Hs,i),Gs!==null&&Hc(Gs,i),bl.forEach(r),Ml.forEach(r);for(var a=0;a<zs.length;a++){var c=zs[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<zs.length&&(a=zs[0],a.blockedOn===null);)gv(a),a.blockedOn===null&&zs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],S=y[qt]||null;if(typeof _=="function")S||_v(a);else if(S){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,S=_[qt]||null)I=S.formAction;else if(ep(y)!==null)continue}else I=S.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),_v(a)}}}function vv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function np(i){this._internalRoot=i}zc.prototype.render=np.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=In();cv(a,c,i,r,null,null)},zc.prototype.unmount=np.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;cv(i.current,2,null,i,null,null),Cc(),r[fi]=null}};function zc(i){this._internalRoot=i}zc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Cu();i={blockedOn:null,target:i,priority:r};for(var a=0;a<zs.length&&r!==0&&r<zs[a].priority;a++);zs.splice(a,0,i),a===0&&gv(i)}};var Tv=e.version;if(Tv!=="19.2.0")throw Error(s(527,Tv,"19.2.0"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var lR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Gn=Yc.inject(lR),zt=Yc}catch{}}return Pl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=wy,_=Ny,S=by;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=lv(i,1,!1,null,null,a,c,null,y,_,S,vv),i[fi]=r.current,Lh(i),new np(r)},Pl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",_=wy,S=Ny,I=by,P=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),r=lv(i,1,!0,r,a??null,c,y,P,_,S,I,vv),r.context=uv(null),a=r.current,c=In(),c=Tr(c),y=bs(c),y.callback=null,Ms(a,y,c),a=c,r.current.lanes=a,_r(r,a),wi(r),i[fi]=r.current,Lh(i),new zc(r)},Pl.version="19.2.0",Pl}var Mv;function vR(){if(Mv)return rp.exports;Mv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=_R(),rp.exports}var TR=vR();const ER=P0(TR);var Js=(n=>(n.CUSTOMER="CUSTOMER",n.ADMIN="ADMIN",n))(Js||{});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AR=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Dv=n=>{const e=AR(n);return e.charAt(0).toUpperCase()+e.slice(1)},V0=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),CR=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Be.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...d},g)=>Be.createElement("svg",{ref:g,...IR,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:V0("lucide",o),...!l&&!CR(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,v])=>Be.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(n,e)=>{const t=Be.forwardRef(({className:s,...o},l)=>Be.createElement(RR,{ref:l,iconNode:e,className:V0(`lucide-${SR(Dv(n))}`,`lucide-${n}`,s),...o}));return t.displayName=Dv(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],NR=St("bot",wR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MR=St("circle-play",bR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xv=St("database",DR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],PR=St("layout-grid",xR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],UR=St("loader-circle",VR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LR=St("log-out",kR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],qR=St("message-circle",OR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],up=St("pencil",FR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vl=St("plus",BR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],GR=St("save",HR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],YR=St("search",zR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],JR=St("send",KR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pv=St("settings",QR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],XR=St("shield-check",$R);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ZR=St("sparkles",WR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cp=St("trash-2",jR);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tw=St("user",ew);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],iw=St("video",nw);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],rw=St("volume-2",sw);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],aw=St("youtube",ow);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sm=St("x",lw),uw=()=>{};var Vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cw=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],g=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},k0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,g=o+2<n.length,m=g?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|m>>6,w=m&63;g||(w=64,u||(A=64)),s.push(t[v],t[E],t[A],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(U0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new fw;const A=l<<2|d>>4;if(s.push(A),m!==64){const w=d<<4&240|m>>2;if(s.push(w),E!==64){const H=m<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dw=function(n){const e=U0(n);return k0.encodeByteArray(e,!0)},ff=function(n){return dw(n).replace(/\./g,"")},L0=function(n){try{return k0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=()=>hw().__FIREBASE_DEFAULTS__,mw=()=>{if(typeof process>"u"||typeof Vv>"u")return;const n=Vv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&L0(n[1]);return e&&JSON.parse(e)},Uf=()=>{try{return uw()||pw()||mw()||gw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},O0=n=>{var e,t;return(t=(e=Uf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},yw=n=>{const e=O0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},q0=()=>{var n;return(n=Uf())==null?void 0:n.config},F0=n=>{var e;return(e=Uf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function B0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ff(JSON.stringify(t)),ff(JSON.stringify(u)),""].join(".")}const Hl={};function Tw(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?n.emulator.push(e):n.prod.push(e);return n}function Ew(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Uv=!1;function H0(n,e){if(typeof window>"u"||typeof document>"u"||!ya(window.location.host)||Hl[n]===e||Hl[n]||Uv)return;Hl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=Tw().prod.length>0;function u(){const A=document.getElementById(s);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,w){A.setAttribute("width","24"),A.setAttribute("id",w),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function m(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Uv=!0,u()},A}function v(A,w){A.setAttribute("id",w),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Ew(s),w=t("text"),H=document.getElementById(w)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),$=t("preprendIcon"),j=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Z=A.element;d(Z),v(F,V);const oe=m();g(j,$),Z.append(j,H,F,oe),document.body.appendChild(Z)}l?(H.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function Aw(){var e;const n=(e=Uf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Iw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Nw(){return!Aw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Mw(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="FirebaseError";class cs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Dw,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?xw(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new cs(o,d,s)}}function xw(n,e){return n.replace(Pw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Pw=/\{\$([^}]+)}/g;function Vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(kv(l)&&kv(u)){if(!Qr(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function kv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function kl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ll(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Uw(n,e){const t=new kw(n,e);return t.subscribe.bind(t)}class kw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Lw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=fp),o.error===void 0&&(o.error=fp),o.complete===void 0&&(o.complete=fp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lw(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n){return n&&n._delegate?n._delegate:n}class $r{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new _w;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fw(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qw(n){return n===Yr?void 0:n}function Fw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ow(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const Hw={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Gw=Ue.INFO,zw={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Yw=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=zw[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rm{constructor(e){this.name=e,this._logLevel=Gw,this._logHandler=Yw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Kw=(n,e)=>e.some(t=>n instanceof t);let Lv,Ov;function Jw(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qw(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G0=new WeakMap,Ap=new WeakMap,z0=new WeakMap,dp=new WeakMap,om=new WeakMap;function $w(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(er(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&G0.set(t,n)}).catch(()=>{}),om.set(e,n),e}function Xw(n){if(Ap.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Ap.set(n,e)}let Cp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||z0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return er(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ww(n){Cp=n(Cp)}function Zw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(hp(this),e,...t);return z0.set(s,e.sort?e.sort():[e]),er(s)}:Qw().includes(n)?function(...e){return n.apply(hp(this),e),er(G0.get(this))}:function(...e){return er(n.apply(hp(this),e))}}function jw(n){return typeof n=="function"?Zw(n):(n instanceof IDBTransaction&&Xw(n),Kw(n,Jw())?new Proxy(n,Cp):n)}function er(n){if(n instanceof IDBRequest)return $w(n);if(dp.has(n))return dp.get(n);const e=jw(n);return e!==n&&(dp.set(n,e),om.set(e,n)),e}const hp=n=>om.get(n);function e1(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=er(u);return s&&u.addEventListener("upgradeneeded",g=>{s(er(u.result),g.oldVersion,g.newVersion,er(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const t1=["get","getKey","getAll","getAllKeys","count"],n1=["put","add","delete","clear"],pp=new Map;function qv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=n1.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||t1.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,o?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&g.done]))[0]};return pp.set(e,l),l}Ww(n=>({...n,get:(e,t,s)=>qv(e,t)||n.get(e,t,s),has:(e,t)=>!!qv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s1(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function s1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",Fv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new rm("@firebase/app"),r1="@firebase/app-compat",o1="@firebase/analytics-compat",a1="@firebase/analytics",l1="@firebase/app-check-compat",u1="@firebase/app-check",c1="@firebase/auth",f1="@firebase/auth-compat",d1="@firebase/database",h1="@firebase/data-connect",p1="@firebase/database-compat",m1="@firebase/functions",g1="@firebase/functions-compat",y1="@firebase/installations",_1="@firebase/installations-compat",v1="@firebase/messaging",T1="@firebase/messaging-compat",E1="@firebase/performance",S1="@firebase/performance-compat",A1="@firebase/remote-config",C1="@firebase/remote-config-compat",I1="@firebase/storage",R1="@firebase/storage-compat",w1="@firebase/firestore",N1="@firebase/ai",b1="@firebase/firestore-compat",M1="firebase",D1="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",x1={[Ip]:"fire-core",[r1]:"fire-core-compat",[a1]:"fire-analytics",[o1]:"fire-analytics-compat",[u1]:"fire-app-check",[l1]:"fire-app-check-compat",[c1]:"fire-auth",[f1]:"fire-auth-compat",[d1]:"fire-rtdb",[h1]:"fire-data-connect",[p1]:"fire-rtdb-compat",[m1]:"fire-fn",[g1]:"fire-fn-compat",[y1]:"fire-iid",[_1]:"fire-iid-compat",[v1]:"fire-fcm",[T1]:"fire-fcm-compat",[E1]:"fire-perf",[S1]:"fire-perf-compat",[A1]:"fire-rc",[C1]:"fire-rc-compat",[I1]:"fire-gcs",[R1]:"fire-gcs-compat",[w1]:"fire-fst",[b1]:"fire-fst-compat",[N1]:"fire-vertex","fire-js":"fire-js",[M1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Map,P1=new Map,wp=new Map;function Bv(n,e){try{n.container.addComponent(e)}catch(t){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ua(n){const e=n.name;if(wp.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(const t of df.values())Bv(t,n);for(const t of P1.values())Bv(t,n);return!0}function am(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ti(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new au("app","Firebase",V1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=D1;function Y0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Rp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw tr.create("bad-app-name",{appName:String(o)});if(t||(t=q0()),!t)throw tr.create("no-options");const l=df.get(o);if(l){if(Qr(t,l.options)&&Qr(s,l.config))return l;throw tr.create("duplicate-app",{appName:o})}const u=new Bw(o);for(const g of wp.values())u.addComponent(g);const d=new U1(t,s,u);return df.set(o,d),d}function K0(n=Rp){const e=df.get(n);if(!e&&n===Rp&&q0())return Y0();if(!e)throw tr.create("no-app",{appName:n});return e}function nr(n,e,t){let s=x1[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(u.join(" "));return}ua(new $r(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebase-heartbeat-database",L1=1,Xl="firebase-heartbeat-store";let mp=null;function J0(){return mp||(mp=e1(k1,L1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xl)}catch(t){console.warn(t)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),mp}async function O1(n){try{const t=(await J0()).transaction(Xl),s=await t.objectStore(Xl).get(Q0(n));return await t.done,s}catch(e){if(e instanceof cs)rs.warn(e.message);else{const t=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(t.message)}}}async function Hv(n,e){try{const s=(await J0()).transaction(Xl,"readwrite");await s.objectStore(Xl).put(e,Q0(n)),await s.done}catch(t){if(t instanceof cs)rs.warn(t.message);else{const s=tr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});rs.warn(s.message)}}}function Q0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=1024,F1=30;class B1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new G1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Gv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>F1){const u=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){rs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gv(),{heartbeatsToSend:s,unsentEntries:o}=H1(this._heartbeatsCache.heartbeats),l=ff(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return rs.warn(t),""}}}function Gv(){return new Date().toISOString().substring(0,10)}function H1(n,e=q1){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),zv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class G1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Mw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zv(n){return ff(JSON.stringify({version:2,heartbeats:n})).length}function z1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(n){ua(new $r("platform-logger",e=>new i1(e),"PRIVATE")),ua(new $r("heartbeat",e=>new B1(e),"PRIVATE")),nr(Ip,Fv,n),nr(Ip,Fv,"esm2020"),nr("fire-js","")}Y1("");var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,$0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function b(){}b.prototype=N.prototype,M.F=N.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(U,k,q){for(var D=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)D[$e-2]=arguments[$e];return N.prototype[k].apply(U,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,b){b||(b=0);const U=Array(16);if(typeof N=="string")for(var k=0;k<16;++k)U[k]=N.charCodeAt(b++)|N.charCodeAt(b++)<<8|N.charCodeAt(b++)<<16|N.charCodeAt(b++)<<24;else for(k=0;k<16;++k)U[k]=N[b++]|N[b++]<<8|N[b++]<<16|N[b++]<<24;N=M.g[0],b=M.g[1],k=M.g[2];let q=M.g[3],D;D=N+(q^b&(k^q))+U[0]+3614090360&4294967295,N=b+(D<<7&4294967295|D>>>25),D=q+(k^N&(b^k))+U[1]+3905402710&4294967295,q=N+(D<<12&4294967295|D>>>20),D=k+(b^q&(N^b))+U[2]+606105819&4294967295,k=q+(D<<17&4294967295|D>>>15),D=b+(N^k&(q^N))+U[3]+3250441966&4294967295,b=k+(D<<22&4294967295|D>>>10),D=N+(q^b&(k^q))+U[4]+4118548399&4294967295,N=b+(D<<7&4294967295|D>>>25),D=q+(k^N&(b^k))+U[5]+1200080426&4294967295,q=N+(D<<12&4294967295|D>>>20),D=k+(b^q&(N^b))+U[6]+2821735955&4294967295,k=q+(D<<17&4294967295|D>>>15),D=b+(N^k&(q^N))+U[7]+4249261313&4294967295,b=k+(D<<22&4294967295|D>>>10),D=N+(q^b&(k^q))+U[8]+1770035416&4294967295,N=b+(D<<7&4294967295|D>>>25),D=q+(k^N&(b^k))+U[9]+2336552879&4294967295,q=N+(D<<12&4294967295|D>>>20),D=k+(b^q&(N^b))+U[10]+4294925233&4294967295,k=q+(D<<17&4294967295|D>>>15),D=b+(N^k&(q^N))+U[11]+2304563134&4294967295,b=k+(D<<22&4294967295|D>>>10),D=N+(q^b&(k^q))+U[12]+1804603682&4294967295,N=b+(D<<7&4294967295|D>>>25),D=q+(k^N&(b^k))+U[13]+4254626195&4294967295,q=N+(D<<12&4294967295|D>>>20),D=k+(b^q&(N^b))+U[14]+2792965006&4294967295,k=q+(D<<17&4294967295|D>>>15),D=b+(N^k&(q^N))+U[15]+1236535329&4294967295,b=k+(D<<22&4294967295|D>>>10),D=N+(k^q&(b^k))+U[1]+4129170786&4294967295,N=b+(D<<5&4294967295|D>>>27),D=q+(b^k&(N^b))+U[6]+3225465664&4294967295,q=N+(D<<9&4294967295|D>>>23),D=k+(N^b&(q^N))+U[11]+643717713&4294967295,k=q+(D<<14&4294967295|D>>>18),D=b+(q^N&(k^q))+U[0]+3921069994&4294967295,b=k+(D<<20&4294967295|D>>>12),D=N+(k^q&(b^k))+U[5]+3593408605&4294967295,N=b+(D<<5&4294967295|D>>>27),D=q+(b^k&(N^b))+U[10]+38016083&4294967295,q=N+(D<<9&4294967295|D>>>23),D=k+(N^b&(q^N))+U[15]+3634488961&4294967295,k=q+(D<<14&4294967295|D>>>18),D=b+(q^N&(k^q))+U[4]+3889429448&4294967295,b=k+(D<<20&4294967295|D>>>12),D=N+(k^q&(b^k))+U[9]+568446438&4294967295,N=b+(D<<5&4294967295|D>>>27),D=q+(b^k&(N^b))+U[14]+3275163606&4294967295,q=N+(D<<9&4294967295|D>>>23),D=k+(N^b&(q^N))+U[3]+4107603335&4294967295,k=q+(D<<14&4294967295|D>>>18),D=b+(q^N&(k^q))+U[8]+1163531501&4294967295,b=k+(D<<20&4294967295|D>>>12),D=N+(k^q&(b^k))+U[13]+2850285829&4294967295,N=b+(D<<5&4294967295|D>>>27),D=q+(b^k&(N^b))+U[2]+4243563512&4294967295,q=N+(D<<9&4294967295|D>>>23),D=k+(N^b&(q^N))+U[7]+1735328473&4294967295,k=q+(D<<14&4294967295|D>>>18),D=b+(q^N&(k^q))+U[12]+2368359562&4294967295,b=k+(D<<20&4294967295|D>>>12),D=N+(b^k^q)+U[5]+4294588738&4294967295,N=b+(D<<4&4294967295|D>>>28),D=q+(N^b^k)+U[8]+2272392833&4294967295,q=N+(D<<11&4294967295|D>>>21),D=k+(q^N^b)+U[11]+1839030562&4294967295,k=q+(D<<16&4294967295|D>>>16),D=b+(k^q^N)+U[14]+4259657740&4294967295,b=k+(D<<23&4294967295|D>>>9),D=N+(b^k^q)+U[1]+2763975236&4294967295,N=b+(D<<4&4294967295|D>>>28),D=q+(N^b^k)+U[4]+1272893353&4294967295,q=N+(D<<11&4294967295|D>>>21),D=k+(q^N^b)+U[7]+4139469664&4294967295,k=q+(D<<16&4294967295|D>>>16),D=b+(k^q^N)+U[10]+3200236656&4294967295,b=k+(D<<23&4294967295|D>>>9),D=N+(b^k^q)+U[13]+681279174&4294967295,N=b+(D<<4&4294967295|D>>>28),D=q+(N^b^k)+U[0]+3936430074&4294967295,q=N+(D<<11&4294967295|D>>>21),D=k+(q^N^b)+U[3]+3572445317&4294967295,k=q+(D<<16&4294967295|D>>>16),D=b+(k^q^N)+U[6]+76029189&4294967295,b=k+(D<<23&4294967295|D>>>9),D=N+(b^k^q)+U[9]+3654602809&4294967295,N=b+(D<<4&4294967295|D>>>28),D=q+(N^b^k)+U[12]+3873151461&4294967295,q=N+(D<<11&4294967295|D>>>21),D=k+(q^N^b)+U[15]+530742520&4294967295,k=q+(D<<16&4294967295|D>>>16),D=b+(k^q^N)+U[2]+3299628645&4294967295,b=k+(D<<23&4294967295|D>>>9),D=N+(k^(b|~q))+U[0]+4096336452&4294967295,N=b+(D<<6&4294967295|D>>>26),D=q+(b^(N|~k))+U[7]+1126891415&4294967295,q=N+(D<<10&4294967295|D>>>22),D=k+(N^(q|~b))+U[14]+2878612391&4294967295,k=q+(D<<15&4294967295|D>>>17),D=b+(q^(k|~N))+U[5]+4237533241&4294967295,b=k+(D<<21&4294967295|D>>>11),D=N+(k^(b|~q))+U[12]+1700485571&4294967295,N=b+(D<<6&4294967295|D>>>26),D=q+(b^(N|~k))+U[3]+2399980690&4294967295,q=N+(D<<10&4294967295|D>>>22),D=k+(N^(q|~b))+U[10]+4293915773&4294967295,k=q+(D<<15&4294967295|D>>>17),D=b+(q^(k|~N))+U[1]+2240044497&4294967295,b=k+(D<<21&4294967295|D>>>11),D=N+(k^(b|~q))+U[8]+1873313359&4294967295,N=b+(D<<6&4294967295|D>>>26),D=q+(b^(N|~k))+U[15]+4264355552&4294967295,q=N+(D<<10&4294967295|D>>>22),D=k+(N^(q|~b))+U[6]+2734768916&4294967295,k=q+(D<<15&4294967295|D>>>17),D=b+(q^(k|~N))+U[13]+1309151649&4294967295,b=k+(D<<21&4294967295|D>>>11),D=N+(k^(b|~q))+U[4]+4149444226&4294967295,N=b+(D<<6&4294967295|D>>>26),D=q+(b^(N|~k))+U[11]+3174756917&4294967295,q=N+(D<<10&4294967295|D>>>22),D=k+(N^(q|~b))+U[2]+718787259&4294967295,k=q+(D<<15&4294967295|D>>>17),D=b+(q^(k|~N))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+q&4294967295}s.prototype.v=function(M,N){N===void 0&&(N=M.length);const b=N-this.blockSize,U=this.C;let k=this.h,q=0;for(;q<N;){if(k==0)for(;q<=b;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<N;)if(U[k++]=M.charCodeAt(q++),k==this.blockSize){o(this,U),k=0;break}}else for(;q<N;)if(U[k++]=M[q++],k==this.blockSize){o(this,U),k=0;break}}this.h=k,this.o+=N},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;N=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=N&255,N/=256;for(this.v(M),M=Array(16),N=0,b=0;b<4;++b)for(let U=0;U<32;U+=8)M[N++]=this.g[b]>>>U&255;return M};function l(M,N){var b=d;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=N(M)}function u(M,N){this.h=N;const b=[];let U=!0;for(let k=M.length-1;k>=0;k--){const q=M[k]|0;U&&q==N||(b[k]=q,U=!1)}this.g=b}var d={};function g(M){return-128<=M&&M<128?l(M,function(N){return new u([N|0],N<0?-1:0)}):new u([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return F(m(-M));const N=[];let b=1;for(let U=0;M>=b;U++)N[U]=M/b|0,b*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return F(v(M.substring(1),N));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=m(Math.pow(N,8));let U=E;for(let q=0;q<M.length;q+=8){var k=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+k),N);k<8?(k=m(Math.pow(N,k)),U=U.j(k).add(m(D))):(U=U.j(b),U=U.add(m(D)))}return U}var E=g(0),A=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(V(this))return-F(this).m();let M=0,N=1;for(let b=0;b<this.g.length;b++){const U=this.i(b);M+=(U>=0?U:4294967296+U)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(H(this))return"0";if(V(this))return"-"+F(this).toString(M);const N=m(Math.pow(M,6));var b=this;let U="";for(;;){const k=oe(b,N).g;b=$(b,k.j(N));let q=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=k,H(b))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function H(M){if(M.h!=0)return!1;for(let N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function V(M){return M.h==-1}n.l=function(M){return M=$(this,M),V(M)?-1:H(M)?0:1};function F(M){const N=M.g.length,b=[];for(let U=0;U<N;U++)b[U]=~M.g[U];return new u(b,~M.h).add(A)}n.abs=function(){return V(this)?F(this):this},n.add=function(M){const N=Math.max(this.g.length,M.g.length),b=[];let U=0;for(let k=0;k<=N;k++){let q=U+(this.i(k)&65535)+(M.i(k)&65535),D=(q>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);U=D>>>16,q&=65535,D&=65535,b[k]=D<<16|q}return new u(b,b[b.length-1]&-2147483648?-1:0)};function $(M,N){return M.add(F(N))}n.j=function(M){if(H(this)||H(M))return E;if(V(this))return V(M)?F(this).j(F(M)):F(F(this).j(M));if(V(M))return F(this.j(F(M)));if(this.l(w)<0&&M.l(w)<0)return m(this.m()*M.m());const N=this.g.length+M.g.length,b=[];for(var U=0;U<2*N;U++)b[U]=0;for(U=0;U<this.g.length;U++)for(let k=0;k<M.g.length;k++){const q=this.i(U)>>>16,D=this.i(U)&65535,$e=M.i(k)>>>16,rt=M.i(k)&65535;b[2*U+2*k]+=D*rt,j(b,2*U+2*k),b[2*U+2*k+1]+=q*rt,j(b,2*U+2*k+1),b[2*U+2*k+1]+=D*$e,j(b,2*U+2*k+1),b[2*U+2*k+2]+=q*$e,j(b,2*U+2*k+2)}for(M=0;M<N;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=N;M<2*N;M++)b[M]=0;return new u(b,0)};function j(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function Z(M,N){this.g=M,this.h=N}function oe(M,N){if(H(N))throw Error("division by zero");if(H(M))return new Z(E,E);if(V(M))return N=oe(F(M),N),new Z(F(N.g),F(N.h));if(V(N))return N=oe(M,F(N)),new Z(F(N.g),N.h);if(M.g.length>30){if(V(M)||V(N))throw Error("slowDivide_ only works with positive integers.");for(var b=A,U=N;U.l(M)<=0;)b=fe(b),U=fe(U);var k=se(b,1),q=se(U,1);for(U=se(U,2),b=se(b,2);!H(U);){var D=q.add(U);D.l(M)<=0&&(k=k.add(b),q=D),U=se(U,1),b=se(b,1)}return N=$(M,k.j(N)),new Z(k,N)}for(k=E;M.l(N)>=0;){for(b=Math.max(1,Math.floor(M.m()/N.m())),U=Math.ceil(Math.log(b)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=m(b),D=q.j(N);V(D)||D.l(M)>0;)b-=U,q=m(b),D=q.j(N);H(q)&&(q=A),k=k.add(q),M=$(M,D)}return new Z(k,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)&M.i(U);return new u(b,this.h&M.h)},n.or=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)|M.i(U);return new u(b,this.h|M.h)},n.xor=function(M){const N=Math.max(this.g.length,M.g.length),b=[];for(let U=0;U<N;U++)b[U]=this.i(U)^M.i(U);return new u(b,this.h^M.h)};function fe(M){const N=M.g.length+1,b=[];for(let U=0;U<N;U++)b[U]=M.i(U)<<1|M.i(U-1)>>>31;return new u(b,M.h)}function se(M,N){const b=N>>5;N%=32;const U=M.g.length-b,k=[];for(let q=0;q<U;q++)k[q]=N>0?M.i(q+b)>>>N|M.i(q+b+1)<<32-N:M.i(q+b);return new u(k,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,$0=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,ir=u}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,Ol,W0,Zc,Np,Z0,j0,eS;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var T=0;T<p.length;++T){var C=p[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(p,T){if(T)e:{var C=s;p=p.split(".");for(var R=0;R<p.length-1;R++){var G=p[R];if(!(G in C))break e;C=C[G]}p=p[p.length-1],R=C[p],T=T(R),T!=R&&T!=null&&e(C,p,{configurable:!0,writable:!0,value:T})}}o("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(p){return p||function(T){var C=[],R;for(R in T)Object.prototype.hasOwnProperty.call(T,R)&&C.push([R,T[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function g(p,T,C){return p.call.apply(p.bind,arguments)}function m(p,T,C){return m=g,m.apply(null,arguments)}function v(p,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function E(p,T){function C(){}C.prototype=T.prototype,p.Z=T.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(R,G,J){for(var ae=Array(arguments.length-2),we=2;we<arguments.length;we++)ae[we-2]=arguments[we];return T.prototype[G].apply(R,ae)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function w(p){const T=p.length;if(T>0){const C=Array(T);for(let R=0;R<T;R++)C[R]=p[R];return C}return[]}function H(p,T){for(let R=1;R<arguments.length;R++){const G=arguments[R];var C=typeof G;if(C=C!="object"?C:G?Array.isArray(G)?"array":C:"null",C=="array"||C=="object"&&typeof G.length=="number"){C=p.length||0;const J=G.length||0;p.length=C+J;for(let ae=0;ae<J;ae++)p[C+ae]=G[ae]}else p.push(G)}}class V{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function F(p){u.setTimeout(()=>{throw p},0)}function $(){var p=M;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class j{constructor(){this.h=this.g=null}add(T,C){const R=Z.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new V(()=>new oe,p=>p.reset());class oe{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,se=!1,M=new j,N=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(b)}};function b(){for(var p;p=$();){try{p.h.call(p.g)}catch(C){F(C)}var T=Z;T.j(p),T.h<100&&(T.h++,p.next=T.g,T.g=p)}se=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function $e(p,T){k.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,T)}E($e,k),$e.prototype.init=function(p,T){const C=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget,T||(C=="mouseover"?T=p.fromElement:C=="mouseout"&&(T=p.toElement)),this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(p,T,C,R,G){this.listener=p,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=G,this.key=++X,this.da=this.fa=!1}function _e(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function He(p,T,C){for(const R in p)T.call(C,p[R],R,p)}function Xe(p,T){for(const C in p)T.call(void 0,p[C],C,p)}function O(p){const T={};for(const C in p)T[C]=p[C];return T}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,T){let C,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(C in R)p[C]=R[C];for(let J=0;J<ne.length;J++)C=ne[J],Object.prototype.hasOwnProperty.call(R,C)&&(p[C]=R[C])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,T,C,R,G){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const ae=be(p,T,R,G);return ae>-1?(T=p[ae],C||(T.fa=!1)):(T=new le(T,this.src,J,!!R,G),T.fa=C,p.push(T)),T};function Ae(p,T){const C=T.type;if(C in p.g){var R=p.g[C],G=Array.prototype.indexOf.call(R,T,void 0),J;(J=G>=0)&&Array.prototype.splice.call(R,G,1),J&&(_e(T),p.g[C].length==0&&(delete p.g[C],p.h--))}}function be(p,T,C,R){for(let G=0;G<p.length;++G){const J=p[G];if(!J.da&&J.listener==T&&J.capture==!!C&&J.ha==R)return G}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Vt={};function ct(p,T,C,R,G){if(Array.isArray(T)){for(let J=0;J<T.length;J++)ct(p,T[J],C,R,G);return null}return C=Ma(C),p&&p[rt]?p.J(T,C,d(R)?!!R.capture:!1,G):pr(p,T,C,!1,R,G)}function pr(p,T,C,R,G,J){if(!T)throw Error("Invalid event type");const ae=d(G)?!!G.capture:!!G;let we=mr(p);if(we||(p[qe]=we=new he(p)),C=we.add(T,C,R,ae,J),C.proxy)return C;if(R=ro(),C.proxy=R,R.src=p,R.listener=C,p.addEventListener)q||(G=ae),G===void 0&&(G=!1),p.addEventListener(T.toString(),R,G);else if(p.attachEvent)p.attachEvent(oi(T.toString()),R);else if(p.addListener&&p.removeListener)p.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ro(){function p(C){return T.call(p.src,p.listener,C)}const T=Na;return p}function oo(p,T,C,R,G){if(Array.isArray(T))for(var J=0;J<T.length;J++)oo(p,T[J],C,R,G);else R=d(R)?!!R.capture:!!R,C=Ma(C),p&&p[rt]?(p=p.i,J=String(T).toString(),J in p.g&&(T=p.g[J],C=be(T,C,R,G),C>-1&&(_e(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete p.g[J],p.h--)))):p&&(p=mr(p))&&(T=p.g[T.toString()],p=-1,T&&(p=be(T,C,R,G)),(C=p>-1?T[p]:null)&&ao(C))}function ao(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[rt])Ae(T.i,p);else{var C=p.type,R=p.proxy;T.removeEventListener?T.removeEventListener(C,R,p.capture):T.detachEvent?T.detachEvent(oi(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=mr(T))?(Ae(C,p),C.h==0&&(C.src=null,T[qe]=null)):_e(p)}}}function oi(p){return p in Vt?Vt[p]:Vt[p]="on"+p}function Na(p,T){if(p.da)p=!0;else{T=new $e(T,this);const C=p.listener,R=p.ha||p.src;p.fa&&ao(p),p=C.call(R,T)}return p}function mr(p){return p=p[qe],p instanceof he?p:null}var ba="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ma(p){return typeof p=="function"?p:(p[ba]||(p[ba]=function(T){return p.handleEvent(T)}),p[ba])}function At(){U.call(this),this.i=new he(this),this.M=this,this.G=null}E(At,U),At.prototype[rt]=!0,At.prototype.removeEventListener=function(p,T,C,R){oo(this,p,T,C,R)};function Ut(p,T){var C,R=p.G;if(R)for(C=[];R;R=R.G)C.push(R);if(p=p.M,R=T.type||T,typeof T=="string")T=new k(T,p);else if(T instanceof k)T.target=T.target||p;else{var G=T;T=new k(R,p),ue(T,G)}G=!0;let J,ae;if(C)for(ae=C.length-1;ae>=0;ae--)J=T.g=C[ae],G=hs(J,R,!0,T)&&G;if(J=T.g=p,G=hs(J,R,!0,T)&&G,G=hs(J,R,!1,T)&&G,C)for(ae=0;ae<C.length;ae++)J=T.g=C[ae],G=hs(J,R,!1,T)&&G}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var p=this.i;for(const T in p.g){const C=p.g[T];for(let R=0;R<C.length;R++)_e(C[R]);delete p.g[T],p.h--}}this.G=null},At.prototype.J=function(p,T,C,R){return this.i.add(String(p),T,!1,C,R)},At.prototype.K=function(p,T,C,R){return this.i.add(String(p),T,!0,C,R)};function hs(p,T,C,R){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();let G=!0;for(let J=0;J<T.length;++J){const ae=T[J];if(ae&&!ae.da&&ae.capture==C){const we=ae.listener,_t=ae.ha||ae.src;ae.fa&&Ae(p.i,ae),G=we.call(_t,R)!==!1&&G}}return G&&!R.defaultPrevented}function rd(p,T){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(p,T||0)}function yu(p){p.g=rd(()=>{p.g=null,p.i&&(p.i=!1,yu(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class on extends U{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:yu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(p){U.call(this),this.h=p,this.g={}}E(gr,U);var Da=[];function xa(p){He(p.g,function(T,C){this.g.hasOwnProperty(C)&&ao(T)},p),p.g={}}gr.prototype.N=function(){gr.Z.N.call(this),xa(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=u.JSON.stringify,od=u.JSON.parse,_u=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function vu(){}function Tu(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){k.call(this,"d")}E(zt,k);function Rn(){k.call(this,"c")}E(Rn,k);var yt={},Eu=null;function lo(){return Eu=Eu||new At}yt.Ia="serverreachability";function Su(p){k.call(this,yt.Ia,p)}E(Su,k);function ai(p){const T=lo();Ut(T,new Su(T))}yt.STAT_EVENT="statevent";function yr(p,T){k.call(this,yt.STAT_EVENT,p),this.stat=T}E(yr,k);function Ct(p){const T=lo();Ut(T,new yr(T,p))}yt.Ja="timingevent";function li(p,T){k.call(this,yt.Ja,p),this.size=T}E(li,k);function ui(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},T)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function ad(p,T,C,R,G,J){p.info(function(){if(p.g)if(J){var ae="",we=J.split("&");for(let Ke=0;Ke<we.length;Ke++){var _t=we[Ke].split("=");if(_t.length>1){const ft=_t[0];_t=_t[1];const Mn=ft.split("_");ae=Mn.length>=2&&Mn[1]=="type"?ae+(ft+"="+_t+"&"):ae+(ft+"=redacted&")}}}else ae=null;else ae=J;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+T+`
`+C+`
`+ae})}function Au(p,T,C,R,G,J,ae){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+T+`
`+C+`
`+J+" "+ae})}function ci(p,T,C,R){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+ld(p,C)+(R?" "+R:"")})}function _r(p,T){p.info(function(){return"TIMEOUT: "+T})}zn.prototype.info=function(){};function ld(p,T){if(!p.g)return T;if(!T)return null;try{const J=JSON.parse(T);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var C=J[p];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var G=R[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ae=1;ae<R.length;ae++)R[ae]=""}}}}return ps(J)}catch{return T}}var vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Va;function Tr(){}E(Tr,vu),Tr.prototype.g=function(){return new XMLHttpRequest},Va=new Tr;function Li(p){return encodeURIComponent(String(p))}function Cu(p){var T=1;p=p.split(":");const C=[];for(;T>0&&p.length;)C.push(p.shift()),T--;return p.length&&C.push(p.join(":")),C}function Yn(p,T,C,R){this.j=p,this.i=T,this.l=C,this.S=R||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var It={},qt={};function fi(p,T,C){p.M=1,p.A=Er(wt(T)),p.u=C,p.R=!0,uo(p,null)}function uo(p,T){p.F=Date.now(),di(p),p.B=wt(p.A);var C=p.B,R=p.S;Array.isArray(R)||(R=[String(R)]),po(C.i,"t",R),p.C=0,C=p.j.L,p.h=new Kn,p.g=qu(p.j,C?T:null,!p.u),p.P>0&&(p.O=new on(m(p.Y,p,p.g),p.P)),T=p.V,C=p.g,R=p.ba;var G="readystatechange";Array.isArray(G)||(G&&(Da[0]=G.toString()),G=Da);for(let J=0;J<G.length;J++){const ae=ct(C,G[J],R||T.handleEvent,!1,T.h||T);if(!ae)break;T.g[ae.key]=ae}T=p.J?O(p.J):{},p.u?(p.v||(p.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,T)):(p.v="GET",p.g.ea(p.B,p.v,null,T)),ai(),ad(p.i,p.v,p.B,p.l,p.S,p.u)}Yn.prototype.ba=function(p){p=p.target;const T=this.O;T&&$n(p)==3?T.j():this.Y(p)},Yn.prototype.Y=function(p){try{if(p==this.g)e:{const we=$n(this.g),_t=this.g.ya(),Ke=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||we!=4||_t==7||(_t==8||Ke<=0?ai(3):ai(2)),hi(this);var T=this.g.ca();this.X=T;var C=ud(this);if(this.o=T==200,Au(this.i,this.v,this.B,this.l,this.S,we,T),this.o){if(this.U&&!this.L){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var J=R;break t}}J=null}if(p=J)ci(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pi(this,p);else{this.o=!1,this.m=3,Ct(12),yn(this),wn(this);break e}}if(this.R){p=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Ru(this,C),ft==qt){we==4&&(this.m=4,Ct(14),p=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==It){this.m=4,Ct(15),ci(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else ci(this.i,this.l,ft,null),pi(this,ft);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),p=!1),this.o=this.o&&p,!p)ci(this.i,this.l,C,"[Invalid Chunked Response]"),yn(this),wn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),$a(ae),ae.P=!0,Ct(11))}}else ci(this.i,this.l,C,null),pi(this,C);we==4&&yn(this),this.o&&!this.K&&(we==4?Uu(this.j,this):(this.o=!1,di(this)))}else qi(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),yn(this),wn(this)}}}catch{}finally{}};function ud(p){if(!Iu(p))return p.g.la();const T=Yt(p.g);if(T==="")return"";let C="";const R=T.length,G=$n(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return yn(p),wn(p),"";p.h.i=new u.TextDecoder}for(let J=0;J<R;J++)p.h.h=!0,C+=p.h.i.decode(T[J],{stream:!(G&&J==R-1)});return T.length=0,p.h.g+=C,p.C=0,p.h.g}function Iu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Ru(p,T){var C=p.C,R=T.indexOf(`
`,C);return R==-1?qt:(C=Number(T.substring(C,R)),isNaN(C)?It:(R+=1,R+C>T.length?qt:(T=T.slice(R,R+C),p.C=R+C,T)))}Yn.prototype.cancel=function(){this.K=!0,yn(this)};function di(p){p.T=Date.now()+p.H,co(p,p.H)}function co(p,T){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ui(m(p.aa,p),T)}function hi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Yn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(_r(this.i,this.B),this.M!=2&&(ai(),Ct(17)),yn(this),this.m=2,wn(this)):co(this,this.T-p)};function wn(p){p.j.I==0||p.K||Uu(p.j,p)}function yn(p){hi(p);var T=p.O;T&&typeof T.dispose=="function"&&T.dispose(),p.O=null,xa(p.V),p.g&&(T=p.g,p.g=null,T.abort(),T.dispose())}function pi(p,T){try{var C=p.j;if(C.I!=0&&(C.g==p||gi(C.h,p))){if(!p.L&&gi(C.h,p)&&C.I==3){try{var R=C.Ba.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)vo(C),Ss(C);else break e;Nr(C),Ct(18)}}else C.xa=G[1],0<C.xa-C.K&&G[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ui(m(C.Va,C),6e3));mi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Si(C,11)}else if((p.L||C.g==p)&&vo(C),!D(T))for(G=C.Ba.g.parse(T),T=0;T<G.length;T++){let Ke=G[T];const ft=Ke[0];if(!(ft<=C.K))if(C.K=ft,Ke=Ke[1],C.I==2)if(Ke[0]=="c"){C.M=Ke[1],C.ba=Ke[2];const Mn=Ke[3];Mn!=null&&(C.ka=Mn,C.j.info("VER="+C.ka));const Ai=Ke[4];Ai!=null&&(C.za=Ai,C.j.info("SVER="+C.za));const Xn=Ke[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(R=1.5*Xn,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const Wn=p.g;if(Wn){const br=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var J=R.h;J.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(La(J,J.h),J.h=null))}if(R.G){const To=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;To&&(R.wa=To,We(R.J,R.G,To))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var ae=p;if(R.na=Ou(R,R.L?R.ba:null,R.W),ae.L){Oa(R.h,ae);var we=ae,_t=R.O;_t&&(we.H=_t),we.D&&(hi(we),di(we)),R.g=ae}else Pu(R);C.i.length>0&&Ei(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Si(C,7);else C.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Si(C,7):Ja(C):Ke[0]!="noop"&&C.l&&C.l.qa(Ke),C.A=0)}}ai(4)}catch{}}var Rt=class{constructor(p,T){this.g=p,this.map=T}};function Ua(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ka(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mi(p){return p.h?1:p.g?p.g.size:0}function gi(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function La(p,T){p.g?p.g.add(T):p.h=T}function Oa(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}Ua.prototype.cancel=function(){if(this.i=qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function qa(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const C of p.g.values())T=T.concat(C.G);return T}return w(p.i)}var wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(p,T){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const R=p[C].indexOf("=");let G,J=null;R>=0?(G=p[C].substring(0,R),J=p[C].substring(R+1)):G=p[C],T(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function _n(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;p instanceof _n?(this.l=p.l,Ft(this,p.j),this.o=p.o,this.g=p.g,ms(this,p.u),this.h=p.h,Fa(this,Du(p.i)),this.m=p.m):p&&(T=String(p).match(wu))?(this.l=!1,Ft(this,T[1]||"",!0),this.o=yi(T[2]||""),this.g=yi(T[3]||"",!0),ms(this,T[4]),this.h=yi(T[5]||"",!0),Fa(this,T[6]||"",!0),this.m=yi(T[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}_n.prototype.toString=function(){const p=[];var T=this.j;T&&p.push(Sr(T,ho,!0),":");var C=this.g;return(C||T=="file")&&(p.push("//"),(T=this.o)&&p.push(Sr(T,ho,!0),"@"),p.push(Li(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Sr(C,C.charAt(0)=="/"?Ba:Nu,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Sr(C,bu)),p.join("")},_n.prototype.resolve=function(p){const T=wt(this);let C=!!p.j;C?Ft(T,p.j):C=!!p.o,C?T.o=p.o:C=!!p.g,C?T.g=p.g:C=p.u!=null;var R=p.h;if(C)ms(T,p.u);else if(C=!!p.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var G=T.h.lastIndexOf("/");G!=-1&&(R=T.h.slice(0,G+1)+R)}if(G=R,G==".."||G==".")R="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){R=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let ae=0;ae<G.length;){const we=G[ae++];we=="."?R&&ae==G.length&&J.push(""):we==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&ae==G.length&&J.push("")):(J.push(we),R=!0)}R=J.join("/")}else R=G}return C?T.h=R:C=p.i.toString()!=="",C?Fa(T,Du(p.i)):C=!!p.m,C&&(T.m=p.m),T};function wt(p){return new _n(p)}function Ft(p,T,C){p.j=C?yi(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function ms(p,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);p.u=T}else p.u=null}function Fa(p,T,C){T instanceof ys?(p.i=T,mo(p.i,p.l)):(C||(T=Sr(T,gs)),p.i=new ys(T,p.l))}function We(p,T,C){p.i.set(T,C)}function Er(p){return We(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function yi(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Sr(p,T,C){return typeof p=="string"?(p=encodeURI(p).replace(T,un),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function un(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var ho=/[#\/\?@]/g,Nu=/[#\?:]/g,Ba=/[#\?]/g,gs=/[#\?@]/g,bu=/#/g;function ys(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function cn(p){p.g||(p.g=new Map,p.h=0,p.i&&fo(p.i,function(T,C){p.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=ys.prototype,n.add=function(p,T){cn(this),this.i=null,p=_s(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(T),this.h+=1,this};function Mu(p,T){cn(p),T=_s(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function Ha(p,T){return cn(p),T=_s(p,T),p.g.has(T)}n.forEach=function(p,T){cn(this),this.g.forEach(function(C,R){C.forEach(function(G){p.call(T,G,R,this)},this)},this)};function Ga(p,T){cn(p);let C=[];if(typeof T=="string")Ha(p,T)&&(C=C.concat(p.g.get(_s(p,T))));else for(p=Array.from(p.g.values()),T=0;T<p.length;T++)C=C.concat(p[T]);return C}n.set=function(p,T){return cn(this),this.i=null,p=_s(this,p),Ha(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},n.get=function(p,T){return p?(p=Ga(this,p),p.length>0?String(p[0]):T):T};function po(p,T,C){Mu(p,T),C.length>0&&(p.i=null,p.g.set(_s(p,T),w(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(let R=0;R<T.length;R++){var C=T[R];const G=Li(C);C=Ga(this,C);for(let J=0;J<C.length;J++){let ae=G;C[J]!==""&&(ae+="="+Li(C[J])),p.push(ae)}}return this.i=p.join("&")};function Du(p){const T=new ys;return T.i=p.i,p.g&&(T.g=new Map(p.g),T.h=p.h),T}function _s(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function mo(p,T){T&&!p.j&&(cn(p),p.i=null,p.g.forEach(function(C,R){const G=R.toLowerCase();R!=G&&(Mu(this,R),po(this,G,C))},p)),p.j=T}function Jn(p,T){const C=new zn;if(u.Image){const R=new Image;R.onload=v(Nn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=v(Nn,C,"TestLoadImage: error",!1,T,R),R.onabort=v(Nn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=v(Nn,C,"TestLoadImage: timeout",!1,T,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else T(!1)}function za(p,T){const C=new zn,R=new AbortController,G=setTimeout(()=>{R.abort(),Nn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:R.signal}).then(J=>{clearTimeout(G),J.ok?Nn(C,"TestPingServer: ok",!0,T):Nn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),Nn(C,"TestPingServer: error",!1,T)})}function Nn(p,T,C,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(C)}catch{}}function vs(){this.g=new _u}function _i(p){this.i=p.Sb||null,this.h=p.ab||!1}E(_i,vu),_i.prototype.g=function(){return new Ar(this.i,this.h)};function Ar(p,T){At.call(this),this.H=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ar,At),n=Ar.prototype,n.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=T,this.readyState=1,Qn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(T.body=p),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;go(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function go(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?Ts(this):Qn(this),this.readyState==3&&go(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,Ts(this))},n.Na=function(p){this.g&&(this.response=p,Ts(this))},n.ga=function(){this.g&&Ts(this)};function Ts(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Qn(p)}n.setRequestHeader=function(p,T){this.A.append(p,T)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=T.next();return p.join(`\r
`)};function Qn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function bn(p){let T="";return He(p,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Cr(p,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=bn(C),typeof p=="string"?C!=null&&Li(C):We(p,T,C))}function et(p){At.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,At);var vi=/^https?$/i,Ya=["POST","PUT"];n=et.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Va.g(),this.g.onreadystatechange=A(m(this.Ca,this));try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(J){Ir(this,J);return}if(p=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)C.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())C.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),G=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Ya,T,void 0)>=0)||R||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of C)this.g.setRequestHeader(J,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){Ir(this,J)}};function Ir(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.o=5,Ka(p),Oi(p)}function Ka(p){p.A||(p.A=!0,Ut(p,"complete"),Ut(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ut(this,"complete"),Ut(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},n.Xa=function(){Rr(this)};function Rr(p){if(p.h&&typeof l<"u"){if(p.v&&$n(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ut(p,"readystatechange"),$n(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=J===0){let ae=String(p.D).match(wu)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),R=!vi.test(ae?ae.toLowerCase():"")}C=R}if(C)Ut(p,"complete"),Ut(p,"success");else{p.o=6;try{var G=$n(p)>2?p.g.statusText:""}catch{G=""}p.l=G+" ["+p.ca()+"]",Ka(p)}}finally{Oi(p)}}}}function Oi(p,T){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,T||Ut(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $n(p){return p.g?p.g.readyState:0}n.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),od(T)}};function Yt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const T={};p=(p.g&&$n(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<p.length;R++){if(D(p[R]))continue;var C=Cu(p[R]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=T[G]||[];T[G]=J,J.push(C)}Xe(T,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(p,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||T}function Es(p){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,p),this.Za=Ti("retryDelaySeedMs",1e4,p),this.Ta=Ti("forwardChannelMaxRetries",2,p),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ua(p&&p.concurrentRequestLimit),this.Ba=new vs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Es.prototype,n.ka=8,n.I=1,n.connect=function(p,T,C,R){Ct(0),this.W=p,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=Ou(this,null,this.W),Ei(this)};function Ja(p){if(yo(p),p.I==3){var T=p.V++,C=wt(p.J);if(We(C,"SID",p.M),We(C,"RID",T),We(C,"TYPE","terminate"),wr(p,C),T=new Yn(p,p.j,T),T.M=2,T.A=Er(wt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=qu(T.j,null),T.g.ea(T.A)),T.F=Date.now(),di(T)}Lu(p)}function Ss(p){p.g&&($a(p),p.g.cancel(),p.g=null)}function yo(p){Ss(p),p.v&&(u.clearTimeout(p.v),p.v=null),vo(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ei(p){if(!ka(p.h)&&!p.m){p.m=!0;var T=p.Ea;fe||N(),se||(fe(),se=!0),M.add(T,p),p.D=0}}function _o(p,T){return mi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=T.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ui(m(p.Ea,p,T),ku(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const G=new Yn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=O(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=xu(this,G,T),C=wt(this.J),We(C,"RID",p),We(C,"CVER",22),this.G&&We(C,"X-HTTP-Session-Id",this.G),wr(this,C),J&&(this.R?T="headers="+Li(bn(J))+"&"+T:this.u&&Cr(C,this.u,J)),La(this.h,G),this.Ra&&We(C,"TYPE","init"),this.S?(We(C,"$req",T),We(C,"SID","null"),G.U=!0,fi(G,C,null)):fi(G,C,T),this.I=2}}else this.I==3&&(p?Qa(this,p):this.i.length==0||ka(this.h)||Qa(this))};function Qa(p,T){var C;T?C=T.l:C=p.V++;const R=wt(p.J);We(R,"SID",p.M),We(R,"RID",C),We(R,"AID",p.K),wr(p,R),p.u&&p.o&&Cr(R,p.u,p.o),C=new Yn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),T&&(p.i=T.G.concat(p.i)),T=xu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),La(p.h,C),fi(C,R,T)}function wr(p,T){p.H&&He(p.H,function(C,R){We(T,R,C)}),p.l&&He({},function(C,R){We(T,R,C)})}function xu(p,T,C){C=Math.min(p.i.length,C);const R=p.l?m(p.l.Ka,p.l,p):null;e:{var G=p.i;let we=-1;for(;;){const _t=["count="+C];we==-1?C>0?(we=G[0].g,_t.push("ofs="+we)):we=0:_t.push("ofs="+we);let Ke=!0;for(let ft=0;ft<C;ft++){var J=G[ft].g;const Mn=G[ft].map;if(J-=we,J<0)we=Math.max(0,G[ft].g-100),Ke=!1;else try{J="req"+J+"_"||"";try{var ae=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Ai,Xn]of ae){let Wn=Xn;d(Xn)&&(Wn=ps(Xn)),_t.push(J+Ai+"="+encodeURIComponent(Wn))}}catch(Ai){throw _t.push(J+"type="+encodeURIComponent("_badmap")),Ai}}catch{R&&R(Mn)}}if(Ke){ae=_t.join("&");break e}}ae=void 0}return p=p.i.splice(0,C),T.G=p,ae}function Pu(p){if(!p.g&&!p.v){p.Y=1;var T=p.Da;fe||N(),se||(fe(),se=!0),M.add(T,p),p.A=0}}function Nr(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ui(m(p.Da,p),ku(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ui(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Ss(this),Vu(this))};function $a(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Vu(p){p.g=new Yn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var T=wt(p.na);We(T,"RID","rpc"),We(T,"SID",p.M),We(T,"AID",p.K),We(T,"CI",p.F?"0":"1"),!p.F&&p.ia&&We(T,"TO",p.ia),We(T,"TYPE","xmlhttp"),wr(p,T),p.u&&p.o&&Cr(T,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=Er(wt(T)),C.u=null,C.R=!0,uo(C,p)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Nr(this),Ct(19))};function vo(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Uu(p,T){var C=null;if(p.g==T){vo(p),$a(p),p.g=null;var R=2}else if(gi(p.h,T))C=T.G,Oa(p.h,T),R=1;else return;if(p.I!=0){if(T.o)if(R==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var G=p.D;R=lo(),Ut(R,new li(R,C)),Ei(p)}else Pu(p);else if(G=T.m,G==3||G==0&&T.X>0||!(R==1&&_o(p,T)||R==2&&Nr(p)))switch(C&&C.length>0&&(T=p.h,T.i=T.i.concat(C)),G){case 1:Si(p,5);break;case 4:Si(p,10);break;case 3:Si(p,6);break;default:Si(p,2)}}}function ku(p,T){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*T}function Si(p,T){if(p.j.info("Error code "+T),T==2){var C=m(p.bb,p),R=p.Ua;const G=!R;R=new _n(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ft(R,"https"),Er(R),G?Jn(R.toString(),C):za(R.toString(),C)}else Ct(2);p.I=0,p.l&&p.l.pa(T),Lu(p),yo(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Lu(p){if(p.I=0,p.ja=[],p.l){const T=qa(p.h);(T.length!=0||p.i.length!=0)&&(H(p.ja,T),H(p.ja,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.oa()}}function Ou(p,T,C){var R=C instanceof _n?wt(C):new _n(C);if(R.g!="")T&&(R.g=T+"."+R.g),ms(R,R.u);else{var G=u.location;R=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;const J=new _n(null);R&&Ft(J,R),T&&(J.g=T),G&&ms(J,G),C&&(J.h=C),R=J}return C=p.G,T=p.wa,C&&T&&We(R,C,T),We(R,"VER",p.ka),wr(p,R),R}function qu(p,T,C){if(T&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Aa&&!p.ma?new et(new _i({ab:C})):new et(p.ma),T.Fa(p.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}n=Fu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(p,T){return new an(p,T)};function an(p,T){At.call(this),this.g=new Es(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(p?p["X-WebChannel-Client-Profile"]=T.sa:p={"X-WebChannel-Client-Profile":T.sa}),this.g.U=p,(p=T&&T.Qb)&&!D(p)&&(this.g.u=p),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!D(T)&&(this.g.G=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new Fi(this)}E(an,At),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ja(this.g)},an.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=ps(p),p=C);T.i.push(new Rt(T.Ya++,p)),T.I==3&&Ei(T)},an.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,an.Z.N.call(this)};function Bu(p){zt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const C in T){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}E(Bu,zt);function Hu(){Rn.call(this),this.status=1}E(Hu,Rn);function Fi(p){this.g=p}E(Fi,Fu),Fi.prototype.ra=function(){Ut(this.g,"a")},Fi.prototype.qa=function(p){Ut(this.g,new Bu(p))},Fi.prototype.pa=function(p){Ut(this.g,new Hu)},Fi.prototype.oa=function(){Ut(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,eS=function(){return new As},j0=function(){return lo()},Z0=yt,Np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,Zc=vr,Pa.COMPLETE="complete",W0=Pa,Tu.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",At.prototype.listen=At.prototype.J,Ol=Tu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,X0=et}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore",Jv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new rm("@firebase/firestore");function Xo(){return Xr.logLevel}function de(n,...e){if(Xr.logLevel<=Ue.DEBUG){const t=e.map(lm);Xr.debug(`Firestore (${va}): ${n}`,...t)}}function os(n,...e){if(Xr.logLevel<=Ue.ERROR){const t=e.map(lm);Xr.error(`Firestore (${va}): ${n}`,...t)}}function ca(n,...e){if(Xr.logLevel<=Ue.WARN){const t=e.map(lm);Xr.warn(`Firestore (${va}): ${n}`,...t)}}function lm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,tS(n,s,t)}function tS(n,e,t){let s=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw os(s),new Error(s)}function Qe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||tS(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class J1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Q1{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new sr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new sr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new nS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class $1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class X1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new $1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Z1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function ke(n,e){return n<e?-1:n>e?1:0}function bp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return gp(o)===gp(l)?ke(o,l):gp(o)?1:-1}return ke(n.length,e.length)}const j1=55296,eN=57343;function gp(n){const e=n.charCodeAt(0);return e>=j1&&e<=eN}function fa(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="__name__";class Ni{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Ni.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ke(e.length,t.length)}static compareSegments(e,t){const s=Ni.isNumericId(e),o=Ni.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):bp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class ht extends Ni{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ni{construct(e,t,s){return new Wt(e,t,s)}static isValidIdentifier(e){return tN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$v}static keyField(){return new Wt([$v])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ht.fromString(e))}static fromName(e){return new ve(ht.fromString(e).popFirst(5))}static empty(){return new ve(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iN(n,e,t,s){if(e===!0&&s===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Xv(n){if(!ve.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Wl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cm(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!iS(n))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=-62135596800,Zv=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Zv);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wv)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Pt("string",ut._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ut(0,0))}static max(){return new Ce(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function sN(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new or(o,ve.empty(),e)}function rN(n){return new or(n.readTime,n.key,Zl)}class or{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new or(Ce.min(),ve.empty(),Zl)}static max(){return new or(Ce.max(),ve.empty(),Zl)}}function oN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==aN)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(g=>s(g)))})),u=!0,l===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((o=>o?ie.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,o)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((v=>{u[m]=v,++d,d===l&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ie(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function uN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ea(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=-1;function Lf(n){return n==null}function hf(n){return n===0&&1/n==-1/0}function cN(n){return typeof n=="number"&&Number.isInteger(n)&&!hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="";function fN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jv(e)),e=dN(n.get(t),e);return jv(e)}function dN(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case sS:t+="";break;default:t+=l}}return t}function jv(n){return n+sS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tT(this.data.getIterator())}getIteratorFrom(e){return new tT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class tT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ni([])}unionWith(e){let t=new Ot(Wt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new oS("Invalid base64 string: "+l):l}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const hN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=hN.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lr(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="server_timestamp",lS="__type__",uS="__previous_value__",cS="__local_write_time__";function dm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[lS])==null?void 0:s.stringValue)===aS}function Of(n){const e=n.mapValue.fields[uS];return dm(e)?Of(e):e}function jl(n){const e=ar(n.mapValue.fields[cS].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t,s,o,l,u,d,g,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v}}const pf="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="__type__",mN="__max__",Qc={mapValue:{}},dS="__vector__",mf="value";function ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dm(n)?4:yN(n)?9007199254740991:gN(n)?10:11:Se(28295,{value:n})}function Ui(n,e){if(n===e)return!0;const t=ur(n);if(t!==ur(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jl(n).isEqual(jl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=ar(o.timestampValue),d=ar(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return lr(o.bytesValue).isEqual(lr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Et(o.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(o.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Et(o.integerValue)===Et(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=Et(o.doubleValue),d=Et(l.doubleValue);return u===d?hf(u)===hf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return fa(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(eT(u)!==eT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Ui(u[g],d[g])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function tu(n,e){return(n.values||[]).find((t=>Ui(t,e)))!==void 0}function da(n,e){if(n===e)return 0;const t=ur(n),s=ur(e);if(t!==s)return ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Et(l.integerValue||l.doubleValue),g=Et(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return nT(n.timestampValue,e.timestampValue);case 4:return nT(jl(n),jl(e));case 5:return bp(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=lr(l),g=lr(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const v=ke(d[m],g[m]);if(v!==0)return v}return ke(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=ke(Et(l.latitude),Et(u.latitude));return d!==0?d:ke(Et(l.longitude),Et(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iT(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var A,w,H,V;const d=l.fields||{},g=u.fields||{},m=(A=d[mf])==null?void 0:A.arrayValue,v=(w=g[mf])==null?void 0:w.arrayValue,E=ke(((H=m==null?void 0:m.values)==null?void 0:H.length)||0,((V=v==null?void 0:v.values)==null?void 0:V.length)||0);return E!==0?E:iT(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Qc.mapValue&&u===Qc.mapValue)return 0;if(l===Qc.mapValue)return 1;if(u===Qc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const A=bp(g[E],v[E]);if(A!==0)return A;const w=da(d[g[E]],m[v[E]]);if(w!==0)return w}return ke(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function nT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=ar(n),s=ar(e),o=ke(t.seconds,s.seconds);return o!==0?o:ke(t.nanos,s.nanos)}function iT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=da(t[o],s[o]);if(l)return l}return ke(t.length,s.length)}function ha(n){return Mp(n)}function Mp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ar(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return lr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Mp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${Mp(t.fields[u])}`;return o+"}"})(n.mapValue):Se(61005,{value:n})}function jc(n){switch(ur(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Of(n);return e?16+jc(e):16;case 5:return 2*n.stringValue.length;case 6:return lr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+jc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return jr(s.fields,((l,u)=>{o+=l.length+jc(u)})),o})(n.mapValue);default:throw Se(13486,{value:n})}}function Dp(n){return!!n&&"integerValue"in n}function hm(n){return!!n&&"arrayValue"in n}function sT(n){return!!n&&"nullValue"in n}function rT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ef(n){return!!n&&"mapValue"in n}function gN(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fS])==null?void 0:s.stringValue)===dS}function Gl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return jr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Gl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(n.arrayValue.values[t]);return e}return{...n}}function yN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=Wt.emptyPath(),s={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=Gl(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ef(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){jr(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new qn(Gl(this.value))}}function hS(n){const e=[];return jr(n.fields,((t,s)=>{const o=new Wt([t]);if(ef(s)){const l=hS(s.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,s,o,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new nn(e,0,Ce.min(),Ce.min(),Ce.min(),qn.empty(),0)}static newFoundDocument(e,t,s,o){return new nn(e,1,t,Ce.min(),s,o,0)}static newNoDocument(e,t){return new nn(e,2,t,Ce.min(),Ce.min(),qn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Ce.min(),Ce.min(),qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.position=e,this.inclusive=t}}function oT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(u.referenceValue),t.key):s=da(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function aT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function _N(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{}class Lt extends pS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new TN(e,t,s):t==="array-contains"?new AN(e,s):t==="in"?new CN(e,s):t==="not-in"?new IN(e,s):t==="array-contains-any"?new RN(e,s):new Lt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new EN(e,s):new SN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(da(t,this.value)):t!==null&&ur(this.value)===ur(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends pS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ki(e,t)}matches(e){return mS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(n){return n.op==="and"}function gS(n){return vN(n)&&mS(n)}function vN(n){for(const e of n.filters)if(e instanceof ki)return!1;return!0}function xp(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+ha(n.value);if(gS(n))return n.filters.map((e=>xp(e))).join(",");{const e=n.filters.map((t=>xp(t))).join(",");return`${n.op}(${e})`}}function yS(n,e){return n instanceof Lt?(function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&Ui(s.value,o.value)})(n,e):n instanceof ki?(function(s,o){return o instanceof ki&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,u,d)=>l&&yS(u,o.filters[d])),!0):!1})(n,e):void Se(19439)}function _S(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ha(t.value)}`})(n):n instanceof ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(_S).join(" ,")+"}"})(n):"Filter"}class TN extends Lt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class EN extends Lt{constructor(e,t){super(e,"in",t),this.keys=vS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SN extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=vS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class AN extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hm(t)&&tu(t.arrayValue,this.value)}}class CN extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class IN extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class RN extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>tu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t=null,s=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function lT(n,e=null,t=[],s=[],o=null,l=null,u=null){return new wN(n,e,t,s,o,l,u)}function pm(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>xp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ha(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ha(s))).join(",")),e.Te=t}return e.Te}function mm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_N(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aT(n.startAt,e.startAt)&&aT(n.endAt,e.endAt)}function Pp(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NN(n,e,t,s,o,l,u,d){return new qf(n,e,t,s,o,l,u,d)}function gm(n){return new qf(n)}function uT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bN(n){return n.collectionGroup!==null}function zl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Wt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yf(l,s))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new yf(Wt.keyField(),s))}return e.Ie}function bi(n){const e=Re(n);return e.Ee||(e.Ee=MN(e,zl(n))),e.Ee}function MN(n,e){if(n.limitType==="F")return lT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yf(o.field,l)}));const t=n.endAt?new gf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new gf(n.startAt.position,n.startAt.inclusive):null;return lT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Vp(n,e,t){return new qf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ff(n,e){return mm(bi(n),bi(e))&&n.limitType===e.limitType}function TS(n){return`${pm(bi(n))}|lt:${n.limitType}`}function Wo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>_S(o))).join(", ")}]`),Lf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ha(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ha(o))).join(",")),`Target(${s})`})(bi(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of zl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(u,d,g){const m=oT(u,d,g);return u.inclusive?m<=0:m<0})(s.startAt,zl(s),o)||s.endAt&&!(function(u,d,g){const m=oT(u,d,g);return u.inclusive?m>=0:m>0})(s.endAt,zl(s),o))})(n,e)}function DN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ES(n){return(e,t)=>{let s=!1;for(const o of zl(n)){const l=xN(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function xN(n,e,t){const s=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?da(g,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return rS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new pt(ve.comparator);function as(){return PN}const SS=new pt(ve.comparator);function ql(...n){let e=SS;for(const t of n)e=e.insert(t.key,t);return e}function AS(n){let e=SS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Kr(){return Yl()}function CS(){return Yl()}function Yl(){return new eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const VN=new pt(ve.comparator),UN=new Ot(ve.comparator);function Le(...n){let e=UN;for(const t of n)e=e.add(t);return e}const kN=new Ot(ke);function LN(){return kN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function IS(n){return{integerValue:""+n}}function ON(n,e){return cN(e)?IS(e):ym(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function qN(n,e,t){return n instanceof _f?(function(o,l){const u={fields:{[lS]:{stringValue:aS},[cS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&dm(l)&&(l=Of(l)),l&&(u.fields[uS]=l),{mapValue:u}})(t,e):n instanceof nu?wS(n,e):n instanceof iu?NS(n,e):(function(o,l){const u=RS(o,l),d=cT(u)+cT(o.Ae);return Dp(u)&&Dp(o.Ae)?IS(d):ym(o.serializer,d)})(n,e)}function FN(n,e,t){return n instanceof nu?wS(n,e):n instanceof iu?NS(n,e):t}function RS(n,e){return n instanceof vf?(function(s){return Dp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class _f extends Hf{}class nu extends Hf{constructor(e){super(),this.elements=e}}function wS(n,e){const t=bS(e);for(const s of n.elements)t.some((o=>Ui(o,s)))||t.push(s);return{arrayValue:{values:t}}}class iu extends Hf{constructor(e){super(),this.elements=e}}function NS(n,e){let t=bS(e);for(const s of n.elements)t=t.filter((o=>!Ui(o,s)));return{arrayValue:{values:t}}}class vf extends Hf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cT(n){return Et(n.integerValue||n.doubleValue)}function bS(n){return hm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BN(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof nu&&o instanceof nu||s instanceof iu&&o instanceof iu?fa(s.elements,o.elements,Ui):s instanceof vf&&o instanceof vf?Ui(s.Ae,o.Ae):s instanceof _f&&o instanceof _f})(n.transform,e.transform)}class HN{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gf{}function MS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xS(n.key,ss.none()):new cu(n.key,n.data,ss.none());{const t=n.data,s=qn.empty();let o=new Ot(Wt.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new to(n.key,s,new ni(o.toArray()),ss.none())}}function GN(n,e,t){n instanceof cu?(function(o,l,u){const d=o.value.clone(),g=dT(o.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof to?(function(o,l,u){if(!tf(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=dT(o.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(DS(o)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Kl(n,e,t,s){return n instanceof cu?(function(l,u,d,g){if(!tf(l.precondition,u))return d;const m=l.value.clone(),v=hT(l.fieldTransforms,g,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof to?(function(l,u,d,g){if(!tf(l.precondition,u))return d;const m=hT(l.fieldTransforms,g,u),v=u.data;return v.setAll(DS(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,u,d){return tf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function zN(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=RS(s.transform,o||null);l!=null&&(t===null&&(t=qn.empty()),t.set(s.field,l))}return t||null}function fT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&fa(s,o,((l,u)=>BN(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends Gf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class to extends Gf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function DS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function dT(n,e,t){const s=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);s.set(l.field,FN(u,d,t[o]))}return s}function hT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);s.set(o.field,qN(l,u,e))}return s}class xS extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YN extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&GN(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Kl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Kl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=CS();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const g=MS(u,d);g!==null&&s.set(o.key,g),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,((t,s)=>fT(t,s)))&&fa(this.baseMutations,e.baseMutations,((t,s)=>fT(t,s)))}}class _m{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return VN})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,s[u].version);return new _m(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Fe;function $N(n){switch(n){case re.OK:return Se(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function PS(n){if(n===void 0)return os("GRPC error has no .code"),re.UNKNOWN;switch(n){case xt.OK:return re.OK;case xt.CANCELLED:return re.CANCELLED;case xt.UNKNOWN:return re.UNKNOWN;case xt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case xt.INTERNAL:return re.INTERNAL;case xt.UNAVAILABLE:return re.UNAVAILABLE;case xt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case xt.NOT_FOUND:return re.NOT_FOUND;case xt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case xt.ABORTED:return re.ABORTED;case xt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case xt.DATA_LOSS:return re.DATA_LOSS;default:return Se(39323,{code:n})}}(Fe=xt||(xt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new ir([4294967295,4294967295],0);function pT(n){const e=XN().encode(n),t=new $0;return t.update(e),new Uint8Array(t.digest())}function mT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ir([t,s],0),new ir([o,l],0)]}class vm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Fl(`Invalid padding: ${t}`);if(s<0)throw new Fl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ir.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ir.fromNumber(s)));return o.compare(WN)===1&&(o=new ir([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pT(e),[s,o]=mT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new vm(l,o,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=pT(e),[s,o]=mT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,o,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zf(Ce.min(),o,new pt(ke),as(),Le())}}class fu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new fu(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class VS{constructor(e,t){this.targetId=e,this.Ce=t}}class US{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class gT{constructor(){this.ve=0,this.Fe=yT(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Se(38017,{changeType:l})}})),new fu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=yT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZN{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=$c(),this.He=$c(),this.Ye=new pt(ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Pp(l))if(s===0){const u=new ve(l.path);this.et(t,u,nn.newNoDocument(u,Ce.min()))}else Qe(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=lr(s).toUint8Array()}catch(g){if(g instanceof oS)return ca("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new vm(u,o,l)}catch(g){return ca(g instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&Pp(d.target)){const g=new ve(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,nn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const o=new zf(e,t,this.Ye,this.je,s);return this.je=as(),this.Je=$c(),this.He=$c(),this.Ye=new pt(ke),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ot(ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ot(ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $c(){return new pt(ve.comparator)}function yT(){return new pt(ve.comparator)}const jN={asc:"ASCENDING",desc:"DESCENDING"},eb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tb={and:"AND",or:"OR"};class nb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Up(n,e){return n.useProto3Json||Lf(e)?e:{value:e}}function Tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ib(n,e){return Tf(n,e.toTimestamp())}function Mi(n){return Qe(!!n,49232),Ce.fromTimestamp((function(t){const s=ar(t);return new ut(s.seconds,s.nanos)})(n))}function Tm(n,e){return kp(n,e).canonicalString()}function kp(n,e){const t=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function LS(n){const e=ht.fromString(n);return Qe(HS(e),10190,{key:e.toString()}),e}function Lp(n,e){return Tm(n.databaseId,e.path)}function yp(n,e){const t=LS(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(qS(t))}function OS(n,e){return Tm(n.databaseId,e)}function sb(n){const e=LS(n);return e.length===4?ht.emptyPath():qS(e)}function Op(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _T(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function rb(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:PS(m.code);return new ge(v,m.message||"")})(u);t=new US(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=yp(n,s.document.name),l=Mi(s.document.updateTime),u=s.document.createTime?Mi(s.document.createTime):Ce.min(),d=new qn({mapValue:{fields:s.document.fields}}),g=nn.newFoundDocument(o,l,u,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new nf(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=yp(n,s.document),l=s.readTime?Mi(s.readTime):Ce.min(),u=nn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new nf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=yp(n,s.document),l=s.removedTargetIds||[];t=new nf([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new QN(o,l),d=s.targetId;t=new VS(d,u)}}return t}function ob(n,e){let t;if(e instanceof cu)t={update:_T(n,e.key,e.value)};else if(e instanceof xS)t={delete:Lp(n,e.key)};else if(e instanceof to)t={update:_T(n,e.key,e.data),updateMask:mb(e.fieldMask)};else{if(!(e instanceof YN))return Se(16599,{Vt:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof _f)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:ib(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function ab(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Mi(o.updateTime):Mi(l);return u.isEqual(Ce.min())&&(u=Mi(l)),new HN(u,o.transformResults||[])})(t,e)))):[]}function lb(n,e){return{documents:[OS(n,e.path)]}}function ub(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=OS(n,o);const l=(function(m){if(m.length!==0)return BS(ki.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:Zo(A.field),direction:db(A.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Up(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function cb(n){let e=sb(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=FS(E);return A instanceof ki&&gS(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((A=>(function(H){return new yf(jo(H.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,Lf(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(E){const A=!!E.before,w=E.values||[];return new gf(w,A)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const A=!E.before,w=E.values||[];return new gf(w,A)})(t.endAt)),NN(e,o,u,l,d,"F",g,m)}function fb(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=jo(t.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=jo(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ki.create(t.compositeFilter.filters.map((s=>FS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function db(n){return jN[n]}function hb(n){return eb[n]}function pb(n){return tb[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function jo(n){return Wt.fromServerFormat(n.fieldPath)}function BS(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(rT(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(sT(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rT(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(sT(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:hb(t.op),value:t.value}}})(n):n instanceof ki?(function(t){const s=t.getFilters().map((o=>BS(o)));return s.length===1?s[0]:{compositeFilter:{op:pb(t.op),filters:s}}})(n):Se(54877,{filter:n})}function mb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function HS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,s,o,l=Ce.min(),u=Ce.min(),d=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.yt=e}}function yb(n){const e=cb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.Cn=new vb}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(or.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class vb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ot(ht.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ot(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(GS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="LruGarbageCollector",Tb=1048576;function ET([n,e],[t,s]){const o=ke(n,t);return o===0?ke(e,s):o}class Eb{constructor(e){this.Ir=e,this.buffer=new Ot(ET),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ET(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Sb{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(TT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ea(t)?de(TT,"Ignoring IndexedDB error during garbage collection: ",t):await Ta(t)}await this.Vr(3e5)}))}}class Ab{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(kf.ce);const s=new Eb(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(vT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,u,d,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),Xo()<=Ue.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function Cb(n,e){return new Ab(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.changes=new eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Kl(s.mutation,o,ni.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=Kr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let u=ql();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Kr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,o){let l=as();const u=Yl(),d=(function(){return Yl()})();return t.forEach(((g,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof to)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Kl(v.mutation,m,v.mutation.getFieldMask(),ut.now())):u.set(m.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>d.set(m,new Rb(v,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Yl();let o=new pt(((u,d)=>u-d)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let v=s.get(g)||ni.empty();v=d.applyToLocalView(m,v),s.set(g,v);const E=(o.get(d.batchId)||Le()).add(g);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,v=g.value,E=CS();v.forEach((A=>{if(!l.has(A)){const w=MS(t.get(A),s.get(A));w!==null&&E.set(A,w),l=l.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ie.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ie.resolve(Kr());let d=Zl,g=l;return u.next((m=>ie.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{g=g.insert(v,A)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,Le()))).next((v=>({batchId:d,changes:AS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let o=ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let u=ql();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(g=>{const m=(function(E,A){return new qf(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,A)=>{u=u.insert(E,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((u=>{l.forEach(((g,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,nn.newInvalidDocument(v)))}));let d=ql();return u.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&Kl(v.mutation,m,ni.empty(),ut.now()),Bf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Mi(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:yb(o.bundledQuery),readTime:Mi(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.overlays=new pt(ve.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Kr();return ie.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=Kr(),l=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new pt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Kr(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Kr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return ie.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new JN(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.Qr=new Ot(Ht.$r),this.Ur=new Ot(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ve(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||ke(e.Yr,t.Yr)}static Kr(e,t){return ke(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Ht.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new KN(l,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?fm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(u=>{const d=this.Xr(u.Yr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ot(ke);return t.forEach((o=>{const l=new Ht(o,0),u=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{s=s.add(d.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const u=new Ht(new ve(l),0);let d=new Ot(ke);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(g.Yr)),!0)}),u),ie.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(o=>{const l=new Ht(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.ri=e,this.docs=(function(){return new pt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=as();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():nn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=as();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||oN(rN(v),s)<=0||(o.has(v.key)||Bf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Se(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Pb(this)}getSize(e){return ie.resolve(this.size)}}class Pb extends Ib{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.persistence=e,this.si=new eo((t=>pm(t)),mm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Em,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(l).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t){this.ui={},this.overlays={},this.ci=new kf(0),this.li=!1,this.li=!0,this.hi=new Mb,this.referenceDelegate=e(this),this.Pi=new Vb(this),this.indexManager=new _b,this.remoteDocumentCache=(function(o){return new xb(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gb(t),this.Ii=new Nb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Db(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new Ub(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Ub extends lN{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Em,this.Vi=null}static mi(e){return new Sm(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ef{constructor(e,t){this.persistence=e,this.pi=new eo((s=>fN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Cb(this,t)}static mi(e,t){return new Ef(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?ie.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(s++,l.removeEntry(u,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jc(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Am(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Nw()?8:uN(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new kb;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Xo()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Xo()<=Ue.DEBUG&&de("QueryEngine","Query:",Wo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Xo()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(t))):ie.resolve())}ys(e,t){if(uT(t))return ie.resolve(null);let s=bi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Vp(t,null,"F"),s=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Le(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(t,d);return this.Cs(t,m,u,g.readTime)?this.ys(e,Vp(t,null,"F")):this.vs(e,m,t,g)}))))})))))}ws(e,t,s,o){return uT(t)||o.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,o)?ie.resolve(null):(Xo()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wo(t)),this.vs(e,u,t,sN(o,Zl)).next((d=>d)))}))}Ds(e,t){let s=new Ot(ES(e));return t.forEach(((o,l)=>{Bf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Xo()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Wo(t)),this.ps.getDocumentsMatchingQuery(e,t,or.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LocalStore",Ob=3e8;class qb{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new pt(ke),this.xs=new eo((l=>pm(l)),mm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Fb(n,e,t,s){return new qb(n,e,t,s)}async function YS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let g=Le();for(const m of o){u.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function Bb(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,v){const E=m.batch,A=E.keys();let w=ie.resolve();return A.forEach((H=>{w=w.next((()=>v.getEntry(g,H))).next((V=>{const F=m.docVersions.get(H);Qe(F!==null,48541),V.version.compareTo(F)<0&&(E.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),v.addEntry(V)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Le();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function KS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Hb(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let w=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Zt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,s)),o=o.insert(E,w),(function(V,F,$){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Ob?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(A,w,v)&&d.push(t.Pi.updateTargetData(l,w))}));let g=as(),m=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(Gb(l,u,e.documentUpdates).next((v=>{g=v.ks,m=v.qs}))),!s.isEqual(Ce.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return ie.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function Gb(n,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=as();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ce.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):de(Cm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{ks:u,qs:o}}))}function zb(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=fm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Yb(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,ie.resolve(o)):t.Pi.allocateTargetId(s).next((u=>(o=new Zs(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function qp(n,e,t){const s=Re(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ea(u))throw u;de(Cm,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ST(n,e,t){const s=Re(n);let o=Ce.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,v){const E=Re(g),A=E.xs.get(v);return A!==void 0?ie.resolve(E.Ms.get(A)):E.Pi.getTargetData(m,v)})(s,u,bi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?o:Ce.min(),t?l:Le()))).next((d=>(Kb(s,DN(e),d),{documents:d,Qs:l})))))}function Kb(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class AT{constructor(){this.activeTargetIds=LN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jb{constructor(){this.Mo=new AT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new AT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="ConnectivityMonitor";class IT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(CT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(CT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function Fp(){return Xc===null?Xc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="RestConnection",$b={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===pf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const u=Fp(),d=this.zo(e,t.toUriEncodedString());de(_p,`Sending RPC '${e}' ${u}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:m}=new URL(d),v=ya(m);return this.Jo(e,d,g,s,v).then((E=>(de(_p,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw ca(_p,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,u){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+va})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=$b[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class Zb extends Xb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const u=Fp();return new Promise(((d,g)=>{const m=new X0;m.setWithCredentials(!0),m.listenOnce(W0.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Zc.NO_ERROR:const E=m.getResponseJson();de(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Zc.TIMEOUT:de(en,`RPC '${e}' ${u} timed out`),g(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const A=m.getStatus();if(de(en,`RPC '${e}' ${u} failed with status:`,A,"response text:",m.getResponseText()),A>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const H=w==null?void 0:w.error;if(H&&H.status&&H.message){const V=(function($){const j=$.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(j)>=0?j:re.UNKNOWN})(H.status);g(new ge(V,H.message))}else g(new ge(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{de(en,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);de(en,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=Fp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=eS(),d=j0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");de(en,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=u.createWebChannel(v,g);this.I_(E);let A=!1,w=!1;const H=new Wb({Yo:F=>{w?de(en,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(A||(de(en,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),de(en,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),V=(F,$,j)=>{F.listen($,(Z=>{try{j(Z)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return V(E,Ol.EventType.OPEN,(()=>{w||(de(en,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),V(E,Ol.EventType.CLOSE,(()=>{w||(w=!0,de(en,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(E))})),V(E,Ol.EventType.ERROR,(F=>{w||(w=!0,ca(en,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),H.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),V(E,Ol.EventType.MESSAGE,(F=>{var $;if(!w){const j=F.data[0];Qe(!!j,16349);const Z=j,oe=(Z==null?void 0:Z.error)||(($=Z[0])==null?void 0:$.error);if(oe){de(en,`RPC '${e}' stream ${o} received error:`,oe);const fe=oe.status;let se=(function(b){const U=xt[b];if(U!==void 0)return PS(U)})(fe),M=oe.message;se===void 0&&(se=re.INTERNAL,M="Unknown error status: "+fe+" with message "+oe.message),w=!0,H.a_(new ge(se,M)),E.close()}else de(en,`RPC '${e}' stream ${o} received:`,j),H.u_(j)}})),V(d,Z0.STAT_EVENT,(F=>{F.stat===Np.PROXY?de(en,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Np.NOPROXY&&de(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n){return new nb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="PersistentStream";class QS{constructor(e,t,s,o,l,u,d,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ge(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(RT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(RT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jb extends QS{constructor(e,t,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rb(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Mi(u.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Op(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=Pp(g)?{documents:lb(l,g)}:{query:ub(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=kS(l,u.resumeToken);const m=Up(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Tf(l,u.snapshotVersion.toTimestamp());const m=Up(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=fb(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.q_(t)}}class eM extends QS{constructor(e,t,s,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ab(e.writeResults,e.commitTime),s=Mi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Op(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>ob(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{}class nM extends tM{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,kp(t,s),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,kp(t,s),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(os(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class sM{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{no(this)&&(de(Wr,"Restarting streams for network reachability change."),await(async function(g){const m=Re(g);m.Ea.add(4),await du(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Kf(m)})(this))}))})),this.Ra=new iM(s,o)}}async function Kf(n){if(no(n))for(const e of n.da)await e(!0)}async function du(n){for(const e of n.da)await e(!1)}function $S(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Nm(t)?wm(t):Sa(t).O_()&&Rm(t,e))}function Im(n,e){const t=Re(n),s=Sa(t);t.Ia.delete(e),s.O_()&&XS(t,e),t.Ia.size===0&&(s.O_()?s.L_():no(t)&&t.Ra.set("Unknown"))}function Rm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sa(n).Y_(e)}function XS(n,e){n.Va.Ue(e),Sa(n).Z_(e)}function wm(n){n.Va=new ZN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Sa(n).start(),n.Ra.ua()}function Nm(n){return no(n)&&!Sa(n).x_()&&n.Ia.size>0}function no(n){return Re(n).Ea.size===0}function WS(n){n.Va=void 0}async function rM(n){n.Ra.set("Online")}async function oM(n){n.Ia.forEach(((e,t)=>{Rm(n,e)}))}async function aM(n,e){WS(n),Nm(n)?(n.Ra.ha(e),wm(n)):n.Ra.set("Unknown")}async function lM(n,e,t){if(n.Ra.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(s){de(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sf(n,s)}else if(e instanceof nf?n.Va.Ze(e):e instanceof VS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await KS(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),XS(l,g);const E=new Zs(v.target,g,m,v.sequenceNumber);Rm(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){de(Wr,"Failed to raise snapshot:",s),await Sf(n,s)}}async function Sf(n,e,t){if(!Ea(e))throw e;n.Ea.add(1),await du(n),n.Ra.set("Offline"),t||(t=()=>KS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Wr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kf(n)}))}function ZS(n,e){return e().catch((t=>Sf(n,t,e)))}async function Jf(n){const e=Re(n),t=cr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fm;for(;uM(e);)try{const o=await zb(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,cM(e,o)}catch(o){await Sf(e,o)}jS(e)&&eA(e)}function uM(n){return no(n)&&n.Ta.length<10}function cM(n,e){n.Ta.push(e);const t=cr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function jS(n){return no(n)&&!cr(n).x_()&&n.Ta.length>0}function eA(n){cr(n).start()}async function fM(n){cr(n).ra()}async function dM(n){const e=cr(n);for(const t of n.Ta)e.ea(t.mutations)}async function hM(n,e,t){const s=n.Ta.shift(),o=_m.from(s,e,t);await ZS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Jf(n)}async function pM(n,e){e&&cr(n).X_&&await(async function(s,o){if((function(u){return $N(u)&&u!==re.ABORTED})(o.code)){const l=s.Ta.shift();cr(s).B_(),await ZS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Jf(s)}})(n,e),jS(n)&&eA(n)}async function wT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),de(Wr,"RemoteStore received new credentials");const s=no(t);t.Ea.add(3),await du(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kf(t)}async function mM(n,e){const t=Re(n);e?(t.Ea.delete(2),await Kf(t)):e||(t.Ea.add(2),await du(t),t.Ra.set("Unknown"))}function Sa(n){return n.ma||(n.ma=(function(t,s,o){const l=Re(t);return l.sa(),new jb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:rM.bind(null,n),t_:oM.bind(null,n),r_:aM.bind(null,n),H_:lM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Nm(n)?wm(n):n.Ra.set("Unknown")):(await n.ma.stop(),WS(n))}))),n.ma}function cr(n){return n.fa||(n.fa=(function(t,s,o){const l=Re(t);return l.sa(),new eM(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:fM.bind(null,n),r_:pM.bind(null,n),ta:dM.bind(null,n),na:hM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Jf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Wr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new bm(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(n,e){if(os("AsyncQueue",`${e}: ${n}`),Ea(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=ql(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.ga=new pt(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,o,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ma(e,t,na.emptySet(t),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yM{constructor(){this.queries=bT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=bT(),l.forEach(((u,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function bT(){return new eo((n=>TS(n)),Ff)}async function _M(n,e){const t=Re(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new gM,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Mm(u,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Dm(t)}async function vM(n,e){const t=Re(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function TM(n,e){const t=Re(n);let s=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(o)&&(s=!0);u.wa=o}}s&&Dm(t)}function EM(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Dm(n){n.Ca.forEach((e=>{e.next()}))}var Bp,MT;(MT=Bp||(Bp={})).Ma="default",MT.Cache="cache";class SM{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.key=e}}class nA{constructor(e){this.key=e}}class AM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=ES(e),this.tu=new na(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new NT,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),w=Bf(this.query,E)?E:null,H=!!A&&this.mutatedKeys.has(A.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;A&&w?A.data.isEqual(w.data)?H!==V&&(s.track({type:3,doc:w}),F=!0):this.su(A,w)||(s.track({type:2,doc:w}),F=!0,(g&&this.eu(w,g)>0||m&&this.eu(w,m)<0)&&(d=!0)):!A&&w?(s.track({type:0,doc:w}),F=!0):A&&!w&&(s.track({type:1,doc:A}),F=!0,(g||m)&&(d=!0)),F&&(w?(u=u.add(w),l=V?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,H){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:F})}};return V(w)-V(H)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,m=g!==this.Za;return this.Za=g,u.length!==0||m?{snapshot:new ma(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new nA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new tA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xm="SyncEngine";class CM{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class IM{constructor(e){this.key=e,this.hu=!1}}class RM{constructor(e,t,s,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new eo((d=>TS(d)),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ve.comparator),this.Au=new Map,this.Ru=new Em,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wM(n,e,t=!0){const s=lA(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await iA(s,e,t,!0),o}async function NM(n,e){const t=lA(n);await iA(t,e,!0,!1)}async function iA(n,e,t,s){const o=await Yb(n.localStore,bi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await bM(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&$S(n.remoteStore,o),d}async function bM(n,e,t,s,o){n.pu=(E,A,w)=>(async function(V,F,$,j){let Z=F.view.ru($);Z.Cs&&(Z=await ST(V.localStore,F.query,!1).then((({documents:M})=>F.view.ru(M,Z))));const oe=j&&j.targetChanges.get(F.targetId),fe=j&&j.targetMismatches.get(F.targetId)!=null,se=F.view.applyChanges(Z,V.isPrimaryClient,oe,fe);return xT(V,F.targetId,se.au),se.snapshot})(n,E,A,w);const l=await ST(n.localStore,e,!0),u=new AM(e,l.Qs),d=u.ru(l.documents),g=fu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,g);xT(n,t,m.au);const v=new CM(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function MM(n,e,t){const s=Re(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((u=>!Ff(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Im(s.remoteStore,o.targetId),Hp(s,o.targetId)})).catch(Ta)):(Hp(s,o.targetId),await qp(s.localStore,o.targetId,!0))}async function DM(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Im(t.remoteStore,s.targetId))}async function xM(n,e,t){const s=qM(n);try{const o=await(function(u,d){const g=Re(u),m=ut.now(),v=d.reduce(((w,H)=>w.add(H.key)),Le());let E,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let H=as(),V=Le();return g.Ns.getEntries(w,v).next((F=>{H=F,H.forEach((($,j)=>{j.isValidDocument()||(V=V.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,H))).next((F=>{E=F;const $=[];for(const j of d){const Z=zN(j,E.get(j.key).overlayedDocument);Z!=null&&$.push(new to(j.key,Z,hS(Z.value.mapValue),ss.exists(!0)))}return g.mutationQueue.addMutationBatch(w,m,$,d)})).next((F=>{A=F;const $=F.applyToLocalDocumentSet(E,V);return g.documentOverlayCache.saveOverlays(w,F.batchId,$)}))})).then((()=>({batchId:A.batchId,changes:AS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,d,g){let m=u.Vu[u.currentUser.toKey()];m||(m=new pt(ke)),m=m.insert(d,g),u.Vu[u.currentUser.toKey()]=m})(s,o.batchId,t),await hu(s,o.changes),await Jf(s.remoteStore)}catch(o){const l=Mm(o,"Failed to persist write");t.reject(l)}}async function sA(n,e){const t=Re(n);try{const s=await Hb(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Au.get(l);u&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Qe(u.hu,14607):o.removedDocuments.size>0&&(Qe(u.hu,42227),u.hu=!1))})),await hu(t,s,e)}catch(s){await Ta(s)}}function DT(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const g=Re(u);g.onlineState=d;let m=!1;g.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(d)&&(m=!0)})),m&&Dm(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function PM(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let u=new pt(ve.comparator);u=u.insert(l,nn.newNoDocument(l,Ce.min()));const d=Le().add(l),g=new zf(Ce.min(),new Map,new pt(ke),u,d);await sA(s,g),s.du=s.du.remove(l),s.Au.delete(e),Pm(s)}else await qp(s.localStore,e,!1).then((()=>Hp(s,e,t))).catch(Ta)}async function VM(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await Bb(t.localStore,e);oA(t,s,null),rA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await hu(t,o)}catch(o){await Ta(o)}}async function UM(n,e,t){const s=Re(n);try{const o=await(function(u,d){const g=Re(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,d).next((E=>(Qe(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(m,E)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);oA(s,e,t),rA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await hu(s,o)}catch(o){await Ta(o)}}function rA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function oA(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Hp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||aA(n,s)}))}function aA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Im(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pm(n))}function xT(n,e,t){for(const s of t)s instanceof tA?(n.Ru.addReference(s.key,e),kM(n,s)):s instanceof nA?(de(xm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||aA(n,s.key)):Se(19791,{wu:s})}function kM(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(xm,"New document in limbo: "+t),n.Eu.add(s),Pm(n))}function Pm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(ht.fromString(e)),s=n.fu.next();n.Au.set(s,new IM(t)),n.du=n.du.insert(t,s),$S(n.remoteStore,new Zs(bi(gm(t.path)),s,"TargetPurposeLimboResolution",kf.ce))}}async function hu(n,e,t){const s=Re(n),o=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{u.push(s.pu(g,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Am.As(g.targetId,m);l.push(E)}})))})),await Promise.all(u),s.Pu.H_(o),await(async function(g,m){const v=Re(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(m,(A=>ie.forEach(A.Es,(w=>v.persistence.referenceDelegate.addReference(E,A.targetId,w))).next((()=>ie.forEach(A.ds,(w=>v.persistence.referenceDelegate.removeReference(E,A.targetId,w)))))))))}catch(E){if(!Ea(E))throw E;de(Cm,"Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const w=v.Ms.get(A),H=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(H);v.Ms=v.Ms.insert(A,V)}}})(s.localStore,l))}async function LM(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){de(xm,"User change. New user:",e.toKey());const s=await YS(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ge(re.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await hu(t,s.Ls)}}function OM(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const u of l){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function lA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PM.bind(null,e),e.Pu.H_=TM.bind(null,e.eventManager),e.Pu.yu=EM.bind(null,e.eventManager),e}function qM(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UM.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Fb(this.persistence,new Lb,e.initialUser,this.serializer)}Cu(e){return new zS(Sm.mi,this.serializer)}Du(e){return new Jb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class FM extends Af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Ef,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Sb(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new zS((s=>Ef.mi(s,t)),this.serializer)}}class Gp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>DT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LM.bind(null,this.syncEngine),await mM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yM})()}createDatastore(e){const t=Yf(e.databaseInfo.databaseId),s=(function(l){return new Zb(l)})(e.databaseInfo);return(function(l,u,d,g){return new nM(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,u,d){return new sM(s,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>DT(this.syncEngine,t,0)),(function(){return IT.v()?new IT:new Qb})())}createSyncEngine(e,t){return(function(o,l,u,d,g,m,v){const E=new RM(o,l,u,d,g,m);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);de(Wr,"RemoteStore shutting down."),l.Ea.add(5),await du(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class HM{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{de(fr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(de(fr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Mm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Tp(n,e){n.asyncQueue.verifyOperationInProgress(),de(fr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await YS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function PT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await GM(n);de(fr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>wT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>wT(e.remoteStore,o))),n._onlineComponents=e}async function GM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(fr,"Using user provided OfflineComponentProvider");try{await Tp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ca("Error using user provided cache. Falling back to memory cache: "+t),await Tp(n,new Af)}}else de(fr,"Using default OfflineComponentProvider"),await Tp(n,new FM(void 0));return n._offlineComponents}async function uA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(fr,"Using user provided OnlineComponentProvider"),await PT(n,n._uninitializedComponentsProvider._online)):(de(fr,"Using default OnlineComponentProvider"),await PT(n,new Gp))),n._onlineComponents}function zM(n){return uA(n).then((e=>e.syncEngine))}async function YM(n){const e=await uA(n),t=e.eventManager;return t.onListen=wM.bind(null,e.syncEngine),t.onUnlisten=MM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DM.bind(null,e.syncEngine),t}function KM(n,e,t={}){const s=new sr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const v=new BM({next:A=>{v.Nu(),u.enqueueAndForget((()=>vM(l,E)));const w=A.docs.has(d);!w&&A.fromCache?m.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&A.fromCache&&g&&g.source==="server"?m.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new SM(gm(d.path),v,{includeMetadataChanges:!0,qa:!0});return _M(l,E)})(await YM(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firestore.googleapis.com",UT=!0;class kT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fA,this.ssl=UT}else this.host=e.host,this.ssl=e.ssl??UT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Tb)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vm{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new K1;switch(s.type){case"firstParty":return new X1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=VT.get(t);s&&(de("ComponentProvider","Removing Datastore"),VT.delete(t),s.terminate())})(this),Promise.resolve()}}function JM(n,e,t,s={}){var m;n=Wl(n,Vm);const o=ya(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(B0(`https://${d}`),H0("Firestore",!0)),l.host!==fA&&l.host!==d&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:o,emulatorOptions:s};if(!Qr(g,u)&&(n._setSettings(g),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=tn.MOCK_USER;else{v=vw(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new tn(A)}n._authCredentials=new J1(new nS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Um(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uu(t,Gt._jsonSchema))return new Gt(e,s||null,new ve(ht.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Pt("string",Gt._jsonSchemaVersion),referencePath:Pt("string")};class su extends Um{constructor(e,t,s){super(e,t,gm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function Qf(n,e,...t){if(n=Hn(n),arguments.length===1&&(e=um.newId()),nN("doc","path",e),n instanceof Vm){const s=ht.fromString(e,...t);return Xv(s),new Gt(n,null,new ve(s))}{if(!(n instanceof Gt||n instanceof su))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Xv(s),new Gt(n.firestore,n instanceof su?n.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="AsyncQueue";class OT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JS(this,"async_queue_retry"),this._c=()=>{const s=vp();s&&de(LT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new sr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ea(e))throw e;de(LT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,os("INTERNAL UNHANDLED ERROR: ",qT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=bm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:qT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class km extends Vm{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new OT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OT(e),this._firestoreClient=void 0,await e}}}function QM(n,e){const t=typeof n=="object"?n:K0(),s=typeof n=="string"?n:pf,o=am(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=yw("firestore");l&&JM(o,...l)}return o}function dA(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$M(n),n._firestoreClient}function $M(n){var s,o,l;const e=n._freezeSettings(),t=(function(d,g,m,v){return new pN(d,g,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new HM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Zt.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Pt("string",Fn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(uu(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Pt("string",Di._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new xi(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:Pt("string",xi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=/^__.*__$/;class WM{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}function pA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class Om{constructor(e,t,s,o,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pA(this.Ac)&&XM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZM{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Yf(e)}Cc(e,t,s,o=!1){return new Om({Ac:e,methodName:t,Dc:s,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jM(n){const e=n._freezeSettings(),t=Yf(n._databaseId);return new ZM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eD(n,e,t,s,o,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);_A("Data must be an object, but it was:",u,s);const d=gA(s,u);let g,m;if(l.merge)g=new ni(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=tD(e,E,t);if(!u.contains(A))throw new ge(re.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);iD(v,A)||v.push(A)}g=new ni(v),m=u.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,m=u.fieldTransforms;return new WM(new qn(d),g,m)}function mA(n,e){if(yA(n=Hn(n)))return _A("Unsupported field value:",e,n),gA(n,e);if(n instanceof hA)return(function(s,o){if(!pA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let u=0;for(const d of s){let g=mA(d,o.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ON(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:Tf(o.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Tf(o.serializer,l)}}if(s instanceof Di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Fn)return{bytesValue:kS(o.serializer,s._byteString)};if(s instanceof Gt){const l=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof xi)return(function(u,d){return{mapValue:{fields:{[fS]:{stringValue:dS},[mf]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return ym(d.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${cm(s)}`)})(n,e)}function gA(n,e){const t={};return rS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(n,((s,o)=>{const l=mA(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function yA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Di||n instanceof Fn||n instanceof Gt||n instanceof hA||n instanceof xi)}function _A(n,e,t){if(!yA(t)||!iS(t)){const s=cm(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tD(n,e,t){if((e=Hn(e))instanceof Lm)return e._internalPath;if(typeof e=="string")return vA(n,e);throw Cf("Field path arguments must be of type string or ",n,!1,void 0,t)}const nD=new RegExp("[~\\*/\\[\\]]");function vA(n,e,t){if(e.search(nD)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lm(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cf(n,e,t,s,o){const l=s&&!s.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${o}`),g+=")"),new ge(re.INVALID_ARGUMENT,d+n+g)}function iD(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sD extends TA{data(){return super.data()}}function EA(n,e){return typeof e=="string"?vA(n,e):e instanceof Lm?e._internalPath:e._delegate._internalPath}class rD{convertValue(e,t="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return jr(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[mf].arrayValue)==null?void 0:o.values)==null?void 0:l.map((u=>Et(u.doubleValue)));return new xi(t)}convertGeoPoint(e){return new Di(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Of(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const t=ar(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);Qe(HS(s),9688,{name:e});const o=new eu(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return o.isEqual(t)||os(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jr extends TA{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(EA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Jr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jr._jsonSchema={type:Pt("string",Jr._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class sf extends Jr{data(e={}){return super.data(e)}}class Jl{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new sf(this._firestore,this._userDataWriter,s.key,s,new Bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const g=new sf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Bl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new sf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Bl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:aD(d.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){n=Wl(n,Gt);const e=Wl(n.firestore,km);return KM(dA(e),n._key).then((t=>cD(e,n,t)))}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:Pt("string",Jl._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class lD extends rD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function AA(n,e,t){n=Wl(n,Gt);const s=Wl(n.firestore,km),o=oD(n.converter,e);return uD(s,[eD(jM(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ss.none())])}function uD(n,e){return(function(s,o){const l=new sr;return s.asyncQueue.enqueueAndForget((async()=>xM(await zM(s),o,l))),l.promise})(dA(n),e)}function cD(n,e,t){const s=t.docs.get(e._key),o=new lD(n);return new Jr(n,o,e._key,s,new Bl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){va=o})(_a),ua(new $r("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new km(new Q1(s.getProvider("auth-internal")),new W1(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(m.options.projectId,v)})(u,o),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),nr(Kv,Jv,e),nr(Kv,Jv,"esm2020")})();var fD="firebase",dD="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(fD,dD,"app");function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hD=CA,IA=new au("auth","Firebase",CA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new rm("@firebase/auth");function pD(n,...e){If.logLevel<=Ue.WARN&&If.warn(`Auth (${_a}): ${n}`,...e)}function rf(n,...e){If.logLevel<=Ue.ERROR&&If.error(`Auth (${_a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,...e){throw qm(n,...e)}function Pi(n,...e){return qm(n,...e)}function RA(n,e,t){const s={...hD(),[e]:t};return new au("auth","Firebase",s).create(e,{appName:n.name})}function rr(n){return RA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return IA.create(n,...e)}function Ee(n,e,...t){if(!n)throw qm(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw rf(e),new Error(e)}function ls(n,e){n||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function mD(){return FT()==="http:"||FT()==="https:"}function FT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mD()||Iw()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=Sw()||Rw()}get(){return gD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TD=new pu(3e4,6e4);function io(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function dr(n,e,t,s,o={}){return NA(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=lu({key:n.config.apiKey,...u}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:g,...l};return Cw()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ya(n.emulatorConfig.host)&&(m.credentials="include"),wA.fetch()(await bA(n,n.config.apiHost,t,d),m)})}async function NA(n,e,t){n._canInitEmulator=!1;const s={..._D,...e};try{const o=new SD(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Wc(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(n,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Wc(n,"email-already-in-use",u);if(g==="USER_DISABLED")throw Wc(n,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw RA(n,v,m);si(n,v)}}catch(o){if(o instanceof cs)throw o;si(n,"network-request-failed",{message:String(o)})}}async function $f(n,e,t,s,o={}){const l=await dr(n,e,t,s,o);return"mfaPendingCredential"in l&&si(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function bA(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?Fm(n.config,o):`${n.config.apiScheme}://${o}`;return vD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function ED(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Pi(this.auth,"network-request-failed")),TD.get())})}}function Wc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Pi(n,e,s);return o.customData._tokenResponse=t,o}function BT(n){return n!==void 0&&n.enterprise!==void 0}class AD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ED(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CD(n,e){return dr(n,"GET","/v2/recaptchaConfig",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(n,e){return dr(n,"POST","/v1/accounts:delete",e)}async function Rf(n,e){return dr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RD(n,e=!1){const t=Hn(n),s=await t.getIdToken(e),o=Bm(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Ql(Ep(o.auth_time)),issuedAtTime:Ql(Ep(o.iat)),expirationTime:Ql(Ep(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ep(n){return Number(n)*1e3}function Bm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{const o=L0(t);return o?JSON.parse(o):(rf("Failed to decode base64 JWT payload"),null)}catch(o){return rf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function HT(n){const e=Bm(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof cs&&wD(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function wD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ru(n,Rf(e,{idToken:t}));Ee(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?MA(o.providerUserInfo):[],u=MD(n.providerData,l),d=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),m=d?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Yp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function bD(n){const e=Hn(n);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MD(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function MA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(n,e){const t=await NA(n,{},async()=>{const s=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await bA(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:s};return n.emulatorConfig&&ya(n.emulatorConfig.host)&&(g.credentials="include"),wA.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xD(n,e){return dr(n,"POST","/v2/accounts:revokeToken",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=HT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await DD(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new ia;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new ND(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RD(this,e)}reload(){return bD(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await ru(this,ID(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,g=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:w,providerData:H,stsTokenManager:V}=t;Ee(E&&V,e,"internal-error");const F=ia.fromJSON(this.name,V);Ee(typeof E=="string",e,"internal-error"),Ks(s,e.name),Ks(o,e.name),Ee(typeof A=="boolean",e,"internal-error"),Ee(typeof w=="boolean",e,"internal-error"),Ks(l,e.name),Ks(u,e.name),Ks(d,e.name),Ks(g,e.name),Ks(m,e.name),Ks(v,e.name);const $=new ii({uid:E,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:m,lastLoginAt:v});return H&&Array.isArray(H)&&($.providerData=H.map(j=>({...j}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,s=!1){const o=new ia;o.updateFromServerResponse(t);const l=new ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?MA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ia;d.updateFromIdToken(s);const g=new ii({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new Map;function is(n){ls(n instanceof Function,"Expected a class definition");let e=GT.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DA.type="NONE";const zT=DA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=of(this.userKey,o.apiKey,l),this.fullPersistenceKey=of("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new sa(is(zT),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||is(zT);const u=of(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let E;if(typeof v=="string"){const A=await Rf(e,{idToken:v}).catch(()=>{});if(!A)break;E=await ii._fromGetAccountInfoResponse(e,A,v)}else E=ii._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new sa(l,e,s):(l=g[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new sa(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LA(e))return"Blackberry";if(OA(e))return"Webos";if(PA(e))return"Safari";if((e.includes("chrome/")||VA(e))&&!e.includes("edge/"))return"Chrome";if(kA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xA(n=rn()){return/firefox\//i.test(n)}function PA(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VA(n=rn()){return/crios\//i.test(n)}function UA(n=rn()){return/iemobile/i.test(n)}function kA(n=rn()){return/android/i.test(n)}function LA(n=rn()){return/blackberry/i.test(n)}function OA(n=rn()){return/webos/i.test(n)}function Hm(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function PD(n=rn()){var e;return Hm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function VD(){return ww()&&document.documentMode===10}function qA(n=rn()){return Hm(n)||kA(n)||OA(n)||LA(n)||/windows phone/i.test(n)||UA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n,e=[]){let t;switch(n){case"Browser":t=YT(rn());break;case"Worker":t=`${YT(rn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const g=e(l);u(g)}catch(g){d(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(n,e={}){return dr(n,"GET","/v2/passwordPolicy",io(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=6;class OD{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KT(this),this.idTokenSubscription=new KT(this),this.beforeStateQueue=new UD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=is(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),s=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ti(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===d)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(rr(this));const t=e?Hn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kD(this),t=new OD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await xD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&is(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&pD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Aa(n){return Hn(n)}class KT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uw(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FD(n){Xf=n}function BA(n){return Xf.loadJS(n)}function BD(){return Xf.recaptchaEnterpriseScript}function HD(){return Xf.gapiScript}function GD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class zD{constructor(){this.enterprise=new YD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KD="recaptcha-enterprise",HA="NO_RECAPTCHA";class JD{constructor(e){this.type=KD,this.auth=Aa(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{CD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new AD(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(g=>{d(g)})})}function o(l,u,d){const g=window.grecaptcha;BT(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(HA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&BT(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=BD();g.length!==0&&(g+=d),BA(g).then(()=>{o(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function JT(n,e,t,s=!1,o=!1){const l=new JD(n);let u;if(o)u=HA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function QT(n,e,t,s,o){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await JT(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await JT(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n,e){const t=am(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Qr(l,e??{}))return o;si(o,"already-initialized")}return t.initialize({options:e})}function $D(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(is);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function XD(n,e,t){const s=Aa(n);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=GA(e),{host:u,port:d}=WD(e),g=d===null?"":`:${d}`,m={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(Qr(m,s.config.emulator)&&Qr(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ya(u)?(B0(`${l}//${u}${g}`),H0("Auth",!0)):ZD()}function GA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WD(n){const e=GA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:$T(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:$T(u)}}}function $T(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function jD(n,e){return dr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(n,e){return $f(n,"POST","/v1/accounts:signInWithPassword",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(n,e){return $f(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}async function nx(n,e){return $f(n,"POST","/v1/accounts:signInWithEmailLink",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Gm{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ou(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QT(e,t,"signInWithPassword",ex);case"emailLink":return tx(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QT(e,s,"signUpPassword",jD);case"emailLink":return nx(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n,e){return $f(n,"POST","/v1/accounts:signInWithIdp",io(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="http://localhost";class Zr extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const u=new Zr(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ra(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ra(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ra(e,t)}buildRequest(){const e={requestUri:ix,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rx(n){const e=kl(Ll(n)).link,t=e?kl(Ll(e)).deep_link_id:null,s=kl(Ll(n)).deep_link_id;return(s?kl(Ll(s)).link:null)||s||t||e||n}class zm{constructor(e){const t=kl(Ll(e)),s=t.apiKey??null,o=t.oobCode??null,l=sx(t.mode??null);Ee(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rx(e);try{return new zm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=zm.parseLink(t);return Ee(s,"argument-error"),ou._fromEmailAndCode(e,s.code,s.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends mu{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zr._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return $s.credential(t,s)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends mu{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends mu{constructor(){super("twitter.com")}static credential(e,t){return Zr._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ws.credential(t,s)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ii._fromIdTokenResponse(e,s,o),u=XT(s);return new ga({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=XT(s);return new ga({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function XT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends cs{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Nf(e,t,s,o)}}function YA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(n,l,e,s):l})}async function ox(n,e,t=!1){const s=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ga._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(n,e,t=!1){const{auth:s}=n;if(ti(s.app))return Promise.reject(rr(s));const o="reauthenticate";try{const l=await ru(n,YA(s,o,e,n),t);Ee(l.idToken,s,"internal-error");const u=Bm(l.idToken);Ee(u,s,"internal-error");const{sub:d}=u;return Ee(n.uid===d,s,"user-mismatch"),ga._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&si(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(n,e,t=!1){if(ti(n.app))return Promise.reject(rr(n));const s="signIn",o=await YA(n,s,e),l=await ga._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function lx(n,e){return KA(Aa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(n){const e=Aa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function cx(n,e,t){return ti(n.app)?Promise.reject(rr(n)):lx(Hn(n),Ca.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ux(n),s})}function fx(n,e,t,s){return Hn(n).onIdTokenChanged(e,t,s)}function dx(n,e,t){return Hn(n).beforeAuthStateChanged(e,t)}function hx(n){return Hn(n).signOut()}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=1e3,mx=10;class QA extends JA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);VD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mx):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},px)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QA.type="LOCAL";const gx=QA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends JA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$A.type="SESSION";const XA=$A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Wf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,l)),g=await yx(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,g)=>{const m=Ym("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===m)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function vx(n){Vi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function Tx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ex(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Sx(){return WA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firebaseLocalStorageDb",Ax=1,Mf="firebaseLocalStorage",jA="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zf(n,e){return n.transaction([Mf],e?"readwrite":"readonly").objectStore(Mf)}function Cx(){const n=indexedDB.deleteDatabase(ZA);return new gu(n).toPromise()}function Kp(){const n=indexedDB.open(ZA,Ax);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Mf,{keyPath:jA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Mf)?e(s):(s.close(),await Cx(),e(await Kp()))})})}async function WT(n,e,t){const s=Zf(n,!0).put({[jA]:e,value:t});return new gu(s).toPromise()}async function Ix(n,e){const t=Zf(n,!1).get(e),s=await new gu(t).toPromise();return s===void 0?null:s.value}function ZT(n,e){const t=Zf(n,!0).delete(e);return new gu(t).toPromise()}const Rx=800,wx=3;class eC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>wx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(Sx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await Tx(),!this.activeServiceWorker)return;this.sender=new _x(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ex()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await WT(e,bf,"1"),await ZT(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>WT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Ix(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ZT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Zf(o,!1).getAll();return new gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eC.type="LOCAL";const Nx=eC;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n,e){return e?is(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ra(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ra(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mx(n){return KA(n.auth,new Km(n),n.bypassAuthState)}function Dx(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),ax(t,new Km(n),n.bypassAuthState)}async function xx(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),ox(t,new Km(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mx;case"linkViaPopup":case"linkViaRedirect":return xx;case"reauthViaPopup":case"reauthViaRedirect":return Dx;default:si(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new pu(2e3,1e4);class ea extends tC{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Px.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="pendingRedirect",af=new Map;class Ux extends tC{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=af.get(this.auth._key());if(!e){try{const s=await kx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kx(n,e){const t=qx(e),s=Ox(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Lx(n,e){af.set(n._key(),e)}function Ox(n){return is(n._redirectPersistence)}function qx(n){return of(Vx,n.config.apiKey,n.name)}async function Fx(n,e,t=!1){if(ti(n.app))return Promise.reject(rr(n));const s=Aa(n),o=bx(s,e),u=await new Ux(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=600*1e3;class Hx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Gx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nC(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Pi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bx&&this.cachedEventUids.clear(),this.cachedEventUids.has(jT(e))}saveEventToCache(e){this.cachedEventUids.add(jT(e)),this.lastProcessedEventTime=Date.now()}}function jT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Gx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(n,e={}){return dr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kx=/^https?/;async function Jx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zx(n);for(const t of e)try{if(Qx(t))return}catch{}si(n,"unauthorized-domain")}function Qx(n){const e=zp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!Kx.test(t))return!1;if(Yx.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new pu(3e4,6e4);function eE(){const n=Vi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Xx(n){return new Promise((e,t)=>{var o,l,u;function s(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),t(Pi(n,"network-request-failed"))},timeout:$x.get()})}if((l=(o=Vi().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Vi().gapi)!=null&&u.load)s();else{const d=GD("iframefcb");return Vi()[d]=()=>{gapi.load?s():t(Pi(n,"network-request-failed"))},BA(`${HD()}?onload=${d}`).catch(g=>t(g))}}).catch(e=>{throw lf=null,e})}let lf=null;function Wx(n){return lf=lf||Xx(n),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new pu(5e3,15e3),jx="__/auth/iframe",eP="emulator/auth/iframe",tP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iP(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Fm(e,eP):`https://${n.config.authDomain}/${jx}`,s={apiKey:e.apiKey,appName:n.name,v:_a},o=nP.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${lu(s).slice(1)}`}async function sP(n){const e=await Wx(n),t=Vi().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:iP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tP,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=Pi(n,"network-request-failed"),d=Vi().setTimeout(()=>{l(u)},Zx.get());function g(){Vi().clearTimeout(d),o(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oP=500,aP=600,lP="_blank",uP="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cP(n,e,t,s=oP,o=aP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const g={...rP,width:s.toString(),height:o.toString(),top:l,left:u},m=rn().toLowerCase();t&&(d=VA(m)?lP:t),xA(m)&&(e=e||uP,g.scrollbars="yes");const v=Object.entries(g).reduce((A,[w,H])=>`${A}${w}=${H},`,"");if(PD(m)&&d!=="_self")return fP(e||"",d),new tE(null);const E=window.open(e||"",d,v);Ee(E,n,"popup-blocked");try{E.focus()}catch{}return new tE(E)}function fP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="__/auth/handler",hP="emulator/auth/handler",pP=encodeURIComponent("fac");async function nE(n,e,t,s,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:_a,eventId:o};if(e instanceof zA){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Vw(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof mu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const g=await n._getAppCheckToken(),m=g?`#${pP}=${encodeURIComponent(g)}`:"";return`${mP(n)}?${lu(d).slice(1)}${m}`}function mP({config:n}){return n.emulator?Fm(n,hP):`https://${n.authDomain}/${dP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="webStorageSupport";class gP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XA,this._completeRedirectFn=Fx,this._overrideRedirectResult=Lx}async _openPopup(e,t,s,o){var u;ls((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await nE(e,t,s,zp(),o);return cP(e,l,Ym())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await nE(e,t,s,zp(),o);return vx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ls(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await sP(e),s=new Hx(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sp,{type:Sp},o=>{var u;const l=(u=o==null?void 0:o[0])==null?void 0:u[Sp];l!==void 0&&t(!!l),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Jx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qA()||PA()||Hm()}}const yP=gP;var iE="@firebase/auth",sE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TP(n){ua(new $r("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Ee(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(n)},m=new qD(s,o,l,g);return $D(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new $r("auth-internal",e=>{const t=Aa(e.getProvider("auth").getImmediate());return(s=>new _P(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(iE,sE,vP(n)),nr(iE,sE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=300,SP=F0("authIdTokenMaxAge")||EP;let rE=null;const AP=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SP)return;const o=t==null?void 0:t.token;rE!==o&&(rE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function CP(n=K0()){const e=am(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QD(n,{popupRedirectResolver:yP,persistence:[Nx,gx,XA]}),s=F0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=AP(l.toString());dx(t,u,()=>u(t.currentUser)),fx(t,d=>u(d))}}const o=O0("auth");return o&&XD(t,`http://${o}`),t}function IP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}FD({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Pi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",IP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TP("Browser");const RP={apiKey:"AIzaSyBsdPghRmOsLX7JIj-T8IYF4bRp-KxQAPc",authDomain:"cybee-ca5a2.firebaseapp.com",projectId:"cybee-ca5a2",storageBucket:"cybee-ca5a2.firebasestorage.app",messagingSenderId:"215321650697",appId:"1:215321650697:web:d0bbf35f6861a891c9bad8",measurementId:"G-K624Y57R5Q"},iC=Y0(RP),jf=QM(iC),oE=CP(iC),ed="supportApp",sC="videos",rC="config",wP=async n=>{console.log("Saving videos to Firebase:",n),await AA(Qf(jf,ed,sC),{videos:n}),console.log("Videos saved successfully")},NP=async()=>{const n=Qf(jf,ed,sC),e=await SA(n);if(e.exists()){const t=e.data();return console.log("Loaded videos from Firebase:",t.videos),t.videos||[]}return console.log("No videos document found in Firebase"),[]},Jp=async n=>{await AA(Qf(jf,ed,rC),n)},bP=async()=>{const n=Qf(jf,ed,rC),e=await SA(n);return e.exists()?e.data():null},MP=({videos:n,setVideos:e,chatConfig:t,setChatConfig:s})=>{const[o,l]=Be.useState("videos"),[u,d]=Be.useState({title:"",description:"",url:""}),[g,m]=Be.useState(null),v=V=>{const F=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,$=V.match(F);return $&&$[2].length===11?$[2]:null},E=V=>{V.preventDefault();const F=v(u.url);if(!F){alert("Invalid YouTube URL");return}if(g)e($=>$.map(j=>j.id===g?{...j,title:u.title,description:u.description,url:u.url,videoId:F}:j)),m(null);else{const $={id:Date.now().toString(),title:u.title,description:u.description,url:u.url,videoId:F};e(j=>[$,...j])}d({title:"",description:"",url:""})},A=V=>{d({title:V.title,description:V.description,url:V.url}),m(V.id),window.scrollTo({top:0,behavior:"smooth"})},w=()=>{d({title:"",description:"",url:""}),m(null)},H=(V,F)=>{F.stopPropagation(),window.confirm("Are you sure you want to delete this video?")&&(e($=>$.filter(j=>j.id!==V)),g===V&&w())};return x.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Dashboard"}),x.jsx("p",{className:"text-slate-500",children:"Manage support content and AI configurations."})]}),x.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200",children:[x.jsxs("button",{onClick:()=>l("videos"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="videos"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(iw,{size:18}),x.jsx("span",{children:"Video Library"})]}),o==="videos"&&x.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),x.jsxs("button",{onClick:()=>l("ai"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="ai"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Pv,{size:18}),x.jsx("span",{children:"AI Configuration"})]}),o==="ai"&&x.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),x.jsxs("button",{onClick:()=>l("sql"),className:`pb-4 px-2 font-medium transition-colors relative ${o==="sql"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(xv,{size:18}),x.jsx("span",{children:"SQL Queries"})]}),o==="sql"&&x.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),x.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:o==="videos"?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"lg:col-span-1",children:x.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 sticky top-6",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[g?x.jsx(up,{size:20,className:"text-blue-600"}):x.jsx(Vl,{size:20,className:"text-blue-600"}),g?"Edit Video":"Add New Video"]}),g&&x.jsxs("button",{type:"button",onClick:w,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded-md transition-colors",children:[x.jsx(sm,{size:14})," Cancel"]})]}),x.jsxs("form",{onSubmit:E,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Video Title"}),x.jsx("input",{type:"text",required:!0,value:u.title,onChange:V=>d({...u,title:V.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"e.g. How to Reset Password"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"YouTube URL"}),x.jsx("input",{type:"url",required:!0,value:u.url,onChange:V=>d({...u,url:V.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"https://youtube.com/watch?v=..."})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),x.jsx("textarea",{required:!0,value:u.description,onChange:V=>d({...u,description:V.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"Brief summary of the video content..."})]}),x.jsxs("button",{type:"submit",className:`w-full py-2.5 font-medium rounded-xl transition-colors shadow-lg flex items-center justify-center gap-2 text-white ${g?"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/20":"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}`,children:[g?x.jsx(GR,{size:18}):x.jsx(Vl,{size:18}),g?"Update Video":"Save Video"]})]})]})}),x.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[x.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Published Videos (",n.length,")"]}),n.length===0?x.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[x.jsx(aw,{size:48,className:"mx-auto text-slate-300 mb-3"}),x.jsx("p",{className:"text-slate-500",children:"No videos added yet."})]}):n.map(V=>x.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex gap-4 hover:shadow-md transition-all ${g===V.id?"border-blue-500 ring-2 ring-blue-500/10":"border-slate-100"}`,children:[x.jsx("div",{className:"w-32 h-20 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0 relative group",children:x.jsx("img",{src:`https://img.youtube.com/vi/${V.videoId}/mqdefault.jpg`,alt:V.title,className:"w-full h-full object-cover"})}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("h4",{className:"font-semibold text-slate-800 line-clamp-1",children:V.title}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{type:"button",onClick:()=>A(V),className:`p-1.5 rounded-lg transition-colors ${g===V.id?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"Edit video",children:x.jsx(up,{size:16})}),x.jsx("button",{type:"button",onClick:F=>H(V.id,F),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Delete video",children:x.jsx(cp,{size:16})})]})]}),x.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mt-1",children:V.description}),x.jsx("a",{href:V.url,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 mt-2 inline-block hover:underline",children:"View on YouTube"})]})]},V.id))]})]}):o==="sql"?x.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[x.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100",children:[x.jsx("div",{className:"p-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>{const V=document.getElementById("sqlForm"),F=(V==null?void 0:V.style.display)==="none";V&&(V.style.display=F?"block":"none")},children:x.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[x.jsx(xv,{size:20,className:"text-green-600"}),"SQL Query Manager",x.jsx("span",{className:"text-sm text-slate-500",children:"(Click to expand)"})]})}),x.jsx("div",{id:"sqlForm",style:{display:"none"},className:"px-6 pb-6",children:x.jsxs("form",{onSubmit:V=>{V.preventDefault();const F=new FormData(V.target),$=F.get("title"),j=F.get("query");if($.trim()&&j.trim()){const Z={id:Date.now().toString(),title:$.trim(),query:j.trim()};s({...t,sqlQueries:[...t.sqlQueries||[],Z]}),V.target.reset()}},className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Query Title"}),x.jsx("input",{name:"title",type:"text",required:!0,placeholder:"e.g., Get all users",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SQL Query"}),x.jsx("textarea",{name:"query",required:!0,rows:6,placeholder:"SELECT * FROM users WHERE...;",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),x.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[x.jsx(Vl,{size:16})," Save Query"]})]})})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[x.jsxs("div",{className:"flex justify-between items-center mb-4",children:[x.jsxs("h4",{className:"font-medium text-slate-800",children:["Saved Queries (",(t.sqlQueries||[]).length,")"]}),x.jsx("input",{type:"text",placeholder:"Search queries...",onChange:V=>{const F=V.target.value.toLowerCase();document.querySelectorAll("[data-query-item]").forEach(j=>{const Z=j.querySelector("h5").textContent.toLowerCase(),oe=j.querySelector("p").textContent.toLowerCase();j.style.display=Z.includes(F)||oe.includes(F)?"block":"none"})},className:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-64"})]}),(t.sqlQueries||[]).length===0?x.jsx("p",{className:"text-slate-500 text-sm",children:"No queries saved yet."}):x.jsx("div",{className:"space-y-3",children:(t.sqlQueries||[]).map(V=>x.jsxs("div",{"data-query-item":!0,className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("h5",{className:"font-medium text-slate-800 cursor-pointer hover:text-blue-600",onClick:()=>{const F=document.createElement("div");F.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",F.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw] max-h-[80vh] overflow-auto">
                                  <h3 class="text-lg font-bold mb-4">${V.title}</h3>
                                  <textarea class="w-full h-64 p-3 border rounded-lg font-mono text-sm" readonly>${V.query}</textarea>
                                  <div class="flex gap-3 mt-4">
                                    <button onclick="navigator.clipboard.writeText('${V.query.replace(/'/g,"\\'")}')">Copy</button>
                                    <button onclick="this.closest('.fixed').remove()">Close</button>
                                  </div>
                                </div>
                              `,document.body.appendChild(F),F.onclick=$=>$.target===F&&F.remove()},children:V.title}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>{const F=document.createElement("div");F.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",F.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw]">
                                  <h3 class="text-lg font-bold mb-4">Edit Query</h3>
                                  <input id="editTitle" class="w-full p-3 border rounded-lg mb-3" value="${V.title}" placeholder="Query Title">
                                  <textarea id="editQuery" class="w-full h-64 p-3 border rounded-lg font-mono text-sm mb-4">${V.query}</textarea>
                                  <div class="flex gap-3">
                                    <button onclick="
                                      const title = document.getElementById('editTitle').value;
                                      const query = document.getElementById('editQuery').value;
                                      if (title && query) {
                                        window.updateQuery('${V.id}', title, query);
                                        this.closest('.fixed').remove();
                                      }
                                    " class="px-4 py-2 bg-blue-600 text-white rounded-lg">Save</button>
                                    <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-600 text-white rounded-lg">Cancel</button>
                                  </div>
                                </div>
                              `,window.updateQuery=($,j,Z)=>{s({...t,sqlQueries:(t.sqlQueries||[]).map(oe=>oe.id===$?{...oe,title:j,query:Z}:oe)})},document.body.appendChild(F)},className:"text-blue-500 hover:text-blue-700 p-1",children:x.jsx(up,{size:14})}),x.jsx("button",{onClick:()=>s({...t,sqlQueries:(t.sqlQueries||[]).filter(F=>F.id!==V.id)}),className:"text-red-500 hover:text-red-700 p-1",children:x.jsx(cp,{size:14})})]})]}),x.jsx("p",{className:"text-slate-600 text-xs font-mono truncate",children:V.query})]},V.id))})]})]}):x.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[x.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[x.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[x.jsx(Pv,{size:20,className:"text-blue-600"}),"Chat Assistant Settings"]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"System Instructions (Persona)"}),x.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Define how the AI should behave, what it knows, and its tone."}),x.jsx("textarea",{value:t.systemInstruction,onChange:V=>s({...t,systemInstruction:V.target.value}),rows:6,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Welcome Message"}),x.jsx("input",{type:"text",value:t.welcomeMessage,onChange:V=>s({...t,welcomeMessage:V.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[x.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[x.jsx(Vl,{size:20,className:"text-green-600"}),"Q&A Training"]}),x.jsxs("form",{onSubmit:async V=>{V.preventDefault();const F=new FormData(V.target),$=F.get("question"),j=F.get("answer");if($.trim()&&j.trim()){const Z={id:Date.now().toString(),question:$.trim(),answer:j.trim()},oe={...t,qaTraining:[...t.qaTraining||[],Z]};s(oe),await Jp(oe),V.target.reset()}},className:"space-y-4 mb-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Question"}),x.jsx("input",{name:"question",type:"text",required:!0,placeholder:"e.g., What is your customer care number?",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Answer"}),x.jsx("textarea",{name:"answer",required:!0,rows:3,placeholder:"e.g., You can reach our customer care at +1-800-POLOSYS (765-6797)",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),x.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[x.jsx(Vl,{size:16})," Add Q&A"]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("h4",{className:"font-medium text-slate-800",children:["Trained Q&As (",(t.qaTraining||[]).length,")"]}),(t.qaTraining||[]).length===0?x.jsx("p",{className:"text-slate-500 text-sm",children:"No Q&A pairs added yet."}):(t.qaTraining||[]).map(V=>x.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsxs("p",{className:"font-medium text-slate-800",children:["Q: ",V.question]}),x.jsx("button",{onClick:async()=>{if(!confirm("Delete this Q&A?"))return;const F={...t,qaTraining:(t.qaTraining||[]).filter($=>$.id!==V.id)};try{await Jp(F),s(F),console.log("Q&A deleted successfully")}catch($){console.error("Failed to delete Q&A:",$),alert("Failed to delete. Please try again.")}},className:"text-red-500 hover:text-red-700 p-1",children:x.jsx(cp,{size:14})})]}),x.jsxs("p",{className:"text-slate-600 text-sm",children:["A: ",V.answer]})]},V.id))]})]}),x.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800",children:x.jsxs("p",{children:[x.jsx("strong",{children:"Note:"})," Changes take effect for new chat sessions."]})})]})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DP,xP;function PP(){return{geminiUrl:DP,vertexUrl:xP}}function VP(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=PP();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fs{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const v=g[m];h(v,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function UP(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let g=0;g<o.length;g++)if(o[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Qp(n,o,l,0,u)}}function Qp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])Qp(g,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,v]of Object.entries(g)){const E=[];for(const A of t.slice(s))A==="*"?E.push(m):E.push(A);h(u,E,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&Qp(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kP(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function LP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],qP(u)),e}function OP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],FP(u)),e}function qP(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>BP(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function FP(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>HP(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function BP(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],QP(t)),e}function HP(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],$P(t)),e}function GP(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function zP(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function YP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],KP(u)),e}function KP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function oC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],JP(u)),e}function JP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function QP(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Jm(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function $P(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Jm(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var aE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aE||(aE={}));var lE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lE||(lE={}));var uE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uE||(uE={}));var js;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(js||(js={}));var cE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cE||(cE={}));var fE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fE||(fE={}));var dE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(dE||(dE={}));var hE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hE||(hE={}));var pE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pE||(pE={}));var mE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(mE||(mE={}));var gE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gE||(gE={}));var yE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(yE||(yE={}));var _E;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(_E||(_E={}));var vE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(vE||(vE={}));var TE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(TE||(TE={}));var EE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(EE||(EE={}));var SE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(SE||(SE={}));var AE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(AE||(AE={}));var CE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CE||(CE={}));var Df;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Df||(Df={}));var IE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IE||(IE={}));var RE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(RE||(RE={}));var wE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(wE||(wE={}));var $p;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($p||($p={}));var NE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(NE||(NE={}));var bE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bE||(bE={}));var ME;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ME||(ME={}));var DE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(DE||(DE={}));var xE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(xE||(xE={}));var PE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PE||(PE={}));var VE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(VE||(VE={}));var UE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(UE||(UE={}));var kE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(kE||(kE={}));var LE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(LE||(LE={}));var OE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(OE||(OE={}));var qE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qE||(qE={}));var FE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(FE||(FE={}));var BE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(BE||(BE={}));var HE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(HE||(HE={}));var GE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(GE||(GE={}));var zE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(zE||(zE={}));var YE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(YE||(YE={}));var KE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(KE||(KE={}));var JE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(JE||(JE={}));var QE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(QE||(QE={}));var $E;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})($E||($E={}));var XE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(XE||(XE={}));var WE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(WE||(WE={}));var ZE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ZE||(ZE={}));var jE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jE||(jE={}));var e0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(e0||(e0={}));var t0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(t0||(t0={}));var n0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(n0||(n0={}));var i0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(i0||(i0={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class Xp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ul{get text(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[w,H]of Object.entries(A))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(H!==null||H!==void 0)&&E.push(w);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[A,w]of Object.entries(E))A!=="inlineData"&&(w!==null||w!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,u,d,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,u,d,g,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class s0{}class r0{}class XP{}class WP{}class ZP{}class jP{}class o0{}class a0{}class l0{}class e2{}class xf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new xf;let o;const l=e;return t?o=OP(l):o=LP(l),Object.assign(s,o),s}}class u0{}class c0{}class f0{}class t2{}class n2{}class i2{}class Qm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Qm,l=YP(e);return Object.assign(s,l),s}}class s2{}class r2{}class o2{}class d0{}class a2{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class l2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $m{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new $m,l=oC(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aC(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function lC(n){return Array.isArray(n)?n.map(e=>Pf(e)):[Pf(n)]}function Pf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function uC(n){const e=Pf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cC(n){const e=Pf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function h0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function fC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>h0(e)):[h0(n)]}function Wp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function p0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function m0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return Wp(n)?n:{role:"user",parts:fC(n)}}function Xm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=sn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function Bn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(p0(n)||m0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],s=Wp(n[0]);for(const o of n){const l=Wp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(p0(o)||m0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:fC(t)}),e}function u2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(js).includes(t[0].toUpperCase())?t[0].toUpperCase():js.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(js).includes(s.toUpperCase())?s.toUpperCase():js.TYPE_UNSPECIFIED})}}function oa(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&u2(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(js).includes(d.toUpperCase())?d.toUpperCase():js.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=oa(d);else if(s.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push(oa(m))}e[u]=g}else if(o.includes(u)){const g={};for(const[m,v]of Object.entries(d))g[m]=oa(v);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Wm(n){return oa(n)}function Zm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function jm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ia(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oa(e.response));return n}function Ra(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function c2(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return c2(n,e,"cachedContents")}function dC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function hr(n){return Jm(n)}function f2(n){return n!=null&&typeof n=="object"&&"name"in n}function d2(n){return n!=null&&typeof n=="object"&&"video"in n}function h2(n){return n!=null&&typeof n=="object"&&"uri"in n}function hC(n){var e;let t;if(f2(n)&&(t=n.name),!(h2(n)&&(t=n.uri,t===void 0))&&!(d2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function pC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mC(n){for(const e of["models","tunedModels","publisherModels"])if(p2(n,e))return n[e];return[]}function p2(n,e){return n!==null&&typeof n=="object"&&e in n}function m2(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function g2(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=m2(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function gC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function y2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function wa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function _C(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _2(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Z2(u))),h(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function v2(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function T2(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uf(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&h(e,["state"],_C(o));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],_2(yC(m))),e}function Zp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["state"]);o!=null&&h(e,["state"],_C(o));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&h(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&h(e,["src"],E2(E));const A=f(n,["outputConfig"]);A!=null&&h(e,["dest"],v2(yC(A)));const w=f(n,["completionStats"]);return w!=null&&h(e,["completionStats"],w),e}function E2(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function S2(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>W2(n,u))),h(t,["requests","requests"],l)}return t}function A2(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function C2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function I2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function R2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function w2(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],N2(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(w=>w)),h(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function N2(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function vC(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>rV(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function b2(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function M2(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],T2(y2(o))),t}function g0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],S2(n,gC(n,o)));const l=f(e,["config"]);return l!=null&&b2(l,t),t}function D2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Ye(n,s));const o=f(e,["src"]);o!=null&&h(t,["inputConfig"],A2(gC(n,o)));const l=f(e,["config"]);return l!=null&&M2(l,t),t}function x2(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function P2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["src"]);o!=null&&h(t,["batch","inputConfig"],F2(n,o));const l=f(e,["config"]);return l!=null&&x2(l,t),t}function V2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function U2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function k2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function L2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function O2(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Xm(n,s);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(h(t,["_self"],q2(o,t)),UP(t,{"requests[].*":"requests[].request.*"})),t}function q2(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function F2(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&h(t,["requests"],O2(n,o)),t}function B2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function H2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function G2(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function z2(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],vC(sn(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&h(s,["logprobs"],A);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const H=f(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const V=f(e,["seed"]);V!=null&&h(s,["seed"],V);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Wm($));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let q=Z;Array.isArray(q)&&(q=q.map(D=>oV(D))),h(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Ra(oe);Array.isArray(q)&&(q=q.map(D=>lV(Ia(D)))),h(t,["tools"],q)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],aV(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=f(e,["cachedContent"]);t!==void 0&&se!=null&&h(t,["cachedContent"],ds(n,se));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(s,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],Zm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const k=f(e,["imageConfig"]);return k!=null&&h(s,["imageConfig"],X2(k)),s}function Y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>w2(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function K2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function J2(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],wa(n,s)),t}function Q2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function X2(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function W2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let d=Bn(o);Array.isArray(d)&&(d=d.map(g=>vC(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],z2(n,u,f(t,["request"],{}))),t}function Z2(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],Y2(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function j2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function eV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function tV(n){const e={},t=f(n,["config"]);return t!=null&&j2(t,e),e}function nV(n){const e={},t=f(n,["config"]);return t!=null&&eV(t,e),e}function iV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>uf(u))),h(e,["batchJobs"],l)}return e}function sV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Zp(u))),h(e,["batchJobs"],l)}return e}function rV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],B2(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],H2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],C2(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function oV(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function aV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],G2(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function lV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],Q2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],$2(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var us;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(us||(us={}));class so{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uV extends fs{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new so(us.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=g0(this.apiClient,e),s=t._url,o=ce("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=A,E.request=w}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=D2(this.apiClient,e);return d=ce("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Zp(v))}else{const m=g0(this.apiClient,e);return d=ce("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uf(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=P2(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>uf(g))}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=J2(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Zp(v))}else{const m=K2(this.apiClient,e);return d=ce("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>uf(v))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=R2(this.apiClient,e);u=ce("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=I2(this.apiClient,e);u=ce("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=nV(e);return d=ce("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=sV(v),A=new d0;return Object.assign(A,E),A})}else{const m=tV(e);return d=ce("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=iV(v),A=new d0;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=U2(this.apiClient,e);return d=ce("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>L2(v))}else{const m=V2(this.apiClient,e);return d=ce("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>k2(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cV(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function y0(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>PV(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function fV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Bn(u);Array.isArray(v)&&(v=v.map(E=>y0(E))),h(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],y0(sn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>UV(E))),h(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],VV(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function dV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=Bn(u);Array.isArray(E)&&(E=E.map(A=>A)),h(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],sn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(A=>kV(A))),h(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&h(e,["encryption_spec","kmsKeyName"],v),t}function hV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],aC(n,s));const o=f(e,["config"]);return o!=null&&fV(o,t),t}function pV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],aC(n,s));const o=f(e,["config"]);return o!=null&&dV(o,t),t}function mV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function gV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function yV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function _V(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function vV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function TV(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EV(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function AV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function CV(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],ds(n,s)),t}function IV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function RV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function wV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function NV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function bV(n){const e={},t=f(n,["config"]);return t!=null&&wV(t,e),e}function MV(n){const e={},t=f(n,["config"]);return t!=null&&NV(t,e),e}function DV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function xV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function PV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],vV(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],TV(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],cV(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function VV(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],EV(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function UV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],IV(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],RV(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function kV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>SV(A))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function LV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function OV(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),t}function qV(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ds(n,s));const o=f(e,["config"]);return o!=null&&LV(o,t),t}function FV(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],ds(n,s));const o=f(e,["config"]);return o!=null&&OV(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BV extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(us.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=pV(this.apiClient,e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=hV(this.apiClient,e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=CV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=AV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=gV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=_V(v),A=new c0;return Object.assign(A,E),A})}else{const m=mV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=yV(v),A=new c0;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=FV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=qV(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=MV(e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=xV(v),A=new f0;return Object.assign(A,E),A})}else{const m=bV(e);return d=ce("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=DV(v),A=new f0;return Object.assign(A,E),A})}}}function _0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n){return this instanceof lt?(this.v=n,this):new lt(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(H){return Promise.resolve(H).then(w,E)}}function d(w,H){s[w]&&(o[w]=function(V){return new Promise(function(F,$){l.push([w,V,F,$])>1||g(w,V)})},H&&(o[w]=H(o[w])))}function g(w,H){try{m(s[w](H))}catch(V){A(l[0][3],V)}}function m(w){w.value instanceof lt?Promise.resolve(w.value.v).then(v,E):A(l[0][2],w)}function v(w){g("next",w)}function E(w){g("throw",w)}function A(w,H){w(H),l.shift(),l.length&&g(l[0][0],l[0][1])}}function $l(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof _0=="function"?_0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),o(d,g,u.done,u.value)})}}function o(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HV(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:TC(t)}function TC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function GV(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function v0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!TC(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class zV{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new YV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class YV{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),GV(l)}async sendMessage(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await o,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const w=m?[m]:[];this.recordHistory(s,w,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=sn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?v0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return aa(this,arguments,function*(){var u,d,g,m;const v=[];try{for(var E=!0,A=$l(e),w;w=yield lt(A.next()),u=w.done,!u;E=!0){m=w.value,E=!1;const H=m;if(HV(H)){const V=(o=(s=H.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;V!==void 0&&v.push(V)}yield yield lt(H)}}catch(H){d={error:H}}finally{try{!E&&!u&&(g=A.return)&&(yield lt(g.call(A)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...v0(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class td extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,td.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KV(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function JV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function QV(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],hC(t)),e}function $V(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function XV(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],hC(t)),e}function WV(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function ZV(n){const e={},t=f(n,["config"]);return t!=null&&WV(t,e),e}function jV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eU extends fs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(us.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZV(e);return l=ce("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=jV(g),v=new s2;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KV(e);return l=ce("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=JV(g),v=new r2;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XV(e);return l=ce("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QV(e);return l=ce("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=$V(g),v=new o2;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>yU(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function nU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function iU(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function rU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&h(e,["responseLogprobs"],A);const w=f(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const H=f(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const V=f(n,["responseSchema"]);V!=null&&h(e,["responseSchema"],V);const F=f(n,["routingConfig"]);F!=null&&h(e,["routingConfig"],F);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const j=f(n,["speechConfig"]);j!=null&&h(e,["speechConfig"],EC(j));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const oe=f(n,["temperature"]);oe!=null&&h(e,["temperature"],oe);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const se=f(n,["topK"]);se!=null&&h(e,["topK"],se);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function oU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function lU(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],jm(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=f(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],tU(sn(H)));const V=f(n,["tools"]);if(e!==void 0&&V!=null){let se=Ra(V);Array.isArray(se)&&(se=se.map(M=>vU(Ia(M)))),h(e,["setup","tools"],se)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],_U(F));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function uU(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],rU(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],EC(jm(E)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=f(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],sn(H));const V=f(n,["tools"]);if(e!==void 0&&V!=null){let se=Ra(V);Array.isArray(se)&&(se=se.map(M=>TU(Ia(M)))),h(e,["setup","tools"],se)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],F);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function cU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Ye(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],lU(o,t)),t}function fU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Ye(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],uU(o,t)),t}function dU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function hU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["weightedPrompts"],s)}return e}function pU(n){const e={},t=f(n,["media"]);if(t!=null){let m=lC(t);Array.isArray(m)&&(m=m.map(v=>cf(v))),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],cf(cC(s)));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],cf(uC(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function mU(n){const e={},t=f(n,["media"]);if(t!=null){let m=lC(t);Array.isArray(m)&&(m=m.map(v=>v)),h(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],cC(s));const o=f(n,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&h(e,["video"],uC(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function gU(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&h(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],EU(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);return g!=null&&h(e,["sessionResumptionUpdate"],g),e}function yU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],nU(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],iU(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],cf(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function _U(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EC(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function vU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],oU(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],aU(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function TU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>sU(A))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function EU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(H=>H)),h(e,["promptTokensDetails"],w)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(H=>H)),h(e,["cacheTokensDetails"],w)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(H=>H)),h(e,["responseTokensDetails"],w)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(H=>H)),h(e,["toolUsePromptTokensDetails"],w)}const A=f(n,["trafficType"]);return A!=null&&h(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SU(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function AU(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],CU(s));const o=f(n,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(w=>w)),h(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(e,["urlContextMetadata"],E),e}function CU(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["citations"],s)}return e}function IU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let l=Bn(o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["contents"],l)}return t}function RU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["tokensInfo"],o)}return e}function wU(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],NU(s)),e}function NU(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function nd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Lk(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function bU(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function MU(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function DU(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],sn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>RC(d))),h(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],Sk(l)),t}function xU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let u=Bn(o);Array.isArray(u)&&(u=u.map(d=>nd(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&MU(l),t}function PU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let u=Bn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&DU(l,t),t}function VU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function UU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function kU(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Ye(n,s)),t}function LU(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Ye(n,s)),t}function OU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function qU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function FU(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&h(e,["parameters","includeRaiReason"],A);const w=f(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const H=f(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const V=f(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","compressionQuality"],V);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&h(e,["parameters","addWatermark"],F);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),t}function BU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>Gk(g))),h(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&FU(u,t),t}function HU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>id(l))),h(e,["generatedImages"],o)}return e}function GU(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function zU(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function YU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let d=Xm(n,o);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&GU(l,t);const u=f(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],Ye(n,u)),t}function KU(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let u=Xm(n,o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&zU(l,t),t}function JU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function QU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>wU(u))),h(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function $U(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function XU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WU(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZU(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const o=f(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function ek(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],nd(sn(o)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&h(s,["logprobs"],A);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const H=f(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const V=f(e,["seed"]);V!=null&&h(s,["seed"],V);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Wm($));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let q=Z;Array.isArray(q)&&(q=q.map(D=>zk(D))),h(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Ra(oe);Array.isArray(q)&&(q=q.map(D=>Wk(Ia(D)))),h(t,["tools"],q)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&h(t,["toolConfig"],Xk(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=f(e,["cachedContent"]);t!==void 0&&se!=null&&h(t,["cachedContent"],ds(n,se));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&h(s,["mediaResolution"],N);const b=f(e,["speechConfig"]);if(b!=null&&h(s,["speechConfig"],Zm(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const k=f(e,["imageConfig"]);return k!=null&&h(s,["imageConfig"],wk(k)),s}function tk(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&h(t,["systemInstruction"],sn(o));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&h(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&h(s,["logprobs"],A);const w=f(e,["presencePenalty"]);w!=null&&h(s,["presencePenalty"],w);const H=f(e,["frequencyPenalty"]);H!=null&&h(s,["frequencyPenalty"],H);const V=f(e,["seed"]);V!=null&&h(s,["seed"],V);const F=f(e,["responseMimeType"]);F!=null&&h(s,["responseMimeType"],F);const $=f(e,["responseSchema"]);$!=null&&h(s,["responseSchema"],Wm($));const j=f(e,["responseJsonSchema"]);j!=null&&h(s,["responseJsonSchema"],j);const Z=f(e,["routingConfig"]);Z!=null&&h(s,["routingConfig"],Z);const oe=f(e,["modelSelectionConfig"]);oe!=null&&h(s,["modelConfig"],oe);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let X=fe;Array.isArray(X)&&(X=X.map(le=>le)),h(t,["safetySettings"],X)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let X=Ra(se);Array.isArray(X)&&(X=X.map(le=>RC(Ia(le)))),h(t,["tools"],X)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&h(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&h(t,["cachedContent"],ds(n,b));const U=f(e,["responseModalities"]);U!=null&&h(s,["responseModalities"],U);const k=f(e,["mediaResolution"]);k!=null&&h(s,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&h(s,["speechConfig"],IC(Zm(q)));const D=f(e,["audioTimestamp"]);D!=null&&h(s,["audioTimestamp"],D);const $e=f(e,["thinkingConfig"]);$e!=null&&h(s,["thinkingConfig"],$e);const rt=f(e,["imageConfig"]);return rt!=null&&h(s,["imageConfig"],Nk(rt)),s}function T0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let u=Bn(o);Array.isArray(u)&&(u=u.map(d=>nd(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],ek(n,l,t)),t}function E0(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["contents"]);if(o!=null){let u=Bn(o);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],tk(n,l,t)),t}function S0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>AU(m))),h(e,["candidates"],g)}const o=f(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function A0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),h(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function nk(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&h(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&h(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(n,["imageSize"]);if(e!==void 0&&w!=null&&h(e,["parameters","sampleImageSize"],w),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ik(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&h(e,["parameters","includeRaiReason"],A);const w=f(n,["language"]);e!==void 0&&w!=null&&h(e,["parameters","language"],w);const H=f(n,["outputMimeType"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","mimeType"],H);const V=f(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&h(e,["parameters","outputOptions","compressionQuality"],V);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&h(e,["parameters","addWatermark"],F);const $=f(n,["labels"]);e!==void 0&&$!=null&&h(e,["labels"],$);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),t}function sk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&nk(l,t),t}function rk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&ik(l,t),t}function ok(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>_k(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],AC(o)),e}function ak(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>id(u))),h(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],CC(o)),e}function lk(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&h(e,["instances[0]","lastFrame"],sd(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(w=>cL(w))),h(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uk(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const m=f(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&h(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","negativePrompt"],A);const w=f(n,["enhancePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w);const H=f(n,["generateAudio"]);e!==void 0&&H!=null&&h(e,["parameters","generateAudio"],H);const V=f(n,["lastFrame"]);e!==void 0&&V!=null&&h(e,["instances[0]","lastFrame"],ri(V));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let Z=F;Array.isArray(Z)&&(Z=Z.map(oe=>fL(oe))),h(e,["instances[0]","referenceImages"],Z)}const $=f(n,["mask"]);e!==void 0&&$!=null&&h(e,["instances[0]","mask"],uL($));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),t}function ck(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],pk(u)),e}function fk(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],mk(u)),e}function dk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],sd(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],wC(u));const d=f(e,["source"]);d!=null&&gk(d,t);const g=f(e,["config"]);return g!=null&&lk(g,t),t}function hk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["prompt"]);o!=null&&h(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],ri(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],NC(u));const d=f(e,["source"]);d!=null&&yk(d,t);const g=f(e,["config"]);return g!=null&&uk(g,t),t}function pk(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Tk(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function mk(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>Ek(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function gk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],sd(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],wC(l)),t}function yk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ri(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],NC(l)),t}function _k(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],bk(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&h(e,["safetyAttributes"],AC(o)),e}function id(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],SC(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&h(e,["safetyAttributes"],CC(o));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function vk(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],SC(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(e,["labels"],o)}return e}function Tk(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],aL(t)),e}function Ek(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],lL(t)),e}function Sk(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const o=f(n,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&h(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&h(e,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&h(e,["responseLogprobs"],A);const w=f(n,["responseMimeType"]);w!=null&&h(e,["responseMimeType"],w);const H=f(n,["responseModalities"]);H!=null&&h(e,["responseModalities"],H);const V=f(n,["responseSchema"]);V!=null&&h(e,["responseSchema"],V);const F=f(n,["routingConfig"]);F!=null&&h(e,["routingConfig"],F);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const j=f(n,["speechConfig"]);j!=null&&h(e,["speechConfig"],IC(j));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const oe=f(n,["temperature"]);oe!=null&&h(e,["temperature"],oe);const fe=f(n,["thinkingConfig"]);fe!=null&&h(e,["thinkingConfig"],fe);const se=f(n,["topK"]);se!=null&&h(e,["topK"],se);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ak(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Ye(n,s)),t}function Ck(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Ye(n,s)),t}function Ik(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Rk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function wk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Nk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const o=f(n,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function bk(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],hr(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function SC(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],hr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function sd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],hr(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ri(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],hr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function Mk(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],pC(n,d)),s}function Dk(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&h(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],pC(n,d)),s}function xk(n,e){const t={},s=f(e,["config"]);return s!=null&&Mk(n,s,t),t}function Pk(n,e){const t={},s=f(e,["config"]);return s!=null&&Dk(n,s,t),t}function Vk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=mC(o);Array.isArray(l)&&(l=l.map(u=>jp(u))),h(e,["models"],l)}return e}function Uk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=mC(o);Array.isArray(l)&&(l=l.map(u=>em(u))),h(e,["models"],l)}return e}function kk(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function jp(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const u=f(n,["_self"]);u!=null&&h(e,["tunedModelInfo"],Zk(u));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const m=f(n,["supportedGenerationMethods"]);m!=null&&h(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&h(e,["temperature"],v);const E=f(n,["maxTemperature"]);E!=null&&h(e,["maxTemperature"],E);const A=f(n,["topP"]);A!=null&&h(e,["topP"],A);const w=f(n,["topK"]);w!=null&&h(e,["topK"],w);const H=f(n,["thinking"]);return H!=null&&h(e,["thinking"],H),e}function em(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);o!=null&&h(e,["description"],o);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(A=>$U(A))),h(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],jk(g));const m=f(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),h(e,["checkpoints"],E)}return e}function Lk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],XU(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],WU(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],SU(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function Ok(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],ri(t)),e}function qk(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A);const w=f(n,["labels"]);return e!==void 0&&w!=null&&h(e,["labels"],w),t}function Fk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["source"]);o!=null&&Hk(o,t);const l=f(e,["config"]);return l!=null&&qk(l,t),t}function Bk(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>id(o))),h(e,["generatedImages"],s)}return e}function Hk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],ri(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Ok(d))),h(e,["instances[0]","productImages"],u)}return t}function Gk(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],ri(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&h(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],kk(l));const u=f(n,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],bU(u));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function AC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function CC(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function zk(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function Yk(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],ri(t)),e}function Kk(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function Jk(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["source"]);o!=null&&$k(o,t);const l=f(e,["config"]);return l!=null&&Kk(l,t),t}function Qk(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>vk(o))),h(e,["generatedMasks"],s)}return e}function $k(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ri(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],Yk(l)),t}function IC(n){const e={},t=f(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Xk(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],ZU(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function Wk(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],Ik(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],Rk(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function RC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>jU(A))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function Zk(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function jk(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function eL(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function tL(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function nL(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],Ye(n,s));const o=f(e,["config"]);return o!=null&&eL(o,t),t}function iL(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["config"]);return o!=null&&tL(o,t),t}function sL(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const A=f(n,["numberOfImages"]);e!==void 0&&A!=null&&h(e,["parameters","sampleCount"],A);const w=f(n,["mode"]);return e!==void 0&&w!=null&&h(e,["parameters","mode"],w),t}function rL(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Ye(n,s));const o=f(e,["image"]);o!=null&&h(t,["instances[0]","image"],ri(o));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&sL(u,t),t}function oL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>id(l))),h(e,["generatedImages"],o)}return e}function aL(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],hr(s));const o=f(n,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function lL(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],hr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function uL(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],ri(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function cL(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],sd(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function fL(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],ri(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function wC(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],hr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function NC(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],hr(s));const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dL="Content-Type",hL="X-Server-Timeout",pL="User-Agent",tm="x-goog-api-client",mL="1.30.0",gL=`google-genai-sdk/${mL}`,yL="v1beta1",_L="v1beta",C0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vL{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:yL,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:_L,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&TL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await I0(o),new Xp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await I0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:g}=yield lt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(g,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),w=A.status,H=A.code,V=`got status: ${w}. ${JSON.stringify(E)}`;if(H>=400&&H<600)throw new td({message:V,status:H})}}catch(E){if(E.name==="ApiError")throw E}u+=m;let v=u.match(C0);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new Xp(A)),u=u.slice(v[0].length),v=u.match(C0)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=gL+" "+this.clientOptions.userAgentExtra;return e[pL]=t,e[tm]=t,e[dL]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(hL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const g={file:o},m=this.getFileName(e),v=ce("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,s){var o;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};s!=null&&s.customMetadata&&(E.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(E.chunkingConfig=s.chunkingConfig);const A=await this.fetchUploadUrl(m,d,g,v,E,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,o,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function I0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new td({message:o,status:t}):new Error(o)}}function TL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],v=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EL="mcp_used/unknown";let SL=!1;function bC(n){for(const e of n)if(AL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return SL}function MC(n){var e;const t=(e=n[tm])!==null&&e!==void 0?e:"";n[tm]=(t+` ${EL}`).trimStart()}function AL(n){return n!==null&&typeof n=="object"&&n instanceof eg}function CL(n,e=100){return aa(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield lt(n.listTools({cursor:s}));for(const u of l.tools)yield yield lt(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class eg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new eg(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,g=(t=void 0,$l(CL(v))),m;m=await g.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;u.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),g2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function IL(n,e,t){const s=new l2;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class RL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=bL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),E=e.callbacks,A=function(){m({})},w=this.apiClient,H={onopen:A,onmessage:Z=>{IL(w,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(Z){}},V=this.webSocketFactory.create(g,NL(u),H);V.connect(),await v;const j={setup:{model:Ye(this.apiClient,e.model)}};return V.send(JSON.stringify(j)),new wL(V,this.apiClient)}}class wL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=hU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=dU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function NL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function bL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ML="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DL(n,e,t){const s=new a2;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=gU(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class xL{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new RL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&bC(e.config.tools)&&MC(E);const A=kL(E);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const b=this.apiClient.getApiKey();let U="BidiGenerateContent",k="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",k="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${k}=${b}`}let w=()=>{};const H=new Promise(b=>{w=b}),V=e.callbacks,F=function(){var b;(b=V==null?void 0:V.onopen)===null||b===void 0||b.call(V),w({})},$=this.apiClient,j={onopen:F,onmessage:b=>{DL($,V.onmessage,b)},onerror:(t=V==null?void 0:V.onerror)!==null&&t!==void 0?t:function(b){},onclose:(s=V==null?void 0:V.onclose)!==null&&s!==void 0?s:function(b){}},Z=this.webSocketFactory.create(v,UL(A),j);Z.connect(),await H;let oe=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const b=this.apiClient.getProject(),U=this.apiClient.getLocation();oe=`projects/${b}/locations/${U}/`+oe}let fe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Df.AUDIO]}:e.config.responseModalities=[Df.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const b of se)if(this.isCallableTool(b)){const U=b;M.push(await U.tool())}else M.push(b);M.length>0&&(e.config.tools=M);const N={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=fU(this.apiClient,N):fe=cU(this.apiClient,N),delete fe.config,Z.send(JSON.stringify(fe)),new VL(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const PL={turnComplete:!0};class VL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Bn(t.turns),e.isVertexAI()||(s=s.map(o=>nd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(ML)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},PL),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mU(e)}:t={realtimeInput:pU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function UL(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function kL(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R0=10;function w0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function LL(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>la(o)))!==null&&s!==void 0?s:!1}function N0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,o)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(o)}),t}function b0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OL extends fs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!LL(t)||w0(t.config))return await this.generateContentInternal(g);const m=N0(t);if(m.length>0){const V=m.map(F=>`tools[${F}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let v,E;const A=Bn(g.contents),w=(l=(o=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:R0;let H=0;for(;H<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const V=v.candidates[0].content,F=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(la($)){const Z=await $.callTool(v.functionCalls);F.push(...Z)}H++,E={role:"user",parts:F},g.contents=Bn(g.contents),g.contents.push(V),g.contents.push(E),b0(g.config)&&(A.push(V),A.push(E))}return b0(g.config)&&(v.automaticFunctionCallingHistory=A),v},this.generateContentStream=async t=>{var s,o,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),w0(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const g=N0(t);if(g.length>0){const E=g.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(o=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((o=g==null?void 0:g.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new so(us.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>la(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&bC(e.config.tools)){const g=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),MC(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(u)){const d=u,g=await d.tool();for(const m of(o=g.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:R0;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,v,E){var A,w;return aa(this,arguments,function*(){for(var H,V,F,$;d<l;){u&&(d++,u=!1);const fe=yield lt(m.processParamsMaybeAddMcpUsage(E)),se=yield lt(m.generateContentStreamInternal(fe)),M=[],N=[];try{for(var j=!0,Z=(V=void 0,$l(se)),oe;oe=yield lt(Z.next()),H=oe.done,!H;j=!0){$=oe.value,j=!1;const b=$;if(yield yield lt(b),b.candidates&&(!((A=b.candidates[0])===null||A===void 0)&&A.content)){N.push(b.candidates[0].content);for(const U of(w=b.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const k=yield lt(v.get(U.functionCall.name).callTool([U.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(b){V={error:b}}finally{try{!j&&!H&&(F=Z.return)&&(yield lt(F.call(Z)))}finally{if(V)throw V.error}}if(M.length>0){u=!0;const b=new Ul;b.candidates=[{content:{role:"user",parts:M}}],yield yield lt(b);const U=[];U.push(...N),U.push({role:"user",parts:M});const k=Bn(E.contents).concat(U);E.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=E0(this.apiClient,e);return d=ce("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=A0(v),A=new Ul;return Object.assign(A,E),A})}else{const m=T0(this.apiClient,e);return d=ce("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=S0(v),A=new Ul;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=E0(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(E){return aa(this,arguments,function*(){var A,w,H,V;try{for(var F=!0,$=$l(E),j;j=yield lt($.next()),A=j.done,!A;F=!0){V=j.value,F=!1;const Z=V,oe=A0(yield lt(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const fe=new Ul;Object.assign(fe,oe),yield yield lt(fe)}}catch(Z){w={error:Z}}finally{try{!F&&!A&&(H=$.return)&&(yield lt(H.call($)))}finally{if(w)throw w.error}}})})}else{const m=T0(this.apiClient,e);return d=ce("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return aa(this,arguments,function*(){var A,w,H,V;try{for(var F=!0,$=$l(E),j;j=yield lt($.next()),A=j.done,!A;F=!0){V=j.value,F=!1;const Z=V,oe=S0(yield lt(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const fe=new Ul;Object.assign(fe,oe),yield yield lt(fe)}}catch(Z){w={error:Z}}finally{try{!F&&!A&&(H=$.return)&&(yield lt(H.call($)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=KU(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=QU(v),A=new s0;return Object.assign(A,E),A})}else{const m=YU(this.apiClient,e);return d=ce("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=JU(v),A=new s0;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=rk(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=ak(v),A=new r0;return Object.assign(A,E),A})}else{const m=sk(this.apiClient,e);return d=ce("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=ok(v),A=new r0;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=BU(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=HU(g),v=new XP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=rL(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=oL(g),v=new WP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Fk(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Bk(g),v=new ZP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Jk(this.apiClient,e);return l=ce("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=Qk(g),v=new jP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Ck(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>em(v))}else{const m=Ak(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>jp(v))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=Pk(this.apiClient,e);return d=ce("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=Uk(v),A=new o0;return Object.assign(A,E),A})}else{const m=xk(this.apiClient,e);return d=ce("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=Vk(v),A=new o0;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=iL(this.apiClient,e);return d=ce("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>em(v))}else{const m=nL(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>jp(v))}}async delete(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=LU(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=qU(v),A=new a0;return Object.assign(A,E),A})}else{const m=kU(this.apiClient,e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=OU(v),A=new a0;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PU(this.apiClient,e);return d=ce("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=UU(v),A=new l0;return Object.assign(A,E),A})}else{const m=xU(this.apiClient,e);return d=ce("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=VU(v),A=new l0;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=IU(this.apiClient,e);return l=ce("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>{const m=RU(g),v=new e2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=hk(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const E=fk(v),A=new xf;return Object.assign(A,E),A})}else{const m=dk(this.apiClient,e);return d=ce("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=ck(v),A=new xf;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qL extends fs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=zP(e);return d=ce("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=GP(e);return d=ce("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=kP(e);return l=ce("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FL(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function BL(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>XL(l))),h(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function HL(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&h(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],$L(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function GL(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],HL(n,s,t)),t}function zL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function YL(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const o=f(n,["name"]);if(o!=null&&h(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function QL(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],jm(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&h(e,["setup","generationConfig","thinkingConfig"],A);const w=f(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const H=f(n,["systemInstruction"]);e!==void 0&&H!=null&&h(e,["setup","systemInstruction"],BL(sn(H)));const V=f(n,["tools"]);if(e!==void 0&&V!=null){let se=Ra(V);Array.isArray(se)&&(se=se.map(M=>ZL(Ia(M)))),h(e,["setup","tools"],se)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&h(e,["setup","sessionResumption"],WL(F));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&h(e,["setup","contextWindowCompression"],oe);const fe=f(n,["proactivity"]);return e!==void 0&&fe!=null&&h(e,["setup","proactivity"],fe),t}function $L(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Ye(n,s));const o=f(e,["config"]);return o!=null&&h(t,["config"],QL(o,t)),t}function XL(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&h(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],zL(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],YL(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],FL(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const v=f(n,["thought"]);v!=null&&h(e,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&h(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&h(e,["videoMetadata"],A),e}function WL(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ZL(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),h(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const o=f(n,["computerUse"]);o!=null&&h(e,["computerUse"],o);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],KL(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],JL(g));const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jL(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function e4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=jL(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class t4 extends fs{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=GL(this.apiClient,e);l=ce("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=e4(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n4(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function i4(n){const e={},t=f(n,["config"]);return t!=null&&n4(t,e),e}function s4(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function r4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&s4(s,e),e}function o4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function a4(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),t}function l4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const o=f(n,["done"]);o!=null&&h(e,["done"],o);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],c4(u)),e}function u4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const o=f(n,["config"]);return o!=null&&a4(o,e),e}function c4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const o=f(n,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function f4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function d4(n){const e={},t=f(n,["config"]);return t!=null&&f4(t,e),e}function h4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function p4(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function m4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&p4(s,e),e}function g4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y4(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function _4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&y4(s,e),e}function v4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function T4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),t}function E4(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&T4(s,e),e}function S4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const o=f(n,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A4 extends fs{constructor(e){super(),this.apiClient=e,this.list=async t=>new so(us.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v4(e);return l=ce("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_4(e);o=ce("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E4(e);return l=ce("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=S4(g),v=new t2;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4 extends fs{constructor(e,t=new A4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new so(us.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i4(e);return l=ce("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=o4(e);return l=ce("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>g)}}async delete(e){var t,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=r4(e);o=ce("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d4(e);return l=ce("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=h4(g),v=new n2;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m4(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=g4(g),v=new i2;return Object.assign(v,m),v})}}async importFile(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u4(e);return l=ce("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),o.then(g=>{const m=l4(g),v=new Qm;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I4(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function R4(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function w4(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function N4(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec"],M0(w))}else if(o==="PREFERENCE_TUNING"){const w=f(n,["validationDataset"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec"],M0(w))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=f(n,["epochCount"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=f(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(m==="PREFERENCE_TUNING"){const w=f(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=f(n,["adapterSize"]);e!==void 0&&w!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const A=f(n,["beta"]);return e!==void 0&&A!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),s}function b4(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&F4(l);const u=f(n,["config"]);return u!=null&&w4(u,t),t}function M4(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&h(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&B4(l,t,e);const u=f(n,["config"]);return u!=null&&N4(u,t,e),t}function D4(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function x4(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function P4(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function V4(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function U4(n,e){const t={},s=f(n,["config"]);return s!=null&&P4(s,t),t}function k4(n,e){const t={},s=f(n,["config"]);return s!=null&&V4(s,t),t}function L4(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>DC(d))),h(t,["tuningJobs"],u)}return t}function O4(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&h(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>nm(d))),h(t,["tuningJobs"],u)}return t}function q4(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const o=f(n,["name"]);return o!=null&&h(t,["endpoint"],o),t}function F4(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),h(t,["examples","examples"],o)}return t}function B4(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function DC(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],dC(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&h(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const A=f(n,["_self"]);return A!=null&&h(t,["tunedModel"],q4(A)),t}function nm(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["state"]);l!=null&&h(t,["state"],dC(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&h(t,["error"],v);const E=f(n,["description"]);E!=null&&h(t,["description"],E);const A=f(n,["baseModel"]);A!=null&&h(t,["baseModel"],A);const w=f(n,["tunedModel"]);w!=null&&h(t,["tunedModel"],w);const H=f(n,["preTunedModel"]);H!=null&&h(t,["preTunedModel"],H);const V=f(n,["supervisedTuningSpec"]);V!=null&&h(t,["supervisedTuningSpec"],V);const F=f(n,["preferenceOptimizationSpec"]);F!=null&&h(t,["preferenceOptimizationSpec"],F);const $=f(n,["tuningDataStats"]);$!=null&&h(t,["tuningDataStats"],$);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&h(t,["partnerModelTuningSpec"],Z);const oe=f(n,["customBaseModel"]);oe!=null&&h(t,["customBaseModel"],oe);const fe=f(n,["experiment"]);fe!=null&&h(t,["experiment"],fe);const se=f(n,["labels"]);se!=null&&h(t,["labels"],se);const M=f(n,["outputUri"]);M!=null&&h(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const b=f(n,["serviceAccount"]);b!=null&&h(t,["serviceAccount"],b);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const k=f(n,["veoTuningSpec"]);return k!=null&&h(t,["veoTuningSpec"],k),t}function H4(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&h(t,["name"],o);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function M0(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&h(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G4 extends fs{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new so(us.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:$p.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=x4(e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>nm(v))}else{const m=D4(e);return d=ce("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>DC(v))}}async listInternal(e){var t,s,o,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=k4(e);return d=ce("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=O4(v),A=new u0;return Object.assign(A,E),A})}else{const m=U4(e);return d=ce("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),u.then(v=>{const E=L4(v),A=new u0;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=R4(e);u=ce("{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=I4(e);u=ce("{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=M4(e,e);return l=ce("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>nm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=b4(e);return l=ce("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),o.then(g=>H4(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z4{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Y4=1024*1024*8,K4=3,J4=1e3,Q4=2,Vf="x-goog-upload-status";async function $4(n,e,t){var s;const o=await xC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Vf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function X4(n,e,t){var s;const o=await xC(n,e,t),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[Vf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=oC(l),d=new $m;return Object.assign(d,u),d}async function xC(n,e,t){var s,o;let l=0,u=0,d=new Xp(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(Y4,l-u),v=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let E=0,A=J4;for(;E<K4&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Vf]));)E++,await Z4(A),A=A*Q4;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Vf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function W4(n){return{size:n.size,type:n.type}}function Z4(n){return new Promise(e=>setTimeout(e,n))}class j4{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $4(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X4(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eO{create(e,t,s){return new tO(e,t,s)}}class tO{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D0="x-goog-api-key";class nO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(D0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(D0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iO="gl-node/";class sO{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=VP(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new nO(this.apiKey);this.apiClient=new vL({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:iO+"web",uploader:new j4,downloader:new z4}),this.models=new OL(this.apiClient),this.live=new xL(this.apiClient,o,new eO),this.batches=new uV(this.apiClient),this.chats=new zV(this.models,this.apiClient),this.caches=new BV(this.apiClient),this.files=new eU(this.apiClient),this.operations=new qL(this.apiClient),this.authTokens=new t4(this.apiClient),this.tunings=new G4(this.apiClient),this.fileSearchStores=new C4(this.apiClient)}}const rO=()=>{const n="AIzaSyCSFyCeDbb17S9girfB9pZJJ7Sg8_nxAJs";return new sO({apiKey:n})},x0=(n,e,t)=>{const s=rO();if(!s)return null;let o=n.systemInstruction+`

IMPORTANT: Do not use markdown formatting like ** or * in your responses. Use plain text only.`;if(t&&t!=="en"){const u={es:"Responde siempre en espaol.",fr:"Rponds toujours en franais.",de:"Antworte immer auf Deutsch.",it:"Rispondi sempre in italiano.",pt:"Responda sempre em portugus.",ar:"   .",hi:"    ",ml:"   ."}[t];u&&(o=u+" "+o)}if(e&&e.length>0){const l=e.map(u=>`- "${u.title}": ${u.description}`).join(`
`);o+=`

Available video tutorials:
${l}

When users ask questions related to these topics, suggest the relevant video tutorial by title.`}return n.qaTraining&&n.qaTraining.length>0&&(o=`KNOWLEDGE BASE - Use this information to answer questions naturally:
${n.qaTraining.map(u=>`${u.question}: ${u.answer}`).join(`
`)}

When users ask about these topics, use the information above but respond conversationally, not in Q&A format.

`+o),s.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:o}})},oO=async(n,e)=>{try{return await n.sendMessageStream({message:e})}catch(t){throw console.error("Error sending message to Gemini:",t),t}},aO=({config:n,videos:e=[]})=>{const[t,s]=Be.useState(!1),[o,l]=Be.useState([]),[u,d]=Be.useState(""),[g,m]=Be.useState(!1),[v,E]=Be.useState(null),[A,w]=Be.useState("en"),[H,V]=Be.useState(!1),F=Be.useRef(null),$=Be.useRef(null),j=[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugus"},{code:"ar",name:""},{code:"hi",name:""},{code:"ml",name:""}];Be.useEffect(()=>{if(t){const se=x0(n,e,A);E(se),o.length===0&&l([{id:"welcome",role:"model",text:n.welcomeMessage,timestamp:Date.now()}])}},[t,n,e]),Be.useEffect(()=>{var se;(se=F.current)==null||se.scrollIntoView({behavior:"smooth"})},[o]);const Z=async()=>{if(!u.trim()||!v)return;const se=u.trim();d("");const M={id:Date.now().toString(),role:"user",text:se,timestamp:Date.now()};l(N=>[...N,M]),m(!0);try{const N=await oO(v,se);let b="";const U=(Date.now()+1).toString();l(k=>[...k,{id:U,role:"model",text:"",timestamp:Date.now()}]);for await(const k of N){const D=k.text||"";b+=D,l($e=>$e.map(rt=>rt.id===U?{...rt,text:b}:rt))}}catch(N){console.error(N),l(b=>[...b,{id:Date.now().toString(),role:"model",text:"I'm sorry, I'm having trouble connecting right now. Please try again later.",timestamp:Date.now()}])}finally{m(!1),setTimeout(()=>{var N;(N=$.current)==null||N.focus()},100)}},oe=se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),Z())},fe=se=>{if("speechSynthesis"in window){const M=new SpeechSynthesisUtterance(se),N={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT",pt:"pt-BR",ar:"ar-SA",hi:"hi-IN",ml:"ml-IN"};M.lang=N[A]||"en-US",M.rate=.9,speechSynthesis.speak(M)}};return x.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end",children:[t&&x.jsxs("div",{className:`mb-4 bg-white shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-slide-up ${H?"fixed inset-4 rounded-lg z-50":"w-[350px] sm:w-[400px] h-[500px] rounded-2xl origin-bottom-right"}`,children:[x.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 flex justify-between items-center text-white",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:x.jsx(ZR,{size:18})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-sm",children:"AI Support Assistant"}),x.jsx("p",{className:"text-xs text-blue-100",children:"Powered by Gemini"})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("select",{value:A,onChange:se=>{w(se.target.value),E(null);const M=x0(n,e,se.target.value);E(M)},className:"px-2 py-1 text-xs bg-white/20 border border-white/30 rounded text-white focus:outline-none focus:bg-white/30",children:j.map(se=>x.jsx("option",{value:se.code,className:"text-slate-800",children:se.name},se.code))}),x.jsx("button",{onClick:()=>V(!H),className:"p-1 hover:bg-white/20 rounded-full transition",title:H?"Exit fullscreen":"Fullscreen",children:H?"":""}),x.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded-full transition",children:x.jsx(sm,{size:20})})]})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[o.map(se=>x.jsxs("div",{className:`flex gap-3 ${se.role==="user"?"flex-row-reverse":""}`,children:[x.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${se.role==="user"?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-600"}`,children:se.role==="user"?x.jsx(tw,{size:16}):x.jsx(NR,{size:16})}),x.jsx("div",{className:`max-w-[80%] rounded-2xl p-3 text-sm leading-relaxed ${se.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white border border-slate-200 text-slate-700 rounded-tl-none shadow-sm"}`,children:x.jsxs("div",{className:"flex items-start justify-between gap-2",children:[x.jsx("div",{className:"flex-1",children:se.text||x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce"}),x.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-75"}),x.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-150"})]})}),se.role==="model"&&se.text&&x.jsx("button",{onClick:()=>fe(se.text),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Listen",children:x.jsx(rw,{size:14})})]})})]},se.id)),x.jsx("div",{ref:F})]}),x.jsxs("div",{className:"p-3 bg-white border-t border-slate-100",children:[x.jsxs("div",{className:"relative flex items-center gap-2",children:[x.jsx("input",{ref:$,type:"text",value:u,onChange:se=>d(se.target.value),onKeyDown:oe,placeholder:"Ask for help...",disabled:g,className:"flex-1 pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"}),x.jsx("button",{onClick:Z,disabled:!u.trim()||g,className:"absolute right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?x.jsx(UR,{size:16,className:"animate-spin"}):x.jsx(JR,{size:16})})]}),x.jsx("div",{className:"text-center mt-2",children:x.jsx("p",{className:"text-[10px] text-slate-400",children:"AI can make mistakes. Please verify important info."})})]})]}),x.jsxs("button",{onClick:()=>s(!t),className:`group p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-105 flex items-center gap-2 ${t?"bg-slate-700 rotate-90 opacity-0 pointer-events-none absolute":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white"}`,children:[x.jsx(qR,{size:28,className:"animate-pulse"}),x.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium pr-0 group-hover:pr-2",children:"Support Chat"})]})]})},lO=({videoId:n,onClose:e})=>(Be.useEffect(()=>{const t=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),n?x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:e,children:x.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-xl overflow-hidden shadow-2xl animate-slide-up",onClick:t=>t.stopPropagation(),children:[x.jsx("div",{className:"absolute top-0 right-0 p-4 z-10",children:x.jsx("button",{onClick:e,className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:x.jsx(sm,{size:24})})}),x.jsx("div",{className:"aspect-video w-full",children:x.jsx("iframe",{src:`https://www.youtube.com/embed/${n}?autoplay=1&rel=0`,title:"YouTube video player",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null),uO={systemInstruction:"You are a helpful customer support agent for 'Polosys Support'. You assist users with questions about accounting software, inventory management, and general troubleshooting. Be polite, concise, and professional. If you don't know the answer, advise them to contact human support at support@polosys.com or call our customer care number: +1-800-POLOSYS (765-6797). For urgent issues, recommend calling the customer care number.",welcomeMessage:"Hello! How can I help you with the system today?"},cO=()=>{const[n,e]=Be.useState(()=>localStorage.getItem("adminLoggedIn")==="true"?Js.ADMIN:Js.CUSTOMER),[t,s]=Be.useState(!1),[o,l]=Be.useState([]),[u,d]=Be.useState(uO),[g,m]=Be.useState(!0),[v,E]=Be.useState(null),[A,w]=Be.useState(""),[H,V]=Be.useState(!1),[F,$]=Be.useState({email:"",password:""}),[j,Z]=Be.useState(""),oe=()=>{V(!0),Z("")},fe=async N=>{N.preventDefault();try{await cx(oE,F.email,F.password),localStorage.setItem("adminLoggedIn","true"),e(Js.ADMIN),V(!1),$({email:"",password:""})}catch{Z("Invalid credentials")}},se=async()=>{await hx(oE),localStorage.removeItem("adminLoggedIn"),e(Js.CUSTOMER),s(!1)};Be.useEffect(()=>{(async()=>{try{const[b,U]=await Promise.all([NP(),bP()]);l(b),U&&d(U)}catch(b){console.error("Error loading data:",b)}finally{m(!1)}})()},[]),Be.useEffect(()=>{g||wP(o).catch(console.error)},[o,g]),Be.useEffect(()=>{g||Jp(u).catch(console.error)},[u,g]);const M=o.filter(N=>N.title.toLowerCase().includes(A.toLowerCase())||N.description.toLowerCase().includes(A.toLowerCase()));return x.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900",children:[x.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"flex justify-between h-16",children:[x.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",onDoubleClick:()=>s(!t),title:"Double click for admin options",children:[x.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:x.jsx(PR,{size:24})}),x.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-600",children:"Polosys Support"})]}),x.jsx("div",{className:"flex items-center gap-4",children:n===Js.CUSTOMER?t&&x.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition-colors animate-fade-in",children:[x.jsx(XR,{size:18}),x.jsx("span",{children:"Admin Access"})]}):x.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 rounded-lg transition-colors",children:[x.jsx(LR,{size:18}),x.jsx("span",{children:"Logout"})]})})]})})}),x.jsxs("main",{className:"relative",children:[g?x.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):n===Js.ADMIN?x.jsx(MP,{videos:o,setVideos:l,chatConfig:u,setChatConfig:d}):x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[x.jsxs("div",{className:"text-center mb-16 space-y-4",children:[x.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight",children:"How can we help you today?"}),x.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Browse our video library for quick tutorials or chat with our AI assistant for instant support."}),x.jsxs("div",{className:"max-w-xl mx-auto mt-8 relative group",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors",children:x.jsx(YR,{size:20})}),x.jsx("input",{type:"text",placeholder:"Search for videos (e.g., 'invoice', 'setup')...",value:A,onChange:N=>w(N.target.value),className:"block w-full pl-11 pr-4 py-4 bg-white border border-slate-200 rounded-2xl shadow-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:M.map(N=>x.jsxs("div",{onClick:()=>E(N.videoId),className:"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100 cursor-pointer flex flex-col h-full",children:[x.jsxs("div",{className:"relative aspect-video overflow-hidden bg-slate-100",children:[x.jsx("img",{src:`https://img.youtube.com/vi/${N.videoId}/hqdefault.jpg`,alt:N.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),x.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:x.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-lg transform scale-90 group-hover:scale-110 transition-all duration-300",children:x.jsx(MR,{size:24,className:"text-blue-600 ml-1"})})}),x.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-medium",children:"Video"})]}),x.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[x.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors",children:N.title}),x.jsx("p",{className:"text-slate-600 text-sm leading-relaxed flex-1",children:N.description}),x.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center text-blue-600 font-medium text-sm",children:["Watch Tutorial ",x.jsx("span",{className:"ml-1 group-hover:translate-x-1 transition-transform",children:""})]})]})]},N.id))}),M.length===0&&x.jsxs("div",{className:"text-center py-20",children:[x.jsx("p",{className:"text-slate-500 text-lg",children:"No videos found matching your search."}),x.jsx("button",{onClick:()=>w(""),className:"mt-4 text-blue-600 font-medium hover:underline",children:"Clear search"})]})]}),n===Js.CUSTOMER&&x.jsx(aO,{config:u,videos:o})]}),x.jsx(lO,{videoId:v,onClose:()=>E(null)}),H&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-[90vw]",children:[x.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Admin Login"}),x.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),x.jsx("input",{type:"email",required:!0,value:F.email,onChange:N=>$({...F,email:N.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),x.jsx("input",{type:"password",required:!0,value:F.password,onChange:N=>$({...F,password:N.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),j&&x.jsx("p",{className:"text-red-500 text-sm text-center",children:j}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{type:"button",onClick:()=>{V(!1),$({email:"",password:""}),Z("")},className:"flex-1 py-2 px-4 border border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50",children:"Cancel"}),x.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Login"})]})]})]})})]})},PC=document.getElementById("root");if(!PC)throw new Error("Could not find root element to mount to");const fO=ER.createRoot(PC);fO.render(x.jsx(hR.StrictMode,{children:x.jsx(cO,{})}));
