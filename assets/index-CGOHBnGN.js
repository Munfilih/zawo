(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function PS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var v0={exports:{}},Rl={};/**
* @license React
* react-jsx-runtime.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var y0;function cC(){if(y0)return Rl;y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var f in i)f!=="key"&&(l[f]=i[f])}else l=i;return i=l.ref,{$$typeof:n,type:s,key:c,ref:i!==void 0?i:null,props:l}}return Rl.Fragment=e,Rl.jsx=t,Rl.jsxs=t,Rl}var b0;function dC(){return b0||(b0=1,v0.exports=cC()),v0.exports}var R=dC(),w0={exports:{}},Ie={};/**
* @license React
* react.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var S0;function hC(){if(S0)return Ie;S0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,H={};function J(V,ee,ue){this.props=V,this.context=ee,this.refs=H,this.updater=ue||q}J.prototype.isReactComponent={},J.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},J.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=J.prototype;function se(V,ee,ue){this.props=V,this.context=ee,this.refs=H,this.updater=ue||q}var ie=se.prototype=new Z;ie.constructor=se,L(ie,J.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray;function re(){}var x={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function A(V,ee,ue){var he=ue.ref;return{$$typeof:n,type:V,key:ee,ref:he!==void 0?he:null,props:ue}}function M(V,ee){return A(V.type,ee,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function F(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return ee[ue]})}var O=/\/+/g;function Be(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?F(""+V.key):ee.toString(36)}function pt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(re,re):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,ee,ue,he,_e){var Ae=typeof V;(Ae==="undefined"||Ae==="boolean")&&(V=null);var Ve=!1;if(V===null)Ve=!0;else switch(Ae){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(V.$$typeof){case n:case e:Ve=!0;break;case b:return Ve=V._init,Y(Ve(V._payload),ee,ue,he,_e)}}if(Ve)return _e=_e(V),Ve=he===""?"."+Be(V,0):he,pe(_e)?(ue="",Ve!=null&&(ue=Ve.replace(O,"$&/")+"/"),Y(_e,ee,ue,"",function(mo){return mo})):_e!=null&&(D(_e)&&(_e=M(_e,ue+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(O,"$&/")+"/")+Ve)),ee.push(_e)),1;Ve=0;var Dt=he===""?".":he+":";if(pe(V))for(var ut=0;ut<V.length;ut++)he=V[ut],Ae=Dt+Be(he,ut),Ve+=Y(he,ee,ue,Ae,_e);else if(ut=N(V),typeof ut=="function")for(V=ut.call(V),ut=0;!(he=V.next()).done;)he=he.value,Ae=Dt+Be(he,ut++),Ve+=Y(he,ee,ue,Ae,_e);else if(Ae==="object"){if(typeof V.then=="function")return Y(pt(V),ee,ue,he,_e);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function le(V,ee,ue){if(V==null)return V;var he=[],_e=0;return Y(V,he,"","",function(Ae){return ee.call(ue,Ae,_e++)}),he}function ye(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var qe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},We={map:le,forEach:function(V,ee,ue){le(V,function(){ee.apply(this,arguments)},ue)},count:function(V){var ee=0;return le(V,function(){ee++}),ee},toArray:function(V){return le(V,function(ee){return ee})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ie.Activity=S,Ie.Children=We,Ie.Component=J,Ie.Fragment=t,Ie.Profiler=i,Ie.PureComponent=se,Ie.StrictMode=s,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(V){return x.H.useMemoCache(V)}},Ie.cache=function(V){return function(){return V.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(V,ee,ue){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var he=L({},V.props),_e=V.key;if(ee!=null)for(Ae in ee.key!==void 0&&(_e=""+ee.key),ee)!k.call(ee,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ee.ref===void 0||(he[Ae]=ee[Ae]);var Ae=arguments.length-2;if(Ae===1)he.children=ue;else if(1<Ae){for(var Ve=Array(Ae),Dt=0;Dt<Ae;Dt++)Ve[Dt]=arguments[Dt+2];he.children=Ve}return A(V.type,_e,he)},Ie.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ie.createElement=function(V,ee,ue){var he,_e={},Ae=null;if(ee!=null)for(he in ee.key!==void 0&&(Ae=""+ee.key),ee)k.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(_e[he]=ee[he]);var Ve=arguments.length-2;if(Ve===1)_e.children=ue;else if(1<Ve){for(var Dt=Array(Ve),ut=0;ut<Ve;ut++)Dt[ut]=arguments[ut+2];_e.children=Dt}if(V&&V.defaultProps)for(he in Ve=V.defaultProps,Ve)_e[he]===void 0&&(_e[he]=Ve[he]);return A(V,Ae,_e)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(V){return{$$typeof:f,render:V}},Ie.isValidElement=D,Ie.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:ye}},Ie.memo=function(V,ee){return{$$typeof:v,type:V,compare:ee===void 0?null:ee}},Ie.startTransition=function(V){var ee=x.T,ue={};x.T=ue;try{var he=V(),_e=x.S;_e!==null&&_e(ue,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(re,qe)}catch(Ae){qe(Ae)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),x.T=ee}},Ie.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ie.use=function(V){return x.H.use(V)},Ie.useActionState=function(V,ee,ue){return x.H.useActionState(V,ee,ue)},Ie.useCallback=function(V,ee){return x.H.useCallback(V,ee)},Ie.useContext=function(V){return x.H.useContext(V)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(V,ee){return x.H.useDeferredValue(V,ee)},Ie.useEffect=function(V,ee){return x.H.useEffect(V,ee)},Ie.useEffectEvent=function(V){return x.H.useEffectEvent(V)},Ie.useId=function(){return x.H.useId()},Ie.useImperativeHandle=function(V,ee,ue){return x.H.useImperativeHandle(V,ee,ue)},Ie.useInsertionEffect=function(V,ee){return x.H.useInsertionEffect(V,ee)},Ie.useLayoutEffect=function(V,ee){return x.H.useLayoutEffect(V,ee)},Ie.useMemo=function(V,ee){return x.H.useMemo(V,ee)},Ie.useOptimistic=function(V,ee){return x.H.useOptimistic(V,ee)},Ie.useReducer=function(V,ee,ue){return x.H.useReducer(V,ee,ue)},Ie.useRef=function(V){return x.H.useRef(V)},Ie.useState=function(V){return x.H.useState(V)},Ie.useSyncExternalStore=function(V,ee,ue){return x.H.useSyncExternalStore(V,ee,ue)},Ie.useTransition=function(){return x.H.useTransition()},Ie.version="19.2.0",Ie}var E0;function Zp(){return E0||(E0=1,w0.exports=hC()),w0.exports}var He=Zp();const fC=PS(He);var rp={exports:{}},Pl={},_0={exports:{}},T0={};/**
* @license React
* scheduler.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var I0;function pC(){return I0||(I0=1,(function(n){function e(Y,le){var ye=Y.length;Y.push(le);e:for(;0<ye;){var qe=ye-1>>>1,We=Y[qe];if(0<i(We,le))Y[qe]=le,Y[ye]=We,ye=qe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var le=Y[0],ye=Y.pop();if(ye!==le){Y[0]=ye;e:for(var qe=0,We=Y.length,V=We>>>1;qe<V;){var ee=2*(qe+1)-1,ue=Y[ee],he=ee+1,_e=Y[he];if(0>i(ue,ye))he<We&&0>i(_e,ue)?(Y[qe]=_e,Y[he]=ye,qe=he):(Y[qe]=ue,Y[ee]=ye,qe=ee);else if(he<We&&0>i(_e,ye))Y[qe]=_e,Y[he]=ye,qe=he;else break e}}return le}function i(Y,le){var ye=Y.sortIndex-le.sortIndex;return ye!==0?ye:Y.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],v=[],b=1,S=null,T=3,N=!1,q=!1,L=!1,H=!1,J=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ie(Y){for(var le=t(v);le!==null;){if(le.callback===null)s(v);else if(le.startTime<=Y)s(v),le.sortIndex=le.expirationTime,e(m,le);else break;le=t(v)}}function pe(Y){if(L=!1,ie(Y),!q)if(t(m)!==null)q=!0,re||(re=!0,F());else{var le=t(v);le!==null&&pt(pe,le.startTime-Y)}}var re=!1,x=-1,k=5,A=-1;function M(){return H?!0:!(n.unstable_now()-A<k)}function D(){if(H=!1,re){var Y=n.unstable_now();A=Y;var le=!0;try{e:{q=!1,L&&(L=!1,Z(x),x=-1),N=!0;var ye=T;try{t:{for(ie(Y),S=t(m);S!==null&&!(S.expirationTime>Y&&M());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,T=S.priorityLevel;var We=qe(S.expirationTime<=Y);if(Y=n.unstable_now(),typeof We=="function"){S.callback=We,ie(Y),le=!0;break t}S===t(m)&&s(m),ie(Y)}else s(m);S=t(m)}if(S!==null)le=!0;else{var V=t(v);V!==null&&pt(pe,V.startTime-Y),le=!1}}break e}finally{S=null,T=ye,N=!1}le=void 0}}finally{le?F():re=!1}}}var F;if(typeof se=="function")F=function(){se(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Be=O.port2;O.port1.onmessage=D,F=function(){Be.postMessage(null)}}else F=function(){J(D,0)};function pt(Y,le){x=J(function(){Y(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ye=T;T=le;try{return Y()}finally{T=ye}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=T;T=Y;try{return le()}finally{T=ye}},n.unstable_scheduleCallback=function(Y,le,ye){var qe=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?qe+ye:qe):ye=qe,Y){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=ye+We,Y={id:b++,callback:le,priorityLevel:Y,startTime:ye,expirationTime:We,sortIndex:-1},ye>qe?(Y.sortIndex=ye,e(v,Y),t(m)===null&&Y===t(v)&&(L?(Z(x),x=-1):L=!0,pt(pe,ye-qe))):(Y.sortIndex=We,e(m,Y),q||N||(q=!0,re||(re=!0,F()))),Y},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Y){var le=T;return function(){var ye=T;T=le;try{return Y.apply(this,arguments)}finally{T=ye}}}})(T0)),T0}var C0;function mC(){return C0||(C0=1,_0.exports=pC()),_0.exports}var sp={exports:{}},Zt={};/**
* @license React
* react-dom.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var k0;function gC(){if(k0)return Zt;k0=1;var n=Zp();function e(m){var v="https://react.dev/errors/"+m;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(m,v,b){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:S==null?null:""+S,children:m,containerInfo:v,implementation:b}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,v){if(m==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(m,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(m,v,null,b)},Zt.flushSync=function(m){var v=c.T,b=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=v,s.p=b,s.d.f()}},Zt.preconnect=function(m,v){typeof m=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(m,v))},Zt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Zt.preinit=function(m,v){if(typeof m=="string"&&v&&typeof v.as=="string"){var b=v.as,S=f(b,v.crossOrigin),T=typeof v.integrity=="string"?v.integrity:void 0,N=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?s.d.S(m,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:N}):b==="script"&&s.d.X(m,{crossOrigin:S,integrity:T,fetchPriority:N,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Zt.preinitModule=function(m,v){if(typeof m=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=f(v.as,v.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(m)},Zt.preload=function(m,v){if(typeof m=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,S=f(b,v.crossOrigin);s.d.L(m,b,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Zt.preloadModule=function(m,v){if(typeof m=="string")if(v){var b=f(v.as,v.crossOrigin);s.d.m(m,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(m)},Zt.requestFormReset=function(m){s.d.r(m)},Zt.unstable_batchedUpdates=function(m,v){return m(v)},Zt.useFormState=function(m,v,b){return c.H.useFormState(m,v,b)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var A0;function vC(){if(A0)return sp.exports;A0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=gC(),sp.exports}/**
* @license React
* react-dom-client.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var N0;function yC(){if(N0)return Pl;N0=1;var n=mC(),e=Zp(),t=vC();function s(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,a=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(a=o.return),r=o.return;while(r)}return o.tag===3?a:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(s(188))}function v(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(s(188));return o!==r?null:r}for(var a=r,u=o;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return m(g),r;if(y===u)return m(g),o;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var E=!1,I=g.child;I;){if(I===a){E=!0,a=g,u=y;break}if(I===u){E=!0,u=g,a=y;break}I=I.sibling}if(!E){for(I=y.child;I;){if(I===a){E=!0,a=y,u=g;break}if(I===u){E=!0,u=y,a=g;break}I=I.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:o}function b(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=b(r),o!==null)return o;r=r.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Be(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case J:return"Profiler";case H:return"StrictMode";case pe:return"Suspense";case re:return"SuspenseList";case A:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case q:return"Portal";case se:return r.displayName||"Context";case Z:return(r._context.displayName||"Context")+".Consumer";case ie:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return o=r.displayName||null,o!==null?o:Be(r.type)||"Memo";case k:o=r._payload,r=r._init;try{return Be(r(o))}catch{}}return null}var pt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},qe=[],We=-1;function V(r){return{current:r}}function ee(r){0>We||(r.current=qe[We],qe[We]=null,We--)}function ue(r,o){We++,qe[We]=r.current,r.current=o}var he=V(null),_e=V(null),Ae=V(null),Ve=V(null);function Dt(r,o){switch(ue(Ae,o),ue(_e,r),ue(he,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?jy(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=jy(o),r=Hy(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(he),ue(he,r)}function ut(){ee(he),ee(_e),ee(Ae)}function mo(r){r.memoizedState!==null&&ue(Ve,r);var o=he.current,a=Hy(o,r.type);o!==a&&(ue(_e,r),ue(he,a))}function ii(r){_e.current===r&&(ee(he),ee(_e)),Ve.current===r&&(ee(Ve),Al._currentValue=ye)}var ai,li;function ir(r){if(ai===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);ai=o&&o[1]||"",li=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ai+r+li}var Aa=!1;function go(r,o){if(!r||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(W){var B=W}Reflect.construct(r,[],te)}else{try{te.call()}catch(W){B=W}r.call(te.prototype)}}else{try{throw Error()}catch(W){B=W}(te=r())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(W){if(W&&B&&typeof W.stack=="string")return[W.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],I=y[1];if(E&&I){var P=E.split(`
`),$=I.split(`
`);for(g=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;g<$.length&&!$[g].includes("DetermineComponentFrameRoot");)g++;if(u===P.length||g===$.length)for(u=P.length-1,g=$.length-1;1<=u&&0<=g&&P[u]!==$[g];)g--;for(;1<=u&&0<=g;u--,g--)if(P[u]!==$[g]){if(u!==1||g!==1)do if(u--,g--,0>g||P[u]!==$[g]){var Q=`
`+P[u].replace(" at new "," at ");return r.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",r.displayName)),Q}while(1<=u&&0<=g);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?ir(a):""}function Na(r,o){switch(r.tag){case 26:case 27:case 5:return ir(r.type);case 16:return ir("Lazy");case 13:return r.child!==o&&o!==null?ir("Suspense Fallback"):ir("Suspense");case 19:return ir("SuspenseList");case 0:case 15:return go(r.type,!1);case 11:return go(r.type.render,!1);case 1:return go(r.type,!0);case 31:return ir("Activity");default:return""}}function xa(r){try{var o="",a=null;do o+=Na(r,a),a=r,r=r.return;while(r);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var _t=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,fs=n.unstable_cancelCallback,sh=n.unstable_shouldYield,vu=n.unstable_requestPaint,on=n.unstable_now,vo=n.unstable_getCurrentPriorityLevel,Oa=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,ps=n.unstable_NormalPriority,oh=n.unstable_LowPriority,yu=n.unstable_IdlePriority,bu=n.log,wu=n.unstable_setDisableYieldValue,qn=null,Gt=null;function Cn(r){if(typeof bu=="function"&&wu(r),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(qn,r)}catch{}}var vt=Math.clz32?Math.clz32:Eu,Su=Math.log,ui=Math.LN2;function Eu(r){return r>>>=0,r===0?32:31-(Su(r)/ui|0)|0}var ar=256,yo=262144,Tt=4194304;function lr(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ur(r,o,a){var u=r.pendingLanes;if(u===0)return 0;var g=0,y=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var I=u&134217727;return I!==0?(u=I&~y,u!==0?g=lr(u):(E&=I,E!==0?g=lr(E):a||(a=I&~r,a!==0&&(g=lr(a))))):(I=u&~y,I!==0?g=lr(I):E!==0?g=lr(E):a||(a=u&~r,a!==0&&(g=lr(a)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,a=o&-o,y>=a||y===32&&(a&4194048)!==0)?o:g}function zn(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ih(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _u(){var r=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),r}function cr(r){for(var o=[],a=0;31>a;a++)o.push(r);return o}function bo(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ah(r,o,a,u,g,y){var E=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var I=r.entanglements,P=r.expirationTimes,$=r.hiddenUpdates;for(a=E&~a;0<a;){var Q=31-vt(a),te=1<<Q;I[Q]=0,P[Q]=-1;var B=$[Q];if(B!==null)for($[Q]=null,Q=0;Q<B.length;Q++){var W=B[Q];W!==null&&(W.lane&=-536870913)}a&=~te}u!==0&&wo(r,u,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(E&~o))}function wo(r,o,a){r.pendingLanes|=o,r.suspendedLanes&=~o;var u=31-vt(o);r.entangledLanes|=o,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Pa(r,o){var a=r.entangledLanes|=o;for(r=r.entanglements;a;){var u=31-vt(a),g=1<<u;g&o|r[u]&o&&(r[u]|=o),a&=~g}}function Da(r,o){var a=o&-o;return a=(a&42)!==0?1:So(a),(a&(r.suspendedLanes|o))!==0?0:a}function So(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Lr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Tu(){var r=le.p;return r!==0?r:(r=window.event,r===void 0?32:c0(r.type))}function Gn(r,o){var a=le.p;try{return le.p=r,o()}finally{le.p=a}}var $n=Math.random().toString(36).slice(2),It="__reactFiber$"+$n,Vt="__reactProps$"+$n,dr="__reactContainer$"+$n,ci="__reactEvents$"+$n,lh="__reactListeners$"+$n,Iu="__reactHandles$"+$n,Cu="__reactResources$"+$n,hr="__reactMarker$"+$n;function di(r){delete r[It],delete r[Vt],delete r[ci],delete r[lh],delete r[Iu]}function fr(r){var o=r[It];if(o)return o;for(var a=r.parentNode;a;){if(o=a[dr]||a[It]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(r=Ky(r);r!==null;){if(a=r[It])return a;r=Ky(r)}return o}r=a,a=r.parentNode}return null}function kn(r){if(r=r[It]||r[dr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function gn(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(s(33))}function pr(r){var o=r[Cu];return o||(o=r[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ct(r){r[hr]=!0}var Ma=new Set,La={};function mr(r,o){gr(r,o),gr(r+"Capture",o)}function gr(r,o){for(La[r]=o,r=0;r<o.length;r++)Ma.add(o[r])}var Ua=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fa={},Va={};function ku(r){return _t.call(Va,r)?!0:_t.call(Fa,r)?!1:Ua.test(r)?Va[r]=!0:(Fa[r]=!0,!1)}function hi(r,o,a){if(ku(o))if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+a)}}function vn(r,o,a){if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+a)}}function kt(r,o,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(o,a,""+u)}}function jt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ms(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ja(r,o,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){a=""+E,y.call(this,E)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(E){a=""+E},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ye(r){if(!r._valueTracker){var o=ms(r)?"checked":"value";r._valueTracker=ja(r,o,""+r[o])}}function Eo(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return r&&(u=ms(r)?r.checked?"true":"false":r.value),r=u,r!==a?(o.setValue(r),!0):!1}function vr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var _o=/[\n"\\]/g;function yn(r){return r.replace(_o,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fi(r,o,a,u,g,y,E,I){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),o!=null?E==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+jt(o)):r.value!==""+jt(o)&&(r.value=""+jt(o)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),o!=null?Ha(r,E,jt(o)):a!=null?Ha(r,E,jt(a)):u!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+jt(I):r.removeAttribute("name")}function Au(r,o,a,u,g,y,E,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),o!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){Ye(r);return}a=a!=null?""+jt(a):"",o=o!=null?""+jt(o):a,I||o===r.value||(r.value=o),r.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E),Ye(r)}function Ha(r,o,a){o==="number"&&vr(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function gs(r,o,a,u){if(r=r.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<r.length;a++)g=o.hasOwnProperty("$"+r[a].value),r[a].selected!==g&&(r[a].selected=g),g&&u&&(r[a].defaultSelected=!0)}else{for(a=""+jt(a),o=null,g=0;g<r.length;g++){if(r[g].value===a){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function Nu(r,o,a){if(o!=null&&(o=""+jt(o),o!==r.value&&(r.value=o),a==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=a!=null?""+jt(a):""}function vs(r,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(pt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=jt(o),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ye(r)}function un(r,o){if(o){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=o;return}}r.textContent=o}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qa(r,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":u?r.setProperty(o,a):typeof a!="number"||a===0||xu.has(o)?o==="float"?r.cssFloat=a:r[o]=(""+a).trim():r[o]=a+"px"}function za(r,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&a[g]!==u&&qa(r,g,u)}else for(var y in o)o.hasOwnProperty(y)&&qa(r,y,o[y])}function pi(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(r){return ys.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Bn(){}var Ga=null;function An(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var bs=null,yr=null;function To(r){var o=kn(r);if(o&&(r=o.stateNode)){var a=r[Vt]||null;e:switch(r=o.stateNode,o.type){case"input":if(fi(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==r&&u.form===r.form){var g=u[Vt]||null;if(!g)throw Error(s(90));fi(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===r.form&&Eo(u)}break e;case"textarea":Nu(r,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&gs(r,!!a.multiple,o,!1)}}}var gi=!1;function ws(r,o,a){if(gi)return r(o,a);gi=!0;try{var u=r(o);return u}finally{if(gi=!1,(bs!==null||yr!==null)&&(Tc(),bs&&(o=bs,r=yr,yr=bs=null,To(o),r)))for(o=0;o<r.length;o++)To(r[o])}}function Jn(r,o){var a=r.stateNode;if(a===null)return null;var u=a[Vt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=!1;if(Nn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Io=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Io=!1}var br=null,$a=null,Co=null;function Ba(){if(Co)return Co;var r,o=$a,a=o.length,u,g="value"in br?br.value:br.textContent,y=g.length;for(r=0;r<a&&o[r]===g[r];r++);var E=a-r;for(u=1;u<=E&&o[a-u]===g[y-u];u++);return Co=g.slice(r,1<u?1-u:void 0)}function ko(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ur(){return!0}function Kn(){return!1}function $t(r){function o(a,u,g,y,E){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(a=r[I],this[I]=a?a(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ur:Kn,this.isPropagationStopped=Kn,this}return S(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=$t(Fr),Ss=S({},Fr,{view:0,detail:0}),Ja=$t(Ss),Es,vi,Sr,yi=S({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Sr&&(Sr&&r.type==="mousemove"?(Es=r.screenX-Sr.screenX,vi=r.screenY-Sr.screenY):vi=Es=0,Sr=r),Es)},movementY:function(r){return"movementY"in r?r.movementY:vi}}),Ka=$t(yi),Ao=S({},yi,{dataTransfer:0}),Ru=$t(Ao),Pu=S({},Ss,{relatedTarget:0}),No=$t(Pu),Wa=S({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=$t(Wa),bi=S({},Fr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Mu=$t(bi),Lu=S({},Fr,{data:0}),Er=$t(Lu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Vu[r])?!!o[r]:!1}function _s(){return ju}var an=S({},Ss,{key:function(r){if(r.key){var o=Uu[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ko(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Fu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(r){return r.type==="keypress"?ko(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ko(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Hu=$t(an),qu=S({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=$t(qu),p=S({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),w=$t(p),_=S({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=$t(_),z=S({},yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K=$t(z),ae=S({},Fr,{newState:0,oldState:0}),Ne=$t(ae),yt=[9,13,27,32],Qe=Nn&&"CompositionEvent"in window,ct=null;Nn&&"documentMode"in document&&(ct=document.documentMode);var xn=Nn&&"TextEvent"in window&&!ct,jr=Nn&&(!Qe||ct&&8<ct&&11>=ct),Wn=" ",Yn=!1;function xo(r,o){switch(r){case"keyup":return yt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wi(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Si=!1;function DT(r,o){switch(r){case"compositionend":return wi(o);case"keypress":return o.which!==32?null:(Yn=!0,Wn);case"textInput":return r=o.data,r===Wn&&Yn?null:r;default:return null}}function MT(r,o){if(Si)return r==="compositionend"||!Qe&&xo(r,o)?(r=Ba(),Co=$a=br=null,Si=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return jr&&o.locale!=="ko"?null:o.data;default:return null}}var LT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qm(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!LT[r.type]:o==="textarea"}function Xm(r,o,a,u){bs?yr?yr.push(u):yr=[u]:bs=u,o=Oc(o,"onChange"),0<o.length&&(a=new wr("onChange","change",null,a,u),r.push({event:a,listeners:o}))}var Ya=null,Qa=null;function UT(r){Dy(r,0)}function zu(r){var o=gn(r);if(Eo(o))return r}function Zm(r,o){if(r==="change")return o}var eg=!1;if(Nn){var uh;if(Nn){var ch="oninput"in document;if(!ch){var tg=document.createElement("div");tg.setAttribute("oninput","return;"),ch=typeof tg.oninput=="function"}uh=ch}else uh=!1;eg=uh&&(!document.documentMode||9<document.documentMode)}function ng(){Ya&&(Ya.detachEvent("onpropertychange",rg),Qa=Ya=null)}function rg(r){if(r.propertyName==="value"&&zu(Qa)){var o=[];Xm(o,Qa,r,An(r)),ws(UT,o)}}function FT(r,o,a){r==="focusin"?(ng(),Ya=o,Qa=a,Ya.attachEvent("onpropertychange",rg)):r==="focusout"&&ng()}function VT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return zu(Qa)}function jT(r,o){if(r==="click")return zu(o)}function HT(r,o){if(r==="input"||r==="change")return zu(o)}function qT(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var bn=typeof Object.is=="function"?Object.is:qT;function Xa(r,o){if(bn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var a=Object.keys(r),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!_t.call(o,g)||!bn(r[g],o[g]))return!1}return!0}function sg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function og(r,o){var a=sg(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=o&&u>=o)return{node:a,offset:o-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sg(a)}}function ig(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?ig(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function ag(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=vr(r.document);o instanceof r.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)r=o.contentWindow;else break;o=vr(r.document)}return o}function dh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var zT=Nn&&"documentMode"in document&&11>=document.documentMode,Ei=null,hh=null,Za=null,fh=!1;function lg(r,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||Ei==null||Ei!==vr(u)||(u=Ei,"selectionStart"in u&&dh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Za&&Xa(Za,u)||(Za=u,u=Oc(hh,"onSelect"),0<u.length&&(o=new wr("onSelect","select",null,o,a),r.push({event:o,listeners:u}),o.target=Ei)))}function Oo(r,o){var a={};return a[r.toLowerCase()]=o.toLowerCase(),a["Webkit"+r]="webkit"+o,a["Moz"+r]="moz"+o,a}var _i={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionrun:Oo("Transition","TransitionRun"),transitionstart:Oo("Transition","TransitionStart"),transitioncancel:Oo("Transition","TransitionCancel"),transitionend:Oo("Transition","TransitionEnd")},ph={},ug={};Nn&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Ro(r){if(ph[r])return ph[r];if(!_i[r])return r;var o=_i[r],a;for(a in o)if(o.hasOwnProperty(a)&&a in ug)return ph[r]=o[a];return r}var cg=Ro("animationend"),dg=Ro("animationiteration"),hg=Ro("animationstart"),GT=Ro("transitionrun"),$T=Ro("transitionstart"),BT=Ro("transitioncancel"),fg=Ro("transitionend"),pg=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Qn(r,o){pg.set(r,o),mr(o,[r])}var Gu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},On=[],Ti=0,gh=0;function $u(){for(var r=Ti,o=gh=Ti=0;o<r;){var a=On[o];On[o++]=null;var u=On[o];On[o++]=null;var g=On[o];On[o++]=null;var y=On[o];if(On[o++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}y!==0&&mg(a,g,y)}}function Bu(r,o,a,u){On[Ti++]=r,On[Ti++]=o,On[Ti++]=a,On[Ti++]=u,gh|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function vh(r,o,a,u){return Bu(r,o,a,u),Ju(r)}function Po(r,o){return Bu(r,null,null,o),Ju(r)}function mg(r,o,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=r.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&o!==null&&(g=31-vt(a),r=y.hiddenUpdates,u=r[g],u===null?r[g]=[o]:u.push(o),o.lane=a|536870912),y):null}function Ju(r){if(50<Sl)throw Sl=0,kf=null,Error(s(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ii={};function JT(r,o,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(r,o,a,u){return new JT(r,o,a,u)}function yh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hr(r,o){var a=r.alternate;return a===null?(a=wn(r.tag,o,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=o,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,o=r.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function gg(r,o){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,o=a.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Ku(r,o,a,u,g,y){var E=0;if(u=r,typeof r=="function")yh(r)&&(E=1);else if(typeof r=="string")E=XI(r,a,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case A:return r=wn(31,a,o,g),r.elementType=A,r.lanes=y,r;case L:return Do(a.children,g,y,o);case H:E=8,g|=24;break;case J:return r=wn(12,a,o,g|2),r.elementType=J,r.lanes=y,r;case pe:return r=wn(13,a,o,g),r.elementType=pe,r.lanes=y,r;case re:return r=wn(19,a,o,g),r.elementType=re,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case se:E=10;break e;case Z:E=9;break e;case ie:E=11;break e;case x:E=14;break e;case k:E=16,u=null;break e}E=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return o=wn(E,a,o,g),o.elementType=r,o.type=u,o.lanes=y,o}function Do(r,o,a,u){return r=wn(7,r,u,o),r.lanes=a,r}function bh(r,o,a){return r=wn(6,r,null,o),r.lanes=a,r}function vg(r){var o=wn(18,null,null,0);return o.stateNode=r,o}function wh(r,o,a){return o=wn(4,r.children!==null?r.children:[],r.key,o),o.lanes=a,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var yg=new WeakMap;function Rn(r,o){if(typeof r=="object"&&r!==null){var a=yg.get(r);return a!==void 0?a:(o={value:r,source:o,stack:xa(o)},yg.set(r,o),o)}return{value:r,source:o,stack:xa(o)}}var Ci=[],ki=0,Wu=null,el=0,Pn=[],Dn=0,Ts=null,_r=1,Tr="";function qr(r,o){Ci[ki++]=el,Ci[ki++]=Wu,Wu=r,el=o}function bg(r,o,a){Pn[Dn++]=_r,Pn[Dn++]=Tr,Pn[Dn++]=Ts,Ts=r;var u=_r;r=Tr;var g=32-vt(u)-1;u&=~(1<<g),a+=1;var y=32-vt(o)+g;if(30<y){var E=g-g%5;y=(u&(1<<E)-1).toString(32),u>>=E,g-=E,_r=1<<32-vt(o)+g|a<<g|u,Tr=y+r}else _r=1<<y|a<<g|u,Tr=r}function Sh(r){r.return!==null&&(qr(r,1),bg(r,1,0))}function Eh(r){for(;r===Wu;)Wu=Ci[--ki],Ci[ki]=null,el=Ci[--ki],Ci[ki]=null;for(;r===Ts;)Ts=Pn[--Dn],Pn[Dn]=null,Tr=Pn[--Dn],Pn[Dn]=null,_r=Pn[--Dn],Pn[Dn]=null}function wg(r,o){Pn[Dn++]=_r,Pn[Dn++]=Tr,Pn[Dn++]=Ts,_r=o.id,Tr=o.overflow,Ts=r}var Bt=null,ot=null,Fe=!1,Is=null,Mn=!1,_h=Error(s(519));function Cs(r){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Rn(o,r)),_h}function Sg(r){var o=r.stateNode,a=r.type,u=r.memoizedProps;switch(o[It]=r,o[Vt]=u,a){case"dialog":Re("cancel",o),Re("close",o);break;case"iframe":case"object":case"embed":Re("load",o);break;case"video":case"audio":for(a=0;a<_l.length;a++)Re(_l[a],o);break;case"source":Re("error",o);break;case"img":case"image":case"link":Re("error",o),Re("load",o);break;case"details":Re("toggle",o);break;case"input":Re("invalid",o),Au(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Re("invalid",o);break;case"textarea":Re("invalid",o),vs(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Fy(o.textContent,a)?(u.popover!=null&&(Re("beforetoggle",o),Re("toggle",o)),u.onScroll!=null&&Re("scroll",o),u.onScrollEnd!=null&&Re("scrollend",o),u.onClick!=null&&(o.onclick=Bn),o=!0):o=!1,o||Cs(r,!0)}function Eg(r){for(Bt=r.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Bt=Bt.return}}function Ai(r){if(r!==Bt)return!1;if(!Fe)return Eg(r),Fe=!0,!1;var o=r.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||qf(r.type,r.memoizedProps)),a=!a),a&&ot&&Cs(r),Eg(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=Jy(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=Jy(r)}else o===27?(o=ot,js(r.type)?(r=Jf,Jf=null,ot=r):ot=o):ot=Bt?Ln(r.stateNode.nextSibling):null;return!0}function Mo(){ot=Bt=null,Fe=!1}function Th(){var r=Is;return r!==null&&(fn===null?fn=r:fn.push.apply(fn,r),Is=null),r}function tl(r){Is===null?Is=[r]:Is.push(r)}var Ih=V(null),Lo=null,zr=null;function ks(r,o,a){ue(Ih,o._currentValue),o._currentValue=a}function Gr(r){r._currentValue=Ih.current,ee(Ih)}function Ch(r,o,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),r===a)break;r=r.return}}function kh(r,o,a,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=g;for(var P=0;P<o.length;P++)if(I.context===o[P]){y.lanes|=a,I=y.alternate,I!==null&&(I.lanes|=a),Ch(y.return,a,r),u||(E=null);break e}y=I.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(s(341));E.lanes|=a,y=E.alternate,y!==null&&(y.lanes|=a),Ch(E,a,r),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===r){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Ni(r,o,a,u){r=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var I=g.type;bn(g.pendingProps.value,E.value)||(r!==null?r.push(I):r=[I])}}else if(g===Ve.current){if(E=g.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Al):r=[Al])}g=g.return}r!==null&&kh(o,r,a,u),o.flags|=262144}function Yu(r){for(r=r.firstContext;r!==null;){if(!bn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Uo(r){Lo=r,zr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Jt(r){return _g(Lo,r)}function Qu(r,o){return Lo===null&&Uo(r),_g(r,o)}function _g(r,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},zr===null){if(r===null)throw Error(s(308));zr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else zr=zr.next=o;return a}var KT=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){o.aborted=!0,r.forEach(function(a){return a()})}},WT=n.unstable_scheduleCallback,YT=n.unstable_NormalPriority,At={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ah(){return{controller:new KT,data:new Map,refCount:0}}function nl(r){r.refCount--,r.refCount===0&&WT(YT,function(){r.controller.abort()})}var rl=null,Nh=0,xi=0,Oi=null;function QT(r,o){if(rl===null){var a=rl=[];Nh=0,xi=Pf(),Oi={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Nh++,o.then(Tg,Tg),o}function Tg(){if(--Nh===0&&rl!==null){Oi!==null&&(Oi.status="fulfilled");var r=rl;rl=null,xi=0,Oi=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function XT(r,o){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return r.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Ig=Y.S;Y.S=function(r,o){ly=on(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&QT(r,o),Ig!==null&&Ig(r,o)};var Fo=V(null);function xh(){var r=Fo.current;return r!==null?r:st.pooledCache}function Xu(r,o){o===null?ue(Fo,Fo.current):ue(Fo,o.pool)}function Cg(){var r=xh();return r===null?null:{parent:At._currentValue,pool:r}}var Ri=Error(s(460)),Oh=Error(s(474)),Zu=Error(s(542)),ec={then:function(){}};function kg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ag(r,o,a){switch(a=r[a],a===void 0?r.push(o):a!==o&&(o.then(Bn,Bn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,xg(r),r;default:if(typeof o.status=="string")o.then(Bn,Bn);else{if(r=st,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=o,r.status="pending",r.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,xg(r),r}throw jo=o,Ri}}function Vo(r){try{var o=r._init;return o(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jo=a,Ri):a}}var jo=null;function Ng(){if(jo===null)throw Error(s(459));var r=jo;return jo=null,r}function xg(r){if(r===Ri||r===Zu)throw Error(s(483))}var Pi=null,sl=0;function tc(r){var o=sl;return sl+=1,Pi===null&&(Pi=[]),Ag(Pi,r,o)}function ol(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function nc(r,o){throw o.$$typeof===T?Error(s(525)):(r=Object.prototype.toString.call(o),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Og(r){function o(j,U){if(r){var G=j.deletions;G===null?(j.deletions=[U],j.flags|=16):G.push(U)}}function a(j,U){if(!r)return null;for(;U!==null;)o(j,U),U=U.sibling;return null}function u(j){for(var U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function g(j,U){return j=Hr(j,U),j.index=0,j.sibling=null,j}function y(j,U,G){return j.index=G,r?(G=j.alternate,G!==null?(G=G.index,G<U?(j.flags|=67108866,U):G):(j.flags|=67108866,U)):(j.flags|=1048576,U)}function E(j){return r&&j.alternate===null&&(j.flags|=67108866),j}function I(j,U,G,X){return U===null||U.tag!==6?(U=bh(G,j.mode,X),U.return=j,U):(U=g(U,G),U.return=j,U)}function P(j,U,G,X){var ve=G.type;return ve===L?Q(j,U,G.props.children,X,G.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===k&&Vo(ve)===U.type)?(U=g(U,G.props),ol(U,G),U.return=j,U):(U=Ku(G.type,G.key,G.props,null,j.mode,X),ol(U,G),U.return=j,U)}function $(j,U,G,X){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=wh(G,j.mode,X),U.return=j,U):(U=g(U,G.children||[]),U.return=j,U)}function Q(j,U,G,X,ve){return U===null||U.tag!==7?(U=Do(G,j.mode,X,ve),U.return=j,U):(U=g(U,G),U.return=j,U)}function te(j,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=bh(""+U,j.mode,G),U.return=j,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case N:return G=Ku(U.type,U.key,U.props,null,j.mode,G),ol(G,U),G.return=j,G;case q:return U=wh(U,j.mode,G),U.return=j,U;case k:return U=Vo(U),te(j,U,G)}if(pt(U)||F(U))return U=Do(U,j.mode,G,null),U.return=j,U;if(typeof U.then=="function")return te(j,tc(U),G);if(U.$$typeof===se)return te(j,Qu(j,U),G);nc(j,U)}return null}function B(j,U,G,X){var ve=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ve!==null?null:I(j,U,""+G,X);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return G.key===ve?P(j,U,G,X):null;case q:return G.key===ve?$(j,U,G,X):null;case k:return G=Vo(G),B(j,U,G,X)}if(pt(G)||F(G))return ve!==null?null:Q(j,U,G,X,null);if(typeof G.then=="function")return B(j,U,tc(G),X);if(G.$$typeof===se)return B(j,U,Qu(j,G),X);nc(j,G)}return null}function W(j,U,G,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return j=j.get(G)||null,I(U,j,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return j=j.get(X.key===null?G:X.key)||null,P(U,j,X,ve);case q:return j=j.get(X.key===null?G:X.key)||null,$(U,j,X,ve);case k:return X=Vo(X),W(j,U,G,X,ve)}if(pt(X)||F(X))return j=j.get(G)||null,Q(U,j,X,ve,null);if(typeof X.then=="function")return W(j,U,G,tc(X),ve);if(X.$$typeof===se)return W(j,U,G,Qu(U,X),ve);nc(U,X)}return null}function fe(j,U,G,X){for(var ve=null,ze=null,me=U,xe=U=0,De=null;me!==null&&xe<G.length;xe++){me.index>xe?(De=me,me=null):De=me.sibling;var Ge=B(j,me,G[xe],X);if(Ge===null){me===null&&(me=De);break}r&&me&&Ge.alternate===null&&o(j,me),U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge,me=De}if(xe===G.length)return a(j,me),Fe&&qr(j,xe),ve;if(me===null){for(;xe<G.length;xe++)me=te(j,G[xe],X),me!==null&&(U=y(me,U,xe),ze===null?ve=me:ze.sibling=me,ze=me);return Fe&&qr(j,xe),ve}for(me=u(me);xe<G.length;xe++)De=W(me,j,xe,G[xe],X),De!==null&&(r&&De.alternate!==null&&me.delete(De.key===null?xe:De.key),U=y(De,U,xe),ze===null?ve=De:ze.sibling=De,ze=De);return r&&me.forEach(function($s){return o(j,$s)}),Fe&&qr(j,xe),ve}function we(j,U,G,X){if(G==null)throw Error(s(151));for(var ve=null,ze=null,me=U,xe=U=0,De=null,Ge=G.next();me!==null&&!Ge.done;xe++,Ge=G.next()){me.index>xe?(De=me,me=null):De=me.sibling;var $s=B(j,me,Ge.value,X);if($s===null){me===null&&(me=De);break}r&&me&&$s.alternate===null&&o(j,me),U=y($s,U,xe),ze===null?ve=$s:ze.sibling=$s,ze=$s,me=De}if(Ge.done)return a(j,me),Fe&&qr(j,xe),ve;if(me===null){for(;!Ge.done;xe++,Ge=G.next())Ge=te(j,Ge.value,X),Ge!==null&&(U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge);return Fe&&qr(j,xe),ve}for(me=u(me);!Ge.done;xe++,Ge=G.next())Ge=W(me,j,xe,Ge.value,X),Ge!==null&&(r&&Ge.alternate!==null&&me.delete(Ge.key===null?xe:Ge.key),U=y(Ge,U,xe),ze===null?ve=Ge:ze.sibling=Ge,ze=Ge);return r&&me.forEach(function(uC){return o(j,uC)}),Fe&&qr(j,xe),ve}function rt(j,U,G,X){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case N:e:{for(var ve=G.key;U!==null;){if(U.key===ve){if(ve=G.type,ve===L){if(U.tag===7){a(j,U.sibling),X=g(U,G.props.children),X.return=j,j=X;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===k&&Vo(ve)===U.type){a(j,U.sibling),X=g(U,G.props),ol(X,G),X.return=j,j=X;break e}a(j,U);break}else o(j,U);U=U.sibling}G.type===L?(X=Do(G.props.children,j.mode,X,G.key),X.return=j,j=X):(X=Ku(G.type,G.key,G.props,null,j.mode,X),ol(X,G),X.return=j,j=X)}return E(j);case q:e:{for(ve=G.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(j,U.sibling),X=g(U,G.children||[]),X.return=j,j=X;break e}else{a(j,U);break}else o(j,U);U=U.sibling}X=wh(G,j.mode,X),X.return=j,j=X}return E(j);case k:return G=Vo(G),rt(j,U,G,X)}if(pt(G))return fe(j,U,G,X);if(F(G)){if(ve=F(G),typeof ve!="function")throw Error(s(150));return G=ve.call(G),we(j,U,G,X)}if(typeof G.then=="function")return rt(j,U,tc(G),X);if(G.$$typeof===se)return rt(j,U,Qu(j,G),X);nc(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(j,U.sibling),X=g(U,G),X.return=j,j=X):(a(j,U),X=bh(G,j.mode,X),X.return=j,j=X),E(j)):a(j,U)}return function(j,U,G,X){try{sl=0;var ve=rt(j,U,G,X);return Pi=null,ve}catch(me){if(me===Ri||me===Zu)throw me;var ze=wn(29,me,null,j.mode);return ze.lanes=X,ze.return=j,ze}finally{}}}var Ho=Og(!0),Rg=Og(!1),As=!1;function Rh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ph(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ns(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xs(r,o,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Ju(r),mg(r,null,a),o}return Bu(r,u,o,a),Ju(r)}function il(r,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=r.pendingLanes,a|=u,o.lanes=a,Pa(r,a)}}function Dh(r,o){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?g=y=o:y=y.next=o}else g=y=o;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=o:r.next=o,a.lastBaseUpdate=o}var Mh=!1;function al(){if(Mh){var r=Oi;if(r!==null)throw r}}function ll(r,o,a,u){Mh=!1;var g=r.updateQueue;As=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var P=I,$=P.next;P.next=null,E===null?y=$:E.next=$,E=P;var Q=r.alternate;Q!==null&&(Q=Q.updateQueue,I=Q.lastBaseUpdate,I!==E&&(I===null?Q.firstBaseUpdate=$:I.next=$,Q.lastBaseUpdate=P))}if(y!==null){var te=g.baseState;E=0,Q=$=P=null,I=y;do{var B=I.lane&-536870913,W=B!==I.lane;if(W?(Pe&B)===B:(u&B)===B){B!==0&&B===xi&&(Mh=!0),Q!==null&&(Q=Q.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var fe=r,we=I;B=o;var rt=a;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){te=fe.call(rt,te,B);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,B=typeof fe=="function"?fe.call(rt,te,B):fe,B==null)break e;te=S({},te,B);break e;case 2:As=!0}}B=I.callback,B!==null&&(r.flags|=64,W&&(r.flags|=8192),W=g.callbacks,W===null?g.callbacks=[B]:W.push(B))}else W={lane:B,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Q===null?($=Q=W,P=te):Q=Q.next=W,E|=B;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;W=I,I=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);Q===null&&(P=te),g.baseState=P,g.firstBaseUpdate=$,g.lastBaseUpdate=Q,y===null&&(g.shared.lanes=0),Ms|=E,r.lanes=E,r.memoizedState=te}}function Pg(r,o){if(typeof r!="function")throw Error(s(191,r));r.call(o)}function Dg(r,o){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)Pg(a[r],o)}var Di=V(null),rc=V(0);function Mg(r,o){r=Zr,ue(rc,r),ue(Di,o),Zr=r|o.baseLanes}function Lh(){ue(rc,Zr),ue(Di,Di.current)}function Uh(){Zr=rc.current,ee(Di),ee(rc)}var Sn=V(null),Xn=null;function Os(r){var o=r.alternate;ue(bt,bt.current&1),ue(Sn,r),Xn===null&&(o===null||Di.current!==null||o.memoizedState!==null)&&(Xn=r)}function Fh(r){ue(bt,bt.current),ue(Sn,r),Xn===null&&(Xn=r)}function Lg(r){r.tag===22?(ue(bt,bt.current),ue(Sn,r),Xn===null&&(Xn=r)):Rs()}function Rs(){ue(bt,bt.current),ue(Sn,Sn.current)}function En(r){ee(Sn),Xn===r&&(Xn=null),ee(bt)}var bt=V(0);function sc(r){for(var o=r;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$f(a)||Bf(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var $r=0,ke=null,tt=null,Nt=null,oc=!1,Mi=!1,qo=!1,ic=0,ul=0,Li=null,ZT=0;function mt(){throw Error(s(321))}function Vh(r,o){if(o===null)return!1;for(var a=0;a<o.length&&a<r.length;a++)if(!bn(r[a],o[a]))return!1;return!0}function jh(r,o,a,u,g,y){return $r=y,ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=r===null||r.memoizedState===null?bv:tf,qo=!1,y=a(u,g),qo=!1,Mi&&(y=Fg(o,a,u,g)),Ug(r),y}function Ug(r){Y.H=hl;var o=tt!==null&&tt.next!==null;if($r=0,Nt=tt=ke=null,oc=!1,ul=0,Li=null,o)throw Error(s(300));r===null||xt||(r=r.dependencies,r!==null&&Yu(r)&&(xt=!0))}function Fg(r,o,a,u){ke=r;var g=0;do{if(Mi&&(Li=null),ul=0,Mi=!1,25<=g)throw Error(s(301));if(g+=1,Nt=tt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=wv,y=o(a,u)}while(Mi);return y}function eI(){var r=Y.H,o=r.useState()[0];return o=typeof o.then=="function"?cl(o):o,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(ke.flags|=1024),o}function Hh(){var r=ic!==0;return ic=0,r}function qh(r,o,a){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~a}function zh(r){if(oc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}oc=!1}$r=0,Nt=tt=ke=null,Mi=!1,ul=ic=0,Li=null}function ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ke.memoizedState=Nt=r:Nt=Nt.next=r,Nt}function wt(){if(tt===null){var r=ke.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var o=Nt===null?ke.memoizedState:Nt.next;if(o!==null)Nt=o,tt=r;else{if(r===null)throw ke.alternate===null?Error(s(467)):Error(s(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?ke.memoizedState=Nt=r:Nt=Nt.next=r}return Nt}function ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(r){var o=ul;return ul+=1,Li===null&&(Li=[]),r=Ag(Li,r,o),o=ke,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?bv:tf),r}function lc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return cl(r);if(r.$$typeof===se)return Jt(r)}throw Error(s(438,String(r)))}function Gh(r){var o=null,a=ke.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=ac(),ke.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(r),u=0;u<r;u++)a[u]=M;return o.index++,a}function Br(r,o){return typeof o=="function"?o(r):o}function uc(r){var o=wt();return $h(o,tt,r)}function $h(r,o,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=r.baseQueue,y=u.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}o.baseQueue=g=y,u.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{o=g.next;var I=E=null,P=null,$=o,Q=!1;do{var te=$.lane&-536870913;if(te!==$.lane?(Pe&te)===te:($r&te)===te){var B=$.revertLane;if(B===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),te===xi&&(Q=!0);else if(($r&B)===B){$=$.next,B===xi&&(Q=!0);continue}else te={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(I=P=te,E=y):P=P.next=te,ke.lanes|=B,Ms|=B;te=$.action,qo&&a(y,te),y=$.hasEagerState?$.eagerState:a(y,te)}else B={lane:te,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(I=P=B,E=y):P=P.next=B,ke.lanes|=te,Ms|=te;$=$.next}while($!==null&&$!==o);if(P===null?E=y:P.next=I,!bn(y,r.memoizedState)&&(xt=!0,Q&&(a=Oi,a!==null)))throw a;r.memoizedState=y,r.baseState=E,r.baseQueue=P,u.lastRenderedState=y}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Bh(r){var o=wt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,g=a.pending,y=o.memoizedState;if(g!==null){a.pending=null;var E=g=g.next;do y=r(y,E.action),E=E.next;while(E!==g);bn(y,o.memoizedState)||(xt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),a.lastRenderedState=y}return[y,u]}function Vg(r,o,a){var u=ke,g=wt(),y=Fe;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=o();var E=!bn((tt||g).memoizedState,a);if(E&&(g.memoizedState=a,xt=!0),g=g.queue,Wh(qg.bind(null,u,g,r),[r]),g.getSnapshot!==o||E||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Ui(9,{destroy:void 0},Hg.bind(null,u,g,a,o),null),st===null)throw Error(s(349));y||($r&127)!==0||jg(u,o,a)}return a}function jg(r,o,a){r.flags|=16384,r={getSnapshot:o,value:a},o=ke.updateQueue,o===null?(o=ac(),ke.updateQueue=o,o.stores=[r]):(a=o.stores,a===null?o.stores=[r]:a.push(r))}function Hg(r,o,a,u){o.value=a,o.getSnapshot=u,zg(o)&&Gg(r)}function qg(r,o,a){return a(function(){zg(o)&&Gg(r)})}function zg(r){var o=r.getSnapshot;r=r.value;try{var a=o();return!bn(r,a)}catch{return!0}}function Gg(r){var o=Po(r,2);o!==null&&pn(o,r,2)}function Jh(r){var o=ln();if(typeof r=="function"){var a=r;if(r=a(),qo){Cn(!0);try{a()}finally{Cn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:r},o}function $g(r,o,a,u){return r.baseState=a,$h(r,tt,typeof u=="function"?u:Br)}function tI(r,o,a,u,g){if(hc(r))throw Error(s(485));if(r=o.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};Y.T!==null?a(!0):y.isTransition=!1,u(y),a=o.pending,a===null?(y.next=o.pending=y,Bg(o,y)):(y.next=a.next,o.pending=a.next=y)}}function Bg(r,o){var a=o.action,u=o.payload,g=r.state;if(o.isTransition){var y=Y.T,E={};Y.T=E;try{var I=a(g,u),P=Y.S;P!==null&&P(E,I),Jg(r,o,I)}catch($){Kh(r,o,$)}finally{y!==null&&E.types!==null&&(y.types=E.types),Y.T=y}}else try{y=a(g,u),Jg(r,o,y)}catch($){Kh(r,o,$)}}function Jg(r,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Kg(r,o,u)},function(u){return Kh(r,o,u)}):Kg(r,o,a)}function Kg(r,o,a){o.status="fulfilled",o.value=a,Wg(o),r.state=a,o=r.pending,o!==null&&(a=o.next,a===o?r.pending=null:(a=a.next,o.next=a,Bg(r,a)))}function Kh(r,o,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,Wg(o),o=o.next;while(o!==u)}r.action=null}function Wg(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Yg(r,o){return o}function Qg(r,o){if(Fe){var a=st.formState;if(a!==null){e:{var u=ke;if(Fe){if(ot){t:{for(var g=ot,y=Mn;g.nodeType!==8;){if(!y){g=null;break t}if(g=Ln(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){ot=Ln(g.nextSibling),u=g.data==="F!";break e}}Cs(u)}u=!1}u&&(o=a[0])}}return a=ln(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:o},a.queue=u,a=gv.bind(null,ke,u),u.dispatch=a,u=Jh(!1),y=ef.bind(null,ke,!1,u.queue),u=ln(),g={state:o,dispatch:null,action:r,pending:null},u.queue=g,a=tI.bind(null,ke,g,y,a),g.dispatch=a,u.memoizedState=r,[o,a,!1]}function Xg(r){var o=wt();return Zg(o,tt,r)}function Zg(r,o,a){if(o=$h(r,o,Yg)[0],r=uc(Br)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=cl(o)}catch(E){throw E===Ri?Zu:E}else u=o;o=wt();var g=o.queue,y=g.dispatch;return a!==o.memoizedState&&(ke.flags|=2048,Ui(9,{destroy:void 0},nI.bind(null,g,a),null)),[u,y,r]}function nI(r,o){r.action=o}function ev(r){var o=wt(),a=tt;if(a!==null)return Zg(o,a,r);wt(),o=o.memoizedState,a=wt();var u=a.queue.dispatch;return a.memoizedState=r,[o,u,!1]}function Ui(r,o,a,u){return r={tag:r,create:a,deps:u,inst:o,next:null},o=ke.updateQueue,o===null&&(o=ac(),ke.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,o.lastEffect=r),r}function tv(){return wt().memoizedState}function cc(r,o,a,u){var g=ln();ke.flags|=r,g.memoizedState=Ui(1|o,{destroy:void 0},a,u===void 0?null:u)}function dc(r,o,a,u){var g=wt();u=u===void 0?null:u;var y=g.memoizedState.inst;tt!==null&&u!==null&&Vh(u,tt.memoizedState.deps)?g.memoizedState=Ui(o,y,a,u):(ke.flags|=r,g.memoizedState=Ui(1|o,y,a,u))}function nv(r,o){cc(8390656,8,r,o)}function Wh(r,o){dc(2048,8,r,o)}function rI(r){ke.flags|=4;var o=ke.updateQueue;if(o===null)o=ac(),ke.updateQueue=o,o.events=[r];else{var a=o.events;a===null?o.events=[r]:a.push(r)}}function rv(r){var o=wt().memoizedState;return rI({ref:o,nextImpl:r}),function(){if((Je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function sv(r,o){return dc(4,2,r,o)}function ov(r,o){return dc(4,4,r,o)}function iv(r,o){if(typeof o=="function"){r=r();var a=o(r);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function av(r,o,a){a=a!=null?a.concat([r]):null,dc(4,4,iv.bind(null,o,r),a)}function Yh(){}function lv(r,o){var a=wt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&Vh(o,u[1])?u[0]:(a.memoizedState=[r,o],r)}function uv(r,o){var a=wt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&Vh(o,u[1]))return u[0];if(u=r(),qo){Cn(!0);try{r()}finally{Cn(!1)}}return a.memoizedState=[u,o],u}function Qh(r,o,a){return a===void 0||($r&1073741824)!==0&&(Pe&261930)===0?r.memoizedState=o:(r.memoizedState=a,r=cy(),ke.lanes|=r,Ms|=r,a)}function cv(r,o,a,u){return bn(a,o)?a:Di.current!==null?(r=Qh(r,a,u),bn(r,o)||(xt=!0),r):($r&42)===0||($r&1073741824)!==0&&(Pe&261930)===0?(xt=!0,r.memoizedState=a):(r=cy(),ke.lanes|=r,Ms|=r,o)}function dv(r,o,a,u,g){var y=le.p;le.p=y!==0&&8>y?y:8;var E=Y.T,I={};Y.T=I,ef(r,!1,o,a);try{var P=g(),$=Y.S;if($!==null&&$(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Q=XT(P,u);dl(r,o,Q,In(r))}else dl(r,o,u,In(r))}catch(te){dl(r,o,{then:function(){},status:"rejected",reason:te},In())}finally{le.p=y,E!==null&&I.types!==null&&(E.types=I.types),Y.T=E}}function sI(){}function Xh(r,o,a,u){if(r.tag!==5)throw Error(s(476));var g=hv(r).queue;dv(r,g,o,ye,a===null?sI:function(){return fv(r),a(u)})}function hv(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:ye},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:a},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function fv(r){var o=hv(r);o.next===null&&(o=r.alternate.memoizedState),dl(r,o.next.queue,{},In())}function Zh(){return Jt(Al)}function pv(){return wt().memoizedState}function mv(){return wt().memoizedState}function oI(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var a=In();r=Ns(a);var u=xs(o,r,a);u!==null&&(pn(u,o,a),il(u,o,a)),o={cache:Ah()},r.payload=o;return}o=o.return}}function iI(r,o,a){var u=In();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hc(r)?vv(o,a):(a=vh(r,o,a,u),a!==null&&(pn(a,r,u),yv(a,o,u)))}function gv(r,o,a){var u=In();dl(r,o,a,u)}function dl(r,o,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(hc(r))vv(o,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,I=y(E,a);if(g.hasEagerState=!0,g.eagerState=I,bn(I,E))return Bu(r,o,g,0),st===null&&$u(),!1}catch{}finally{}if(a=vh(r,o,g,u),a!==null)return pn(a,r,u),yv(a,o,u),!0}return!1}function ef(r,o,a,u){if(u={lane:2,revertLane:Pf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hc(r)){if(o)throw Error(s(479))}else o=vh(r,a,u,2),o!==null&&pn(o,r,2)}function hc(r){var o=r.alternate;return r===ke||o!==null&&o===ke}function vv(r,o){Mi=oc=!0;var a=r.pending;a===null?o.next=o:(o.next=a.next,a.next=o),r.pending=o}function yv(r,o,a){if((a&4194048)!==0){var u=o.lanes;u&=r.pendingLanes,a|=u,o.lanes=a,Pa(r,a)}}var hl={readContext:Jt,use:lc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};hl.useEffectEvent=mt;var bv={readContext:Jt,use:lc,useCallback:function(r,o){return ln().memoizedState=[r,o===void 0?null:o],r},useContext:Jt,useEffect:nv,useImperativeHandle:function(r,o,a){a=a!=null?a.concat([r]):null,cc(4194308,4,iv.bind(null,o,r),a)},useLayoutEffect:function(r,o){return cc(4194308,4,r,o)},useInsertionEffect:function(r,o){cc(4,2,r,o)},useMemo:function(r,o){var a=ln();o=o===void 0?null:o;var u=r();if(qo){Cn(!0);try{r()}finally{Cn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(r,o,a){var u=ln();if(a!==void 0){var g=a(o);if(qo){Cn(!0);try{a(o)}finally{Cn(!1)}}}else g=o;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=iI.bind(null,ke,r),[u.memoizedState,r]},useRef:function(r){var o=ln();return r={current:r},o.memoizedState=r},useState:function(r){r=Jh(r);var o=r.queue,a=gv.bind(null,ke,o);return o.dispatch=a,[r.memoizedState,a]},useDebugValue:Yh,useDeferredValue:function(r,o){var a=ln();return Qh(a,r,o)},useTransition:function(){var r=Jh(!1);return r=dv.bind(null,ke,r.queue,!0,!1),ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,a){var u=ke,g=ln();if(Fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),st===null)throw Error(s(349));(Pe&127)!==0||jg(u,o,a)}g.memoizedState=a;var y={value:a,getSnapshot:o};return g.queue=y,nv(qg.bind(null,u,y,r),[r]),u.flags|=2048,Ui(9,{destroy:void 0},Hg.bind(null,u,y,a,o),null),a},useId:function(){var r=ln(),o=st.identifierPrefix;if(Fe){var a=Tr,u=_r;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=ic++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=ZT++,o="_"+o+"r_"+a.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Zh,useFormState:Qg,useActionState:Qg,useOptimistic:function(r){var o=ln();o.memoizedState=o.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=ef.bind(null,ke,!0,a),a.dispatch=o,[r,o]},useMemoCache:Gh,useCacheRefresh:function(){return ln().memoizedState=oI.bind(null,ke)},useEffectEvent:function(r){var o=ln(),a={impl:r};return o.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:Jt,use:lc,useCallback:lv,useContext:Jt,useEffect:Wh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:uv,useReducer:uc,useRef:tv,useState:function(){return uc(Br)},useDebugValue:Yh,useDeferredValue:function(r,o){var a=wt();return cv(a,tt.memoizedState,r,o)},useTransition:function(){var r=uc(Br)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:cl(r),o]},useSyncExternalStore:Vg,useId:pv,useHostTransitionStatus:Zh,useFormState:Xg,useActionState:Xg,useOptimistic:function(r,o){var a=wt();return $g(a,tt,r,o)},useMemoCache:Gh,useCacheRefresh:mv};tf.useEffectEvent=rv;var wv={readContext:Jt,use:lc,useCallback:lv,useContext:Jt,useEffect:Wh,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:uv,useReducer:Bh,useRef:tv,useState:function(){return Bh(Br)},useDebugValue:Yh,useDeferredValue:function(r,o){var a=wt();return tt===null?Qh(a,r,o):cv(a,tt.memoizedState,r,o)},useTransition:function(){var r=Bh(Br)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:cl(r),o]},useSyncExternalStore:Vg,useId:pv,useHostTransitionStatus:Zh,useFormState:ev,useActionState:ev,useOptimistic:function(r,o){var a=wt();return tt!==null?$g(a,tt,r,o):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Gh,useCacheRefresh:mv};wv.useEffectEvent=rv;function nf(r,o,a,u){o=r.memoizedState,a=a(u,o),a=a==null?o:S({},o,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var rf={enqueueSetState:function(r,o,a){r=r._reactInternals;var u=In(),g=Ns(u);g.payload=o,a!=null&&(g.callback=a),o=xs(r,g,u),o!==null&&(pn(o,r,u),il(o,r,u))},enqueueReplaceState:function(r,o,a){r=r._reactInternals;var u=In(),g=Ns(u);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=xs(r,g,u),o!==null&&(pn(o,r,u),il(o,r,u))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var a=In(),u=Ns(a);u.tag=2,o!=null&&(u.callback=o),o=xs(r,u,a),o!==null&&(pn(o,r,a),il(o,r,a))}};function Sv(r,o,a,u,g,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,E):o.prototype&&o.prototype.isPureReactComponent?!Xa(a,u)||!Xa(g,y):!0}function Ev(r,o,a,u){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==r&&rf.enqueueReplaceState(o,o.state,null)}function zo(r,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(r=r.defaultProps){a===o&&(a=S({},a));for(var g in r)a[g]===void 0&&(a[g]=r[g])}return a}function _v(r){Gu(r)}function Tv(r){console.error(r)}function Iv(r){Gu(r)}function fc(r,o){try{var a=r.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Cv(r,o,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function sf(r,o,a){return a=Ns(a),a.tag=3,a.payload={element:null},a.callback=function(){fc(r,o)},a}function kv(r){return r=Ns(r),r.tag=3,r}function Av(r,o,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;r.payload=function(){return g(y)},r.callback=function(){Cv(o,a,u)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){Cv(o,a,u),typeof g!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function aI(r,o,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&Ni(o,a,g,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?Ic():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===ec?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),xf(r,u,g)),!1;case 22:return a.flags|=65536,u===ec?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),xf(r,u,g)),!1}throw Error(s(435,a.tag))}return xf(r,u,g),Ic(),!1}if(Fe)return o=Sn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==_h&&(r=Error(s(422),{cause:u}),tl(Rn(r,a)))):(u!==_h&&(o=Error(s(423),{cause:u}),tl(Rn(o,a))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=Rn(u,a),g=sf(r.stateNode,u,g),Dh(r,g),gt!==4&&(gt=2)),!1;var y=Error(s(520),{cause:u});if(y=Rn(y,a),wl===null?wl=[y]:wl.push(y),gt!==4&&(gt=2),o===null)return!0;u=Rn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,r=g&-g,a.lanes|=r,r=sf(a.stateNode,u,r),Dh(a,r),!1;case 1:if(o=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ls===null||!Ls.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=kv(g),Av(g,r,a,u),Dh(a,g),!1}a=a.return}while(a!==null);return!1}var of=Error(s(461)),xt=!1;function Kt(r,o,a,u){o.child=r===null?Rg(o,null,a,u):Ho(o,r.child,a,u)}function Nv(r,o,a,u,g){a=a.render;var y=o.ref;if("ref"in u){var E={};for(var I in u)I!=="ref"&&(E[I]=u[I])}else E=u;return Uo(o),u=jh(r,o,a,E,y,g),I=Hh(),r!==null&&!xt?(qh(r,o,g),Jr(r,o,g)):(Fe&&I&&Sh(o),o.flags|=1,Kt(r,o,u,g),o.child)}function xv(r,o,a,u,g){if(r===null){var y=a.type;return typeof y=="function"&&!yh(y)&&y.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=y,Ov(r,o,y,u,g)):(r=Ku(a.type,null,u,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,!pf(r,g)){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(E,u)&&r.ref===o.ref)return Jr(r,o,g)}return o.flags|=1,r=Hr(y,u),r.ref=o.ref,r.return=o,o.child=r}function Ov(r,o,a,u,g){if(r!==null){var y=r.memoizedProps;if(Xa(y,u)&&r.ref===o.ref)if(xt=!1,o.pendingProps=u=y,pf(r,g))(r.flags&131072)!==0&&(xt=!0);else return o.lanes=r.lanes,Jr(r,o,g)}return af(r,o,a,u,g)}function Rv(r,o,a,u){var g=u.children,y=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,r!==null){for(u=o.child=r.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,o.child=null;return Pv(r,o,y,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Xu(o,y!==null?y.cachePool:null),y!==null?Mg(o,y):Lh(),Lg(o);else return u=o.lanes=536870912,Pv(r,o,y!==null?y.baseLanes|a:a,a,u)}else y!==null?(Xu(o,y.cachePool),Mg(o,y),Rs(),o.memoizedState=null):(r!==null&&Xu(o,null),Lh(),Rs());return Kt(r,o,g,a),o.child}function fl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Pv(r,o,a,u,g){var y=xh();return y=y===null?null:{parent:At._currentValue,pool:y},o.memoizedState={baseLanes:a,cachePool:y},r!==null&&Xu(o,null),Lh(),Lg(o),r!==null&&Ni(r,o,u,!0),o.childLanes=g,null}function pc(r,o){return o=gc({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Dv(r,o,a){return Ho(o,r.child,null,a),r=pc(o,o.pendingProps),r.flags|=2,En(o),o.memoizedState=null,r}function lI(r,o,a){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Fe){if(u.mode==="hidden")return r=pc(o,u),o.lanes=536870912,fl(null,r);if(Fh(o),(r=ot)?(r=By(r,Mn),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ts!==null?{id:_r,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},a=vg(r),a.return=o,o.child=a,Bt=o,ot=null)):r=null,r===null)throw Cs(o);return o.lanes=536870912,null}return pc(o,u)}var y=r.memoizedState;if(y!==null){var E=y.dehydrated;if(Fh(o),g)if(o.flags&256)o.flags&=-257,o=Dv(r,o,a);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(s(558));else if(xt||Ni(r,o,a,!1),g=(a&r.childLanes)!==0,xt||g){if(u=st,u!==null&&(E=Da(u,a),E!==0&&E!==y.retryLane))throw y.retryLane=E,Po(r,E),pn(u,r,E),of;Ic(),o=Dv(r,o,a)}else r=y.treeContext,ot=Ln(E.nextSibling),Bt=o,Fe=!0,Is=null,Mn=!1,r!==null&&wg(o,r),o=pc(o,u),o.flags|=4096;return o}return r=Hr(r.child,{mode:u.mode,children:u.children}),r.ref=o.ref,o.child=r,r.return=o,r}function mc(r,o){var a=o.ref;if(a===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(o.flags|=4194816)}}function af(r,o,a,u,g){return Uo(o),a=jh(r,o,a,u,void 0,g),u=Hh(),r!==null&&!xt?(qh(r,o,g),Jr(r,o,g)):(Fe&&u&&Sh(o),o.flags|=1,Kt(r,o,a,g),o.child)}function Mv(r,o,a,u,g,y){return Uo(o),o.updateQueue=null,a=Fg(o,u,a,g),Ug(r),u=Hh(),r!==null&&!xt?(qh(r,o,y),Jr(r,o,y)):(Fe&&u&&Sh(o),o.flags|=1,Kt(r,o,a,y),o.child)}function Lv(r,o,a,u,g){if(Uo(o),o.stateNode===null){var y=Ii,E=a.contextType;typeof E=="object"&&E!==null&&(y=Jt(E)),y=new a(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rf,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},Rh(o),E=a.contextType,y.context=typeof E=="object"&&E!==null?Jt(E):Ii,y.state=o.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(nf(o,a,E,u),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&rf.enqueueReplaceState(y,y.state,null),ll(o,u,y,g),al(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(r===null){y=o.stateNode;var I=o.memoizedProps,P=zo(a,I);y.props=P;var $=y.context,Q=a.contextType;E=Ii,typeof Q=="object"&&Q!==null&&(E=Jt(Q));var te=a.getDerivedStateFromProps;Q=typeof te=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||$!==E)&&Ev(o,y,u,E),As=!1;var B=o.memoizedState;y.state=B,ll(o,u,y,g),al(),$=o.memoizedState,I||B!==$||As?(typeof te=="function"&&(nf(o,a,te,u),$=o.memoizedState),(P=As||Sv(o,a,P,u,B,$,E))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=$),y.props=u,y.state=$,y.context=E,u=P):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,Ph(r,o),E=o.memoizedProps,Q=zo(a,E),y.props=Q,te=o.pendingProps,B=y.context,$=a.contextType,P=Ii,typeof $=="object"&&$!==null&&(P=Jt($)),I=a.getDerivedStateFromProps,($=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==te||B!==P)&&Ev(o,y,u,P),As=!1,B=o.memoizedState,y.state=B,ll(o,u,y,g),al();var W=o.memoizedState;E!==te||B!==W||As||r!==null&&r.dependencies!==null&&Yu(r.dependencies)?(typeof I=="function"&&(nf(o,a,I,u),W=o.memoizedState),(Q=As||Sv(o,a,Q,u,B,W,P)||r!==null&&r.dependencies!==null&&Yu(r.dependencies))?($||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,W,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,W,P)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=W),y.props=u,y.state=W,y.context=P,u=Q):(typeof y.componentDidUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(o.flags|=1024),u=!1)}return y=u,mc(r,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,r!==null&&u?(o.child=Ho(o,r.child,null,g),o.child=Ho(o,null,a,g)):Kt(r,o,a,g),o.memoizedState=y.state,r=o.child):r=Jr(r,o,g),r}function Uv(r,o,a,u){return Mo(),o.flags|=256,Kt(r,o,a,u),o.child}var lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uf(r){return{baseLanes:r,cachePool:Cg()}}function cf(r,o,a){return r=r!==null?r.childLanes&~a:0,o&&(r|=Tn),r}function Fv(r,o,a){var u=o.pendingProps,g=!1,y=(o.flags&128)!==0,E;if((E=y)||(E=r!==null&&r.memoizedState===null?!1:(bt.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,r===null){if(Fe){if(g?Os(o):Rs(),(r=ot)?(r=By(r,Mn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ts!==null?{id:_r,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},a=vg(r),a.return=o,o.child=a,Bt=o,ot=null)):r=null,r===null)throw Cs(o);return Bf(r)?o.lanes=32:o.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Rs(),g=o.mode,I=gc({mode:"hidden",children:I},g),u=Do(u,g,a,null),I.return=o,u.return=o,I.sibling=u,o.child=I,u=o.child,u.memoizedState=uf(a),u.childLanes=cf(r,E,a),o.memoizedState=lf,fl(null,u)):(Os(o),df(o,I))}var P=r.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(y)o.flags&256?(Os(o),o.flags&=-257,o=hf(r,o,a)):o.memoizedState!==null?(Rs(),o.child=r.child,o.flags|=128,o=null):(Rs(),I=u.fallback,g=o.mode,u=gc({mode:"visible",children:u.children},g),I=Do(I,g,a,null),I.flags|=2,u.return=o,I.return=o,u.sibling=I,o.child=u,Ho(o,r.child,null,a),u=o.child,u.memoizedState=uf(a),u.childLanes=cf(r,E,a),o.memoizedState=lf,o=fl(null,u));else if(Os(o),Bf(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var $=E.dgst;E=$,u=Error(s(419)),u.stack="",u.digest=E,tl({value:u,source:null,stack:null}),o=hf(r,o,a)}else if(xt||Ni(r,o,a,!1),E=(a&r.childLanes)!==0,xt||E){if(E=st,E!==null&&(u=Da(E,a),u!==0&&u!==P.retryLane))throw P.retryLane=u,Po(r,u),pn(E,r,u),of;$f(I)||Ic(),o=hf(r,o,a)}else $f(I)?(o.flags|=192,o.child=r.child,o=null):(r=P.treeContext,ot=Ln(I.nextSibling),Bt=o,Fe=!0,Is=null,Mn=!1,r!==null&&wg(o,r),o=df(o,u.children),o.flags|=4096);return o}return g?(Rs(),I=u.fallback,g=o.mode,P=r.child,$=P.sibling,u=Hr(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,$!==null?I=Hr($,I):(I=Do(I,g,a,null),I.flags|=2),I.return=o,u.return=o,u.sibling=I,o.child=u,fl(null,u),u=o.child,I=r.child.memoizedState,I===null?I=uf(a):(g=I.cachePool,g!==null?(P=At._currentValue,g=g.parent!==P?{parent:P,pool:P}:g):g=Cg(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=cf(r,E,a),o.memoizedState=lf,fl(r.child,u)):(Os(o),a=r.child,r=a.sibling,a=Hr(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,r!==null&&(E=o.deletions,E===null?(o.deletions=[r],o.flags|=16):E.push(r)),o.child=a,o.memoizedState=null,a)}function df(r,o){return o=gc({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function gc(r,o){return r=wn(22,r,null,o),r.lanes=0,r}function hf(r,o,a){return Ho(o,r.child,null,a),r=df(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Vv(r,o,a){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o),Ch(r.return,o,a)}function ff(r,o,a,u,g,y){var E=r.memoizedState;E===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=a,E.tailMode=g,E.treeForkCount=y)}function jv(r,o,a){var u=o.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var E=bt.current,I=(E&2)!==0;if(I?(E=E&1|2,o.flags|=128):E&=1,ue(bt,E),Kt(r,o,u,a),u=Fe?el:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vv(r,a,o);else if(r.tag===19)Vv(r,a,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)r=a.alternate,r!==null&&sc(r)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),ff(o,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&sc(r)===null){o.child=g;break}r=g.sibling,g.sibling=a,a=g,g=r}ff(o,!0,a,null,y,u);break;case"together":ff(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Jr(r,o,a){if(r!==null&&(o.dependencies=r.dependencies),Ms|=o.lanes,(a&o.childLanes)===0)if(r!==null){if(Ni(r,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(s(153));if(o.child!==null){for(r=o.child,a=Hr(r,r.pendingProps),o.child=a,a.return=o;r.sibling!==null;)r=r.sibling,a=a.sibling=Hr(r,r.pendingProps),a.return=o;a.sibling=null}return o.child}function pf(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Yu(r)))}function uI(r,o,a){switch(o.tag){case 3:Dt(o,o.stateNode.containerInfo),ks(o,At,r.memoizedState.cache),Mo();break;case 27:case 5:mo(o);break;case 4:Dt(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Fh(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Os(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Fv(r,o,a):(Os(o),r=Jr(r,o,a),r!==null?r.sibling:null);Os(o);break;case 19:var g=(r.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(Ni(r,o,a,!1),u=(a&o.childLanes)!==0),g){if(u)return jv(r,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(bt,bt.current),u)break;return null;case 22:return o.lanes=0,Rv(r,o,a,o.pendingProps);case 24:ks(o,At,r.memoizedState.cache)}return Jr(r,o,a)}function Hv(r,o,a){if(r!==null)if(r.memoizedProps!==o.pendingProps)xt=!0;else{if(!pf(r,a)&&(o.flags&128)===0)return xt=!1,uI(r,o,a);xt=(r.flags&131072)!==0}else xt=!1,Fe&&(o.flags&1048576)!==0&&bg(o,el,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(r=Vo(o.elementType),o.type=r,typeof r=="function")yh(r)?(u=zo(r,u),o.tag=1,o=Lv(null,o,r,u,a)):(o.tag=0,o=af(null,o,r,u,a));else{if(r!=null){var g=r.$$typeof;if(g===ie){o.tag=11,o=Nv(null,o,r,u,a);break e}else if(g===x){o.tag=14,o=xv(null,o,r,u,a);break e}}throw o=Be(r)||r,Error(s(306,o,""))}}return o;case 0:return af(r,o,o.type,o.pendingProps,a);case 1:return u=o.type,g=zo(u,o.pendingProps),Lv(r,o,u,g,a);case 3:e:{if(Dt(o,o.stateNode.containerInfo),r===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;g=y.element,Ph(r,o),ll(o,u,null,a);var E=o.memoizedState;if(u=E.cache,ks(o,At,u),u!==y.cache&&kh(o,[At],a,!0),al(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Uv(r,o,u,a);break e}else if(u!==g){g=Rn(Error(s(424)),o),tl(g),o=Uv(r,o,u,a);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ot=Ln(r.firstChild),Bt=o,Fe=!0,Is=null,Mn=!0,a=Rg(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),u===g){o=Jr(r,o,a);break e}Kt(r,o,u,a)}o=o.child}return o;case 26:return mc(r,o),r===null?(a=Xy(o.type,null,o.pendingProps,null))?o.memoizedState=a:Fe||(a=o.type,r=o.pendingProps,u=Rc(Ae.current).createElement(a),u[It]=o,u[Vt]=r,Wt(u,a,r),Ct(u),o.stateNode=u):o.memoizedState=Xy(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return mo(o),r===null&&Fe&&(u=o.stateNode=Wy(o.type,o.pendingProps,Ae.current),Bt=o,Mn=!0,g=ot,js(o.type)?(Jf=g,ot=Ln(u.firstChild)):ot=g),Kt(r,o,o.pendingProps.children,a),mc(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Fe&&((g=u=ot)&&(u=VI(u,o.type,o.pendingProps,Mn),u!==null?(o.stateNode=u,Bt=o,ot=Ln(u.firstChild),Mn=!1,g=!0):g=!1),g||Cs(o)),mo(o),g=o.type,y=o.pendingProps,E=r!==null?r.memoizedProps:null,u=y.children,qf(g,y)?u=null:E!==null&&qf(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=jh(r,o,eI,null,null,a),Al._currentValue=g),mc(r,o),Kt(r,o,u,a),o.child;case 6:return r===null&&Fe&&((r=a=ot)&&(a=jI(a,o.pendingProps,Mn),a!==null?(o.stateNode=a,Bt=o,ot=null,r=!0):r=!1),r||Cs(o)),null;case 13:return Fv(r,o,a);case 4:return Dt(o,o.stateNode.containerInfo),u=o.pendingProps,r===null?o.child=Ho(o,null,u,a):Kt(r,o,u,a),o.child;case 11:return Nv(r,o,o.type,o.pendingProps,a);case 7:return Kt(r,o,o.pendingProps,a),o.child;case 8:return Kt(r,o,o.pendingProps.children,a),o.child;case 12:return Kt(r,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,ks(o,o.type,u.value),Kt(r,o,u.children,a),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,Uo(o),g=Jt(g),u=u(g),o.flags|=1,Kt(r,o,u,a),o.child;case 14:return xv(r,o,o.type,o.pendingProps,a);case 15:return Ov(r,o,o.type,o.pendingProps,a);case 19:return jv(r,o,a);case 31:return lI(r,o,a);case 22:return Rv(r,o,a,o.pendingProps);case 24:return Uo(o),u=Jt(At),r===null?(g=xh(),g===null&&(g=st,y=Ah(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),o.memoizedState={parent:u,cache:g},Rh(o),ks(o,At,g)):((r.lanes&a)!==0&&(Ph(r,o),ll(o,null,null,a),al()),g=r.memoizedState,y=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ks(o,At,u)):(u=y.cache,ks(o,At,u),u!==g.cache&&kh(o,[At],a,!0))),Kt(r,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Kr(r){r.flags|=4}function mf(r,o,a,u,g){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(py())r.flags|=8192;else throw jo=ec,Oh}else r.flags&=-16777217}function qv(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!r0(o))if(py())r.flags|=8192;else throw jo=ec,Oh}function vc(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?_u():536870912,r.lanes|=o,Hi|=o)}function pl(r,o){if(!Fe)switch(r.tailMode){case"hidden":o=r.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function it(r){var o=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(o)for(var g=r.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=a,o}function cI(r,o,a){var u=o.pendingProps;switch(Eh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(o),null;case 1:return it(o),null;case 3:return a=o.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Gr(At),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Ai(o)?Kr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Th())),it(o),null;case 26:var g=o.type,y=o.memoizedState;return r===null?(Kr(o),y!==null?(it(o),qv(o,y)):(it(o),mf(o,g,null,u,a))):y?y!==r.memoizedState?(Kr(o),it(o),qv(o,y)):(it(o),o.flags&=-16777217):(r=r.memoizedProps,r!==u&&Kr(o),it(o),mf(o,g,r,u,a)),null;case 27:if(ii(o),a=Ae.current,g=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&Kr(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return it(o),null}r=he.current,Ai(o)?Sg(o):(r=Wy(g,u,a),o.stateNode=r,Kr(o))}return it(o),null;case 5:if(ii(o),g=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&Kr(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return it(o),null}if(y=he.current,Ai(o))Sg(o);else{var E=Rc(Ae.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?E.createElement(g,{is:u.is}):E.createElement(g)}}y[It]=o,y[Vt]=u;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=y;e:switch(Wt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Kr(o)}}return it(o),mf(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,a),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==u&&Kr(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(r=Ae.current,Ai(o)){if(r=o.stateNode,a=o.memoizedProps,u=null,g=Bt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[It]=o,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Fy(r.nodeValue,a)),r||Cs(o,!0)}else r=Rc(r).createTextNode(u),r[It]=o,o.stateNode=r}return it(o),null;case 31:if(a=o.memoizedState,r===null||r.memoizedState!==null){if(u=Ai(o),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[It]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;it(o),r=!1}else a=Th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return o.flags&256?(En(o),o):(En(o),null);if((o.flags&128)!==0)throw Error(s(558))}return it(o),null;case 13:if(u=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=Ai(o),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[It]=o}else Mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;it(o),g=!1}else g=Th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(En(o),o):(En(o),null)}return En(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==r&&a&&(o.child.flags|=8192),vc(o,o.updateQueue),it(o),null);case 4:return ut(),r===null&&Uf(o.stateNode.containerInfo),it(o),null;case 10:return Gr(o.type),it(o),null;case 19:if(ee(bt),u=o.memoizedState,u===null)return it(o),null;if(g=(o.flags&128)!==0,y=u.rendering,y===null)if(g)pl(u,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(y=sc(r),y!==null){for(o.flags|=128,pl(u,!1),r=y.updateQueue,o.updateQueue=r,vc(o,r),o.subtreeFlags=0,r=a,a=o.child;a!==null;)gg(a,r),a=a.sibling;return ue(bt,bt.current&1|2),Fe&&qr(o,u.treeForkCount),o.child}r=r.sibling}u.tail!==null&&on()>Ec&&(o.flags|=128,g=!0,pl(u,!1),o.lanes=4194304)}else{if(!g)if(r=sc(y),r!==null){if(o.flags|=128,g=!0,r=r.updateQueue,o.updateQueue=r,vc(o,r),pl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Fe)return it(o),null}else 2*on()-u.renderingStartTime>Ec&&a!==536870912&&(o.flags|=128,g=!0,pl(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(r=u.last,r!==null?r.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=on(),r.sibling=null,a=bt.current,ue(bt,g?a&1|2:a&1),Fe&&qr(o,u.treeForkCount),r):(it(o),null);case 22:case 23:return En(o),Uh(),u=o.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(it(o),o.subtreeFlags&6&&(o.flags|=8192)):it(o),a=o.updateQueue,a!==null&&vc(o,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),r!==null&&ee(Fo),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Gr(At),it(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function dI(r,o){switch(Eh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Gr(At),ut(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ii(o),null;case 31:if(o.memoizedState!==null){if(En(o),o.alternate===null)throw Error(s(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(En(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Mo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ee(bt),null;case 4:return ut(),null;case 10:return Gr(o.type),null;case 22:case 23:return En(o),Uh(),r!==null&&ee(Fo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Gr(At),null;case 25:return null;default:return null}}function zv(r,o){switch(Eh(o),o.tag){case 3:Gr(At),ut();break;case 26:case 27:case 5:ii(o);break;case 4:ut();break;case 31:o.memoizedState!==null&&En(o);break;case 13:En(o);break;case 19:ee(bt);break;case 10:Gr(o.type);break;case 22:case 23:En(o),Uh(),r!==null&&ee(Fo);break;case 24:Gr(At)}}function ml(r,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&r)===r){u=void 0;var y=a.create,E=a.inst;u=y(),E.destroy=u}a=a.next}while(a!==g)}}catch(I){Ze(o,o.return,I)}}function Ps(r,o,a){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&r)===r){var E=u.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,g=o;var P=a,$=I;try{$()}catch(Q){Ze(g,P,Q)}}}u=u.next}while(u!==y)}}catch(Q){Ze(o,o.return,Q)}}function Gv(r){var o=r.updateQueue;if(o!==null){var a=r.stateNode;try{Dg(o,a)}catch(u){Ze(r,r.return,u)}}}function $v(r,o,a){a.props=zo(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(r,o,u)}}function gl(r,o){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(g){Ze(r,o,g)}}function Ir(r,o){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ze(r,o,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ze(r,o,g)}else a.current=null}function Bv(r){var o=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ze(r,r.return,g)}}function gf(r,o,a){try{var u=r.stateNode;PI(u,r.type,a,o),u[Vt]=o}catch(g){Ze(r,r.return,g)}}function Jv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&js(r.type)||r.tag===4}function vf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&js(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function yf(r,o,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(r),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Bn));else if(u!==4&&(u===27&&js(r.type)&&(a=r.stateNode,o=null),r=r.child,r!==null))for(yf(r,o,a),r=r.sibling;r!==null;)yf(r,o,a),r=r.sibling}function yc(r,o,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?a.insertBefore(r,o):a.appendChild(r);else if(u!==4&&(u===27&&js(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(yc(r,o,a),r=r.sibling;r!==null;)yc(r,o,a),r=r.sibling}function Kv(r){var o=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Wt(o,u,a),o[It]=r,o[Vt]=a}catch(y){Ze(r,r.return,y)}}var Wr=!1,Ot=!1,bf=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function hI(r,o){if(r=r.containerInfo,jf=Vc,r=ag(r),dh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,I=-1,P=-1,$=0,Q=0,te=r,B=null;t:for(;;){for(var W;te!==a||g!==0&&te.nodeType!==3||(I=E+g),te!==y||u!==0&&te.nodeType!==3||(P=E+u),te.nodeType===3&&(E+=te.nodeValue.length),(W=te.firstChild)!==null;)B=te,te=W;for(;;){if(te===r)break t;if(B===a&&++$===g&&(I=E),B===y&&++Q===u&&(P=E),(W=te.nextSibling)!==null)break;te=B,B=te.parentNode}te=W}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hf={focusedElem:r,selectionRange:a},Vc=!1,Ht=o;Ht!==null;)if(o=Ht,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ht=r;else for(;Ht!==null;){switch(o=Ht,y=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)g=r[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,a=o,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var fe=zo(a.type,g);r=u.getSnapshotBeforeUpdate(fe,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(we){Ze(a,a.return,we)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,a=r.nodeType,a===9)Gf(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Gf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=o.sibling,r!==null){r.return=o.return,Ht=r;break}Ht=o.return}}function Yv(r,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(r,a),u&4&&ml(5,a);break;case 1:if(Qr(r,a),u&4)if(r=a.stateNode,o===null)try{r.componentDidMount()}catch(E){Ze(a,a.return,E)}else{var g=zo(a.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(g,o,r.__reactInternalSnapshotBeforeUpdate)}catch(E){Ze(a,a.return,E)}}u&64&&Gv(a),u&512&&gl(a,a.return);break;case 3:if(Qr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Dg(r,o)}catch(E){Ze(a,a.return,E)}}break;case 27:o===null&&u&4&&Kv(a);case 26:case 5:Qr(r,a),o===null&&u&4&&Bv(a),u&512&&gl(a,a.return);break;case 12:Qr(r,a);break;case 31:Qr(r,a),u&4&&Zv(r,a);break;case 13:Qr(r,a),u&4&&ey(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=SI.bind(null,a),HI(r,a))));break;case 22:if(u=a.memoizedState!==null||Wr,!u){o=o!==null&&o.memoizedState!==null||Ot,g=Wr;var y=Ot;Wr=u,(Ot=o)&&!y?Xr(r,a,(a.subtreeFlags&8772)!==0):Qr(r,a),Wr=g,Ot=y}break;case 30:break;default:Qr(r,a)}}function Qv(r){var o=r.alternate;o!==null&&(r.alternate=null,Qv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&di(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,cn=!1;function Yr(r,o,a){for(a=a.child;a!==null;)Xv(r,o,a),a=a.sibling}function Xv(r,o,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(qn,a)}catch{}switch(a.tag){case 26:Ot||Ir(a,o),Yr(r,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Ir(a,o);var u=dt,g=cn;js(a.type)&&(dt=a.stateNode,cn=!1),Yr(r,o,a),Il(a.stateNode),dt=u,cn=g;break;case 5:Ot||Ir(a,o);case 6:if(u=dt,g=cn,dt=null,Yr(r,o,a),dt=u,cn=g,dt!==null)if(cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(y){Ze(a,o,y)}else try{dt.removeChild(a.stateNode)}catch(y){Ze(a,o,y)}break;case 18:dt!==null&&(cn?(r=dt,Gy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),Wi(r)):Gy(dt,a.stateNode));break;case 4:u=dt,g=cn,dt=a.stateNode.containerInfo,cn=!0,Yr(r,o,a),dt=u,cn=g;break;case 0:case 11:case 14:case 15:Ps(2,a,o),Ot||Ps(4,a,o),Yr(r,o,a);break;case 1:Ot||(Ir(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&$v(a,o,u)),Yr(r,o,a);break;case 21:Yr(r,o,a);break;case 22:Ot=(u=Ot)||a.memoizedState!==null,Yr(r,o,a),Ot=u;break;default:Yr(r,o,a)}}function Zv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wi(r)}catch(a){Ze(o,o.return,a)}}}function ey(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wi(r)}catch(a){Ze(o,o.return,a)}}function fI(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Wv),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Wv),o;default:throw Error(s(435,r.tag))}}function bc(r,o){var a=fI(r);o.forEach(function(u){if(!a.has(u)){a.add(u);var g=EI.bind(null,r,u);u.then(g,g)}})}function dn(r,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=r,E=o,I=E;e:for(;I!==null;){switch(I.tag){case 27:if(js(I.type)){dt=I.stateNode,cn=!1;break e}break;case 5:dt=I.stateNode,cn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,cn=!0;break e}I=I.return}if(dt===null)throw Error(s(160));Xv(y,E,g),dt=null,cn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ty(o,r),o=o.sibling}var Zn=null;function ty(r,o){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:dn(o,r),hn(r),u&4&&(Ps(3,r,r.return),ml(3,r),Ps(5,r,r.return));break;case 1:dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),u&64&&Wr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=Zn;if(dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[hr]||y[It]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Wt(y,u,a),y[It]=r,Ct(y),u=y;break e;case"link":var E=t0("link","href",g).get(u+(a.href||""));if(E){for(var I=0;I<E.length;I++)if(y=E[I],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(I,1);break t}}y=g.createElement(u),Wt(y,u,a),g.head.appendChild(y);break;case"meta":if(E=t0("meta","content",g).get(u+(a.content||""))){for(I=0;I<E.length;I++)if(y=E[I],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(I,1);break t}}y=g.createElement(u),Wt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[It]=r,Ct(y),u=y}r.stateNode=u}else n0(g,r.type,r.stateNode);else r.stateNode=e0(g,u,r.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?n0(g,r.type,r.stateNode):e0(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&gf(r,r.memoizedProps,a.memoizedProps)}break;case 27:dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),a!==null&&u&4&&gf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(dn(o,r),hn(r),u&512&&(Ot||a===null||Ir(a,a.return)),r.flags&32){g=r.stateNode;try{un(g,"")}catch(fe){Ze(r,r.return,fe)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,gf(r,g,a!==null?a.memoizedProps:g)),u&1024&&(bf=!0);break;case 6:if(dn(o,r),hn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(fe){Ze(r,r.return,fe)}}break;case 3:if(Mc=null,g=Zn,Zn=Pc(o.containerInfo),dn(o,r),Zn=g,hn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Wi(o.containerInfo)}catch(fe){Ze(r,r.return,fe)}bf&&(bf=!1,ny(r));break;case 4:u=Zn,Zn=Pc(r.stateNode.containerInfo),dn(o,r),hn(r),Zn=u;break;case 12:dn(o,r),hn(r);break;case 31:dn(o,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 13:dn(o,r),hn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Sc=on()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 22:g=r.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,$=Wr,Q=Ot;if(Wr=$||g,Ot=Q||P,dn(o,r),Ot=Q,Wr=$,hn(r),u&8192)e:for(o=r.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||P||Wr||Ot||Go(r)),a=null,o=r;;){if(o.tag===5||o.tag===26){if(a===null){P=a=o;try{if(y=P.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=P.stateNode;var te=P.memoizedProps.style,B=te!=null&&te.hasOwnProperty("display")?te.display:null;I.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(fe){Ze(P,P.return,fe)}}}else if(o.tag===6){if(a===null){P=o;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(fe){Ze(P,P.return,fe)}}}else if(o.tag===18){if(a===null){P=o;try{var W=P.stateNode;g?$y(W,!0):$y(P.stateNode,!1)}catch(fe){Ze(P,P.return,fe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,bc(r,a))));break;case 19:dn(o,r),hn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,bc(r,u)));break;case 30:break;case 21:break;default:dn(o,r),hn(r)}}function hn(r){var o=r.flags;if(o&2){try{for(var a,u=r.return;u!==null;){if(Jv(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=vf(r);yc(r,y,g);break;case 5:var E=a.stateNode;a.flags&32&&(un(E,""),a.flags&=-33);var I=vf(r);yc(r,I,E);break;case 3:case 4:var P=a.stateNode.containerInfo,$=vf(r);yf(r,$,P);break;default:throw Error(s(161))}}catch(Q){Ze(r,r.return,Q)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ny(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ny(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Qr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Yv(r,o.alternate,o),o=o.sibling}function Go(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ps(4,o,o.return),Go(o);break;case 1:Ir(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&$v(o,o.return,a),Go(o);break;case 27:Il(o.stateNode);case 26:case 5:Ir(o,o.return),Go(o);break;case 22:o.memoizedState===null&&Go(o);break;case 30:Go(o);break;default:Go(o)}r=r.sibling}}function Xr(r,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=r,y=o,E=y.flags;switch(y.tag){case 0:case 11:case 15:Xr(g,y,a),ml(4,y);break;case 1:if(Xr(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch($){Ze(u,u.return,$)}if(u=y,g=u.updateQueue,g!==null){var I=u.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Pg(P[g],I)}catch($){Ze(u,u.return,$)}}a&&E&64&&Gv(y),gl(y,y.return);break;case 27:Kv(y);case 26:case 5:Xr(g,y,a),a&&u===null&&E&4&&Bv(y),gl(y,y.return);break;case 12:Xr(g,y,a);break;case 31:Xr(g,y,a),a&&E&4&&Zv(g,y);break;case 13:Xr(g,y,a),a&&E&4&&ey(g,y);break;case 22:y.memoizedState===null&&Xr(g,y,a),gl(y,y.return);break;case 30:break;default:Xr(g,y,a)}o=o.sibling}}function wf(r,o){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&nl(a))}function Sf(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&nl(r))}function er(r,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ry(r,o,a,u),o=o.sibling}function ry(r,o,a,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:er(r,o,a,u),g&2048&&ml(9,o);break;case 1:er(r,o,a,u);break;case 3:er(r,o,a,u),g&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&nl(r)));break;case 12:if(g&2048){er(r,o,a,u),r=o.stateNode;try{var y=o.memoizedProps,E=y.id,I=y.onPostCommit;typeof I=="function"&&I(E,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){Ze(o,o.return,P)}}else er(r,o,a,u);break;case 31:er(r,o,a,u);break;case 13:er(r,o,a,u);break;case 23:break;case 22:y=o.stateNode,E=o.alternate,o.memoizedState!==null?y._visibility&2?er(r,o,a,u):vl(r,o):y._visibility&2?er(r,o,a,u):(y._visibility|=2,Fi(r,o,a,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&wf(E,o);break;case 24:er(r,o,a,u),g&2048&&Sf(o.alternate,o);break;default:er(r,o,a,u)}}function Fi(r,o,a,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=r,E=o,I=a,P=u,$=E.flags;switch(E.tag){case 0:case 11:case 15:Fi(y,E,I,P,g),ml(8,E);break;case 23:break;case 22:var Q=E.stateNode;E.memoizedState!==null?Q._visibility&2?Fi(y,E,I,P,g):vl(y,E):(Q._visibility|=2,Fi(y,E,I,P,g)),g&&$&2048&&wf(E.alternate,E);break;case 24:Fi(y,E,I,P,g),g&&$&2048&&Sf(E.alternate,E);break;default:Fi(y,E,I,P,g)}o=o.sibling}}function vl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=r,u=o,g=u.flags;switch(u.tag){case 22:vl(a,u),g&2048&&wf(u.alternate,u);break;case 24:vl(a,u),g&2048&&Sf(u.alternate,u);break;default:vl(a,u)}o=o.sibling}}var yl=8192;function Vi(r,o,a){if(r.subtreeFlags&yl)for(r=r.child;r!==null;)sy(r,o,a),r=r.sibling}function sy(r,o,a){switch(r.tag){case 26:Vi(r,o,a),r.flags&yl&&r.memoizedState!==null&&ZI(a,Zn,r.memoizedState,r.memoizedProps);break;case 5:Vi(r,o,a);break;case 3:case 4:var u=Zn;Zn=Pc(r.stateNode.containerInfo),Vi(r,o,a),Zn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=yl,yl=16777216,Vi(r,o,a),yl=u):Vi(r,o,a));break;default:Vi(r,o,a)}}function oy(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function bl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,ay(u,r)}oy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iy(r),r=r.sibling}function iy(r){switch(r.tag){case 0:case 11:case 15:bl(r),r.flags&2048&&Ps(9,r,r.return);break;case 3:bl(r);break;case 12:bl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,wc(r)):bl(r);break;default:bl(r)}}function wc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ht=u,ay(u,r)}oy(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ps(8,o,o.return),wc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,wc(o));break;default:wc(o)}r=r.sibling}}function ay(r,o){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Ps(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ht=u;else e:for(a=r;Ht!==null;){u=Ht;var g=u.sibling,y=u.return;if(Qv(u),u===a){Ht=null;break e}if(g!==null){g.return=y,Ht=g;break e}Ht=y}}}var pI={getCacheForType:function(r){var o=Jt(At),a=o.data.get(r);return a===void 0&&(a=r(),o.data.set(r,a)),a},cacheSignal:function(){return Jt(At).controller.signal}},mI=typeof WeakMap=="function"?WeakMap:Map,Je=0,st=null,Oe=null,Pe=0,Xe=0,_n=null,Ds=!1,ji=!1,Ef=!1,Zr=0,gt=0,Ms=0,$o=0,_f=0,Tn=0,Hi=0,wl=null,fn=null,Tf=!1,Sc=0,ly=0,Ec=1/0,_c=null,Ls=null,Lt=0,Us=null,qi=null,es=0,If=0,Cf=null,uy=null,Sl=0,kf=null;function In(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:Y.T!==null?Pf():Tu()}function cy(){if(Tn===0)if((Pe&536870912)===0||Fe){var r=yo;yo<<=1,(yo&3932160)===0&&(yo=262144),Tn=r}else Tn=536870912;return r=Sn.current,r!==null&&(r.flags|=32),Tn}function pn(r,o,a){(r===st&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(zi(r,0),Fs(r,Pe,Tn,!1)),bo(r,a),((Je&2)===0||r!==st)&&(r===st&&((Je&2)===0&&($o|=a),gt===4&&Fs(r,Pe,Tn,!1)),Cr(r))}function dy(r,o,a){if((Je&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&r.expiredLanes)===0||zn(r,o),g=u?yI(r,o):Nf(r,o,!0),y=u;do{if(g===0){ji&&!u&&Fs(r,o,0,!1);break}else{if(a=r.current.alternate,y&&!gI(a)){g=Nf(r,o,!1),y=!1;continue}if(g===2){if(y=o,r.errorRecoveryDisabledLanes&y)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var I=r;g=wl;var P=I.current.memoizedState.isDehydrated;if(P&&(zi(I,E).flags|=256),E=Nf(I,E,!1),E!==2){if(Ef&&!P){I.errorRecoveryDisabledLanes|=y,$o|=y,g=4;break e}y=fn,fn=g,y!==null&&(fn===null?fn=y:fn.push.apply(fn,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){zi(r,0),Fs(r,o,0,!0);break}e:{switch(u=r,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Fs(u,o,Tn,!Ds);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Sc+300-on(),10<g)){if(Fs(u,o,Tn,!Ds),ur(u,0,!0)!==0)break e;es=o,u.timeoutHandle=qy(hy.bind(null,u,a,fn,_c,Tf,o,Tn,$o,Hi,Ds,y,"Throttled",-0,0),g);break e}hy(u,a,fn,_c,Tf,o,Tn,$o,Hi,Ds,y,null,-0,0)}}break}while(!0);Cr(r)}function hy(r,o,a,u,g,y,E,I,P,$,Q,te,B,W){if(r.timeoutHandle=-1,te=o.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},sy(o,y,te);var fe=(y&62914560)===y?Sc-on():(y&4194048)===y?ly-on():0;if(fe=eC(te,fe),fe!==null){es=y,r.cancelPendingCommit=fe(wy.bind(null,r,o,y,a,u,g,E,I,P,Q,te,null,B,W)),Fs(r,y,E,!$);return}}wy(r,o,y,a,u,g,E,I,P)}function gI(r){for(var o=r;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!bn(y(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fs(r,o,a,u){o&=~_f,o&=~$o,r.suspendedLanes|=o,r.pingedLanes&=~o,u&&(r.warmLanes|=o),u=r.expirationTimes;for(var g=o;0<g;){var y=31-vt(g),E=1<<y;u[y]=-1,g&=~E}a!==0&&wo(r,a,o)}function Tc(){return(Je&6)===0?(El(0),!1):!0}function Af(){if(Oe!==null){if(Xe===0)var r=Oe.return;else r=Oe,zr=Lo=null,zh(r),Pi=null,sl=0,r=Oe;for(;r!==null;)zv(r.alternate,r),r=r.return;Oe=null}}function zi(r,o){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,LI(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),es=0,Af(),st=r,Oe=a=Hr(r.current,null),Pe=o,Xe=0,_n=null,Ds=!1,ji=zn(r,o),Ef=!1,Hi=Tn=_f=$o=Ms=gt=0,fn=wl=null,Tf=!1,(o&8)!==0&&(o|=o&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=o;0<u;){var g=31-vt(u),y=1<<g;o|=r[g],u&=~y}return Zr=o,$u(),a}function fy(r,o){ke=null,Y.H=hl,o===Ri||o===Zu?(o=Ng(),Xe=3):o===Oh?(o=Ng(),Xe=4):Xe=o===of?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,_n=o,Oe===null&&(gt=1,fc(r,Rn(o,r.current)))}function py(){var r=Sn.current;return r===null?!0:(Pe&4194048)===Pe?Xn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?r===Xn:!1}function my(){var r=Y.H;return Y.H=hl,r===null?hl:r}function gy(){var r=Y.A;return Y.A=pI,r}function Ic(){gt=4,Ds||(Pe&4194048)!==Pe&&Sn.current!==null||(ji=!0),(Ms&134217727)===0&&($o&134217727)===0||st===null||Fs(st,Pe,Tn,!1)}function Nf(r,o,a){var u=Je;Je|=2;var g=my(),y=gy();(st!==r||Pe!==o)&&(_c=null,zi(r,o)),o=!1;var E=gt;e:do try{if(Xe!==0&&Oe!==null){var I=Oe,P=_n;switch(Xe){case 8:Af(),E=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(o=!0);var $=Xe;if(Xe=0,_n=null,Gi(r,I,P,$),a&&ji){E=0;break e}break;default:$=Xe,Xe=0,_n=null,Gi(r,I,P,$)}}vI(),E=gt;break}catch(Q){fy(r,Q)}while(!0);return o&&r.shellSuspendCounter++,zr=Lo=null,Je=u,Y.H=g,Y.A=y,Oe===null&&(st=null,Pe=0,$u()),E}function vI(){for(;Oe!==null;)vy(Oe)}function yI(r,o){var a=Je;Je|=2;var u=my(),g=gy();st!==r||Pe!==o?(_c=null,Ec=on()+500,zi(r,o)):ji=zn(r,o);e:do try{if(Xe!==0&&Oe!==null){o=Oe;var y=_n;t:switch(Xe){case 1:Xe=0,_n=null,Gi(r,o,y,1);break;case 2:case 9:if(kg(y)){Xe=0,_n=null,yy(o);break}o=function(){Xe!==2&&Xe!==9||st!==r||(Xe=7),Cr(r)},y.then(o,o);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:kg(y)?(Xe=0,_n=null,yy(o)):(Xe=0,_n=null,Gi(r,o,y,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var I=Oe;if(E?r0(E):I.stateNode.complete){Xe=0,_n=null;var P=I.sibling;if(P!==null)Oe=P;else{var $=I.return;$!==null?(Oe=$,Cc($)):Oe=null}break t}}Xe=0,_n=null,Gi(r,o,y,5);break;case 6:Xe=0,_n=null,Gi(r,o,y,6);break;case 8:Af(),gt=6;break e;default:throw Error(s(462))}}bI();break}catch(Q){fy(r,Q)}while(!0);return zr=Lo=null,Y.H=u,Y.A=g,Je=a,Oe!==null?0:(st=null,Pe=0,$u(),gt)}function bI(){for(;Oe!==null&&!sh();)vy(Oe)}function vy(r){var o=Hv(r.alternate,r,Zr);r.memoizedProps=r.pendingProps,o===null?Cc(r):Oe=o}function yy(r){var o=r,a=o.alternate;switch(o.tag){case 15:case 0:o=Mv(a,o,o.pendingProps,o.type,void 0,Pe);break;case 11:o=Mv(a,o,o.pendingProps,o.type.render,o.ref,Pe);break;case 5:zh(o);default:zv(a,o),o=Oe=gg(o,Zr),o=Hv(a,o,Zr)}r.memoizedProps=r.pendingProps,o===null?Cc(r):Oe=o}function Gi(r,o,a,u){zr=Lo=null,zh(o),Pi=null,sl=0;var g=o.return;try{if(aI(r,g,o,a,Pe)){gt=1,fc(r,Rn(a,r.current)),Oe=null;return}}catch(y){if(g!==null)throw Oe=g,y;gt=1,fc(r,Rn(a,r.current)),Oe=null;return}o.flags&32768?(Fe||u===1?r=!0:ji||(Pe&536870912)!==0?r=!1:(Ds=r=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),by(o,r)):Cc(o)}function Cc(r){var o=r;do{if((o.flags&32768)!==0){by(o,Ds);return}r=o.return;var a=cI(o.alternate,o,Zr);if(a!==null){Oe=a;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=r}while(o!==null);gt===0&&(gt=5)}function by(r,o){do{var a=dI(r.alternate,r);if(a!==null){a.flags&=32767,Oe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(r=r.sibling,r!==null)){Oe=r;return}Oe=r=a}while(r!==null);gt=6,Oe=null}function wy(r,o,a,u,g,y,E,I,P){r.cancelPendingCommit=null;do kc();while(Lt!==0);if((Je&6)!==0)throw Error(s(327));if(o!==null){if(o===r.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=gh,ah(r,a,y,E,I,P),r===st&&(Oe=st=null,Pe=0),qi=o,Us=r,es=a,If=y,Cf=g,uy=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_I(ps,function(){return Iy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,g=le.p,le.p=2,E=Je,Je|=4;try{hI(r,o,a)}finally{Je=E,le.p=g,Y.T=u}}Lt=1,Sy(),Ey(),_y()}}function Sy(){if(Lt===1){Lt=0;var r=Us,o=qi,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{ty(o,r);var y=Hf,E=ag(r.containerInfo),I=y.focusedElem,P=y.selectionRange;if(E!==I&&I&&I.ownerDocument&&ig(I.ownerDocument.documentElement,I)){if(P!==null&&dh(I)){var $=P.start,Q=P.end;if(Q===void 0&&(Q=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(Q,I.value.length);else{var te=I.ownerDocument||document,B=te&&te.defaultView||window;if(B.getSelection){var W=B.getSelection(),fe=I.textContent.length,we=Math.min(P.start,fe),rt=P.end===void 0?we:Math.min(P.end,fe);!W.extend&&we>rt&&(E=rt,rt=we,we=E);var j=og(I,we),U=og(I,rt);if(j&&U&&(W.rangeCount!==1||W.anchorNode!==j.node||W.anchorOffset!==j.offset||W.focusNode!==U.node||W.focusOffset!==U.offset)){var G=te.createRange();G.setStart(j.node,j.offset),W.removeAllRanges(),we>rt?(W.addRange(G),W.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),W.addRange(G))}}}}for(te=[],W=I;W=W.parentNode;)W.nodeType===1&&te.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<te.length;I++){var X=te[I];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Vc=!!jf,Hf=jf=null}finally{Je=g,le.p=u,Y.T=a}}r.current=o,Lt=2}}function Ey(){if(Lt===2){Lt=0;var r=Us,o=qi,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{Yv(r,o.alternate,o)}finally{Je=g,le.p=u,Y.T=a}}Lt=3}}function _y(){if(Lt===4||Lt===3){Lt=0,vu();var r=Us,o=qi,a=es,u=uy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,qi=Us=null,Ty(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Ls=null),Lr(a),o=o.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(qn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=Y.T,g=le.p,le.p=2,Y.T=null;try{for(var y=r.onRecoverableError,E=0;E<u.length;E++){var I=u[E];y(I.value,{componentStack:I.stack})}}finally{Y.T=o,le.p=g}}(es&3)!==0&&kc(),Cr(r),g=r.pendingLanes,(a&261930)!==0&&(g&42)!==0?r===kf?Sl++:(Sl=0,kf=r):Sl=0,El(0)}}function Ty(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,nl(o)))}function kc(){return Sy(),Ey(),_y(),Iy()}function Iy(){if(Lt!==5)return!1;var r=Us,o=If;If=0;var a=Lr(es),u=Y.T,g=le.p;try{le.p=32>a?32:a,Y.T=null,a=Cf,Cf=null;var y=Us,E=es;if(Lt=0,qi=Us=null,es=0,(Je&6)!==0)throw Error(s(331));var I=Je;if(Je|=4,iy(y.current),ry(y,y.current,E,a),Je=I,El(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(qn,y)}catch{}return!0}finally{le.p=g,Y.T=u,Ty(r,o)}}function Cy(r,o,a){o=Rn(a,o),o=sf(r.stateNode,o,2),r=xs(r,o,2),r!==null&&(bo(r,2),Cr(r))}function Ze(r,o,a){if(r.tag===3)Cy(r,r,a);else for(;o!==null;){if(o.tag===3){Cy(o,r,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ls===null||!Ls.has(u))){r=Rn(a,r),a=kv(2),u=xs(o,a,2),u!==null&&(Av(a,u,o,r),bo(u,2),Cr(u));break}}o=o.return}}function xf(r,o,a){var u=r.pingCache;if(u===null){u=r.pingCache=new mI;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(a)||(Ef=!0,g.add(a),r=wI.bind(null,r,o,a),o.then(r,r))}function wI(r,o,a){var u=r.pingCache;u!==null&&u.delete(o),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,st===r&&(Pe&a)===a&&(gt===4||gt===3&&(Pe&62914560)===Pe&&300>on()-Sc?(Je&2)===0&&zi(r,0):_f|=a,Hi===Pe&&(Hi=0)),Cr(r)}function ky(r,o){o===0&&(o=_u()),r=Po(r,o),r!==null&&(bo(r,o),Cr(r))}function SI(r){var o=r.memoizedState,a=0;o!==null&&(a=o.retryLane),ky(r,a)}function EI(r,o){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),ky(r,a)}function _I(r,o){return Mt(r,o)}var Ac=null,$i=null,Of=!1,Nc=!1,Rf=!1,Vs=0;function Cr(r){r!==$i&&r.next===null&&($i===null?Ac=$i=r:$i=$i.next=r),Nc=!0,Of||(Of=!0,II())}function El(r,o){if(!Rf&&Nc){Rf=!0;do for(var a=!1,u=Ac;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var E=u.suspendedLanes,I=u.pingedLanes;y=(1<<31-vt(42|r)+1)-1,y&=g&~(E&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Oy(u,y))}else y=Pe,y=ur(u,u===st?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||zn(u,y)||(a=!0,Oy(u,y));u=u.next}while(a);Rf=!1}}function TI(){Ay()}function Ay(){Nc=Of=!1;var r=0;Vs!==0&&MI()&&(r=Vs);for(var o=on(),a=null,u=Ac;u!==null;){var g=u.next,y=Ny(u,o);y===0?(u.next=null,a===null?Ac=g:a.next=g,g===null&&($i=a)):(a=u,(r!==0||(y&3)!==0)&&(Nc=!0)),u=g}Lt!==0&&Lt!==5||El(r),Vs!==0&&(Vs=0)}function Ny(r,o){for(var a=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var E=31-vt(y),I=1<<E,P=g[E];P===-1?((I&a)===0||(I&u)!==0)&&(g[E]=ih(I,o)):P<=o&&(r.expiredLanes|=I),y&=~I}if(o=st,a=Pe,a=ur(r,r===o?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===o&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&fs(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||zn(r,a)){if(o=a&-a,o===r.callbackPriority)return o;switch(u!==null&&fs(u),Lr(a)){case 2:case 8:a=Ra;break;case 32:a=ps;break;case 268435456:a=yu;break;default:a=ps}return u=xy.bind(null,r),a=Mt(a,u),r.callbackPriority=o,r.callbackNode=a,o}return u!==null&&u!==null&&fs(u),r.callbackPriority=2,r.callbackNode=null,2}function xy(r,o){if(Lt!==0&&Lt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(kc()&&r.callbackNode!==a)return null;var u=Pe;return u=ur(r,r===st?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(dy(r,u,o),Ny(r,on()),r.callbackNode!=null&&r.callbackNode===a?xy.bind(null,r):null)}function Oy(r,o){if(kc())return null;dy(r,o,!0)}function II(){UI(function(){(Je&6)!==0?Mt(Oa,TI):Ay()})}function Pf(){if(Vs===0){var r=xi;r===0&&(r=ar,ar<<=1,(ar&261888)===0&&(ar=256)),Vs=r}return Vs}function Ry(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:mi(""+r)}function Py(r,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,r.id&&a.setAttribute("form",r.id),o.parentNode.insertBefore(a,o),r=new FormData(r),a.parentNode.removeChild(a),r}function CI(r,o,a,u,g){if(o==="submit"&&a&&a.stateNode===g){var y=Ry((g[Vt]||null).action),E=u.submitter;E&&(o=(o=E[Vt]||null)?Ry(o.formAction):E.getAttribute("formAction"),o!==null&&(y=o,E=null));var I=new wr("action","action",null,u,g);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Vs!==0){var P=E?Py(g,E):new FormData(g);Xh(a,{pending:!0,data:P,method:g.method,action:y},null,P)}}else typeof y=="function"&&(I.preventDefault(),P=E?Py(g,E):new FormData(g),Xh(a,{pending:!0,data:P,method:g.method,action:y},y,P))},currentTarget:g}]})}}for(var Df=0;Df<mh.length;Df++){var Mf=mh[Df],kI=Mf.toLowerCase(),AI=Mf[0].toUpperCase()+Mf.slice(1);Qn(kI,"on"+AI)}Qn(cg,"onAnimationEnd"),Qn(dg,"onAnimationIteration"),Qn(hg,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(GT,"onTransitionRun"),Qn($T,"onTransitionStart"),Qn(BT,"onTransitionCancel"),Qn(fg,"onTransitionEnd"),gr("onMouseEnter",["mouseout","mouseover"]),gr("onMouseLeave",["mouseout","mouseover"]),gr("onPointerEnter",["pointerout","pointerover"]),gr("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function Dy(r,o){o=(o&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],g=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var E=u.length-1;0<=E;E--){var I=u[E],P=I.instance,$=I.currentTarget;if(I=I.listener,P!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=$;try{y(g)}catch(Q){Gu(Q)}g.currentTarget=null,y=P}else for(E=0;E<u.length;E++){if(I=u[E],P=I.instance,$=I.currentTarget,I=I.listener,P!==y&&g.isPropagationStopped())break e;y=I,g.currentTarget=$;try{y(g)}catch(Q){Gu(Q)}g.currentTarget=null,y=P}}}}function Re(r,o){var a=o[ci];a===void 0&&(a=o[ci]=new Set);var u=r+"__bubble";a.has(u)||(My(o,r,2,!1),a.add(u))}function Lf(r,o,a){var u=0;o&&(u|=4),My(a,r,u,o)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Uf(r){if(!r[xc]){r[xc]=!0,Ma.forEach(function(a){a!=="selectionchange"&&(NI.has(a)||Lf(a,!1,r),Lf(a,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[xc]||(o[xc]=!0,Lf("selectionchange",!1,o))}}function My(r,o,a,u){switch(c0(o)){case 2:var g=rC;break;case 8:g=sC;break;default:g=Xf}a=g.bind(null,o,a,r),g=void 0,!Io||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(o,a,{capture:!0,passive:g}):r.addEventListener(o,a,!0):g!==void 0?r.addEventListener(o,a,{passive:g}):r.addEventListener(o,a,!1)}function Ff(r,o,a,u,g){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var I=u.stateNode.containerInfo;if(I===g)break;if(E===4)for(E=u.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;I!==null;){if(E=fr(I),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){u=y=E;continue e}I=I.parentNode}}u=u.return}ws(function(){var $=y,Q=An(a),te=[];e:{var B=pg.get(r);if(B!==void 0){var W=wr,fe=r;switch(r){case"keypress":if(ko(a)===0)break e;case"keydown":case"keyup":W=Hu;break;case"focusin":fe="focus",W=No;break;case"focusout":fe="blur",W=No;break;case"beforeblur":case"afterblur":W=No;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=w;break;case cg:case dg:case hg:W=Du;break;case fg:W=C;break;case"scroll":case"scrollend":W=Ja;break;case"wheel":W=K;break;case"copy":case"cut":case"paste":W=Mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Vr;break;case"toggle":case"beforetoggle":W=Ne}var we=(o&4)!==0,rt=!we&&(r==="scroll"||r==="scrollend"),j=we?B!==null?B+"Capture":null:B;we=[];for(var U=$,G;U!==null;){var X=U;if(G=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||G===null||j===null||(X=Jn(U,j),X!=null&&we.push(Tl(U,X,G))),rt)break;U=U.return}0<we.length&&(B=new W(B,fe,null,a,Q),te.push({event:B,listeners:we}))}}if((o&7)===0){e:{if(B=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",B&&a!==Ga&&(fe=a.relatedTarget||a.fromElement)&&(fr(fe)||fe[dr]))break e;if((W||B)&&(B=Q.window===Q?Q:(B=Q.ownerDocument)?B.defaultView||B.parentWindow:window,W?(fe=a.relatedTarget||a.toElement,W=$,fe=fe?fr(fe):null,fe!==null&&(rt=l(fe),we=fe.tag,fe!==rt||we!==5&&we!==27&&we!==6)&&(fe=null)):(W=null,fe=$),W!==fe)){if(we=Ka,X="onMouseLeave",j="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(we=Vr,X="onPointerLeave",j="onPointerEnter",U="pointer"),rt=W==null?B:gn(W),G=fe==null?B:gn(fe),B=new we(X,U+"leave",W,a,Q),B.target=rt,B.relatedTarget=G,X=null,fr(Q)===$&&(we=new we(j,U+"enter",fe,a,Q),we.target=G,we.relatedTarget=rt,X=we),rt=X,W&&fe)t:{for(we=xI,j=W,U=fe,G=0,X=j;X;X=we(X))G++;X=0;for(var ve=U;ve;ve=we(ve))X++;for(;0<G-X;)j=we(j),G--;for(;0<X-G;)U=we(U),X--;for(;G--;){if(j===U||U!==null&&j===U.alternate){we=j;break t}j=we(j),U=we(U)}we=null}else we=null;W!==null&&Ly(te,B,W,we,!1),fe!==null&&rt!==null&&Ly(te,rt,fe,we,!0)}}e:{if(B=$?gn($):window,W=B.nodeName&&B.nodeName.toLowerCase(),W==="select"||W==="input"&&B.type==="file")var ze=Zm;else if(Qm(B))if(eg)ze=HT;else{ze=VT;var me=FT}else W=B.nodeName,!W||W.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?$&&pi($.elementType)&&(ze=Zm):ze=jT;if(ze&&(ze=ze(r,$))){Xm(te,ze,a,Q);break e}me&&me(r,B,$),r==="focusout"&&$&&B.type==="number"&&$.memoizedProps.value!=null&&Ha(B,"number",B.value)}switch(me=$?gn($):window,r){case"focusin":(Qm(me)||me.contentEditable==="true")&&(Ei=me,hh=$,Za=null);break;case"focusout":Za=hh=Ei=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,lg(te,a,Q);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":lg(te,a,Q)}var xe;if(Qe)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Si?xo(r,a)&&(De="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(jr&&a.locale!=="ko"&&(Si||De!=="onCompositionStart"?De==="onCompositionEnd"&&Si&&(xe=Ba()):(br=Q,$a="value"in br?br.value:br.textContent,Si=!0)),me=Oc($,De),0<me.length&&(De=new Er(De,r,null,a,Q),te.push({event:De,listeners:me}),xe?De.data=xe:(xe=wi(a),xe!==null&&(De.data=xe)))),(xe=xn?DT(r,a):MT(r,a))&&(De=Oc($,"onBeforeInput"),0<De.length&&(me=new Er("onBeforeInput","beforeinput",null,a,Q),te.push({event:me,listeners:De}),me.data=xe)),CI(te,r,$,a,Q)}Dy(te,o)})}function Tl(r,o,a){return{instance:r,listener:o,currentTarget:a}}function Oc(r,o){for(var a=o+"Capture",u=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Jn(r,a),g!=null&&u.unshift(Tl(r,g,y)),g=Jn(r,o),g!=null&&u.push(Tl(r,g,y))),r.tag===3)return u;r=r.return}return[]}function xI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ly(r,o,a,u,g){for(var y=o._reactName,E=[];a!==null&&a!==u;){var I=a,P=I.alternate,$=I.stateNode;if(I=I.tag,P!==null&&P===u)break;I!==5&&I!==26&&I!==27||$===null||(P=$,g?($=Jn(a,y),$!=null&&E.unshift(Tl(a,$,P))):g||($=Jn(a,y),$!=null&&E.push(Tl(a,$,P)))),a=a.return}E.length!==0&&r.push({event:o,listeners:E})}var OI=/\r\n?/g,RI=/\u0000|\uFFFD/g;function Uy(r){return(typeof r=="string"?r:""+r).replace(OI,`
`).replace(RI,"")}function Fy(r,o){return o=Uy(o),Uy(r)===o}function nt(r,o,a,u,g,y){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||un(r,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&un(r,""+u);break;case"className":vn(r,"class",u);break;case"tabIndex":vn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(r,a,u);break;case"style":za(r,u,y);break;case"data":if(o!=="object"){vn(r,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=mi(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(o!=="input"&&nt(r,o,"name",g.name,g,null),nt(r,o,"formEncType",g.formEncType,g,null),nt(r,o,"formMethod",g.formMethod,g,null),nt(r,o,"formTarget",g.formTarget,g,null)):(nt(r,o,"encType",g.encType,g,null),nt(r,o,"method",g.method,g,null),nt(r,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=mi(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=Bn);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=mi(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Re("beforetoggle",r),Re("toggle",r),hi(r,"popover",u);break;case"xlinkActuate":kt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ou.get(a)||a,hi(r,a,u))}}function Vf(r,o,a,u,g,y){switch(a){case"style":za(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?un(r,u):(typeof u=="number"||typeof u=="bigint")&&un(r,""+u);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),y=r[Vt]||null,y=y!=null?y[a]:null,typeof y=="function"&&r.removeEventListener(o,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(o,u,g);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):hi(r,a,u)}}}function Wt(r,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",r),Re("load",r);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var E=a[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(r,o,y,E,a,null)}}g&&nt(r,o,"srcSet",a.srcSet,a,null),u&&nt(r,o,"src",a.src,a,null);return;case"input":Re("invalid",r);var I=y=E=g=null,P=null,$=null;for(u in a)if(a.hasOwnProperty(u)){var Q=a[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":E=Q;break;case"checked":P=Q;break;case"defaultChecked":$=Q;break;case"value":y=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,o));break;default:nt(r,o,u,Q,a,null)}}Au(r,y,I,P,$,E,g,!1);return;case"select":Re("invalid",r),u=E=y=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":E=I;break;case"multiple":u=I;default:nt(r,o,g,I,a,null)}o=y,a=E,r.multiple=!!u,o!=null?gs(r,!!u,o,!1):a!=null&&gs(r,!!u,a,!0);return;case"textarea":Re("invalid",r),y=g=u=null;for(E in a)if(a.hasOwnProperty(E)&&(I=a[E],I!=null))switch(E){case"value":u=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:nt(r,o,E,I,a,null)}vs(r,u,g,y);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,o,P,u,a,null)}return;case"dialog":Re("beforetoggle",r),Re("toggle",r),Re("cancel",r),Re("close",r);break;case"iframe":case"object":Re("load",r);break;case"video":case"audio":for(u=0;u<_l.length;u++)Re(_l[u],r);break;case"image":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"embed":case"source":case"link":Re("error",r),Re("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(u=a[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:nt(r,o,$,u,a,null)}return;default:if(pi(o)){for(Q in a)a.hasOwnProperty(Q)&&(u=a[Q],u!==void 0&&Vf(r,o,Q,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&nt(r,o,I,u,a,null))}function PI(r,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,I=null,P=null,$=null,Q=null;for(W in a){var te=a[W];if(a.hasOwnProperty(W)&&te!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":P=te;default:u.hasOwnProperty(W)||nt(r,o,W,null,u,te)}}for(var B in u){var W=u[B];if(te=a[B],u.hasOwnProperty(B)&&(W!=null||te!=null))switch(B){case"type":y=W;break;case"name":g=W;break;case"checked":$=W;break;case"defaultChecked":Q=W;break;case"value":E=W;break;case"defaultValue":I=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,o));break;default:W!==te&&nt(r,o,B,W,u,te)}}fi(r,E,I,P,$,Q,y,g);return;case"select":W=E=I=B=null;for(y in a)if(P=a[y],a.hasOwnProperty(y)&&P!=null)switch(y){case"value":break;case"multiple":W=P;default:u.hasOwnProperty(y)||nt(r,o,y,null,u,P)}for(g in u)if(y=u[g],P=a[g],u.hasOwnProperty(g)&&(y!=null||P!=null))switch(g){case"value":B=y;break;case"defaultValue":I=y;break;case"multiple":E=y;default:y!==P&&nt(r,o,g,y,u,P)}o=I,a=E,u=W,B!=null?gs(r,!!a,B,!1):!!u!=!!a&&(o!=null?gs(r,!!a,o,!0):gs(r,!!a,a?[]:"",!1));return;case"textarea":W=B=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(r,o,I,null,u,g)}for(E in u)if(g=u[E],y=a[E],u.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":B=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&nt(r,o,E,g,u,y)}Nu(r,B,W);return;case"option":for(var fe in a)if(B=a[fe],a.hasOwnProperty(fe)&&B!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":r.selected=!1;break;default:nt(r,o,fe,null,u,B)}for(P in u)if(B=u[P],W=a[P],u.hasOwnProperty(P)&&B!==W&&(B!=null||W!=null))switch(P){case"selected":r.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:nt(r,o,P,B,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)B=a[we],a.hasOwnProperty(we)&&B!=null&&!u.hasOwnProperty(we)&&nt(r,o,we,null,u,B);for($ in u)if(B=u[$],W=a[$],u.hasOwnProperty($)&&B!==W&&(B!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,o));break;default:nt(r,o,$,B,u,W)}return;default:if(pi(o)){for(var rt in a)B=a[rt],a.hasOwnProperty(rt)&&B!==void 0&&!u.hasOwnProperty(rt)&&Vf(r,o,rt,void 0,u,B);for(Q in u)B=u[Q],W=a[Q],!u.hasOwnProperty(Q)||B===W||B===void 0&&W===void 0||Vf(r,o,Q,B,u,W);return}}for(var j in a)B=a[j],a.hasOwnProperty(j)&&B!=null&&!u.hasOwnProperty(j)&&nt(r,o,j,null,u,B);for(te in u)B=u[te],W=a[te],!u.hasOwnProperty(te)||B===W||B==null&&W==null||nt(r,o,te,B,u,W)}function Vy(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,E=g.initiatorType,I=g.duration;if(y&&I&&Vy(E)){for(E=0,I=g.responseEnd,u+=1;u<a.length;u++){var P=a[u],$=P.startTime;if($>I)break;var Q=P.transferSize,te=P.initiatorType;Q&&Vy(te)&&(P=P.responseEnd,E+=Q*(P<I?1:(I-$)/(P-$)))}if(--u,o+=8*(y+E)/(g.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var jf=null,Hf=null;function Rc(r){return r.nodeType===9?r:r.ownerDocument}function jy(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hy(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function qf(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zf=null;function MI(){var r=window.event;return r&&r.type==="popstate"?r===zf?!1:(zf=r,!0):(zf=null,!1)}var qy=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,UI=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(r){return zy.resolve(null).then(r).catch(FI)}:qy;function FI(r){setTimeout(function(){throw r})}function js(r){return r==="head"}function Gy(r,o){var a=o,u=0;do{var g=a.nextSibling;if(r.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(g),Wi(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Il(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Il(a);for(var y=a.firstChild;y;){var E=y.nextSibling,I=y.nodeName;y[hr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=E}}else a==="body"&&Il(r.ownerDocument.body);a=g}while(a);Wi(o)}function $y(r,o){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Gf(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Gf(a),di(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function VI(r,o,a,u){for(;r.nodeType===1;){var g=a;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[hr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence")||y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ln(r.nextSibling),r===null)break}return null}function jI(r,o,a){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Ln(r.nextSibling),r===null))return null;return r}function By(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ln(r.nextSibling),r===null))return null;return r}function $f(r){return r.data==="$?"||r.data==="$~"}function Bf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function HI(r,o){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ln(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Jf=null;function Jy(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(o===0)return Ln(r.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}r=r.nextSibling}return null}function Ky(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return r;o--}else a!=="/$"&&a!=="/&"||o++}r=r.previousSibling}return null}function Wy(r,o,a){switch(o=Rc(a),r){case"html":if(r=o.documentElement,!r)throw Error(s(452));return r;case"head":if(r=o.head,!r)throw Error(s(453));return r;case"body":if(r=o.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Il(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);di(r)}var Un=new Map,Yy=new Set;function Pc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ts=le.d;le.d={f:qI,r:zI,D:GI,C:$I,L:BI,m:JI,X:WI,S:KI,M:YI};function qI(){var r=ts.f(),o=Tc();return r||o}function zI(r){var o=kn(r);o!==null&&o.tag===5&&o.type==="form"?fv(o):ts.r(r)}var Bi=typeof document>"u"?null:document;function Qy(r,o,a){var u=Bi;if(u&&typeof o=="string"&&o){var g=yn(o);g='link[rel="'+r+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Yy.has(g)||(Yy.add(g),r={rel:r,crossOrigin:a,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Wt(o,"link",r),Ct(o),u.head.appendChild(o)))}}function GI(r){ts.D(r),Qy("dns-prefetch",r,null)}function $I(r,o){ts.C(r,o),Qy("preconnect",r,o)}function BI(r,o,a){ts.L(r,o,a);var u=Bi;if(u&&r&&o){var g='link[rel="preload"][as="'+yn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+yn(a.imageSizes)+'"]')):g+='[href="'+yn(r)+'"]';var y=g;switch(o){case"style":y=Ji(r);break;case"script":y=Ki(r)}Un.has(y)||(r=S({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:r,as:o},a),Un.set(y,r),u.querySelector(g)!==null||o==="style"&&u.querySelector(Cl(y))||o==="script"&&u.querySelector(kl(y))||(o=u.createElement("link"),Wt(o,"link",r),Ct(o),u.head.appendChild(o)))}}function JI(r,o){ts.m(r,o);var a=Bi;if(a&&r){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(r)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ki(r)}if(!Un.has(y)&&(r=S({rel:"modulepreload",href:r},o),Un.set(y,r),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(y)))return}u=a.createElement("link"),Wt(u,"link",r),Ct(u),a.head.appendChild(u)}}}function KI(r,o,a){ts.S(r,o,a);var u=Bi;if(u&&r){var g=pr(u).hoistableStyles,y=Ji(r);o=o||"default";var E=g.get(y);if(!E){var I={loading:0,preload:null};if(E=u.querySelector(Cl(y)))I.loading=5;else{r=S({rel:"stylesheet",href:r,"data-precedence":o},a),(a=Un.get(y))&&Kf(r,a);var P=E=u.createElement("link");Ct(P),Wt(P,"link",r),P._p=new Promise(function($,Q){P.onload=$,P.onerror=Q}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Dc(E,o,u)}E={type:"stylesheet",instance:E,count:1,state:I},g.set(y,E)}}}function WI(r,o){ts.X(r,o);var a=Bi;if(a&&r){var u=pr(a).hoistableScripts,g=Ki(r),y=u.get(g);y||(y=a.querySelector(kl(g)),y||(r=S({src:r,async:!0},o),(o=Un.get(g))&&Wf(r,o),y=a.createElement("script"),Ct(y),Wt(y,"link",r),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function YI(r,o){ts.M(r,o);var a=Bi;if(a&&r){var u=pr(a).hoistableScripts,g=Ki(r),y=u.get(g);y||(y=a.querySelector(kl(g)),y||(r=S({src:r,async:!0,type:"module"},o),(o=Un.get(g))&&Wf(r,o),y=a.createElement("script"),Ct(y),Wt(y,"link",r),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Xy(r,o,a,u){var g=(g=Ae.current)?Pc(g):null;if(!g)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Ji(a.href),a=pr(g).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Ji(a.href);var y=pr(g).hoistableStyles,E=y.get(r);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,E),(y=g.querySelector(Cl(r)))&&!y._p&&(E.instance=y,E.state.loading=5),Un.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(r,a),y||QI(g,r,a,E.state))),o&&u===null)throw Error(s(528,""));return E}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ki(a),a=pr(g).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ji(r){return'href="'+yn(r)+'"'}function Cl(r){return'link[rel="stylesheet"]['+r+"]"}function Zy(r){return S({},r,{"data-precedence":r.precedence,precedence:null})}function QI(r,o,a,u){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=r.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Wt(o,"link",a),Ct(o),r.head.appendChild(o))}function Ki(r){return'[src="'+yn(r)+'"]'}function kl(r){return"script[async]"+r}function e0(r,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=r.querySelector('style[data-href~="'+yn(a.href)+'"]');if(u)return o.instance=u,Ct(u),u;var g=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ct(u),Wt(u,"style",g),Dc(u,a.precedence,r),o.instance=u;case"stylesheet":g=Ji(a.href);var y=r.querySelector(Cl(g));if(y)return o.state.loading|=4,o.instance=y,Ct(y),y;u=Zy(a),(g=Un.get(g))&&Kf(u,g),y=(r.ownerDocument||r).createElement("link"),Ct(y);var E=y;return E._p=new Promise(function(I,P){E.onload=I,E.onerror=P}),Wt(y,"link",u),o.state.loading|=4,Dc(y,a.precedence,r),o.instance=y;case"script":return y=Ki(a.src),(g=r.querySelector(kl(y)))?(o.instance=g,Ct(g),g):(u=a,(g=Un.get(y))&&(u=S({},a),Wf(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),Ct(g),Wt(g,"link",u),r.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Dc(u,a.precedence,r));return o.instance}function Dc(r,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,E=0;E<u.length;E++){var I=u[E];if(I.dataset.precedence===o)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(r,o.firstChild))}function Kf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Wf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Mc=null;function t0(r,o,a){if(Mc===null){var u=new Map,g=Mc=new Map;g.set(a,u)}else g=Mc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),g=0;g<a.length;g++){var y=a[g];if(!(y[hr]||y[It]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(o)||"";E=r+E;var I=u.get(E);I?I.push(y):u.set(E,[y])}}return u}function n0(r,o,a){r=r.ownerDocument||r,r.head.insertBefore(a,o==="title"?r.querySelector("head > title"):null)}function XI(r,o,a){if(a===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function r0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function ZI(r,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Ji(u.href),y=o.querySelector(Cl(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Lc.bind(r),o.then(r,r)),a.state.loading|=4,a.instance=y,Ct(y);return}y=o.ownerDocument||o,u=Zy(u),(g=Un.get(g))&&Kf(u,g),y=y.createElement("link"),Ct(y);var E=y;E._p=new Promise(function(I,P){E.onload=I,E.onerror=P}),Wt(y,"link",u),a.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Lc.bind(r),o.addEventListener("load",a),o.addEventListener("error",a))}}var Yf=0;function eC(r,o){return r.stylesheets&&r.count===0&&Fc(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Fc(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+o);0<r.imgBytes&&Yf===0&&(Yf=62500*DI());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Fc(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Yf?50:800)+o);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Lc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Uc=null;function Fc(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Uc=new Map,o.forEach(tC,r),Uc=null,Lc.call(r))}function tC(r,o){if(!(o.state.loading&4)){var a=Uc.get(r);if(a)var u=a.get(null);else{a=new Map,Uc.set(r,a);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),u=E)}u&&a.set(null,u)}g=o.instance,E=g.getAttribute("data-precedence"),y=a.get(E)||u,y===u&&a.set(null,g),a.set(E,g),this.count++,u=Lc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),o.state.loading|=4}}var Al={$$typeof:se,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function nC(r,o,a,u,g,y,E,I,P){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function s0(r,o,a,u,g,y,E,I,P,$,Q,te){return r=new nC(r,o,a,E,P,$,Q,te,I),o=1,y===!0&&(o|=24),y=wn(3,null,null,o),r.current=y,y.stateNode=r,o=Ah(),o.refCount++,r.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:o},Rh(y),r}function o0(r){return r?(r=Ii,r):Ii}function i0(r,o,a,u,g,y){g=o0(g),u.context===null?u.context=g:u.pendingContext=g,u=Ns(o),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=xs(r,u,o),a!==null&&(pn(a,r,o),il(a,r,o))}function a0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<o?a:o}}function Qf(r,o){a0(r,o),(r=r.alternate)&&a0(r,o)}function l0(r){if(r.tag===13||r.tag===31){var o=Po(r,67108864);o!==null&&pn(o,r,67108864),Qf(r,67108864)}}function u0(r){if(r.tag===13||r.tag===31){var o=In();o=So(o);var a=Po(r,o);a!==null&&pn(a,r,o),Qf(r,o)}}var Vc=!0;function rC(r,o,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=2,Xf(r,o,a,u)}finally{le.p=y,Y.T=g}}function sC(r,o,a,u){var g=Y.T;Y.T=null;var y=le.p;try{le.p=8,Xf(r,o,a,u)}finally{le.p=y,Y.T=g}}function Xf(r,o,a,u){if(Vc){var g=Zf(u);if(g===null)Ff(r,o,u,jc,a),d0(r,u);else if(iC(g,r,o,a,u))u.stopPropagation();else if(d0(r,u),o&4&&-1<oC.indexOf(r)){for(;g!==null;){var y=kn(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=lr(y.pendingLanes);if(E!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var P=1<<31-vt(E);I.entanglements[1]|=P,E&=~P}Cr(y),(Je&6)===0&&(Ec=on()+500,El(0))}}break;case 31:case 13:I=Po(y,2),I!==null&&pn(I,y,2),Tc(),Qf(y,2)}if(y=Zf(u),y===null&&Ff(r,o,u,jc,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else Ff(r,o,u,null,a)}}function Zf(r){return r=An(r),ep(r)}var jc=null;function ep(r){if(jc=null,r=fr(r),r!==null){var o=l(r);if(o===null)r=null;else{var a=o.tag;if(a===13){if(r=c(o),r!==null)return r;r=null}else if(a===31){if(r=f(o),r!==null)return r;r=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return jc=r,null}function c0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vo()){case Oa:return 2;case Ra:return 8;case ps:case oh:return 32;case yu:return 268435456;default:return 32}default:return 32}}var tp=!1,Hs=null,qs=null,zs=null,Nl=new Map,xl=new Map,Gs=[],oC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d0(r,o){switch(r){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Nl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(o.pointerId)}}function Ol(r,o,a,u,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},o!==null&&(o=kn(o),o!==null&&l0(o)),r):(r.eventSystemFlags|=u,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function iC(r,o,a,u,g){switch(o){case"focusin":return Hs=Ol(Hs,r,o,a,u,g),!0;case"dragenter":return qs=Ol(qs,r,o,a,u,g),!0;case"mouseover":return zs=Ol(zs,r,o,a,u,g),!0;case"pointerover":var y=g.pointerId;return Nl.set(y,Ol(Nl.get(y)||null,r,o,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,xl.set(y,Ol(xl.get(y)||null,r,o,a,u,g)),!0}return!1}function h0(r){var o=fr(r.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){r.blockedOn=o,Gn(r.priority,function(){u0(a)});return}}else if(o===31){if(o=f(a),o!==null){r.blockedOn=o,Gn(r.priority,function(){u0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Hc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var a=Zf(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Ga=u,a.target.dispatchEvent(u),Ga=null}else return o=kn(a),o!==null&&l0(o),r.blockedOn=a,!1;o.shift()}return!0}function f0(r,o,a){Hc(r)&&a.delete(o)}function aC(){tp=!1,Hs!==null&&Hc(Hs)&&(Hs=null),qs!==null&&Hc(qs)&&(qs=null),zs!==null&&Hc(zs)&&(zs=null),Nl.forEach(f0),xl.forEach(f0)}function qc(r,o){r.blockedOn===o&&(r.blockedOn=null,tp||(tp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aC)))}var zc=null;function p0(r){zc!==r&&(zc=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===r&&(zc=null);for(var o=0;o<r.length;o+=3){var a=r[o],u=r[o+1],g=r[o+2];if(typeof u!="function"){if(ep(u||a)===null)continue;break}var y=kn(a);y!==null&&(r.splice(o,3),o-=3,Xh(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Wi(r){function o(P){return qc(P,r)}Hs!==null&&qc(Hs,r),qs!==null&&qc(qs,r),zs!==null&&qc(zs,r),Nl.forEach(o),xl.forEach(o);for(var a=0;a<Gs.length;a++){var u=Gs[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Gs.length&&(a=Gs[0],a.blockedOn===null);)h0(a),a.blockedOn===null&&Gs.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],E=g[Vt]||null;if(typeof y=="function")E||p0(a);else if(E){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Vt]||null)I=E.formAction;else if(ep(g)!==null)continue}else I=E.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),p0(a)}}}function m0(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function np(r){this._internalRoot=r}Gc.prototype.render=np.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=In();i0(a,u,r,o,null,null)},Gc.prototype.unmount=np.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;i0(r.current,2,null,r,null,null),Tc(),o[dr]=null}};function Gc(r){this._internalRoot=r}Gc.prototype.unstable_scheduleHydration=function(r){if(r){var o=Tu();r={blockedOn:null,target:r,priority:o};for(var a=0;a<Gs.length&&o!==0&&o<Gs[a].priority;a++);Gs.splice(a,0,r),a===0&&h0(r)}};var g0=e.version;if(g0!=="19.2.0")throw Error(s(527,g0,"19.2.0"));le.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=v(o),r=r!==null?b(r):null,r=r===null?null:r.stateNode,r};var lC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{qn=$c.inject(lC),Gt=$c}catch{}}return Pl.createRoot=function(r,o){if(!i(r))throw Error(s(299));var a=!1,u="",g=_v,y=Tv,E=Iv;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=s0(r,1,!1,null,null,a,u,null,g,y,E,m0),r[dr]=o.current,Uf(r),new np(o)},Pl.hydrateRoot=function(r,o,a){if(!i(r))throw Error(s(299));var u=!1,g="",y=_v,E=Tv,I=Iv,P=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(P=a.formState)),o=s0(r,1,!0,o,a??null,u,g,P,y,E,I,m0),o.context=o0(null),a=o.current,u=In(),u=So(u),g=Ns(u),g.callback=null,xs(a,g,u),a=u,o.current.lanes=a,bo(o,a),Cr(o),r[dr]=o.current,Uf(r),new Gc(o)},Pl.version="19.2.0",Pl}var x0;function bC(){if(x0)return rp.exports;x0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=yC(),rp.exports}var wC=bC();const SC=PS(wC);var Js=(n=>(n.CUSTOMER="CUSTOMER",n.ADMIN="ADMIN",n))(Js||{});/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const EC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_C=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),O0=n=>{const e=_C(n);return e.charAt(0).toUpperCase()+e.slice(1)},DS=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),TC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var IC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const CC=He.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...f},m)=>He.createElement("svg",{ref:m,...IC,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:DS("lucide",i),...!l&&!TC(f)&&{"aria-hidden":"true"},...f},[...c.map(([v,b])=>He.createElement(v,b)),...Array.isArray(l)?l:[l]]));/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Et=(n,e)=>{const t=He.forwardRef(({className:s,...i},l)=>He.createElement(CC,{ref:l,iconNode:e,className:DS(`lucide-${EC(O0(n))}`,`lucide-${n}`,s),...i}));return t.displayName=O0(n),t};/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kC=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],AC=Et("bot",kC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const NC=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xC=Et("circle-play",NC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const OC=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],R0=Et("database",OC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const RC=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],PC=Et("layout-grid",RC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const DC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],MC=Et("loader-circle",DC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const LC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UC=Et("log-out",LC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const FC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],VC=Et("message-circle",FC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const jC=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],op=Et("pencil",jC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const HC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dl=Et("plus",HC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const qC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zC=Et("save",qC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const GC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$C=Et("search",GC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const BC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],JC=Et("send",BC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const KC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P0=Et("settings",KC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const WC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],YC=Et("shield-check",WC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const QC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],XC=Et("sparkles",QC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ZC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ip=Et("trash-2",ZC);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ek=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tk=Et("user",ek);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nk=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],rk=Et("video",nk);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ok=Et("volume-2",sk);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ik=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],ak=Et("youtube",ik);/**
* @license lucide-react v0.555.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],em=Et("x",lk),uk=()=>{};var D0={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ck=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[s++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],c=n[t++],f=n[t++],m=((i&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const l=n[i],c=i+1<n.length,f=c?n[i+1]:0,m=i+2<n.length,v=m?n[i+2]:0,b=l>>2,S=(l&3)<<4|f>>4;let T=(f&15)<<2|v>>6,N=v&63;m||(N=64,c||(T=64)),s.push(t[b],t[S],t[T],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ck(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||c==null||f==null||m==null)throw new dk;const v=l<<2|c>>4;if(s.push(v),f!==64){const b=c<<4&240|f>>2;if(s.push(b),m!==64){const S=f<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class dk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hk=function(n){const e=MS(n);return LS.encodeByteArray(e,!0)},cd=function(n){return hk(n).replace(/\./g,"")},US=function(n){try{return LS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pk=()=>fk().__FIREBASE_DEFAULTS__,mk=()=>{if(typeof process>"u"||typeof D0>"u")return;const n=D0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&US(n[1]);return e&&JSON.parse(e)},Dd=()=>{try{return uk()||pk()||mk()||gk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FS=n=>{var e,t;return(t=(e=Dd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},vk=n=>{const e=FS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},VS=()=>{var n;return(n=Dd())==null?void 0:n.config},jS=n=>{var e;return(e=Dd())==null?void 0:e[`_${n}`]};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HS(n){return(await fetch(n,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[cd(JSON.stringify(t)),cd(JSON.stringify(c)),""].join(".")}const ql={};function wk(){const n={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?n.emulator.push(e):n.prod.push(e);return n}function Sk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M0=!1;function qS(n,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||ql[n]===e||ql[n]||M0)return;ql[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",i=wk().prod.length>0;function l(){const S=document.getElementById(s);S&&S.remove()}function c(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function f(S,T){S.setAttribute("width","24"),S.setAttribute("id",T),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{M0=!0,l()},S}function v(S,T){S.setAttribute("id",T),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=Sk(s),T=t("text"),N=document.getElementById(T)||document.createElement("span"),q=t("learnmore"),L=document.getElementById(q)||document.createElement("a"),H=t("preprendIcon"),J=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;c(Z),v(L,q);const se=m();f(J,H),Z.append(J,N,L,se),document.body.appendChild(Z)}i?(N.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function _k(){var n;const e=(n=Dd())==null?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ik(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kk(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ak(){return!_k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nk(){try{return typeof indexedDB=="object"}catch{return!1}}function xk(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ok="FirebaseError";class cs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Ok,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?Rk(l,s):"Error",f=`${this.serviceName}: ${c} (${i}).`;return new cs(i,f,s)}}function Rk(n,e){return n.replace(Pk,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const Pk=/\{\$([^}]+)}/g;function Dk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const l=n[i],c=e[i];if(L0(l)&&L0(c)){if(!Wo(l,c))return!1}else if(l!==c)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function L0(n){return n!==null&&typeof n=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[s,i]=t.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ul(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Mk(n,e){const t=new Lk(n,e);return t.subscribe.bind(t)}class Lk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Uk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=ap),i.error===void 0&&(i.error=ap),i.complete===void 0&&(i.complete=ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hn(n){return n&&n._delegate?n._delegate:n}class Yo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bo="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new yk;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jk(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});s.resolve(l)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vk(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vk(n){return n===Bo?void 0:n}function jk(n){return n.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const qk={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},zk=Me.INFO,Gk={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},$k=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=Gk[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=zk,this._logHandler=$k,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const Bk=(n,e)=>e.some(t=>n instanceof t);let U0,F0;function Jk(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return F0||(F0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zS=new WeakMap,bp=new WeakMap,GS=new WeakMap,lp=new WeakMap,nm=new WeakMap;function Wk(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(eo(n.result)),i()},c=()=>{s(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zS.set(t,n)}).catch(()=>{}),nm.set(e,n),e}function Yk(n){if(bp.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),i()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bp.set(n,e)}let wp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return eo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Qk(n){wp=n(wp)}function Xk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(up(this),e,...t);return GS.set(s,e.sort?e.sort():[e]),eo(s)}:Kk().includes(n)?function(...e){return n.apply(up(this),e),eo(zS.get(this))}:function(...e){return eo(n.apply(up(this),e))}}function Zk(n){return typeof n=="function"?Xk(n):(n instanceof IDBTransaction&&Yk(n),Bk(n,Jk())?new Proxy(n,wp):n)}function eo(n){if(n instanceof IDBRequest)return Wk(n);if(lp.has(n))return lp.get(n);const e=Zk(n);return e!==n&&(lp.set(n,e),nm.set(e,n)),e}const up=n=>nm.get(n);function eA(n,e,{blocked:t,upgrade:s,blocking:i,terminated:l}={}){const c=indexedDB.open(n,e),f=eo(c);return s&&c.addEventListener("upgradeneeded",m=>{s(eo(c.result),m.oldVersion,m.newVersion,eo(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),i&&m.addEventListener("versionchange",v=>i(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],cp=new Map;function V0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=nA.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||tA.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,i?"readwrite":"readonly");let v=m.store;return s&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),i&&m.done]))[0]};return cp.set(e,l),l}Qk(n=>({...n,get:(e,t,s)=>V0(e,t)||n.get(e,t,s),has:(e,t)=>!!V0(e,t)||n.has(e,t)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sA(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(" ")}}function sA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sp="@firebase/app",j0="0.14.6";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const os=new tm("@firebase/app"),oA="@firebase/app-compat",iA="@firebase/analytics-compat",aA="@firebase/analytics",lA="@firebase/app-check-compat",uA="@firebase/app-check",cA="@firebase/auth",dA="@firebase/auth-compat",hA="@firebase/database",fA="@firebase/data-connect",pA="@firebase/database-compat",mA="@firebase/functions",gA="@firebase/functions-compat",vA="@firebase/installations",yA="@firebase/installations-compat",bA="@firebase/messaging",wA="@firebase/messaging-compat",SA="@firebase/performance",EA="@firebase/performance-compat",_A="@firebase/remote-config",TA="@firebase/remote-config-compat",IA="@firebase/storage",CA="@firebase/storage-compat",kA="@firebase/firestore",AA="@firebase/ai",NA="@firebase/firestore-compat",xA="firebase",OA="12.6.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ep="[DEFAULT]",RA={[Sp]:"fire-core",[oA]:"fire-core-compat",[aA]:"fire-analytics",[iA]:"fire-analytics-compat",[uA]:"fire-app-check",[lA]:"fire-app-check-compat",[cA]:"fire-auth",[dA]:"fire-auth-compat",[hA]:"fire-rtdb",[fA]:"fire-data-connect",[pA]:"fire-rtdb-compat",[mA]:"fire-fn",[gA]:"fire-fn-compat",[vA]:"fire-iid",[yA]:"fire-iid-compat",[bA]:"fire-fcm",[wA]:"fire-fcm-compat",[SA]:"fire-perf",[EA]:"fire-perf-compat",[_A]:"fire-rc",[TA]:"fire-rc-compat",[IA]:"fire-gcs",[CA]:"fire-gcs-compat",[kA]:"fire-fst",[NA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[xA]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dd=new Map,PA=new Map,_p=new Map;function H0(n,e){try{n.container.addComponent(e)}catch(t){os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ua(n){const e=n.name;if(_p.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,n);for(const t of dd.values())H0(t,n);for(const t of PA.values())H0(t,n);return!0}function rm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new au("app","Firebase",DA);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MA{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ya=OA;function $S(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ep,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw to.create("bad-app-name",{appName:String(i)});if(t||(t=VS()),!t)throw to.create("no-options");const l=dd.get(i);if(l){if(Wo(t,l.options)&&Wo(s,l.config))return l;throw to.create("duplicate-app",{appName:i})}const c=new Hk(i);for(const m of _p.values())c.addComponent(m);const f=new MA(t,s,c);return dd.set(i,f),f}function BS(n=Ep){const e=dd.get(n);if(!e&&n===Ep&&VS())return $S();if(!e)throw to.create("no-app",{appName:n});return e}function no(n,e,t){let s=RA[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(c.join(" "));return}ua(new Yo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LA="firebase-heartbeat-database",UA=1,Yl="firebase-heartbeat-store";let dp=null;function JS(){return dp||(dp=eA(LA,UA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),dp}async function FA(n){try{const e=(await JS()).transaction(Yl),t=await e.objectStore(Yl).get(KS(n));return await e.done,t}catch(e){if(e instanceof cs)os.warn(e.message);else{const t=to.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(t.message)}}}async function q0(n,e){try{const t=(await JS()).transaction(Yl,"readwrite");await t.objectStore(Yl).put(e,KS(n)),await t.done}catch(t){if(t instanceof cs)os.warn(t.message);else{const s=to.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});os.warn(s.message)}}}function KS(n){return`${n.name}!${n.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VA=1024,jA=30;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zA(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>jA){const l=GA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){os.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=z0(),{heartbeatsToSend:s,unsentEntries:i}=qA(this._heartbeatsCache.heartbeats),l=cd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return os.warn(t),""}}}function z0(){return new Date().toISOString().substring(0,10)}function qA(n,e=VA){const t=[];let s=n.slice();for(const i of n){const l=t.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),G0(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),G0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class zA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nk()?xk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await FA(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}}function G0(n){return cd(JSON.stringify({version:2,heartbeats:n})).length}function GA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $A(n){ua(new Yo("platform-logger",e=>new rA(e),"PRIVATE")),ua(new Yo("heartbeat",e=>new HA(e),"PRIVATE")),no(Sp,j0,n),no(Sp,j0,"esm2020"),no("fire-js","")}$A("");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,WS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,k){function A(){}A.prototype=k.prototype,x.F=k.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(M,D,F){for(var O=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)O[Be-2]=arguments[Be];return k.prototype[D].apply(M,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,k,A){A||(A=0);const M=Array(16);if(typeof k=="string")for(var D=0;D<16;++D)M[D]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(D=0;D<16;++D)M[D]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=x.g[0],A=x.g[1],D=x.g[2];let F=x.g[3],O;O=k+(F^A&(D^F))+M[0]+3614090360&4294967295,k=A+(O<<7&4294967295|O>>>25),O=F+(D^k&(A^D))+M[1]+3905402710&4294967295,F=k+(O<<12&4294967295|O>>>20),O=D+(A^F&(k^A))+M[2]+606105819&4294967295,D=F+(O<<17&4294967295|O>>>15),O=A+(k^D&(F^k))+M[3]+3250441966&4294967295,A=D+(O<<22&4294967295|O>>>10),O=k+(F^A&(D^F))+M[4]+4118548399&4294967295,k=A+(O<<7&4294967295|O>>>25),O=F+(D^k&(A^D))+M[5]+1200080426&4294967295,F=k+(O<<12&4294967295|O>>>20),O=D+(A^F&(k^A))+M[6]+2821735955&4294967295,D=F+(O<<17&4294967295|O>>>15),O=A+(k^D&(F^k))+M[7]+4249261313&4294967295,A=D+(O<<22&4294967295|O>>>10),O=k+(F^A&(D^F))+M[8]+1770035416&4294967295,k=A+(O<<7&4294967295|O>>>25),O=F+(D^k&(A^D))+M[9]+2336552879&4294967295,F=k+(O<<12&4294967295|O>>>20),O=D+(A^F&(k^A))+M[10]+4294925233&4294967295,D=F+(O<<17&4294967295|O>>>15),O=A+(k^D&(F^k))+M[11]+2304563134&4294967295,A=D+(O<<22&4294967295|O>>>10),O=k+(F^A&(D^F))+M[12]+1804603682&4294967295,k=A+(O<<7&4294967295|O>>>25),O=F+(D^k&(A^D))+M[13]+4254626195&4294967295,F=k+(O<<12&4294967295|O>>>20),O=D+(A^F&(k^A))+M[14]+2792965006&4294967295,D=F+(O<<17&4294967295|O>>>15),O=A+(k^D&(F^k))+M[15]+1236535329&4294967295,A=D+(O<<22&4294967295|O>>>10),O=k+(D^F&(A^D))+M[1]+4129170786&4294967295,k=A+(O<<5&4294967295|O>>>27),O=F+(A^D&(k^A))+M[6]+3225465664&4294967295,F=k+(O<<9&4294967295|O>>>23),O=D+(k^A&(F^k))+M[11]+643717713&4294967295,D=F+(O<<14&4294967295|O>>>18),O=A+(F^k&(D^F))+M[0]+3921069994&4294967295,A=D+(O<<20&4294967295|O>>>12),O=k+(D^F&(A^D))+M[5]+3593408605&4294967295,k=A+(O<<5&4294967295|O>>>27),O=F+(A^D&(k^A))+M[10]+38016083&4294967295,F=k+(O<<9&4294967295|O>>>23),O=D+(k^A&(F^k))+M[15]+3634488961&4294967295,D=F+(O<<14&4294967295|O>>>18),O=A+(F^k&(D^F))+M[4]+3889429448&4294967295,A=D+(O<<20&4294967295|O>>>12),O=k+(D^F&(A^D))+M[9]+568446438&4294967295,k=A+(O<<5&4294967295|O>>>27),O=F+(A^D&(k^A))+M[14]+3275163606&4294967295,F=k+(O<<9&4294967295|O>>>23),O=D+(k^A&(F^k))+M[3]+4107603335&4294967295,D=F+(O<<14&4294967295|O>>>18),O=A+(F^k&(D^F))+M[8]+1163531501&4294967295,A=D+(O<<20&4294967295|O>>>12),O=k+(D^F&(A^D))+M[13]+2850285829&4294967295,k=A+(O<<5&4294967295|O>>>27),O=F+(A^D&(k^A))+M[2]+4243563512&4294967295,F=k+(O<<9&4294967295|O>>>23),O=D+(k^A&(F^k))+M[7]+1735328473&4294967295,D=F+(O<<14&4294967295|O>>>18),O=A+(F^k&(D^F))+M[12]+2368359562&4294967295,A=D+(O<<20&4294967295|O>>>12),O=k+(A^D^F)+M[5]+4294588738&4294967295,k=A+(O<<4&4294967295|O>>>28),O=F+(k^A^D)+M[8]+2272392833&4294967295,F=k+(O<<11&4294967295|O>>>21),O=D+(F^k^A)+M[11]+1839030562&4294967295,D=F+(O<<16&4294967295|O>>>16),O=A+(D^F^k)+M[14]+4259657740&4294967295,A=D+(O<<23&4294967295|O>>>9),O=k+(A^D^F)+M[1]+2763975236&4294967295,k=A+(O<<4&4294967295|O>>>28),O=F+(k^A^D)+M[4]+1272893353&4294967295,F=k+(O<<11&4294967295|O>>>21),O=D+(F^k^A)+M[7]+4139469664&4294967295,D=F+(O<<16&4294967295|O>>>16),O=A+(D^F^k)+M[10]+3200236656&4294967295,A=D+(O<<23&4294967295|O>>>9),O=k+(A^D^F)+M[13]+681279174&4294967295,k=A+(O<<4&4294967295|O>>>28),O=F+(k^A^D)+M[0]+3936430074&4294967295,F=k+(O<<11&4294967295|O>>>21),O=D+(F^k^A)+M[3]+3572445317&4294967295,D=F+(O<<16&4294967295|O>>>16),O=A+(D^F^k)+M[6]+76029189&4294967295,A=D+(O<<23&4294967295|O>>>9),O=k+(A^D^F)+M[9]+3654602809&4294967295,k=A+(O<<4&4294967295|O>>>28),O=F+(k^A^D)+M[12]+3873151461&4294967295,F=k+(O<<11&4294967295|O>>>21),O=D+(F^k^A)+M[15]+530742520&4294967295,D=F+(O<<16&4294967295|O>>>16),O=A+(D^F^k)+M[2]+3299628645&4294967295,A=D+(O<<23&4294967295|O>>>9),O=k+(D^(A|~F))+M[0]+4096336452&4294967295,k=A+(O<<6&4294967295|O>>>26),O=F+(A^(k|~D))+M[7]+1126891415&4294967295,F=k+(O<<10&4294967295|O>>>22),O=D+(k^(F|~A))+M[14]+2878612391&4294967295,D=F+(O<<15&4294967295|O>>>17),O=A+(F^(D|~k))+M[5]+4237533241&4294967295,A=D+(O<<21&4294967295|O>>>11),O=k+(D^(A|~F))+M[12]+1700485571&4294967295,k=A+(O<<6&4294967295|O>>>26),O=F+(A^(k|~D))+M[3]+2399980690&4294967295,F=k+(O<<10&4294967295|O>>>22),O=D+(k^(F|~A))+M[10]+4293915773&4294967295,D=F+(O<<15&4294967295|O>>>17),O=A+(F^(D|~k))+M[1]+2240044497&4294967295,A=D+(O<<21&4294967295|O>>>11),O=k+(D^(A|~F))+M[8]+1873313359&4294967295,k=A+(O<<6&4294967295|O>>>26),O=F+(A^(k|~D))+M[15]+4264355552&4294967295,F=k+(O<<10&4294967295|O>>>22),O=D+(k^(F|~A))+M[6]+2734768916&4294967295,D=F+(O<<15&4294967295|O>>>17),O=A+(F^(D|~k))+M[13]+1309151649&4294967295,A=D+(O<<21&4294967295|O>>>11),O=k+(D^(A|~F))+M[4]+4149444226&4294967295,k=A+(O<<6&4294967295|O>>>26),O=F+(A^(k|~D))+M[11]+3174756917&4294967295,F=k+(O<<10&4294967295|O>>>22),O=D+(k^(F|~A))+M[2]+718787259&4294967295,D=F+(O<<15&4294967295|O>>>17),O=A+(F^(D|~k))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+k&4294967295,x.g[1]=x.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+F&4294967295}s.prototype.v=function(x,k){k===void 0&&(k=x.length);const A=k-this.blockSize,M=this.C;let D=this.h,F=0;for(;F<k;){if(D==0)for(;F<=A;)i(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<k;)if(M[D++]=x.charCodeAt(F++),D==this.blockSize){i(this,M),D=0;break}}else for(;F<k;)if(M[D++]=x[F++],D==this.blockSize){i(this,M),D=0;break}}this.h=D,this.o+=k},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var k=1;k<x.length-8;++k)x[k]=0;k=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=k&255,k/=256;for(this.v(x),x=Array(16),k=0,A=0;A<4;++A)for(let M=0;M<32;M+=8)x[k++]=this.g[A]>>>M&255;return x};function l(x,k){var A=f;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=k(x)}function c(x,k){this.h=k;const A=[];let M=!0;for(let D=x.length-1;D>=0;D--){const F=x[D]|0;M&&F==k||(A[D]=F,M=!1)}this.g=A}var f={};function m(x){return-128<=x&&x<128?l(x,function(k){return new c([k|0],k<0?-1:0)}):new c([x|0],x<0?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return S;if(x<0)return H(v(-x));const k=[];let A=1;for(let M=0;x>=A;M++)k[M]=x/A|0,A*=4294967296;return new c(k,0)}function b(x,k){if(x.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(x.charAt(0)=="-")return H(b(x.substring(1),k));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(k,8));let M=S;for(let F=0;F<x.length;F+=8){var D=Math.min(8,x.length-F);const O=parseInt(x.substring(F,F+D),k);D<8?(D=v(Math.pow(k,D)),M=M.j(D).add(v(O))):(M=M.j(A),M=M.add(v(O)))}return M}var S=m(0),T=m(1),N=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-H(this).m();let x=0,k=1;for(let A=0;A<this.g.length;A++){const M=this.i(A);x+=(M>=0?M:4294967296+M)*k,k*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(q(this))return"0";if(L(this))return"-"+H(this).toString(x);const k=v(Math.pow(x,6));var A=this;let M="";for(;;){const D=ie(A,k).g;A=J(A,D.j(k));let F=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=D,q(A))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function q(x){if(x.h!=0)return!1;for(let k=0;k<x.g.length;k++)if(x.g[k]!=0)return!1;return!0}function L(x){return x.h==-1}n.l=function(x){return x=J(this,x),L(x)?-1:q(x)?0:1};function H(x){const k=x.g.length,A=[];for(let M=0;M<k;M++)A[M]=~x.g[M];return new c(A,~x.h).add(T)}n.abs=function(){return L(this)?H(this):this},n.add=function(x){const k=Math.max(this.g.length,x.g.length),A=[];let M=0;for(let D=0;D<=k;D++){let F=M+(this.i(D)&65535)+(x.i(D)&65535),O=(F>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);M=O>>>16,F&=65535,O&=65535,A[D]=O<<16|F}return new c(A,A[A.length-1]&-2147483648?-1:0)};function J(x,k){return x.add(H(k))}n.j=function(x){if(q(this)||q(x))return S;if(L(this))return L(x)?H(this).j(H(x)):H(H(this).j(x));if(L(x))return H(this.j(H(x)));if(this.l(N)<0&&x.l(N)<0)return v(this.m()*x.m());const k=this.g.length+x.g.length,A=[];for(var M=0;M<2*k;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<x.g.length;D++){const F=this.i(M)>>>16,O=this.i(M)&65535,Be=x.i(D)>>>16,pt=x.i(D)&65535;A[2*M+2*D]+=O*pt,Z(A,2*M+2*D),A[2*M+2*D+1]+=F*pt,Z(A,2*M+2*D+1),A[2*M+2*D+1]+=O*Be,Z(A,2*M+2*D+1),A[2*M+2*D+2]+=F*Be,Z(A,2*M+2*D+2)}for(x=0;x<k;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=k;x<2*k;x++)A[x]=0;return new c(A,0)};function Z(x,k){for(;(x[k]&65535)!=x[k];)x[k+1]+=x[k]>>>16,x[k]&=65535,k++}function se(x,k){this.g=x,this.h=k}function ie(x,k){if(q(k))throw Error("division by zero");if(q(x))return new se(S,S);if(L(x))return k=ie(H(x),k),new se(H(k.g),H(k.h));if(L(k))return k=ie(x,H(k)),new se(H(k.g),k.h);if(x.g.length>30){if(L(x)||L(k))throw Error("slowDivide_ only works with positive integers.");for(var A=T,M=k;M.l(x)<=0;)A=pe(A),M=pe(M);var D=re(A,1),F=re(M,1);for(M=re(M,2),A=re(A,2);!q(M);){var O=F.add(M);O.l(x)<=0&&(D=D.add(A),F=O),M=re(M,1),A=re(A,1)}return k=J(x,D.j(k)),new se(D,k)}for(D=S;x.l(k)>=0;){for(A=Math.max(1,Math.floor(x.m()/k.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=v(A),O=F.j(k);L(O)||O.l(x)>0;)A-=M,F=v(A),O=F.j(k);q(F)&&(F=T),D=D.add(F),x=J(x,O)}return new se(D,x)}n.B=function(x){return ie(this,x).h},n.and=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let M=0;M<k;M++)A[M]=this.i(M)&x.i(M);return new c(A,this.h&x.h)},n.or=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let M=0;M<k;M++)A[M]=this.i(M)|x.i(M);return new c(A,this.h|x.h)},n.xor=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let M=0;M<k;M++)A[M]=this.i(M)^x.i(M);return new c(A,this.h^x.h)};function pe(x){const k=x.g.length+1,A=[];for(let M=0;M<k;M++)A[M]=x.i(M)<<1|x.i(M-1)>>>31;return new c(A,x.h)}function re(x,k){const A=k>>5;k%=32;const M=x.g.length-A,D=[];for(let F=0;F<M;F++)D[F]=k>0?x.i(F+A)>>>k|x.i(F+A+1)<<32-k:x.i(F+A);return new c(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,WS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=b,ro=c}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YS,Fl,QS,Xc,Tp,XS,ZS,eE;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var w=0;w<p.length;++w){var _=p[w];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function i(p,w){if(w)e:{var _=s;p=p.split(".");for(var C=0;C<p.length-1;C++){var z=p[C];if(!(z in _))break e;_=_[z]}p=p[p.length-1],C=_[p],w=w(C),w!=C&&w!=null&&e(_,p,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(w){var _=[],C;for(C in w)Object.prototype.hasOwnProperty.call(w,C)&&_.push([C,w[C]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function m(p,w,_){return p.call.apply(p.bind,arguments)}function v(p,w,_){return v=m,v.apply(null,arguments)}function b(p,w){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),p.apply(this,C)}}function S(p,w){function _(){}_.prototype=w.prototype,p.Z=w.prototype,p.prototype=new _,p.prototype.constructor=p,p.Ob=function(C,z,K){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return w.prototype[z].apply(C,ae)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function N(p){const w=p.length;if(w>0){const _=Array(w);for(let C=0;C<w;C++)_[C]=p[C];return _}return[]}function q(p,w){for(let C=1;C<arguments.length;C++){const z=arguments[C];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=p.length||0;const K=z.length||0;p.length=_+K;for(let ae=0;ae<K;ae++)p[_+ae]=z[ae]}else p.push(z)}}class L{constructor(w,_){this.i=w,this.j=_,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function H(p){c.setTimeout(()=>{throw p},0)}function J(){var p=x;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class Z{constructor(){this.h=this.g=null}add(w,_){const C=se.get();C.set(w,_),this.h?this.h.next=C:this.g=C,this.h=C}}var se=new L(()=>new ie,p=>p.reset());class ie{constructor(){this.next=this.g=this.h=null}set(w,_){this.h=w,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,re=!1,x=new Z,k=()=>{const p=Promise.resolve(void 0);pe=()=>{p.then(A)}};function A(){for(var p;p=J();){try{p.h.call(p.g)}catch(_){H(_)}var w=se;w.j(p),w.h<100&&(w.h++,p.next=w.g,w.g=p)}re=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const _=()=>{};c.addEventListener("test",_,w),c.removeEventListener("test",_,w)}catch{}return p})();function O(p){return/^[\s\xa0]*$/.test(p)}function Be(p,w){D.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,w)}S(Be,D),Be.prototype.init=function(p,w){const _=this.type=p.type,C=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget,w||(_=="mouseover"?w=p.fromElement:_=="mouseout"&&(w=p.toElement)),this.relatedTarget=w,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(p,w,_,C,z){this.listener=p,this.proxy=null,this.src=w,this.type=_,this.capture=!!C,this.ha=z,this.key=++Y,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function qe(p,w,_){for(const C in p)w.call(_,p[C],C,p)}function We(p,w){for(const _ in p)w.call(void 0,p[_],_,p)}function V(p){const w={};for(const _ in p)w[_]=p[_];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,w){let _,C;for(let z=1;z<arguments.length;z++){C=arguments[z];for(_ in C)p[_]=C[_];for(let K=0;K<ee.length;K++)_=ee[K],Object.prototype.hasOwnProperty.call(C,_)&&(p[_]=C[_])}}function he(p){this.src=p,this.g={},this.h=0}he.prototype.add=function(p,w,_,C,z){const K=p.toString();p=this.g[K],p||(p=this.g[K]=[],this.h++);const ae=Ae(p,w,C,z);return ae>-1?(w=p[ae],_||(w.fa=!1)):(w=new le(w,this.src,K,!!C,z),w.fa=_,p.push(w)),w};function _e(p,w){const _=w.type;if(_ in p.g){var C=p.g[_],z=Array.prototype.indexOf.call(C,w,void 0),K;(K=z>=0)&&Array.prototype.splice.call(C,z,1),K&&(ye(w),p.g[_].length==0&&(delete p.g[_],p.h--))}}function Ae(p,w,_,C){for(let z=0;z<p.length;++z){const K=p[z];if(!K.da&&K.listener==w&&K.capture==!!_&&K.ha==C)return z}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),Dt={};function ut(p,w,_,C,z){if(Array.isArray(w)){for(let K=0;K<w.length;K++)ut(p,w[K],_,C,z);return null}return _=xa(_),p&&p[pt]?p.J(w,_,f(C)?!!C.capture:!1,z):mo(p,w,_,!1,C,z)}function mo(p,w,_,C,z,K){if(!w)throw Error("Invalid event type");const ae=f(z)?!!z.capture:!!z;let Ne=go(p);if(Ne||(p[Ve]=Ne=new he(p)),_=Ne.add(w,_,C,ae,K),_.proxy)return _;if(C=ii(),_.proxy=C,C.src=p,C.listener=_,p.addEventListener)F||(z=ae),z===void 0&&(z=!1),p.addEventListener(w.toString(),C,z);else if(p.attachEvent)p.attachEvent(ir(w.toString()),C);else if(p.addListener&&p.removeListener)p.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ii(){function p(_){return w.call(p.src,p.listener,_)}const w=Aa;return p}function ai(p,w,_,C,z){if(Array.isArray(w))for(var K=0;K<w.length;K++)ai(p,w[K],_,C,z);else C=f(C)?!!C.capture:!!C,_=xa(_),p&&p[pt]?(p=p.i,K=String(w).toString(),K in p.g&&(w=p.g[K],_=Ae(w,_,C,z),_>-1&&(ye(w[_]),Array.prototype.splice.call(w,_,1),w.length==0&&(delete p.g[K],p.h--)))):p&&(p=go(p))&&(w=p.g[w.toString()],p=-1,w&&(p=Ae(w,_,C,z)),(_=p>-1?w[p]:null)&&li(_))}function li(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[pt])_e(w.i,p);else{var _=p.type,C=p.proxy;w.removeEventListener?w.removeEventListener(_,C,p.capture):w.detachEvent?w.detachEvent(ir(_),C):w.addListener&&w.removeListener&&w.removeListener(C),(_=go(w))?(_e(_,p),_.h==0&&(_.src=null,w[Ve]=null)):ye(p)}}}function ir(p){return p in Dt?Dt[p]:Dt[p]="on"+p}function Aa(p,w){if(p.da)p=!0;else{w=new Be(w,this);const _=p.listener,C=p.ha||p.src;p.fa&&li(p),p=_.call(C,w)}return p}function go(p){return p=p[Ve],p instanceof he?p:null}var Na="__closure_events_fn_"+(Math.random()*1e9>>>0);function xa(p){return typeof p=="function"?p:(p[Na]||(p[Na]=function(w){return p.handleEvent(w)}),p[Na])}function _t(){M.call(this),this.i=new he(this),this.M=this,this.G=null}S(_t,M),_t.prototype[pt]=!0,_t.prototype.removeEventListener=function(p,w,_,C){ai(this,p,w,_,C)};function Mt(p,w){var _,C=p.G;if(C)for(_=[];C;C=C.G)_.push(C);if(p=p.M,C=w.type||w,typeof w=="string")w=new D(w,p);else if(w instanceof D)w.target=w.target||p;else{var z=w;w=new D(C,p),ue(w,z)}z=!0;let K,ae;if(_)for(ae=_.length-1;ae>=0;ae--)K=w.g=_[ae],z=fs(K,C,!0,w)&&z;if(K=w.g=p,z=fs(K,C,!0,w)&&z,z=fs(K,C,!1,w)&&z,_)for(ae=0;ae<_.length;ae++)K=w.g=_[ae],z=fs(K,C,!1,w)&&z}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var p=this.i;for(const w in p.g){const _=p.g[w];for(let C=0;C<_.length;C++)ye(_[C]);delete p.g[w],p.h--}}this.G=null},_t.prototype.J=function(p,w,_,C){return this.i.add(String(p),w,!1,_,C)},_t.prototype.K=function(p,w,_,C){return this.i.add(String(p),w,!0,_,C)};function fs(p,w,_,C){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();let z=!0;for(let K=0;K<w.length;++K){const ae=w[K];if(ae&&!ae.da&&ae.capture==_){const Ne=ae.listener,yt=ae.ha||ae.src;ae.fa&&_e(p.i,ae),z=Ne.call(yt,C)!==!1&&z}}return z&&!C.defaultPrevented}function sh(p,w){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(p,w||0)}function vu(p){p.g=sh(()=>{p.g=null,p.i&&(p.i=!1,vu(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class on extends M{constructor(w,_){super(),this.m=w,this.l=_,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:vu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vo(p){M.call(this),this.h=p,this.g={}}S(vo,M);var Oa=[];function Ra(p){qe(p.g,function(w,_){this.g.hasOwnProperty(_)&&li(w)},p),p.g={}}vo.prototype.N=function(){vo.Z.N.call(this),Ra(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=c.JSON.stringify,oh=c.JSON.parse,yu=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function bu(){}function wu(){}var qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){D.call(this,"d")}S(Gt,D);function Cn(){D.call(this,"c")}S(Cn,D);var vt={},Su=null;function ui(){return Su=Su||new _t}vt.Ia="serverreachability";function Eu(p){D.call(this,vt.Ia,p)}S(Eu,D);function ar(p){const w=ui();Mt(w,new Eu(w))}vt.STAT_EVENT="statevent";function yo(p,w){D.call(this,vt.STAT_EVENT,p),this.stat=w}S(yo,D);function Tt(p){const w=ui();Mt(w,new yo(w,p))}vt.Ja="timingevent";function lr(p,w){D.call(this,vt.Ja,p),this.size=w}S(lr,D);function ur(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},w)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function ih(p,w,_,C,z,K){p.info(function(){if(p.g)if(K){var ae="",Ne=K.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var yt=Ne[Qe].split("=");if(yt.length>1){const ct=yt[0];yt=yt[1];const xn=ct.split("_");ae=xn.length>=2&&xn[1]=="type"?ae+(ct+"="+yt+"&"):ae+(ct+"=redacted&")}}}else ae=null;else ae=K;return"XMLHTTP REQ ("+C+") [attempt "+z+"]: "+w+`
`+_+`
`+ae})}function _u(p,w,_,C,z,K,ae){p.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+z+"]: "+w+`
`+_+`
`+K+" "+ae})}function cr(p,w,_,C){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+ah(p,_)+(C?" "+C:"")})}function bo(p,w){p.info(function(){return"TIMEOUT: "+w})}zn.prototype.info=function(){};function ah(p,w){if(!p.g)return w;if(!w)return null;try{const K=JSON.parse(w);if(K){for(p=0;p<K.length;p++)if(Array.isArray(K[p])){var _=K[p];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var z=C[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ae=1;ae<C.length;ae++)C[ae]=""}}}}return ps(K)}catch{return w}}var wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Da;function So(){}S(So,bu),So.prototype.g=function(){return new XMLHttpRequest},Da=new So;function Lr(p){return encodeURIComponent(String(p))}function Tu(p){var w=1;p=p.split(":");const _=[];for(;w>0&&p.length;)_.push(p.shift()),w--;return p.length&&_.push(p.join(":")),_}function Gn(p,w,_,C){this.j=p,this.i=w,this.l=_,this.S=C||1,this.V=new vo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var It={},Vt={};function dr(p,w,_){p.M=1,p.A=Eo(kt(w)),p.u=_,p.R=!0,ci(p,null)}function ci(p,w){p.F=Date.now(),hr(p),p.B=kt(p.A);var _=p.B,C=p.S;Array.isArray(C)||(C=[String(C)]),pi(_.i,"t",C),p.C=0,_=p.j.L,p.h=new $n,p.g=Vu(p.j,_?w:null,!p.u),p.P>0&&(p.O=new on(v(p.Y,p,p.g),p.P)),w=p.V,_=p.g,C=p.ba;var z="readystatechange";Array.isArray(z)||(z&&(Oa[0]=z.toString()),z=Oa);for(let K=0;K<z.length;K++){const ae=ut(_,z[K],C||w.handleEvent,!1,w.h||w);if(!ae)break;w.g[ae.key]=ae}w=p.J?V(p.J):{},p.u?(p.v||(p.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,w)):(p.v="GET",p.g.ea(p.B,p.v,null,w)),ar(),ih(p.i,p.v,p.B,p.l,p.S,p.u)}Gn.prototype.ba=function(p){p=p.target;const w=this.O;w&&Kn(p)==3?w.j():this.Y(p)},Gn.prototype.Y=function(p){try{if(p==this.g)e:{const Ne=Kn(this.g),yt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||Ne!=4||yt==7||(yt==8||Qe<=0?ar(3):ar(2)),fr(this);var w=this.g.ca();this.X=w;var _=lh(this);if(this.o=w==200,_u(this.i,this.v,this.B,this.l,this.S,Ne,w),this.o){if(this.U&&!this.L){t:{if(this.g){var C,z=this.g;if((C=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(C)){var K=C;break t}}K=null}if(p=K)cr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pr(this,p);else{this.o=!1,this.m=3,Tt(12),gn(this),kn(this);break e}}if(this.R){p=!0;let ct;for(;!this.K&&this.C<_.length;)if(ct=Cu(this,_),ct==Vt){Ne==4&&(this.m=4,Tt(14),p=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==It){this.m=4,Tt(15),cr(this.i,this.l,_,"[Invalid Chunk]"),p=!1;break}else cr(this.i,this.l,ct,null),pr(this,ct);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,Tt(16),p=!1),this.o=this.o&&p,!p)cr(this.i,this.l,_,"[Invalid Chunked Response]"),gn(this),kn(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Wa(ae),ae.P=!0,Tt(11))}}else cr(this.i,this.l,_,null),pr(this,_);Ne==4&&gn(this),this.o&&!this.K&&(Ne==4?Mu(this.j,this):(this.o=!1,hr(this)))}else Fr(this.g),w==400&&_.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),gn(this),kn(this)}}}catch{}finally{}};function lh(p){if(!Iu(p))return p.g.la();const w=$t(p.g);if(w==="")return"";let _="";const C=w.length,z=Kn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return gn(p),kn(p),"";p.h.i=new c.TextDecoder}for(let K=0;K<C;K++)p.h.h=!0,_+=p.h.i.decode(w[K],{stream:!(z&&K==C-1)});return w.length=0,p.h.g+=_,p.C=0,p.h.g}function Iu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Cu(p,w){var _=p.C,C=w.indexOf(`
`,_);return C==-1?Vt:(_=Number(w.substring(_,C)),isNaN(_)?It:(C+=1,C+_>w.length?Vt:(w=w.slice(C,C+_),p.C=C+_,w)))}Gn.prototype.cancel=function(){this.K=!0,gn(this)};function hr(p){p.T=Date.now()+p.H,di(p,p.H)}function di(p,w){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ur(v(p.aa,p),w)}function fr(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Gn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(bo(this.i,this.B),this.M!=2&&(ar(),Tt(17)),gn(this),this.m=2,kn(this)):di(this,this.T-p)};function kn(p){p.j.I==0||p.K||Mu(p.j,p)}function gn(p){fr(p);var w=p.O;w&&typeof w.dispose=="function"&&w.dispose(),p.O=null,Ra(p.V),p.g&&(w=p.g,p.g=null,w.abort(),w.dispose())}function pr(p,w){try{var _=p.j;if(_.I!=0&&(_.g==p||gr(_.h,p))){if(!p.L&&gr(_.h,p)&&_.I==3){try{var C=_.Ba.g.parse(w)}catch{C=null}if(Array.isArray(C)&&C.length==3){var z=C;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<p.F)bi(_),Es(_);else break e;No(_),Tt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ur(v(_.Va,_),6e3));mr(_.h)<=1&&_.ta&&(_.ta=void 0)}else Er(_,11)}else if((p.L||_.g==p)&&bi(_),!O(w))for(z=_.Ba.g.parse(w),w=0;w<z.length;w++){let Qe=z[w];const ct=Qe[0];if(!(ct<=_.K))if(_.K=ct,Qe=Qe[1],_.I==2)if(Qe[0]=="c"){_.M=Qe[1],_.ba=Qe[2];const xn=Qe[3];xn!=null&&(_.ka=xn,_.j.info("VER="+_.ka));const jr=Qe[4];jr!=null&&(_.za=jr,_.j.info("SVER="+_.za));const Wn=Qe[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(C=1.5*Wn,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const Yn=p.g;if(Yn){const xo=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var K=C.h;K.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ua(K,K.h),K.h=null))}if(C.G){const wi=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(C.wa=wi,Ye(C.J,C.G,wi))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-p.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var ae=p;if(C.na=Fu(C,C.L?C.ba:null,C.W),ae.L){Fa(C.h,ae);var Ne=ae,yt=C.O;yt&&(Ne.H=yt),Ne.D&&(fr(Ne),hr(Ne)),C.g=ae}else Pu(C);_.i.length>0&&Sr(_)}else Qe[0]!="stop"&&Qe[0]!="close"||Er(_,7);else _.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Er(_,7):Ja(_):Qe[0]!="noop"&&_.l&&_.l.qa(Qe),_.A=0)}}ar(4)}catch{}}var Ct=class{constructor(p,w){this.g=p,this.map=w}};function Ma(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function La(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mr(p){return p.h?1:p.g?p.g.size:0}function gr(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function Ua(p,w){p.g?p.g.add(w):p.h=w}function Fa(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}Ma.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Va(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const _ of p.g.values())w=w.concat(_.G);return w}return N(p.i)}var ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hi(p,w){if(p){p=p.split("&");for(let _=0;_<p.length;_++){const C=p[_].indexOf("=");let z,K=null;C>=0?(z=p[_].substring(0,C),K=p[_].substring(C+1)):z=p[_],w(z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function vn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;p instanceof vn?(this.l=p.l,jt(this,p.j),this.o=p.o,this.g=p.g,ms(this,p.u),this.h=p.h,ja(this,Ou(p.i)),this.m=p.m):p&&(w=String(p).match(ku))?(this.l=!1,jt(this,w[1]||"",!0),this.o=vr(w[2]||""),this.g=vr(w[3]||"",!0),ms(this,w[4]),this.h=vr(w[5]||"",!0),ja(this,w[6]||"",!0),this.m=vr(w[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}vn.prototype.toString=function(){const p=[];var w=this.j;w&&p.push(_o(w,fi,!0),":");var _=this.g;return(_||w=="file")&&(p.push("//"),(w=this.o)&&p.push(_o(w,fi,!0),"@"),p.push(Lr(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&p.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&p.push("/"),p.push(_o(_,_.charAt(0)=="/"?Ha:Au,!0))),(_=this.i.toString())&&p.push("?",_),(_=this.m)&&p.push("#",_o(_,Nu)),p.join("")},vn.prototype.resolve=function(p){const w=kt(this);let _=!!p.j;_?jt(w,p.j):_=!!p.o,_?w.o=p.o:_=!!p.g,_?w.g=p.g:_=p.u!=null;var C=p.h;if(_)ms(w,p.u);else if(_=!!p.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var z=w.h.lastIndexOf("/");z!=-1&&(C=w.h.slice(0,z+1)+C)}if(z=C,z==".."||z==".")C="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){C=z.lastIndexOf("/",0)==0,z=z.split("/");const K=[];for(let ae=0;ae<z.length;){const Ne=z[ae++];Ne=="."?C&&ae==z.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&ae==z.length&&K.push("")):(K.push(Ne),C=!0)}C=K.join("/")}else C=z}return _?w.h=C:_=p.i.toString()!=="",_?ja(w,Ou(p.i)):_=!!p.m,_&&(w.m=p.m),w};function kt(p){return new vn(p)}function jt(p,w,_){p.j=_?vr(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function ms(p,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);p.u=w}else p.u=null}function ja(p,w,_){w instanceof vs?(p.i=w,mi(p.i,p.l)):(_||(w=_o(w,gs)),p.i=new vs(w,p.l))}function Ye(p,w,_){p.i.set(w,_)}function Eo(p){return Ye(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function vr(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function _o(p,w,_){return typeof p=="string"?(p=encodeURI(p).replace(w,yn),_&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function yn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var fi=/[#\/\?@]/g,Au=/[#\?:]/g,Ha=/[#\?]/g,gs=/[#\?@]/g,Nu=/#/g;function vs(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function un(p){p.g||(p.g=new Map,p.h=0,p.i&&hi(p.i,function(w,_){p.add(decodeURIComponent(w.replace(/\+/g," ")),_)}))}n=vs.prototype,n.add=function(p,w){un(this),this.i=null,p=ys(this,p);let _=this.g.get(p);return _||this.g.set(p,_=[]),_.push(w),this.h+=1,this};function xu(p,w){un(p),w=ys(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function qa(p,w){return un(p),w=ys(p,w),p.g.has(w)}n.forEach=function(p,w){un(this),this.g.forEach(function(_,C){_.forEach(function(z){p.call(w,z,C,this)},this)},this)};function za(p,w){un(p);let _=[];if(typeof w=="string")qa(p,w)&&(_=_.concat(p.g.get(ys(p,w))));else for(p=Array.from(p.g.values()),w=0;w<p.length;w++)_=_.concat(p[w]);return _}n.set=function(p,w){return un(this),this.i=null,p=ys(this,p),qa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},n.get=function(p,w){return p?(p=za(this,p),p.length>0?String(p[0]):w):w};function pi(p,w,_){xu(p,w),_.length>0&&(p.i=null,p.g.set(ys(p,w),N(_)),p.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(let C=0;C<w.length;C++){var _=w[C];const z=Lr(_);_=za(this,_);for(let K=0;K<_.length;K++){let ae=z;_[K]!==""&&(ae+="="+Lr(_[K])),p.push(ae)}}return this.i=p.join("&")};function Ou(p){const w=new vs;return w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),w}function ys(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function mi(p,w){w&&!p.j&&(un(p),p.i=null,p.g.forEach(function(_,C){const z=C.toLowerCase();C!=z&&(xu(this,C),pi(this,z,_))},p)),p.j=w}function Bn(p,w){const _=new zn;if(c.Image){const C=new Image;C.onload=b(An,_,"TestLoadImage: loaded",!0,w,C),C.onerror=b(An,_,"TestLoadImage: error",!1,w,C),C.onabort=b(An,_,"TestLoadImage: abort",!1,w,C),C.ontimeout=b(An,_,"TestLoadImage: timeout",!1,w,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=p}else w(!1)}function Ga(p,w){const _=new zn,C=new AbortController,z=setTimeout(()=>{C.abort(),An(_,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:C.signal}).then(K=>{clearTimeout(z),K.ok?An(_,"TestPingServer: ok",!0,w):An(_,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),An(_,"TestPingServer: error",!1,w)})}function An(p,w,_,C,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),C(_)}catch{}}function bs(){this.g=new yu}function yr(p){this.i=p.Sb||null,this.h=p.ab||!1}S(yr,bu),yr.prototype.g=function(){return new To(this.i,this.h)};function To(p,w){_t.call(this),this.H=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(To,_t),n=To.prototype,n.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=w,this.readyState=1,Jn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(w.body=p),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gi(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function gi(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?ws(this):Jn(this),this.readyState==3&&gi(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,ws(this))},n.Na=function(p){this.g&&(this.response=p,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Jn(p)}n.setRequestHeader=function(p,w){this.A.append(p,w)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var _=w.next();!_.done;)_=_.value,p.push(_[0]+": "+_[1]),_=w.next();return p.join(`\r
`)};function Jn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Nn(p){let w="";return qe(p,function(_,C){w+=C,w+=":",w+=_,w+=`\r
`}),w}function Io(p,w,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Nn(_),typeof p=="string"?_!=null&&Lr(_):Ye(p,w,_))}function et(p){_t.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(et,_t);var br=/^https?$/i,$a=["POST","PUT"];n=et.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,w,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Da.g(),this.g.onreadystatechange=T(v(this.Ca,this));try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(K){Co(this,K);return}if(p=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var z in C)_.set(z,C[z]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())_.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),z=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call($a,w,void 0)>=0)||C||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of _)this.g.setRequestHeader(K,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(K){Co(this,K)}};function Co(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.o=5,Ba(p),Ur(p)}function Ba(p){p.A||(p.A=!0,Mt(p,"complete"),Mt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Mt(this,"complete"),Mt(this,"abort"),Ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ko(this):this.Xa())},n.Xa=function(){ko(this)};function ko(p){if(p.h&&typeof l<"u"){if(p.v&&Kn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Mt(p,"readystatechange"),Kn(p)==4){p.h=!1;try{const K=p.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var _;if(!(_=w)){var C;if(C=K===0){let ae=String(p.D).match(ku)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),C=!br.test(ae?ae.toLowerCase():"")}_=C}if(_)Mt(p,"complete"),Mt(p,"success");else{p.o=6;try{var z=Kn(p)>2?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.ca()+"]",Ba(p)}}finally{Ur(p)}}}}function Ur(p,w){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const _=p.g;p.g=null,w||Mt(p,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),oh(w)}};function $t(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Fr(p){const w={};p=(p.g&&Kn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<p.length;C++){if(O(p[C]))continue;var _=Tu(p[C]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=w[z]||[];w[z]=K,K.push(_)}We(w,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(p,w,_){return _&&_.internalChannelParams&&_.internalChannelParams[p]||w}function Ss(p){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,p),this.Za=wr("retryDelaySeedMs",1e4,p),this.Ta=wr("forwardChannelMaxRetries",2,p),this.va=wr("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ma(p&&p.concurrentRequestLimit),this.Ba=new bs,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ss.prototype,n.ka=8,n.I=1,n.connect=function(p,w,_,C){Tt(0),this.W=p,this.H=w||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Fu(this,null,this.W),Sr(this)};function Ja(p){if(vi(p),p.I==3){var w=p.V++,_=kt(p.J);if(Ye(_,"SID",p.M),Ye(_,"RID",w),Ye(_,"TYPE","terminate"),Ao(p,_),w=new Gn(p,p.j,w),w.M=2,w.A=Eo(kt(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=w.A,_=!0),_||(w.g=Vu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),hr(w)}Uu(p)}function Es(p){p.g&&(Wa(p),p.g.cancel(),p.g=null)}function vi(p){Es(p),p.v&&(c.clearTimeout(p.v),p.v=null),bi(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Sr(p){if(!La(p.h)&&!p.m){p.m=!0;var w=p.Ea;pe||k(),re||(pe(),re=!0),x.add(w,p),p.D=0}}function yi(p,w){return mr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=w.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ur(v(p.Ea,p,w),Lu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const z=new Gn(this,this.j,p);let K=this.o;if(this.U&&(K?(K=V(K),ue(K,this.U)):K=this.U),this.u!==null||this.R||(z.J=K,K=null),this.S)e:{for(var w=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(w+=C,w>4096){w=_;break e}if(w===4096||_===this.i.length-1){w=_+1;break e}}w=1e3}else w=1e3;w=Ru(this,z,w),_=kt(this.J),Ye(_,"RID",p),Ye(_,"CVER",22),this.G&&Ye(_,"X-HTTP-Session-Id",this.G),Ao(this,_),K&&(this.R?w="headers="+Lr(Nn(K))+"&"+w:this.u&&Io(_,this.u,K)),Ua(this.h,z),this.Ra&&Ye(_,"TYPE","init"),this.S?(Ye(_,"$req",w),Ye(_,"SID","null"),z.U=!0,dr(z,_,null)):dr(z,_,w),this.I=2}}else this.I==3&&(p?Ka(this,p):this.i.length==0||La(this.h)||Ka(this))};function Ka(p,w){var _;w?_=w.l:_=p.V++;const C=kt(p.J);Ye(C,"SID",p.M),Ye(C,"RID",_),Ye(C,"AID",p.K),Ao(p,C),p.u&&p.o&&Io(C,p.u,p.o),_=new Gn(p,p.j,_,p.D+1),p.u===null&&(_.J=p.o),w&&(p.i=w.G.concat(p.i)),w=Ru(p,_,1e3),_.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ua(p.h,_),dr(_,C,w)}function Ao(p,w){p.H&&qe(p.H,function(_,C){Ye(w,C,_)}),p.l&&qe({},function(_,C){Ye(w,C,_)})}function Ru(p,w,_){_=Math.min(p.i.length,_);const C=p.l?v(p.l.Ka,p.l,p):null;e:{var z=p.i;let Ne=-1;for(;;){const yt=["count="+_];Ne==-1?_>0?(Ne=z[0].g,yt.push("ofs="+Ne)):Ne=0:yt.push("ofs="+Ne);let Qe=!0;for(let ct=0;ct<_;ct++){var K=z[ct].g;const xn=z[ct].map;if(K-=Ne,K<0)Ne=Math.max(0,z[ct].g-100),Qe=!1;else try{K="req"+K+"_"||"";try{var ae=xn instanceof Map?xn:Object.entries(xn);for(const[jr,Wn]of ae){let Yn=Wn;f(Wn)&&(Yn=ps(Wn)),yt.push(K+jr+"="+encodeURIComponent(Yn))}}catch(jr){throw yt.push(K+"type="+encodeURIComponent("_badmap")),jr}}catch{C&&C(xn)}}if(Qe){ae=yt.join("&");break e}}ae=void 0}return p=p.i.splice(0,_),w.G=p,ae}function Pu(p){if(!p.g&&!p.v){p.Y=1;var w=p.Da;pe||k(),re||(pe(),re=!0),x.add(w,p),p.A=0}}function No(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ur(v(p.Da,p),Lu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ur(v(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Es(this),Du(this))};function Wa(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function Du(p){p.g=new Gn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var w=kt(p.na);Ye(w,"RID","rpc"),Ye(w,"SID",p.M),Ye(w,"AID",p.K),Ye(w,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ye(w,"TO",p.ia),Ye(w,"TYPE","xmlhttp"),Ao(p,w),p.u&&p.o&&Io(w,p.u,p.o),p.O&&(p.g.H=p.O);var _=p.g;p=p.ba,_.M=1,_.A=Eo(kt(w)),_.u=null,_.R=!0,ci(_,p)}n.Va=function(){this.C!=null&&(this.C=null,Es(this),No(this),Tt(19))};function bi(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Mu(p,w){var _=null;if(p.g==w){bi(p),Wa(p),p.g=null;var C=2}else if(gr(p.h,w))_=w.G,Fa(p.h,w),C=1;else return;if(p.I!=0){if(w.o)if(C==1){_=w.u?w.u.length:0,w=Date.now()-w.F;var z=p.D;C=ui(),Mt(C,new lr(C,_)),Sr(p)}else Pu(p);else if(z=w.m,z==3||z==0&&w.X>0||!(C==1&&yi(p,w)||C==2&&No(p)))switch(_&&_.length>0&&(w=p.h,w.i=w.i.concat(_)),z){case 1:Er(p,5);break;case 4:Er(p,10);break;case 3:Er(p,6);break;default:Er(p,2)}}}function Lu(p,w){let _=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(_*=2),_*w}function Er(p,w){if(p.j.info("Error code "+w),w==2){var _=v(p.bb,p),C=p.Ua;const z=!C;C=new vn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||jt(C,"https"),Eo(C),z?Bn(C.toString(),_):Ga(C.toString(),_)}else Tt(2);p.I=0,p.l&&p.l.pa(w),Uu(p),vi(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Uu(p){if(p.I=0,p.ja=[],p.l){const w=Va(p.h);(w.length!=0||p.i.length!=0)&&(q(p.ja,w),q(p.ja,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.oa()}}function Fu(p,w,_){var C=_ instanceof vn?kt(_):new vn(_);if(C.g!="")w&&(C.g=w+"."+C.g),ms(C,C.u);else{var z=c.location;C=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;const K=new vn(null);C&&jt(K,C),w&&(K.g=w),z&&ms(K,z),_&&(K.h=_),C=K}return _=p.G,w=p.wa,_&&w&&Ye(C,_,w),Ye(C,"VER",p.ka),Ao(p,C),C}function Vu(p,w,_){if(w&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Aa&&!p.ma?new et(new yr({ab:_})):new et(p.ma),w.Fa(p.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}n=ju.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function _s(){}_s.prototype.g=function(p,w){return new an(p,w)};function an(p,w){_t.call(this),this.g=new Ss(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(p?p["X-WebChannel-Client-Profile"]=w.sa:p={"X-WebChannel-Client-Profile":w.sa}),this.g.U=p,(p=w&&w.Qb)&&!O(p)&&(this.g.u=p),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!O(w)&&(this.g.G=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new Vr(this)}S(an,_t),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ja(this.g)},an.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var _={};_.__data__=p,p=_}else this.v&&(_={},_.__data__=ps(p),p=_);w.i.push(new Ct(w.Ya++,p)),w.I==3&&Sr(w)},an.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,an.Z.N.call(this)};function Hu(p){Gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const _ in w){p=_;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}S(Hu,Gt);function qu(){Cn.call(this),this.status=1}S(qu,Cn);function Vr(p){this.g=p}S(Vr,ju),Vr.prototype.ra=function(){Mt(this.g,"a")},Vr.prototype.qa=function(p){Mt(this.g,new Hu(p))},Vr.prototype.pa=function(p){Mt(this.g,new qu)},Vr.prototype.oa=function(){Mt(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,eE=function(){return new _s},ZS=function(){return ui()},XS=vt,Tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,Xc=wo,Pa.COMPLETE="complete",QS=Pa,wu.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Fl=wu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,YS=et}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const B0="@firebase/firestore",J0="4.9.2";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ba="12.3.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qo=new tm("@firebase/firestore");function Yi(){return Qo.logLevel}function de(n,...e){if(Qo.logLevel<=Me.DEBUG){const t=e.map(sm);Qo.debug(`Firestore (${ba}): ${n}`,...t)}}function is(n,...e){if(Qo.logLevel<=Me.ERROR){const t=e.map(sm);Qo.error(`Firestore (${ba}): ${n}`,...t)}}function ca(n,...e){if(Qo.logLevel<=Me.WARN){const t=e.map(sm);Qo.warn(`Firestore (${ba}): ${n}`,...t)}}function sm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ee(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,tE(n,s,t)}function tE(n,e,t){let s=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw is(s),new Error(s)}function Ke(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||tE(e,i,s)}function Ce(n,e){return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class JA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KA{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const i=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new so;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new so,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new so)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new nE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class WA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new WA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const i=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=XA(40);for(let l=0;l<i.length;++l)s.length<20&&i[l]<t&&(s+=e.charAt(i[l]%62))}return s}}function Le(n,e){return n<e?-1:n>e?1:0}function Ip(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const i=n.charAt(s),l=e.charAt(s);if(i!==l)return hp(i)===hp(l)?Le(i,l):hp(i)?1:-1}return Le(n.length,e.length)}const ZA=55296,e1=57343;function hp(n){const e=n.charCodeAt(0);return e>=ZA&&e<=e1}function da(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const W0="__name__";class kr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const l=kr.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const s=kr.isNumericId(e),i=kr.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?kr.extractNumericId(e).compare(kr.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class ht extends kr{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const t1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends kr{construct(e,t,s){return new Qt(e,t,s)}static isValidIdentifier(e){return t1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W0}static keyField(){return new Qt([W0])}static fromServerFormat(e){const t=[];let s="",i=0;const l=()=>{if(s.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,i+=2}else f==="`"?(c=!c,i++):f!=="."||c?(s+=f,i++):(l(),i++)}if(l(),c)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n1(n,e,t){if(!t)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function r1(n,e,t,s){if(e===!0&&s===!0)throw new ge(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y0(n){if(!be.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function im(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(t){return t.constructor?t.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Ql(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=im(n);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!rE(n))throw new ge(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(i&&typeof c!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(oe.INVALID_ARGUMENT,t);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q0=-62135596800,X0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*X0);return new lt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Q0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new lt(0,0))}static max(){return new Te(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xl=-1;function s1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(s===1e9?new lt(t+1,0):new lt(t,s));return new io(i,be.empty(),e)}function o1(n){return new io(n.readTime,n.key,Xl)}class io{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new io(Te.min(),be.empty(),Xl)}static max(){return new io(Te.max(),be.empty(),Xl)}}function i1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function wa(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==a1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let i=0,l=0,c=!1;e.forEach((f=>{++i,f.next((()=>{++l,c&&l===i&&t()}),(m=>s(m)))})),c=!0,l===i&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((i=>i?ne.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,l)=>{s.push(t.call(this,i,l))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,i)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((b=>{c[v]=b,++f,f===l&&s(c)}),(b=>i(b)))}}))}static doWhile(e,t){return new ne(((s,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):s()};l()}))}}function u1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sa(n){return n.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const am=-1;function Ld(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function c1(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sE="";function d1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z0(e)),e=h1(n.get(t),e);return Z0(e)}function h1(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case sE:t+="";break;default:t+=l}}return t}function Z0(n){return n+sE+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ei(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ft{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,s,i,l){this.key=e,this.value=t,this.color=s??Yt.RED,this.left=i??Yt.EMPTY,this.right=l??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,l){return new Yt(e??this.key,t??this.value,s??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const l=s(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,s),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(n,e,t,s,i){return this}insert(n,e,t){return new Yt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ft{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new nr([])}unionWith(e){let t=new Ft(Qt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iE("Invalid base64 string: "+i):i}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let l=0;l<s.length;++l)i+=String.fromCharCode(s[l]);return i})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=f1.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aE="server_timestamp",lE="__type__",uE="__previous_value__",cE="__local_write_time__";function lm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[lE])==null?void 0:t.stringValue)===aE}function Ud(n){const e=n.mapValue.fields[uE];return lm(e)?Ud(e):e}function Zl(n){const e=ao(n.mapValue.fields[cE].timestampValue);return new lt(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p1{constructor(e,t,s,i,l,c,f,m,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=b}}const fd="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||fd}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dE="__type__",m1="__max__",Kc={mapValue:{}},hE="__vector__",pd="value";function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lm(n)?4:v1(n)?9007199254740991:g1(n)?10:11:Ee(28295,{value:n})}function Dr(n,e){if(n===e)return!0;const t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zl(n).isEqual(Zl(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const l=ao(s.timestampValue),c=ao(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return lo(s.bytesValue).isEqual(lo(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const l=St(s.doubleValue),c=St(i.doubleValue);return l===c?hd(l)===hd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return da(n.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return(function(s,i){const l=s.mapValue.fields||{},c=i.mapValue.fields||{};if(eb(l)!==eb(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Dr(l[f],c[f])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function tu(n,e){return(n.values||[]).find((t=>Dr(t,e)))!==void 0}function ha(n,e){if(n===e)return 0;const t=uo(n),s=uo(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(i,l){const c=St(i.integerValue||i.doubleValue),f=St(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return nb(n.timestampValue,e.timestampValue);case 4:return nb(Zl(n),Zl(e));case 5:return Ip(n.stringValue,e.stringValue);case 6:return(function(i,l){const c=lo(i),f=lo(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(i,l){const c=i.split("/"),f=l.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Le(c[m],f[m]);if(v!==0)return v}return Le(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,l){const c=Le(St(i.latitude),St(l.latitude));return c!==0?c:Le(St(i.longitude),St(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rb(n.arrayValue,e.arrayValue);case 10:return(function(i,l){var c,f,m,v;const b=i.fields||{},S=l.fields||{},T=(c=b[pd])==null?void 0:c.arrayValue,N=(f=S[pd])==null?void 0:f.arrayValue,q=Le(((m=T==null?void 0:T.values)==null?void 0:m.length)||0,((v=N==null?void 0:N.values)==null?void 0:v.length)||0);return q!==0?q:rb(T,N)})(n.mapValue,e.mapValue);case 11:return(function(i,l){if(i===Kc.mapValue&&l===Kc.mapValue)return 0;if(i===Kc.mapValue)return 1;if(l===Kc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const S=Ip(f[b],v[b]);if(S!==0)return S;const T=ha(c[f[b]],m[v[b]]);if(T!==0)return T}return Le(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function nb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=ao(n),s=ao(e),i=Le(t.seconds,s.seconds);return i!==0?i:Le(t.nanos,s.nanos)}function rb(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const l=ha(t[i],s[i]);if(l)return l}return Le(t.length,s.length)}function fa(n){return Cp(n)}function Cp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const t=ao(e);return`time(${t.seconds},${t.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return lo(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return be.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let t="[",s=!0;for(const i of e.values||[])s?s=!1:t+=",",t+=Cp(i);return t+"]"})(n.arrayValue):"mapValue"in n?(function(e){const t=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const l of t)i?i=!1:s+=",",s+=`${l}:${Cp(e.fields[l])}`;return s+"}"})(n.mapValue):Ee(61005,{value:n})}function Zc(n){switch(uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(n);return e?16+Zc(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(t){return(t.values||[]).reduce(((s,i)=>s+Zc(i)),0)})(n.arrayValue);case 10:case 11:return(function(t){let s=0;return ei(t.fields,((i,l)=>{s+=i.length+Zc(l)})),s})(n.mapValue);default:throw Ee(13486,{value:n})}}function kp(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function sb(n){return!!n&&"nullValue"in n}function ob(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ed(n){return!!n&&"mapValue"in n}function g1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[dE])==null?void 0:t.stringValue)===hE}function zl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ei(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=zl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zl(n.arrayValue.values[t]);return e}return{...n}}function v1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ed(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(t)}setAll(e){let t=Qt.emptyPath(),s={},i=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,i),s={},i=[],t=f.popLast()}c?s[f.lastSegment()]=zl(c):i.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,i)}delete(e){const t=this.field(e.popLast());ed(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];ed(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){ei(t,((i,l)=>e[i]=l));for(const i of s)delete e[i]}clone(){return new Fn(zl(this.value))}}function fE(n){const e=[];return ei(n.fields,((t,s)=>{const i=new Qt([t]);if(ed(s)){const l=fE(s.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)})),new nr(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nn{constructor(e,t,s,i,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,Te.min(),Te.min(),Te.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,i){return new nn(e,1,t,Te.min(),s,i,0)}static newNoDocument(e,t){return new nn(e,2,t,Te.min(),Te.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Te.min(),Te.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class md{constructor(e,t){this.position=e,this.inclusive=t}}function ib(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=ha(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function ab(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dr(n.position[t],e.position[t]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function y1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pE{}class Ut extends pE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new w1(e,t,s):t==="array-contains"?new _1(e,s):t==="in"?new T1(e,s):t==="not-in"?new I1(e,s):t==="array-contains-any"?new C1(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new S1(e,s):new E1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ha(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends pE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mr(e,t)}matches(e){return mE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mE(n){return n.op==="and"}function gE(n){return b1(n)&&mE(n)}function b1(n){for(const e of n.filters)if(e instanceof Mr)return!1;return!0}function Ap(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+fa(n.value);if(gE(n))return n.filters.map((e=>Ap(e))).join(",");{const e=n.filters.map((t=>Ap(t))).join(",");return`${n.op}(${e})`}}function vE(n,e){return n instanceof Ut?(function(t,s){return s instanceof Ut&&t.op===s.op&&t.field.isEqual(s.field)&&Dr(t.value,s.value)})(n,e):n instanceof Mr?(function(t,s){return s instanceof Mr&&t.op===s.op&&t.filters.length===s.filters.length?t.filters.reduce(((i,l,c)=>i&&vE(l,s.filters[c])),!0):!1})(n,e):void Ee(19439)}function yE(n){return n instanceof Ut?(function(e){return`${e.field.canonicalString()} ${e.op} ${fa(e.value)}`})(n):n instanceof Mr?(function(e){return e.op.toString()+" {"+e.getFilters().map(yE).join(" ,")+"}"})(n):"Filter"}class w1 extends Ut{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class S1 extends Ut{constructor(e,t){super(e,"in",t),this.keys=bE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class E1 extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=bE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class _1 extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return um(t)&&tu(t.arrayValue,this.value)}}class T1 extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class I1 extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class C1 extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>tu(this.value.arrayValue,s)))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k1{constructor(e,t=null,s=[],i=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function lb(n,e=null,t=[],s=[],i=null,l=null,c=null){return new k1(n,e,t,s,i,l,c)}function cm(n){const e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ap(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),e.Te=t}return e.Te}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ab(n.startAt,e.startAt)&&ab(n.endAt,e.endAt)}function Np(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fd{constructor(e,t=null,s=[],i=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function A1(n,e,t,s,i,l,c,f){return new Fd(n,e,t,s,i,l,c,f)}function hm(n){return new Fd(n)}function ub(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function N1(n){return n.collectionGroup!==null}function Gl(n){const e=Ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ft(Qt.comparator);return i.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new gd(i,s))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new gd(Qt.keyField(),s))}return e.Ie}function Ar(n){const e=Ce(n);return e.Ee||(e.Ee=x1(e,Gl(n))),e.Ee}function x1(n,e){if(n.limitType==="F")return lb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new gd(i.field,l)}));const t=n.endAt?new md(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new md(n.startAt.position,n.startAt.inclusive):null;return lb(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function xp(n,e,t){return new Fd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vd(n,e){return dm(Ar(n),Ar(e))&&n.limitType===e.limitType}function wE(n){return`${cm(Ar(n))}|lt:${n.limitType}`}function Qi(n){return`Query(target=${(function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((s=>yE(s))).join(", ")}]`),Ld(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fa(s))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fa(s))).join(",")),`Target(${t})`})(Ar(n))}; limitType=${n.limitType})`}function jd(n,e){return e.isFoundDocument()&&(function(t,s){const i=s.key.path;return t.collectionGroup!==null?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)})(n,e)&&(function(t,s){for(const i of Gl(t))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(t,s){for(const i of t.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(t,s){return!(t.startAt&&!(function(i,l,c){const f=ib(i,l,c);return i.inclusive?f<=0:f<0})(t.startAt,Gl(t),s)||t.endAt&&!(function(i,l,c){const f=ib(i,l,c);return i.inclusive?f>=0:f>0})(t.endAt,Gl(t),s))})(n,e)}function O1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SE(n){return(e,t)=>{let s=!1;for(const i of Gl(n)){const l=R1(i,e,t);if(l!==0)return l;s=s||i.field.isKeyField()}return 0}}function R1(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(i,l,c){const f=l.data.field(i),m=c.data.field(i);return f!==null&&m!==null?ha(f,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:n.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ti{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,l]of s)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,s)=>{for(const[i,l]of s)e(i,l)}))}isEmpty(){return oE(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P1=new ft(be.comparator);function as(){return P1}const EE=new ft(be.comparator);function Vl(...n){let e=EE;for(const t of n)e=e.insert(t.key,t);return e}function _E(n){let e=EE;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Jo(){return $l()}function TE(){return $l()}function $l(){return new ti((n=>n.toString()),((n,e)=>n.isEqual(e)))}const D1=new ft(be.comparator),M1=new Ft(be.comparator);function Ue(...n){let e=M1;for(const t of n)e=e.add(t);return e}const L1=new Ft(Le);function U1(){return L1}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function IE(n){return{integerValue:""+n}}function F1(n,e){return c1(e)?IE(e):fm(n,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hd{constructor(){this._=void 0}}function V1(n,e,t){return n instanceof vd?(function(s,i){const l={fields:{[lE]:{stringValue:aE},[cE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&lm(i)&&(i=Ud(i)),i&&(l.fields[uE]=i),{mapValue:l}})(t,e):n instanceof nu?kE(n,e):n instanceof ru?AE(n,e):(function(s,i){const l=CE(s,i),c=cb(l)+cb(s.Ae);return kp(l)&&kp(s.Ae)?IE(c):fm(s.serializer,c)})(n,e)}function j1(n,e,t){return n instanceof nu?kE(n,e):n instanceof ru?AE(n,e):t}function CE(n,e){return n instanceof yd?(function(t){return kp(t)||(function(s){return!!s&&"doubleValue"in s})(t)})(e)?e:{integerValue:0}:null}class vd extends Hd{}class nu extends Hd{constructor(e){super(),this.elements=e}}function kE(n,e){const t=NE(e);for(const s of n.elements)t.some((i=>Dr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class ru extends Hd{constructor(e){super(),this.elements=e}}function AE(n,e){let t=NE(e);for(const s of n.elements)t=t.filter((i=>!Dr(i,s)));return{arrayValue:{values:t}}}class yd extends Hd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cb(n){return St(n.integerValue||n.doubleValue)}function NE(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function H1(n,e){return n.field.isEqual(e.field)&&(function(t,s){return t instanceof nu&&s instanceof nu||t instanceof ru&&s instanceof ru?da(t.elements,s.elements,Dr):t instanceof yd&&s instanceof yd?Dr(t.Ae,s.Ae):t instanceof vd&&s instanceof vd})(n.transform,e.transform)}class q1{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qd{}function xE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RE(n.key,ss.none()):new cu(n.key,n.data,ss.none());{const t=n.data,s=Fn.empty();let i=new Ft(Qt.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),i=i.add(l)}return new ni(n.key,s,new nr(i.toArray()),ss.none())}}function z1(n,e,t){n instanceof cu?(function(s,i,l){const c=s.value.clone(),f=hb(s.fieldTransforms,i,l.transformResults);c.setAll(f),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof ni?(function(s,i,l){if(!td(s.precondition,i))return void i.convertToUnknownDocument(l.version);const c=hb(s.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(OE(s)),f.setAll(c),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Bl(n,e,t,s){return n instanceof cu?(function(i,l,c,f){if(!td(i.precondition,l))return c;const m=i.value.clone(),v=fb(i.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ni?(function(i,l,c,f){if(!td(i.precondition,l))return c;const m=fb(i.fieldTransforms,f,l),v=l.data;return v.setAll(OE(i)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(i,l,c){return td(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function G1(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),l=CE(s.transform,i||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,l))}return t||null}function db(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(t,s){return t===void 0&&s===void 0||!(!t||!s)&&da(t,s,((i,l)=>H1(i,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cu extends qd{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends qd{constructor(e,t,s,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function OE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function hb(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,f=e.data.field(l.field);s.set(l.field,j1(c,f,t[i]))}return s}function fb(n,e,t){const s=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);s.set(i.field,V1(l,c,e))}return s}class RE extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $1 extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class B1{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&z1(l,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=TE();return this.mutations.forEach((i=>{const l=e.get(i.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(i.key)?null:f;const m=xE(c,f);m!==null&&s.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,((t,s)=>db(t,s)))&&da(this.baseMutations,e.baseMutations,((t,s)=>db(t,s)))}}class pm{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return D1})();const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,s[c].version);return new pm(e,t,s,i)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rt,je;function W1(n){switch(n){case oe.OK:return Ee(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function PE(n){if(n===void 0)return is("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Rt.OK:return oe.OK;case Rt.CANCELLED:return oe.CANCELLED;case Rt.UNKNOWN:return oe.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return oe.INTERNAL;case Rt.UNAVAILABLE:return oe.UNAVAILABLE;case Rt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Rt.NOT_FOUND:return oe.NOT_FOUND;case Rt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Rt.ABORTED:return oe.ABORTED;case Rt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Rt.DATA_LOSS:return oe.DATA_LOSS;default:return Ee(39323,{code:n})}}(je=Rt||(Rt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y1(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q1=new ro([4294967295,4294967295],0);function pb(n){const e=Y1().encode(n),t=new WS;return t.update(e),new Uint8Array(t.digest())}function mb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ro([t,s],0),new ro([i,l],0)]}class mm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new jl(`Invalid padding: ${t}`);if(s<0)throw new jl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new jl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(ro.fromNumber(s)));return i.compare(Q1)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pb(e),[s,i]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new mm(l,i,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=pb(e),[s,i]=mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zd{constructor(e,t,s,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zd(Te.min(),i,new ft(Le),as(),Ue())}}class du{constructor(e,t,s,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,Ue(),Ue(),Ue())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nd{constructor(e,t,s,i){this.be=e,this.removedTargetIds=t,this.key=s,this.De=i}}class DE{constructor(e,t){this.targetId=e,this.Ce=t}}class ME{constructor(e,t,s=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class gb{constructor(){this.ve=0,this.Fe=vb(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),s=Ue();return this.Fe.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Ee(38017,{changeType:l})}})),new du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=vb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X1{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=Wc(),this.He=Wc(),this.Ye=new ft(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const l=i.target;if(Np(l))if(s===0){const c=new be(l.path);this.et(t,c,nn.newNoDocument(c,Te.min()))}else Ke(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:l=0}=t;let c,f;try{c=lo(s).toUint8Array()}catch(m){if(m instanceof iE)return ca("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new mm(c,i,l)}catch(m){return ca(m instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Np(f.target)){const m=new be(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,nn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ue();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const i=new zd(e,t,this.Ye,this.je,s);return this.je=as(),this.Je=Wc(),this.He=Wc(),this.Ye=new ft(Le),i}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wc(){return new ft(be.comparator)}function vb(){return new ft(be.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},eN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tN={and:"AND",or:"OR"};class nN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Op(n,e){return n.useProto3Json||Ld(e)?e:{value:e}}function bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rN(n,e){return bd(n,e.toTimestamp())}function Nr(n){return Ke(!!n,49232),Te.fromTimestamp((function(e){const t=ao(e);return new lt(t.seconds,t.nanos)})(n))}function gm(n,e){return Rp(n,e).canonicalString()}function Rp(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UE(n){const e=ht.fromString(n);return Ke(qE(e),10190,{key:e.toString()}),e}function Pp(n,e){return gm(n.databaseId,e.path)}function fp(n,e){const t=UE(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(VE(t))}function FE(n,e){return gm(n.databaseId,e)}function sN(n){const e=UE(n);return e.length===4?ht.emptyPath():VE(e)}function Dp(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VE(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yb(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function oN(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Ke(v===void 0||typeof v=="string",58123),Xt.fromBase64String(v||"")):(Ke(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Xt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?oe.UNKNOWN:PE(m.code);return new ge(v,m.message||"")})(c);t=new ME(s,i,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=fp(n,s.document.name),l=Nr(s.document.updateTime),c=s.document.createTime?Nr(s.document.createTime):Te.min(),f=new Fn({mapValue:{fields:s.document.fields}}),m=nn.newFoundDocument(i,l,c,f),v=s.targetIds||[],b=s.removedTargetIds||[];t=new nd(v,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=fp(n,s.document),l=s.readTime?Nr(s.readTime):Te.min(),c=nn.newNoDocument(i,l),f=s.removedTargetIds||[];t=new nd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=fp(n,s.document),l=s.removedTargetIds||[];t=new nd([],l,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:l}=s,c=new K1(i,l),f=s.targetId;t=new DE(f,c)}}return t}function iN(n,e){let t;if(e instanceof cu)t={update:yb(n,e.key,e.value)};else if(e instanceof RE)t={delete:Pp(n,e.key)};else if(e instanceof ni)t={update:yb(n,e.key,e.data),updateMask:mN(e.fieldMask)};else{if(!(e instanceof $1))return Ee(16599,{Vt:e.type});t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(i,l){const c=l.transform;if(c instanceof vd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof nu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ru)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ee(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:rN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ee(27497)})(n,e.precondition)),t}function aN(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(s,i){let l=s.updateTime?Nr(s.updateTime):Nr(i);return l.isEqual(Te.min())&&(l=Nr(i)),new q1(l,s.transformResults||[])})(t,e)))):[]}function lN(n,e){return{documents:[FE(n,e.path)]}}function uN(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=FE(n,i);const l=(function(m){if(m.length!==0)return HE(Mr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(b){return{field:Xi(b.field),direction:hN(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Op(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function cN(n){let e=sN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Ke(s===1,65062);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(b){const S=jE(b);return S instanceof Mr&&gE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((S=>(function(T){return new gd(Zi(T.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(b){let S;return S=typeof b=="object"?b.value:b,Ld(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(b){const S=!!b.before,T=b.values||[];return new md(T,S)})(t.startAt));let v=null;return t.endAt&&(v=(function(b){const S=!b.before,T=b.values||[];return new md(T,S)})(t.endAt)),A1(e,i,c,l,f,"F",m,v)}function dN(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jE(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zi(e.unaryFilter.field);return Ut.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Zi(e.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zi(e.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Zi(e.unaryFilter.field);return Ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ut.create(Zi(e.fieldFilter.field),(function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Mr.create(e.compositeFilter.filters.map((t=>jE(t))),(function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(e.compositeFilter.op))})(n):Ee(30097,{filter:n})}function hN(n){return Z1[n]}function fN(n){return eN[n]}function pN(n){return tN[n]}function Xi(n){return{fieldPath:n.canonicalString()}}function Zi(n){return Qt.fromServerFormat(n.fieldPath)}function HE(n){return n instanceof Ut?(function(e){if(e.op==="=="){if(ob(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NAN"}};if(sb(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ob(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NAN"}};if(sb(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(e.field),op:fN(e.op),value:e.value}}})(n):n instanceof Mr?(function(e){const t=e.getFilters().map((s=>HE(s)));return t.length===1?t[0]:{compositeFilter:{op:pN(e.op),filters:t}}})(n):Ee(54877,{filter:n})}function mN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xs{constructor(e,t,s,i,l=Te.min(),c=Te.min(),f=Xt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gN{constructor(e){this.yt=e}}function vN(n){const e=cN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yN{constructor(){this.Cn=new bN}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(io.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(io.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class bN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new Ft(ht.comparator),l=!i.has(s);return this.index[t]=i.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ft(ht.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(zE,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wb="LruGarbageCollector",wN=1048576;function Sb([n,e],[t,s]){const i=Le(n,t);return i===0?Le(e,s):i}class SN{constructor(e){this.Ir=e,this.buffer=new Ft(Sb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Sb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(wb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sa(t)?de(wb,"Ignoring IndexedDB error during garbage collection: ",t):await wa(t)}await this.Vr(3e5)}))}}class _N{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Md.ce);const s=new SN(t);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(bb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,i,l,c,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i)))).next((S=>(s=S,f=Date.now(),this.removeTargets(e,s,t)))).next((S=>(l=S,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(v=Date.now(),Yi()<=Me.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${i} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${S} documents in `+(v-m)+`ms
Total Duration: ${v-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:S}))))}}function TN(n,e){return new _N(n,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IN{constructor(){this.changes=new ti((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kN{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&Bl(s.mutation,i,nr.empty(),lt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ue()){const i=Jo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((l=>{let c=Vl();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Jo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ue())))}populateOverlays(e,t,s){const i=[];return s.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,i){let l=as();const c=$l(),f=(function(){return $l()})();return t.forEach(((m,v)=>{const b=s.get(v.key);i.has(v.key)&&(b===void 0||b.mutation instanceof ni)?l=l.insert(v.key,v):b!==void 0?(c.set(v.key,b.mutation.getFieldMask()),Bl(b.mutation,v,b.mutation.getFieldMask(),lt.now())):c.set(v.key,nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,b)=>c.set(v,b))),t.forEach(((v,b)=>f.set(v,new CN(b,c.get(v)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=$l();let i=new ft(((c,f)=>c-f)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let b=s.get(m)||nr.empty();b=f.applyToLocalView(v,b),s.set(m,b);const S=(i.get(f.batchId)||Ue()).add(m);i=i.insert(f.batchId,S)}))})).next((()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,S=TE();b.forEach((T=>{if(!l.has(T)){const N=xE(t.get(T),s.get(T));N!==null&&S.set(T,N),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(l){return be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):N1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-l.size):ne.resolve(Jo());let f=Xl,m=l;return c.next((v=>ne.forEach(v,((b,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{m=m.insert(b,T)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Ue()))).next((b=>({batchId:f,changes:_E(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let i=Vl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const l=t.collectionGroup;let c=Vl();return this.indexManager.getCollectionParents(e,l).next((f=>ne.forEach(f,(m=>{const v=(function(b,S){return new Fd(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,i).next((b=>{b.forEach(((S,T)=>{c=c.insert(S,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,i)))).next((c=>{l.forEach(((m,v)=>{const b=v.getKey();c.get(b)===null&&(c=c.insert(b,nn.newInvalidDocument(b)))}));let f=Vl();return c.forEach(((m,v)=>{const b=l.get(m);b!==void 0&&Bl(b.mutation,v,nr.empty(),lt.now()),jd(t,v)&&(f=f.insert(m,v))})),f}))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Nr(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:vN(s.bundledQuery),readTime:Nr(s.readTime)}})(t)),ne.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NN{constructor(){this.overlays=new ft(be.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Jo();return ne.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&s.set(i,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,l)=>{this.St(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const i=Jo(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>s&&i.set(m.getKey(),m)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let l=new ft(((v,b)=>v-b));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let b=l.get(v.largestBatchId);b===null&&(b=Jo(),l=l.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Jo(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,b)=>f.set(v,b))),!(f.size()>=i)););return ne.resolve(f)}St(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new J1(t,s));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xN{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vm{constructor(){this.Qr=new Ft(qt.$r),this.Ur=new Ft(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new qt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new ht([])),s=new qt(t,e),i=new qt(t,e+1),l=[];return this.Ur.forEachInRange([s,i],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ht([])),s=new qt(t,e),i=new qt(t,e+1);let l=Ue();return this.Ur.forEachInRange([s,i],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ON{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(qt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new B1(l,t,s,i);this.mutationQueue.push(c);for(const f of i)this.Zr=this.Zr.add(new qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.ei(s),l=i<0?0:i;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?am:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,i],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ft(Le);return t.forEach((i=>{const l=new qt(i,0),c=new qt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new qt(new be(l),0);let f=new Ft(Le);return this.Zr.forEachWhile((m=>{const v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.Yr)),!0)}),c),ne.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(i=>{const l=new qt(i.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new qt(t,0),i=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RN{constructor(e){this.ri=e,this.docs=(function(){return new ft(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),l=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=as();return t.forEach((i=>{const l=this.docs.get(i);s=s.insert(i,l?l.document.mutableCopy():nn.newInvalidDocument(i))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let l=as();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||i1(o1(b),s)<=0||(i.has(b.key)||jd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,i){Ee(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new PN(this)}getSize(e){return ne.resolve(this.size)}}class PN extends IN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DN{constructor(e){this.persistence=e,this.si=new ti((t=>cm(t)),dm),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new vm,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,t){return this.si.forEach(((s,i)=>t(i))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let i=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),ne.waitFor(l).next((()=>i))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((c=>{l.push(i.markPotentiallyOrphaned(e,c))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GE{constructor(e,t){this.ui={},this.overlays={},this.ci=new Md(0),this.li=!1,this.li=!0,this.hi=new xN,this.referenceDelegate=e(this),this.Pi=new DN(this),this.indexManager=new yN,this.remoteDocumentCache=(function(s){return new RN(s)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gN(t),this.Ii=new AN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ON(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const i=new MN(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((l=>this.referenceDelegate.di(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class MN extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Ri=new vm,this.Vi=null}static mi(e){return new ym(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const i=be.fromPath(s);return this.gi(e,i).next((l=>{l||t.removeEntry(i,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.pi=new ti((s=>d1(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=TN(this,t)}static mi(e,t){return new wd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,i)=>this.br(e,s,i).next((l=>l?ne.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Te.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zc(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ne.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bm{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=i}static As(e,t){let s=Ue(),i=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new bm(e,t.fromCache,s,i)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ak()?8:u1(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,i,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new LN;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,i){return s.documentReadCount<this.fs?(Yi()<=Me.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Qi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Yi()<=Me.DEBUG&&de("QueryEngine","Query:",Qi(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Yi()<=Me.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Qi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(t))):ne.resolve())}ys(e,t){if(ub(t))return ne.resolve(null);let s=Ar(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),s=Ar(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const v=this.Ds(t,f);return this.Cs(t,v,c,m.readTime)?this.ys(e,xp(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ws(e,t,s,i){return ub(t)||i.isEqual(Te.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,i)?ne.resolve(null):(Yi()<=Me.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(t)),this.vs(e,c,t,s1(i,Xl)).next((f=>f)))}))}Ds(e,t){let s=new Ft(SE(e));return t.forEach(((i,l)=>{jd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ss(e,t,s){return Yi()<=Me.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Qi(t)),this.ps.getDocumentsMatchingQuery(e,t,io.min(),s)}vs(e,t,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wm="LocalStore",FN=3e8;class VN{constructor(e,t,s,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ft(Le),this.xs=new ti((l=>cm(l)),dm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function jN(n,e,t,s){return new VN(n,e,t,s)}async function $E(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((l=>(i=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let m=Ue();for(const v of i){c.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of l){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(s,m).next((v=>({Ls:v,removedBatchIds:c,addedBatchIds:f})))}))}))}function HN(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,m,v){const b=m.batch,S=b.keys();let T=ne.resolve();return S.forEach((N=>{T=T.next((()=>v.getEntry(f,N))).next((q=>{const L=m.docVersions.get(N);Ke(L!==null,48541),q.version.compareTo(L)<0&&(b.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))}))})),T.next((()=>c.mutationQueue.removeMutationBatch(f,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let f=Ue();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function BE(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qN(n,e){const t=Ce(n),s=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const f=[];e.targetChanges.forEach(((b,S)=>{const T=i.get(S);if(!T)return;f.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,S))));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?N=N.withResumeToken(Xt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,s)),i=i.insert(S,N),(function(q,L,H){return q.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=FN?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,N,b)&&f.push(t.Pi.updateTargetData(l,N))}));let m=as(),v=Ue();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),f.push(zN(l,c,e.documentUpdates).next((b=>{m=b.ks,v=b.qs}))),!s.isEqual(Te.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(b)}return ne.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.Ms=i,l)))}function zN(n,e,t){let s=Ue(),i=Ue();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=as();return t.forEach(((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):de(wm,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)})),{ks:c,qs:i}}))}function GN(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=am),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function $N(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.Pi.getTargetData(s,e).next((l=>l?(i=l,ne.resolve(i)):t.Pi.allocateTargetId(s).next((c=>(i=new Xs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Mp(n,e,t){const s=Ce(n),i=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Sa(c))throw c;de(wm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Eb(n,e,t){const s=Ce(n);let i=Te.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,v){const b=Ce(f),S=b.xs.get(v);return S!==void 0?ne.resolve(b.Ms.get(S)):b.Pi.getTargetData(m,v)})(s,c,Ar(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?i:Te.min(),t?l:Ue()))).next((f=>(BN(s,O1(e),f),{documents:f,Qs:l})))))}function BN(n,e,t){let s=n.Os.get(e)||Te.min();t.forEach(((i,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class _b{constructor(){this.activeTargetIds=U1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JN{constructor(){this.Mo=new _b,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _b,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KN{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tb="ConnectivityMonitor";class Ib{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Tb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Tb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Yc=null;function Lp(){return Yc===null?Yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yc++,"0x"+Yc.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pp="RestConnection",WN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===fd?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,t,s,i,l){const c=Lp(),f=this.zo(e,t.toUriEncodedString());de(pp,`Sending RPC '${e}' ${c}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,l);const{host:v}=new URL(f),b=va(v);return this.Jo(e,f,m,s,b).then((S=>(de(pp,`Received RPC '${e}' ${c}: `,S),S)),(S=>{throw ca(pp,`RPC '${e}' ${c} failed with error: `,S,"url: ",f,"request:",s),S}))}Ho(e,t,s,i,l,c){return this.Go(e,t,s,i,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,l)=>e[l]=i)),s&&s.headers.forEach(((i,l)=>e[l]=i))}zo(e,t){const s=WN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const en="WebChannelConnection";class XN extends YN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,i,l){const c=Lp();return new Promise(((f,m)=>{const v=new YS;v.setWithCredentials(!0),v.listenOnce(QS.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Xc.NO_ERROR:const S=v.getResponseJson();de(en,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),f(S);break;case Xc.TIMEOUT:de(en,`RPC '${e}' ${c} timed out`),m(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const T=v.getStatus();if(de(en,`RPC '${e}' ${c} failed with status:`,T,"response text:",v.getResponseText()),T>0){let N=v.getResponseJson();Array.isArray(N)&&(N=N[0]);const q=N==null?void 0:N.error;if(q&&q.status&&q.message){const L=(function(H){const J=H.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(J)>=0?J:oe.UNKNOWN})(q.status);m(new ge(L,q.message))}else m(new ge(oe.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{de(en,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(i);de(en,`RPC '${e}' ${c} sending request:`,i),v.send(t,"POST",b,s,15)}))}T_(e,t,s){const i=Lp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=eE(),f=ZS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const b=l.join("");de(en,`Creating RPC '${e}' stream ${i}: ${b}`,m);const S=c.createWebChannel(b,m);this.I_(S);let T=!1,N=!1;const q=new QN({Yo:H=>{N?de(en,`Not sending because RPC '${e}' stream ${i} is closed:`,H):(T||(de(en,`Opening RPC '${e}' stream ${i} transport.`),S.open(),T=!0),de(en,`RPC '${e}' stream ${i} sending:`,H),S.send(H))},Zo:()=>S.close()}),L=(H,J,Z)=>{H.listen(J,(se=>{try{Z(se)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return L(S,Fl.EventType.OPEN,(()=>{N||(de(en,`RPC '${e}' stream ${i} transport opened.`),q.o_())})),L(S,Fl.EventType.CLOSE,(()=>{N||(N=!0,de(en,`RPC '${e}' stream ${i} transport closed`),q.a_(),this.E_(S))})),L(S,Fl.EventType.ERROR,(H=>{N||(N=!0,ca(en,`RPC '${e}' stream ${i} transport errored. Name:`,H.name,"Message:",H.message),q.a_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))})),L(S,Fl.EventType.MESSAGE,(H=>{var J;if(!N){const Z=H.data[0];Ke(!!Z,16349);const se=Z,ie=(se==null?void 0:se.error)||((J=se[0])==null?void 0:J.error);if(ie){de(en,`RPC '${e}' stream ${i} received error:`,ie);const pe=ie.status;let re=(function(k){const A=Rt[k];if(A!==void 0)return PE(A)})(pe),x=ie.message;re===void 0&&(re=oe.INTERNAL,x="Unknown error status: "+pe+" with message "+ie.message),N=!0,q.a_(new ge(re,x)),S.close()}else de(en,`RPC '${e}' stream ${i} received:`,Z),q.u_(Z)}})),L(f,XS.STAT_EVENT,(H=>{H.stat===Tp.PROXY?de(en,`RPC '${e}' stream ${i} detected buffering proxy`):H.stat===Tp.NOPROXY&&de(en,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mp(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gd(n){return new nN(n,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JE{constructor(e,t,s=1e3,i=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=i,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cb="PersistentStream";class KE{constructor(e,t,s,i,l,c,f,m){this.Mi=e,this.S_=s,this.b_=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new ge(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZN extends KE{constructor(e,t,s,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oN(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Te.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Te.min():l.readTime?Nr(l.readTime):Te.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Dp(this.serializer),t.addTarget=(function(i,l){let c;const f=l.target;if(c=Np(f)?{documents:lN(i,f)}:{query:uN(i,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=LE(i,l.resumeToken);const m=Op(i,l.expectedCount);m!==null&&(c.expectedCount=m)}else if(l.snapshotVersion.compareTo(Te.min())>0){c.readTime=bd(i,l.snapshotVersion.toTimestamp());const m=Op(i,l.expectedCount);m!==null&&(c.expectedCount=m)}return c})(this.serializer,e);const s=dN(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Dp(this.serializer),t.removeTarget=e,this.q_(t)}}class ex extends KE{constructor(e,t,s,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aN(e.writeResults,e.commitTime),s=Nr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Dp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>iN(this.serializer,s)))};this.q_(t)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tx{}class nx extends tx{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Rp(t,s),i,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(oe.UNKNOWN,l.toString())}))}Ho(e,t,s,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Rp(t,s),i,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xo="RemoteStore";class sx{constructor(e,t,s,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{ri(this)&&(de(Xo,"Restarting streams for network reachability change."),await(async function(f){const m=Ce(f);m.Ea.add(4),await hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await $d(m)})(this))}))})),this.Ra=new rx(s,i)}}async function $d(n){if(ri(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function WE(n,e){const t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tm(t)?_m(t):Ea(t).O_()&&Em(t,e))}function Sm(n,e){const t=Ce(n),s=Ea(t);t.Ia.delete(e),s.O_()&&YE(t,e),t.Ia.size===0&&(s.O_()?s.L_():ri(t)&&t.Ra.set("Unknown"))}function Em(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ea(n).Y_(e)}function YE(n,e){n.Va.Ue(e),Ea(n).Z_(e)}function _m(n){n.Va=new X1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ea(n).start(),n.Ra.ua()}function Tm(n){return ri(n)&&!Ea(n).x_()&&n.Ia.size>0}function ri(n){return Ce(n).Ea.size===0}function QE(n){n.Va=void 0}async function ox(n){n.Ra.set("Online")}async function ix(n){n.Ia.forEach(((e,t)=>{Em(n,e)}))}async function ax(n,e){QE(n),Tm(n)?(n.Ra.ha(e),_m(n)):n.Ra.set("Unknown")}async function lx(n,e,t){if(n.Ra.set("Online"),e instanceof ME&&e.state===2&&e.cause)try{await(async function(s,i){const l=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(s){de(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sd(n,s)}else if(e instanceof nd?n.Va.Ze(e):e instanceof DE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Te.min()))try{const s=await BE(n.localStore);t.compareTo(s)>=0&&await(function(i,l){const c=i.Va.Tt(l);return c.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Ia.get(m);v&&i.Ia.set(m,v.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,m)=>{const v=i.Ia.get(f);if(!v)return;i.Ia.set(f,v.withResumeToken(Xt.EMPTY_BYTE_STRING,v.snapshotVersion)),YE(i,f);const b=new Xs(v.target,f,m,v.sequenceNumber);Em(i,b)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(s){de(Xo,"Failed to raise snapshot:",s),await Sd(n,s)}}async function Sd(n,e,t){if(!Sa(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>BE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $d(n)}))}function XE(n,e){return e().catch((t=>Sd(n,t,e)))}async function Bd(n){const e=Ce(n),t=co(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:am;for(;ux(e);)try{const i=await GN(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,cx(e,i)}catch(i){await Sd(e,i)}ZE(e)&&e_(e)}function ux(n){return ri(n)&&n.Ta.length<10}function cx(n,e){n.Ta.push(e);const t=co(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZE(n){return ri(n)&&!co(n).x_()&&n.Ta.length>0}function e_(n){co(n).start()}async function dx(n){co(n).ra()}async function hx(n){const e=co(n);for(const t of n.Ta)e.ea(t.mutations)}async function fx(n,e,t){const s=n.Ta.shift(),i=pm.from(s,e,t);await XE(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Bd(n)}async function px(n,e){e&&co(n).X_&&await(async function(t,s){if((function(i){return W1(i)&&i!==oe.ABORTED})(s.code)){const i=t.Ta.shift();co(t).B_(),await XE(t,(()=>t.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Bd(t)}})(n,e),ZE(n)&&e_(n)}async function kb(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),de(Xo,"RemoteStore received new credentials");const s=ri(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $d(t)}async function mx(n,e){const t=Ce(n);e?(t.Ea.delete(2),await $d(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function Ea(n){return n.ma||(n.ma=(function(e,t,s){const i=Ce(e);return i.sa(),new ZN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:ox.bind(null,n),t_:ix.bind(null,n),r_:ax.bind(null,n),H_:lx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Tm(n)?_m(n):n.Ra.set("Unknown")):(await n.ma.stop(),QE(n))}))),n.ma}function co(n){return n.fa||(n.fa=(function(e,t,s){const i=Ce(e);return i.sa(),new ex(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dx.bind(null,n),r_:px.bind(null,n),ta:hx.bind(null,n),na:fx.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bd(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Im{constructor(e,t,s,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=l,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,l){const c=Date.now()+s,f=new Im(e,t,c,i,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(n,e){if(is("AsyncQueue",`${e}: ${n}`),Sa(n))return new ge(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=Vl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ab{constructor(){this.ga=new ft(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,i,l,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,i,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new ma(e,t,na.emptySet(t),c,s,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vx{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,t){const s=Ce(e),i=s.queries;s.queries=Nb(),i.forEach(((l,c)=>{for(const f of c.Sa)f.onError(t)}))})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function Nb(){return new ti((n=>wE(n)),Vd)}async function yx(n,e){const t=Ce(n);let s=3;const i=e.query;let l=t.queries.get(i);l?!l.ba()&&e.Da()&&(s=2):(l=new gx,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(i,!0);break;case 1:l.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const f=Cm(c,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&km(t)}async function bx(n,e){const t=Ce(n),s=e.query;let i=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?i=e.Da()?0:1:!l.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function wx(n,e){const t=Ce(n);let s=!1;for(const i of e){const l=i.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(i)&&(s=!0);c.wa=i}}s&&km(t)}function Sx(n,e,t){const s=Ce(n),i=s.queries.get(e);if(i)for(const l of i.Sa)l.onError(t);s.queries.delete(e)}function km(n){n.Ca.forEach((e=>{e.next()}))}var Up,xb;(xb=Up||(Up={})).Ma="default",xb.Cache="cache";class Ex{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t_{constructor(e){this.key=e}}class n_{constructor(e){this.key=e}}class _x{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=SE(e),this.tu=new na(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Ab,i=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,v=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,S)=>{const T=i.get(b),N=jd(this.query,S)?S:null,q=!!T&&this.mutatedKeys.has(T.key),L=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let H=!1;T&&N?T.data.isEqual(N.data)?q!==L&&(s.track({type:3,doc:N}),H=!0):this.su(T,N)||(s.track({type:2,doc:N}),H=!0,(m&&this.eu(N,m)>0||v&&this.eu(N,v)<0)&&(f=!0)):!T&&N?(s.track({type:0,doc:N}),H=!0):T&&!N&&(s.track({type:1,doc:T}),H=!0,(m||v)&&(f=!0)),H&&(N?(c=c.add(N),l=L?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,S)=>(function(T,N){const q=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:L})}};return q(T)-q(N)})(b.type,S.type)||this.eu(b.doc,S.doc))),this.ou(s),i=i??!1;const f=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,v=m!==this.Za;return this.Za=m,c.length!==0||v?{snapshot:new ma(this.query,e.tu,l,c,e.mutatedKeys,m===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ab,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new n_(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new t_(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Am="SyncEngine";class Tx{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Ix{constructor(e){this.key=e,this.hu=!1}}class Cx{constructor(e,t,s,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ti((f=>wE(f)),Vd),this.Iu=new Map,this.Eu=new Set,this.du=new ft(be.comparator),this.Au=new Map,this.Ru=new vm,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kx(n,e,t=!0){const s=l_(n);let i;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.lu()):i=await r_(s,e,t,!0),i}async function Ax(n,e){const t=l_(n);await r_(t,e,!0,!1)}async function r_(n,e,t,s){const i=await $N(n.localStore,Ar(e)),l=i.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await Nx(n,e,l,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&WE(n.remoteStore,i),f}async function Nx(n,e,t,s,i){n.pu=(S,T,N)=>(async function(q,L,H,J){let Z=L.view.ru(H);Z.Cs&&(Z=await Eb(q.localStore,L.query,!1).then((({documents:re})=>L.view.ru(re,Z))));const se=J&&J.targetChanges.get(L.targetId),ie=J&&J.targetMismatches.get(L.targetId)!=null,pe=L.view.applyChanges(Z,q.isPrimaryClient,se,ie);return Rb(q,L.targetId,pe.au),pe.snapshot})(n,S,T,N);const l=await Eb(n.localStore,e,!0),c=new _x(e,l.Qs),f=c.ru(l.documents),m=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),v=c.applyChanges(f,n.isPrimaryClient,m);Rb(n,t,v.au);const b=new Tx(e,t,c);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function xx(n,e,t){const s=Ce(n),i=s.Tu.get(e),l=s.Iu.get(i.targetId);if(l.length>1)return s.Iu.set(i.targetId,l.filter((c=>!Vd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Mp(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&Sm(s.remoteStore,i.targetId),Fp(s,i.targetId)})).catch(wa)):(Fp(s,i.targetId),await Mp(s.localStore,i.targetId,!0))}async function Ox(n,e){const t=Ce(n),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Sm(t.remoteStore,s.targetId))}async function Rx(n,e,t){const s=Vx(n);try{const i=await(function(l,c){const f=Ce(l),m=lt.now(),v=c.reduce(((T,N)=>T.add(N.key)),Ue());let b,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let N=as(),q=Ue();return f.Ns.getEntries(T,v).next((L=>{N=L,N.forEach(((H,J)=>{J.isValidDocument()||(q=q.add(H))}))})).next((()=>f.localDocuments.getOverlayedDocuments(T,N))).next((L=>{b=L;const H=[];for(const J of c){const Z=G1(J,b.get(J.key).overlayedDocument);Z!=null&&H.push(new ni(J.key,Z,fE(Z.value.mapValue),ss.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,H,c)})).next((L=>{S=L;const H=L.applyToLocalDocumentSet(b,q);return f.documentOverlayCache.saveOverlays(T,L.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:_E(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(l,c,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new ft(Le)),m=m.insert(c,f),l.Vu[l.currentUser.toKey()]=m})(s,i.batchId,t),await fu(s,i.changes),await Bd(s.remoteStore)}catch(i){const l=Cm(i,"Failed to persist write");t.reject(l)}}async function s_(n,e){const t=Ce(n);try{const s=await qN(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const c=t.Au.get(l);c&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Ke(c.hu,14607):i.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await fu(t,s,e)}catch(s){await wa(s)}}function Ob(n,e,t){const s=Ce(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(l,c){const f=Ce(l);f.onlineState=c;let m=!1;f.queries.forEach(((v,b)=>{for(const S of b.Sa)S.va(c)&&(m=!0)})),m&&km(f)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Px(n,e,t){const s=Ce(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),l=i&&i.key;if(l){let c=new ft(be.comparator);c=c.insert(l,nn.newNoDocument(l,Te.min()));const f=Ue().add(l),m=new zd(Te.min(),new Map,new ft(Le),c,f);await s_(s,m),s.du=s.du.remove(l),s.Au.delete(e),Nm(s)}else await Mp(s.localStore,e,!1).then((()=>Fp(s,e,t))).catch(wa)}async function Dx(n,e){const t=Ce(n),s=e.batch.batchId;try{const i=await HN(t.localStore,e);i_(t,s,null),o_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await fu(t,i)}catch(i){await wa(i)}}async function Mx(n,e,t){const s=Ce(n);try{const i=await(function(l,c){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next((b=>(Ke(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);i_(s,e,t),o_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await fu(s,i)}catch(i){await wa(i)}}function o_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function i_(n,e,t){const s=Ce(n);let i=s.Vu[s.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||a_(n,s)}))}function a_(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Nm(n))}function Rb(n,e,t){for(const s of t)s instanceof t_?(n.Ru.addReference(s.key,e),Lx(n,s)):s instanceof n_?(de(Am,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||a_(n,s.key)):Ee(19791,{wu:s})}function Lx(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(de(Am,"New document in limbo: "+t),n.Eu.add(s),Nm(n))}function Nm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(ht.fromString(e)),s=n.fu.next();n.Au.set(s,new Ix(t)),n.du=n.du.insert(t,s),WE(n.remoteStore,new Xs(Ar(hm(t.path)),s,"TargetPurposeLimboResolution",Md.ce))}}async function fu(n,e,t){const s=Ce(n),i=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,m)=>{c.push(s.pu(m,e,t).then((v=>{var b;if((v||t)&&s.isPrimaryClient){const S=v?!v.fromCache:(b=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(m.targetId,S?"current":"not-current")}if(v){i.push(v);const S=bm.As(m.targetId,v);l.push(S)}})))})),await Promise.all(c),s.Pu.H_(i),await(async function(f,m){const v=Ce(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(m,(S=>ne.forEach(S.Es,(T=>v.persistence.referenceDelegate.addReference(b,S.targetId,T))).next((()=>ne.forEach(S.ds,(T=>v.persistence.referenceDelegate.removeReference(b,S.targetId,T)))))))))}catch(b){if(!Sa(b))throw b;de(wm,"Failed to update sequence numbers: "+b)}for(const b of m){const S=b.targetId;if(!b.fromCache){const T=v.Ms.get(S),N=T.snapshotVersion,q=T.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(S,q)}}})(s.localStore,l))}async function Ux(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){de(Am,"User change. New user:",e.toKey());const s=await $E(t.localStore,e);t.currentUser=e,(function(i,l){i.mu.forEach((c=>{c.forEach((f=>{f.reject(new ge(oe.CANCELLED,l))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(t,s.Ls)}}function Fx(n,e){const t=Ce(n),s=t.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let i=Ue();const l=t.Iu.get(e);if(!l)return i;for(const c of l){const f=t.Tu.get(c);i=i.unionWith(f.view.nu)}return i}}function l_(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=s_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Px.bind(null,e),e.Pu.H_=wx.bind(null,e.eventManager),e.Pu.yu=Sx.bind(null,e.eventManager),e}function Vx(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class Ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return jN(this.persistence,new UN,e.initialUser,this.serializer)}Cu(e){return new GE(ym.mi,this.serializer)}Du(e){return new JN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ed.provider={build:()=>new Ed};class jx extends Ed{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof wd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new EN(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new GE((s=>wd.mi(s,t)),this.serializer)}}class Vp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ob(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ux.bind(null,this.syncEngine),await mx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vx})()}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),s=(function(i){return new XN(i)})(e.databaseInfo);return(function(i,l,c,f){return new nx(i,l,c,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(t,s,i,l,c){return new sx(t,s,i,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ob(this.syncEngine,t,0)),(function(){return Ib.v()?new Ib:new KN})())}createSyncEngine(e,t){return(function(s,i,l,c,f,m,v){const b=new Cx(s,i,l,c,f,m);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=Ce(s);de(Xo,"RemoteStore shutting down."),i.Ea.add(5),await hu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vp.provider={build:()=>new Vp};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ho="FirestoreClient";class qx{constructor(e,t,s,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(ho,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(ho,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Cm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function gp(n,e){n.asyncQueue.verifyOperationInProgress(),de(ho,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await $E(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Pb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zx(n);de(ho,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>kb(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>kb(e.remoteStore,i))),n._onlineComponents=e}async function zx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ho,"Using user provided OfflineComponentProvider");try{await gp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ca("Error using user provided cache. Falling back to memory cache: "+t),await gp(n,new Ed)}}else de(ho,"Using default OfflineComponentProvider"),await gp(n,new jx(void 0));return n._offlineComponents}async function u_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ho,"Using user provided OnlineComponentProvider"),await Pb(n,n._uninitializedComponentsProvider._online)):(de(ho,"Using default OnlineComponentProvider"),await Pb(n,new Vp))),n._onlineComponents}function Gx(n){return u_(n).then((e=>e.syncEngine))}async function $x(n){const e=await u_(n),t=e.eventManager;return t.onListen=kx.bind(null,e.syncEngine),t.onUnlisten=xx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ax.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ox.bind(null,e.syncEngine),t}function Bx(n,e,t={}){const s=new so;return n.asyncQueue.enqueueAndForget((async()=>(function(i,l,c,f,m){const v=new Hx({next:S=>{v.Nu(),l.enqueueAndForget((()=>bx(i,b)));const T=S.docs.has(c);!T&&S.fromCache?m.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&S.fromCache&&f&&f.source==="server"?m.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new Ex(hm(c.path),v,{includeMetadataChanges:!0,qa:!0});return yx(i,b)})(await $x(n),n.asyncQueue,e,t,s))),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function c_(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Db=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d_="firestore.googleapis.com",Mb=!0;class Lb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d_,this.ssl=Mb}else this.host=e.host,this.ssl=e.ssl??Mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wN)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c_(e.experimentalLongPollingOptions??{}),(function(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(t,s){return t.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(t){if(!t)return new BA;switch(t.type){case"firstParty":return new YA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const t=Db.get(e);t&&(de("ComponentProvider","Removing Datastore"),Db.delete(e),t.terminate())})(this),Promise.resolve()}}function Jx(n,e,t,s={}){var i;n=Ql(n,xm);const l=va(e),c=n._getSettings(),f={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;l&&(HS(`https://${m}`),qS("Firestore",!0)),c.host!==d_&&c.host!==m&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:m,ssl:l,emulatorOptions:s};if(!Wo(v,f)&&(n._setSettings(v),s.mockUserToken)){let b,S;if(typeof s.mockUserToken=="string")b=s.mockUserToken,S=tn.MOCK_USER;else{b=bk(s.mockUserToken,(i=n._app)==null?void 0:i.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new tn(T)}n._authCredentials=new JA(new nE(b,S))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Om{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Om(this.firestore,e,this._query)}}class zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uu(t,zt._jsonSchema))return new zt(e,s||null,new be(ht.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Pt("string",zt._jsonSchemaVersion),referencePath:Pt("string")};class su extends Om{constructor(e,t,s){super(e,t,hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new be(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function Jd(n,e,...t){if(n=Hn(n),arguments.length===1&&(e=om.newId()),n1("doc","path",e),n instanceof xm){const s=ht.fromString(e,...t);return Y0(s),new zt(n,null,new be(s))}{if(!(n instanceof zt||n instanceof su))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Y0(s),new zt(n.firestore,n instanceof su?n.converter:null,new be(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ub="AsyncQueue";class Fb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JE(this,"async_queue_retry"),this._c=()=>{const s=mp();s&&de(Ub,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sa(e))throw e;de(Ub,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",Vb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Im.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:Vb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Vb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rm extends xm{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new Fb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fb(e),this._firestoreClient=void 0,await e}}}function Kx(n,e){const t=typeof n=="object"?n:BS(),s=typeof n=="string"?n:fd,i=rm(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const l=vk("firestore");l&&Jx(i,...l)}return i}function h_(n){if(n._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Wx(n),n._firestoreClient}function Wx(n){var e,t,s;const i=n._freezeSettings(),l=(function(c,f,m,v){return new p1(c,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,c_(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)==null?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||(t=i.localCache)!=null&&t._offlineComponentProvider&&(s=i.localCache)!=null&&s._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new qx(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Xt.fromBase64String(e))}catch(t){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:Pt("string",Vn._jsonSchemaVersion),bytes:Pt("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f_{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(uu(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:Pt("string",xr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Or{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(t,s){if(t.length!==s.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,Or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Or(e.vectorValues);throw new ge(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:Pt("string",Or._jsonSchemaVersion),vectorValues:Pt("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yx=/^__.*__$/;class Qx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}function p_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class Dm{constructor(e,t,s,i,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){var t;const s=(t=this.path)==null?void 0:t.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p_(this.Ac)&&Yx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xx{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gd(e)}Cc(e,t,s,i=!1){return new Dm({Ac:e,methodName:t,Dc:s,path:Qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zx(n){const e=n._freezeSettings(),t=Gd(n._databaseId);return new Xx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eO(n,e,t,s,i,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,i);y_("Data must be an object, but it was:",c,s);const f=g_(s,c);let m,v;if(l.merge)m=new nr(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const S of l.mergeFields){const T=tO(e,S,t);if(!c.contains(T))throw new ge(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);rO(b,T)||b.push(T)}m=new nr(b),v=c.fieldTransforms.filter((S=>m.covers(S.field)))}else m=null,v=c.fieldTransforms;return new Qx(new Fn(f),m,v)}function m_(n,e){if(v_(n=Hn(n)))return y_("Unsupported field value:",e,n),g_(n,e);if(n instanceof f_)return(function(t,s){if(!p_(s.Ac))throw s.Sc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(t,s){const i=[];let l=0;for(const c of t){let f=m_(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}})(n,e)}return(function(t,s){if((t=Hn(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return F1(s.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const i=lt.fromDate(t);return{timestampValue:bd(s.serializer,i)}}if(t instanceof lt){const i=new lt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bd(s.serializer,i)}}if(t instanceof xr)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vn)return{bytesValue:LE(s.serializer,t._byteString)};if(t instanceof zt){const i=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gm(t.firestore._databaseId||s.databaseId,t._key.path)}}if(t instanceof Or)return(function(i,l){return{mapValue:{fields:{[dE]:{stringValue:hE},[pd]:{arrayValue:{values:i.toArray().map((c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return fm(l.serializer,c)}))}}}}}})(t,s);throw s.Sc(`Unsupported field value: ${im(t)}`)})(n,e)}function g_(n,e){const t={};return oE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(n,((s,i)=>{const l=m_(i,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function v_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof xr||n instanceof Vn||n instanceof zt||n instanceof f_||n instanceof Or)}function y_(n,e,t){if(!v_(t)||!rE(t)){const s=im(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tO(n,e,t){if((e=Hn(e))instanceof Pm)return e._internalPath;if(typeof e=="string")return b_(n,e);throw _d("Field path arguments must be of type string or ",n,!1,void 0,t)}const nO=new RegExp("[~\\*/\\[\\]]");function b_(n,e,t){if(e.search(nO)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pm(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _d(n,e,t,s,i){const l=s&&!s.isEmpty(),c=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${i}`),m+=")"),new ge(oe.INVALID_ARGUMENT,f+n+m)}function rO(n,e){return n.some((t=>t.isEqual(e)))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class w_{constructor(e,t,s,i,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(S_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sO extends w_{data(){return super.data()}}function S_(n,e){return typeof e=="string"?b_(n,e):e instanceof Pm?e._internalPath:e._delegate._internalPath}class oO{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ei(e,((i,l)=>{s[i]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,i;const l=(i=(s=(t=e.fields)==null?void 0:t[pd].arrayValue)==null?void 0:s.values)==null?void 0:i.map((c=>St(c.doubleValue)));return new Or(l)}convertGeoPoint(e){return new xr(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ud(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const t=ao(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);Ke(qE(s),9688,{name:e});const i=new eu(s.get(1),s.get(3)),l=new be(s.popFirst(5));return i.isEqual(t)||is(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iO(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ko extends w_{constructor(e,t,s,i,l,c){super(e,t,s,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(S_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ko._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),t}}Ko._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ko._jsonSchema={type:Pt("string",Ko._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class rd extends Ko{data(e={}){return super.data(e)}}class Jl{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hl(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rd(this._firestore,this._userDataWriter,s.key,s,new Hl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new rd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Hl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const f=new rd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Hl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return c.type!==0&&(m=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:aO(c.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E_(n){n=Ql(n,zt);const e=Ql(n.firestore,Rm);return Bx(h_(e),n._key).then((t=>cO(e,n,t)))}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:Pt("string",Jl._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class lO extends oO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function __(n,e,t){n=Ql(n,zt);const s=Ql(n.firestore,Rm),i=iO(n.converter,e);return uO(s,[eO(Zx(s),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ss.none())])}function uO(n,e){return(function(t,s){const i=new so;return t.asyncQueue.enqueueAndForget((async()=>Rx(await Gx(t),s,i))),i.promise})(h_(n),e)}function cO(n,e,t){const s=t.docs.get(e._key),i=new lO(n);return new Ko(n,i,e._key,s,new Hl(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){ba=t})(ya),ua(new Yo("firestore",((t,{instanceIdentifier:s,options:i})=>{const l=t.getProvider("app").getImmediate(),c=new Rm(new KA(t.getProvider("auth-internal")),new QA(l,t.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(f.options.projectId,m)})(l,s),l);return i={useFetchStreams:e,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),no(B0,J0,n),no(B0,J0,"esm2020")})();var dO="firebase",hO="12.6.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/no(dO,hO,"app");function T_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fO=T_,I_=new au("auth","Firebase",T_());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Td=new tm("@firebase/auth");function pO(n,...e){Td.logLevel<=Me.WARN&&Td.warn(`Auth (${ya}): ${n}`,...e)}function sd(n,...e){Td.logLevel<=Me.ERROR&&Td.error(`Auth (${ya}): ${n}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sr(n,...e){throw Mm(n,...e)}function Rr(n,...e){return Mm(n,...e)}function C_(n,e,t){const s={...fO(),[e]:t};return new au("auth","Firebase",s).create(e,{appName:n.name})}function oo(n){return C_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return I_.create(n,...e)}function Se(n,e,...t){if(!n)throw Mm(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sd(e),new Error(e)}function ls(n,e){n||ns(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function mO(){return jb()==="http:"||jb()==="https:"}function jb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mO()||Ik()||"connection"in navigator)?navigator.onLine:!0}function vO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ls(t>e,"Short delay should be less than long delay!"),this.isMobile=Ek()||Ck()}get(){return gO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lm(n,e){ls(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wO=new pu(3e4,6e4);function si(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fo(n,e,t,s,i={}){return A_(n,i,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=lu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:m,...l};return Tk()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&va(n.emulatorConfig.host)&&(v.credentials="include"),k_.fetch()(await N_(n,n.config.apiHost,t,f),v)})}async function A_(n,e,t){n._canInitEmulator=!1;const s={...yO,...e};try{const i=new EO(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,v]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Qc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Qc(n,"user-disabled",c);const b=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw C_(n,b,v);sr(n,b)}}catch(i){if(i instanceof cs)throw i;sr(n,"network-request-failed",{message:String(i)})}}async function Kd(n,e,t,s,i={}){const l=await fo(n,e,t,s,i);return"mfaPendingCredential"in l&&sr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function N_(n,e,t,s){const i=`${e}${t}?${s}`,l=n,c=l.config.emulator?Lm(n.config,i):`${n.config.apiScheme}://${i}`;return bO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function SO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Rr(this.auth,"network-request-failed")),wO.get())})}}function Qc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=Rr(n,e,s);return i.customData._tokenResponse=t,i}function Hb(n){return n!==void 0&&n.enterprise!==void 0}class _O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return SO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TO(n,e){return fo(n,"GET","/v2/recaptchaConfig",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function IO(n,e){return fo(n,"POST","/v1/accounts:delete",e)}async function Id(n,e){return fo(n,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CO(n,e=!1){const t=Hn(n),s=await t.getIdToken(e),i=Um(s);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:s,authTime:Kl(vp(i.auth_time)),issuedAtTime:Kl(vp(i.iat)),expirationTime:Kl(vp(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function vp(n){return Number(n)*1e3}function Um(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return sd("JWT malformed, contained fewer than 3 sections"),null;try{const i=US(t);return i?JSON.parse(i):(sd("Failed to decode base64 JWT payload"),null)}catch(i){return sd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qb(n){const e=Um(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ou(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof cs&&kO(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function kO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const t=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,t)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kl(this.lastLoginAt),this.creationTime=Kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Cd(n){var e;const t=n.auth,s=await n.getIdToken(),i=await ou(n,Id(t,{idToken:s}));Se(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const c=(e=l.providerUserInfo)!=null&&e.length?x_(l.providerUserInfo):[],f=xO(n.providerData,c),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),b=m?v:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Hp(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(n,S)}async function NO(n){const e=Hn(n);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xO(n,e){return[...n.filter(t=>!e.some(s=>s.providerId===t.providerId)),...e]}function x_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function OO(n,e){const t=await A_(n,{},async()=>{const s=lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,c=await N_(n,i,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&va(n.emulatorConfig.host)&&(m.credentials="include"),k_.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RO(n,e){return fo(n,"POST","/v2/accounts:revokeToken",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:l}=await OO(e,t);this.updateTokensAndExpiration(s,i,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:l}=t,c=new ra;return s&&(Se(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),i&&(Se(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new AO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CO(this,e)}reload(){return NO(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Cd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await ou(this,IO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:S,emailVerified:T,isAnonymous:N,providerData:q,stsTokenManager:L}=t;Se(S&&L,e,"internal-error");const H=ra.fromJSON(this.name,L);Se(typeof S=="string",e,"internal-error"),Bs(s,e.name),Bs(i,e.name),Se(typeof T=="boolean",e,"internal-error"),Se(typeof N=="boolean",e,"internal-error"),Bs(l,e.name),Bs(c,e.name),Bs(f,e.name),Bs(m,e.name),Bs(v,e.name),Bs(b,e.name);const J=new rr({uid:S,auth:e,email:i,emailVerified:T,displayName:s,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:H,createdAt:v,lastLoginAt:b});return q&&Array.isArray(q)&&(J.providerData=q.map(Z=>({...Z}))),m&&(J._redirectEventId=m),J}static async _fromIdTokenResponse(e,t,s=!1){const i=new ra;i.updateFromServerResponse(t);const l=new rr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Cd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?x_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),f=new ra;f.updateFromIdToken(s);const m=new rr({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:c}),v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Hp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,v),m}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zb=new Map;function rs(n){ls(n instanceof Function,"Expected a class definition");let e=zb.get(n);return e?(ls(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zb.set(n,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O_.type="NONE";const Gb=O_;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function od(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:l}=this.auth;this.fullUserKey=od(this.userKey,i.apiKey,l),this.fullPersistenceKey=od("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new sa(rs(Gb),e,s);const i=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=i[0]||rs(Gb);const c=od(s,e.config.apiKey,e.name);let f=null;for(const v of t)try{const b=await v._get(c);if(b){let S;if(typeof b=="string"){const T=await Id(e,{idToken:b}).catch(()=>{});if(!T)break;S=await rr._fromGetAccountInfoResponse(e,T,b)}else S=rr._fromJSON(e,b);v!==l&&(f=S),l=v;break}}catch{}const m=i.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new sa(l,e,s):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(c)}catch{}})),new sa(l,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $b(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U_(e))return"Blackberry";if(F_(e))return"Webos";if(P_(e))return"Safari";if((e.includes("chrome/")||D_(e))&&!e.includes("edge/"))return"Chrome";if(L_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function R_(n=sn()){return/firefox\//i.test(n)}function P_(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D_(n=sn()){return/crios\//i.test(n)}function M_(n=sn()){return/iemobile/i.test(n)}function L_(n=sn()){return/android/i.test(n)}function U_(n=sn()){return/blackberry/i.test(n)}function F_(n=sn()){return/webos/i.test(n)}function Fm(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function PO(n=sn()){var e;return Fm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function DO(){return kk()&&document.documentMode===10}function V_(n=sn()){return Fm(n)||L_(n)||F_(n)||U_(n)||/windows phone/i.test(n)||M_(n)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function j_(n,e=[]){let t;switch(n){case"Browser":t=$b(sn());break;case"Worker":t=`${$b(sn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ya}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function LO(n,e={}){return fo(n,"GET","/v2/passwordPolicy",si(n,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UO=6;class FO{constructor(e){var t;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??UO,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((t=e.allowedNonAlphanumericCharacters)==null?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VO{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new MO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{var s,i,l;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)==null?void 0:t._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m!=null&&m.user&&(i=m.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(oo(this));const t=e?Hn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LO(this),t=new FO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=j_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&pO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _a(n){return Hn(n)}class Bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mk(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jO(n){Wd=n}function H_(n){return Wd.loadJS(n)}function HO(){return Wd.recaptchaEnterpriseScript}function qO(){return Wd.gapiScript}function zO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GO{constructor(){this.enterprise=new $O}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $O{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BO="recaptcha-enterprise",q_="NO_RECAPTCHA";class JO{constructor(e){this.type=BO,this.auth=_a(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{TO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new _O(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,c(v.siteKey)}}).catch(m=>{f(m)})})}function i(l,c,f){const m=window.grecaptcha;Hb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{c(v)}).catch(()=>{c(q_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&Hb(window.grecaptcha))i(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=HO();m.length!==0&&(m+=f),H_(m).then(()=>{i(f,l,c)}).catch(v=>{c(v)})}}).catch(f=>{c(f)})})}}async function Jb(n,e,t,s=!1,i=!1){const l=new JO(n);let c;if(i)c=q_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Kb(n,e,t,s,i){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Jb(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Jb(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KO(n,e){const t=rm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Wo(i,e??{}))return s;sr(s,"already-initialized")}return t.initialize({options:e})}function WO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(rs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function YO(n,e,t){const s=_a(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,l=z_(e),{host:c,port:f}=QO(e),m=f===null?"":`:${f}`,v={url:`${l}//${c}${m}/`},b=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(Wo(v,s.config.emulator)&&Wo(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,va(c)?(HS(`${l}//${c}${m}`),qS("Auth",!0)):XO()}function z_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QO(n){const e=z_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const l=i[1];return{host:l,port:Wb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Wb(c)}}}function Wb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function ZO(n,e){return fo(n,"POST","/v1/accounts:signUp",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function eR(n,e){return Kd(n,"POST","/v1/accounts:signInWithPassword",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function tR(n,e){return Kd(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}async function nR(n,e){return Kd(n,"POST","/v1/accounts:signInWithEmailLink",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iu extends Vm{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new iu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&t!=null&&t.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kb(e,t,"signInWithPassword",eR);case"emailLink":return tR(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kb(e,s,"signUpPassword",ZO);case"emailLink":return nR(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function oa(n,e){return Kd(n,"POST","/v1/accounts:signInWithIdp",si(n,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rR="http://localhost";class Zo extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...l}=t;if(!s||!i)return null;const c=new Zo(s,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return oa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,oa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oa(e,t)}buildRequest(){const e={requestUri:rR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lu(t)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oR(n){const e=Ll(Ul(n)).link,t=e?Ll(Ul(e)).deep_link_id:null,s=Ll(Ul(n)).deep_link_id;return(s?Ll(Ul(s)).link:null)||s||t||e||n}class jm{constructor(e){const t=Ll(Ul(e)),s=t.apiKey??null,i=t.oobCode??null,l=sR(t.mode??null);Se(s&&i&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=oR(e);try{return new jm(t)}catch{return null}}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=jm.parseLink(t);return Se(s,"argument-error"),iu._fromEmailAndCode(e,s.code,s.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mu extends G_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ks extends mu{constructor(){super("facebook.com")}static credential(e){return Zo._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ws extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ws.credential(t,s)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ys extends mu{constructor(){super("github.com")}static credential(e){return Zo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qs extends mu{constructor(){super("twitter.com")}static credential(e,t){return Zo._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const l=await rr._fromIdTokenResponse(e,s,i),c=Yb(s);return new ga({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=Yb(s);return new ga({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function Yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kd extends cs{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new kd(e,t,s,i)}}function $_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,i,e,s):i})}async function iR(n,e,t=!1){const s=await ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ga._forOperation(n,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function aR(n,e,t=!1){const{auth:s}=n;if(tr(s.app))return Promise.reject(oo(s));const i="reauthenticate";try{const l=await ou(n,$_(s,i,e,n),t);Se(l.idToken,s,"internal-error");const c=Um(l.idToken);Se(c,s,"internal-error");const{sub:f}=c;return Se(n.uid===f,s,"user-mismatch"),ga._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(s,"user-mismatch"),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function B_(n,e,t=!1){if(tr(n.app))return Promise.reject(oo(n));const s="signIn",i=await $_(n,s,e),l=await ga._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(l.user),l}async function lR(n,e){return B_(_a(n),e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uR(n){const e=_a(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function cR(n,e,t){return tr(n.app)?Promise.reject(oo(n)):lR(Hn(n),Ta.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uR(n),s})}function dR(n,e,t,s){return Hn(n).onIdTokenChanged(e,t,s)}function hR(n,e,t){return Hn(n).beforeAuthStateChanged(e,t)}function fR(n){return Hn(n).signOut()}const Ad="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pR=1e3,mR=10;class K_ extends J_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);DO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mR):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}K_.type="LOCAL";const gR=K_;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W_ extends J_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}W_.type="SESSION";const Y_=W_;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new Yd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:l}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const f=Array.from(c).map(async v=>v(t.origin,l)),m=await vR(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hm(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const v=Hm("",20);i.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:i,onMessage(S){const T=S;if(T.data.eventId===v)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pr(){return window}function bR(n){Pr().location.href=n}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q_(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function wR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function ER(){return Q_()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const X_="firebaseLocalStorageDb",_R=1,Nd="firebaseLocalStorage",Z_="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qd(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function TR(){const n=indexedDB.deleteDatabase(X_);return new gu(n).toPromise()}function qp(){const n=indexedDB.open(X_,_R);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Nd,{keyPath:Z_})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Nd)?e(s):(s.close(),await TR(),e(await qp()))})})}async function Qb(n,e,t){const s=Qd(n,!0).put({[Z_]:e,value:t});return new gu(s).toPromise()}async function IR(n,e){const t=Qd(n,!1).get(e),s=await new gu(t).toPromise();return s===void 0?null:s.value}function Xb(n,e){const t=Qd(n,!0).delete(e);return new gu(t).toPromise()}const CR=800,kR=3;class eT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>kR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(ER()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new yR(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&(e=s[0])!=null&&e.fulfilled&&(t=s[0])!=null&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qp();return await Qb(e,Ad,"1"),await Xb(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>IR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=Qd(i,!1).getAll();return new gu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eT.type="LOCAL";const AR=eT;new pu(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NR(n,e){return e?rs(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qm extends Vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xR(n){return B_(n.auth,new qm(n),n.bypassAuthState)}function OR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),aR(t,new qm(n),n.bypassAuthState)}async function RR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),iR(t,new qm(n),n.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tT{constructor(e,t,s,i,l=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return RR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:sr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PR=new pu(2e3,1e4);class ea extends tT{constructor(e,t,s,i,l){super(e,t,i,l),this.provider=s,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}ea.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DR="pendingRedirect",id=new Map;class MR extends tT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const t=await LR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LR(n,e){const t=VR(e),s=FR(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function UR(n,e){id.set(n._key(),e)}function FR(n){return rs(n._redirectPersistence)}function VR(n){return od(DR,n.config.apiKey,n.name)}async function jR(n,e,t=!1){if(tr(n.app))return Promise.reject(oo(n));const s=_a(n),i=NR(s,e),l=await new MR(s,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HR=600*1e3;class qR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nT(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zb(e))}saveEventToCache(e){this.cachedEventUids.add(Zb(e)),this.lastProcessedEventTime=Date.now()}}function Zb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nT(n);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GR(n,e={}){return fo(n,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BR=/^https?/;async function JR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GR(n);for(const t of e)try{if(KR(t))return}catch{}sr(n,"unauthorized-domain")}function KR(n){const e=jp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===s}if(!BR.test(t))return!1;if($R.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WR=new pu(3e4,6e4);function ew(){const n=Pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YR(n){return new Promise((e,t)=>{var s,i,l;function c(){ew(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ew(),t(Rr(n,"network-request-failed"))},timeout:WR.get()})}if((i=(s=Pr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((l=Pr().gapi)!=null&&l.load)c();else{const f=zO("iframefcb");return Pr()[f]=()=>{gapi.load?c():t(Rr(n,"network-request-failed"))},H_(`${qO()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw ad=null,e})}let ad=null;function QR(n){return ad=ad||YR(n),ad}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XR=new pu(5e3,15e3),ZR="__/auth/iframe",eP="emulator/auth/iframe",tP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rP(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lm(e,eP):`https://${n.config.authDomain}/${ZR}`,s={apiKey:e.apiKey,appName:n.name,v:ya},i=nP.get(n.config.apiHost);i&&(s.eid=i);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${lu(s).slice(1)}`}async function sP(n){const e=await QR(n),t=Pr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:rP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tP,dontclear:!0},s=>new Promise(async(i,l)=>{await s.restyle({setHideOnLeave:!1});const c=Rr(n,"network-request-failed"),f=Pr().setTimeout(()=>{l(c)},XR.get());function m(){Pr().clearTimeout(f),i(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iP=500,aP=600,lP="_blank",uP="http://localhost";class tw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cP(n,e,t,s=iP,i=aP){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m={...oP,width:s.toString(),height:i.toString(),top:l,left:c},v=sn().toLowerCase();t&&(f=D_(v)?lP:t),R_(v)&&(e=e||uP,m.scrollbars="yes");const b=Object.entries(m).reduce((T,[N,q])=>`${T}${N}=${q},`,"");if(PO(v)&&f!=="_self")return dP(e||"",f),new tw(null);const S=window.open(e||"",f,b);Se(S,n,"popup-blocked");try{S.focus()}catch{}return new tw(S)}function dP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hP="__/auth/handler",fP="emulator/auth/handler",pP=encodeURIComponent("fac");async function nw(n,e,t,s,i,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ya,eventId:i};if(e instanceof G_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Dk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,S]of Object.entries({}))c[b]=S}if(e instanceof mu){const b=e.getScopes().filter(S=>S!=="");b.length>0&&(c.scopes=b.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await n._getAppCheckToken(),v=m?`#${pP}=${encodeURIComponent(m)}`:"";return`${mP(n)}?${lu(f).slice(1)}${v}`}function mP({config:n}){return n.emulator?Lm(n,fP):`https://${n.authDomain}/${hP}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yp="webStorageSupport";class gP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y_,this._completeRedirectFn=jR,this._overrideRedirectResult=UR}async _openPopup(e,t,s,i){var l;ls((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await nw(e,t,s,jp(),i);return cP(e,c,Hm())}async _openRedirect(e,t,s,i){await this._originValidation(e);const l=await nw(e,t,s,jp(),i);return bR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(ls(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await sP(e),s=new qR(e);return t.register("authEvent",i=>(Se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yp,{type:yp},s=>{var i;const l=(i=s==null?void 0:s[0])==null?void 0:i[yp];l!==void 0&&t(!!l),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return V_()||P_()||Fm()}}const vP=gP;var rw="@firebase/auth",sw="1.11.1";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wP(n){ua(new Yo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j_(n)},v=new VO(s,i,l,m);return WO(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ua(new Yo("auth-internal",e=>{const t=_a(e.getProvider("auth").getImmediate());return(s=>new yP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),no(rw,sw,bP(n)),no(rw,sw,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SP=300,EP=jS("authIdTokenMaxAge")||SP;let ow=null;const _P=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>EP)return;const i=t==null?void 0:t.token;ow!==i&&(ow=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TP(n=BS()){const e=rm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=KO(n,{popupRedirectResolver:vP,persistence:[AR,gR,Y_]}),s=jS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=_P(l.toString());hR(t,c,()=>c(t.currentUser)),dR(t,f=>c(f))}}const i=FS("auth");return i&&YO(t,`http://${i}`),t}function IP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}jO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const l=Rr("internal-error");l.customData=i,t(l)},s.type="text/javascript",s.charset="UTF-8",IP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wP("Browser");const CP={apiKey:"AIzaSyBsdPghRmOsLX7JIj-T8IYF4bRp-KxQAPc",authDomain:"cybee-ca5a2.firebaseapp.com",projectId:"cybee-ca5a2",storageBucket:"cybee-ca5a2.firebasestorage.app",messagingSenderId:"215321650697",appId:"1:215321650697:web:d0bbf35f6861a891c9bad8",measurementId:"G-K624Y57R5Q"},rT=$S(CP),Xd=Kx(rT),iw=TP(rT),Zd="supportApp",sT="videos",oT="config",kP=async n=>{console.log("Saving videos to Firebase:",n),await __(Jd(Xd,Zd,sT),{videos:n}),console.log("Videos saved successfully")},AP=async()=>{const n=Jd(Xd,Zd,sT),e=await E_(n);if(e.exists()){const t=e.data();return console.log("Loaded videos from Firebase:",t.videos),t.videos||[]}return console.log("No videos document found in Firebase"),[]},zp=async n=>{await __(Jd(Xd,Zd,oT),n)},NP=async()=>{const n=Jd(Xd,Zd,oT),e=await E_(n);return e.exists()?e.data():null},xP=({videos:n,setVideos:e,chatConfig:t,setChatConfig:s})=>{const[i,l]=He.useState("videos"),[c,f]=He.useState({title:"",description:"",url:""}),[m,v]=He.useState(null),b=L=>{const H=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,J=L.match(H);return J&&J[2].length===11?J[2]:null},S=L=>{L.preventDefault();const H=b(c.url);if(!H){alert("Invalid YouTube URL");return}if(m)e(J=>J.map(Z=>Z.id===m?{...Z,title:c.title,description:c.description,url:c.url,videoId:H}:Z)),v(null);else{const J={id:Date.now().toString(),title:c.title,description:c.description,url:c.url,videoId:H};e(Z=>[J,...Z])}f({title:"",description:"",url:""})},T=L=>{f({title:L.title,description:L.description,url:L.url}),v(L.id),window.scrollTo({top:0,behavior:"smooth"})},N=()=>{f({title:"",description:"",url:""}),v(null)},q=(L,H)=>{H.stopPropagation(),window.confirm("Are you sure you want to delete this video?")&&(e(J=>J.filter(Z=>Z.id!==L)),m===L&&N())};return R.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[R.jsxs("div",{className:"mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Dashboard"}),R.jsx("p",{className:"text-slate-500",children:"Manage support content and AI configurations."})]}),R.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200",children:[R.jsxs("button",{onClick:()=>l("videos"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="videos"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(rk,{size:18}),R.jsx("span",{children:"Video Library"})]}),i==="videos"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("ai"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="ai"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(P0,{size:18}),R.jsx("span",{children:"AI Configuration"})]}),i==="ai"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]}),R.jsxs("button",{onClick:()=>l("sql"),className:`pb-4 px-2 font-medium transition-colors relative ${i==="sql"?"text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(R0,{size:18}),R.jsx("span",{children:"SQL Queries"})]}),i==="sql"&&R.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-blue-600 rounded-t-full"})]})]}),R.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:i==="videos"?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"lg:col-span-1",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 sticky top-6",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m?R.jsx(op,{size:20,className:"text-blue-600"}):R.jsx(Dl,{size:20,className:"text-blue-600"}),m?"Edit Video":"Add New Video"]}),m&&R.jsxs("button",{type:"button",onClick:N,className:"text-xs text-slate-500 hover:text-slate-800 flex items-center gap-1 bg-slate-100 px-2 py-1 rounded-md transition-colors",children:[R.jsx(em,{size:14})," Cancel"]})]}),R.jsxs("form",{onSubmit:S,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Video Title"}),R.jsx("input",{type:"text",required:!0,value:c.title,onChange:L=>f({...c,title:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"e.g. How to Reset Password"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"YouTube URL"}),R.jsx("input",{type:"url",required:!0,value:c.url,onChange:L=>f({...c,url:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"https://youtube.com/watch?v=..."})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),R.jsx("textarea",{required:!0,value:c.description,onChange:L=>f({...c,description:L.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",placeholder:"Brief summary of the video content..."})]}),R.jsxs("button",{type:"submit",className:`w-full py-2.5 font-medium rounded-xl transition-colors shadow-lg flex items-center justify-center gap-2 text-white ${m?"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/20":"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20"}`,children:[m?R.jsx(zC,{size:18}):R.jsx(Dl,{size:18}),m?"Update Video":"Save Video"]})]})]})}),R.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[R.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Published Videos (",n.length,")"]}),n.length===0?R.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-dashed border-slate-300",children:[R.jsx(ak,{size:48,className:"mx-auto text-slate-300 mb-3"}),R.jsx("p",{className:"text-slate-500",children:"No videos added yet."})]}):n.map(L=>R.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex gap-4 hover:shadow-md transition-all ${m===L.id?"border-blue-500 ring-2 ring-blue-500/10":"border-slate-100"}`,children:[R.jsx("div",{className:"w-32 h-20 bg-slate-100 rounded-lg overflow-hidden flex-shrink-0 relative group",children:R.jsx("img",{src:`https://img.youtube.com/vi/${L.videoId}/mqdefault.jpg`,alt:L.title,className:"w-full h-full object-cover"})}),R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsx("h4",{className:"font-semibold text-slate-800 line-clamp-1",children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{type:"button",onClick:()=>T(L),className:`p-1.5 rounded-lg transition-colors ${m===L.id?"bg-blue-100 text-blue-600":"text-slate-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"Edit video",children:R.jsx(op,{size:16})}),R.jsx("button",{type:"button",onClick:H=>q(L.id,H),className:"text-slate-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Delete video",children:R.jsx(ip,{size:16})})]})]}),R.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mt-1",children:L.description}),R.jsx("a",{href:L.url,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 mt-2 inline-block hover:underline",children:"View on YouTube"})]})]},L.id))]})]}):i==="sql"?R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100",children:[R.jsx("div",{className:"p-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>{const L=document.getElementById("sqlForm"),H=(L==null?void 0:L.style.display)==="none";L&&(L.style.display=H?"block":"none")},children:R.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[R.jsx(R0,{size:20,className:"text-green-600"}),"SQL Query Manager",R.jsx("span",{className:"text-sm text-slate-500",children:"(Click to expand)"})]})}),R.jsx("div",{id:"sqlForm",style:{display:"none"},className:"px-6 pb-6",children:R.jsxs("form",{onSubmit:L=>{L.preventDefault();const H=new FormData(L.target),J=H.get("title"),Z=H.get("query");if(J.trim()&&Z.trim()){const se={id:Date.now().toString(),title:J.trim(),query:Z.trim()};s({...t,sqlQueries:[...t.sqlQueries||[],se]}),L.target.reset()}},className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Query Title"}),R.jsx("input",{name:"title",type:"text",required:!0,placeholder:"e.g., Get all users",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SQL Query"}),R.jsx("textarea",{name:"query",required:!0,rows:6,placeholder:"SELECT * FROM users WHERE...;",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Save Query"]})]})})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Saved Queries (",(t.sqlQueries||[]).length,")"]}),R.jsx("input",{type:"text",placeholder:"Search queries...",onChange:L=>{const H=L.target.value.toLowerCase();document.querySelectorAll("[data-query-item]").forEach(J=>{const Z=J.querySelector("h5").textContent.toLowerCase(),se=J.querySelector("p").textContent.toLowerCase();J.style.display=Z.includes(H)||se.includes(H)?"block":"none"})},className:"px-3 py-2 border border-slate-200 rounded-lg text-sm w-64"})]}),(t.sqlQueries||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No queries saved yet."}):R.jsx("div",{className:"space-y-3",children:(t.sqlQueries||[]).map(L=>R.jsxs("div",{"data-query-item":!0,className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsx("h5",{className:"font-medium text-slate-800 cursor-pointer hover:text-blue-600",onClick:()=>{const H=document.createElement("div");H.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",H.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw] max-h-[80vh] overflow-auto">
                                  <h3 class="text-lg font-bold mb-4">${L.title}</h3>
                                  <textarea class="w-full h-64 p-3 border rounded-lg font-mono text-sm" readonly>${L.query}</textarea>
                                  <div class="flex gap-3 mt-4">
                                    <button onclick="navigator.clipboard.writeText('${L.query.replace(/'/g,"\\'")}')">Copy</button>
                                    <button onclick="this.closest('.fixed').remove()">Close</button>
                                  </div>
                                </div>
                              `,document.body.appendChild(H),H.onclick=J=>J.target===H&&H.remove()},children:L.title}),R.jsxs("div",{className:"flex gap-1",children:[R.jsx("button",{onClick:()=>{const H=document.createElement("div");H.className="fixed inset-0 bg-black/50 flex items-center justify-center z-50",H.innerHTML=`
                                <div class="bg-white p-6 rounded-2xl shadow-xl w-[600px] max-w-[90vw]">
                                  <h3 class="text-lg font-bold mb-4">Edit Query</h3>
                                  <input id="editTitle" class="w-full p-3 border rounded-lg mb-3" value="${L.title}" placeholder="Query Title">
                                  <textarea id="editQuery" class="w-full h-64 p-3 border rounded-lg font-mono text-sm mb-4">${L.query}</textarea>
                                  <div class="flex gap-3">
                                    <button onclick="
                                      const title = document.getElementById('editTitle').value;
                                      const query = document.getElementById('editQuery').value;
                                      if (title && query) {
                                        window.updateQuery('${L.id}', title, query);
                                        this.closest('.fixed').remove();
                                      }
                                    " class="px-4 py-2 bg-blue-600 text-white rounded-lg">Save</button>
                                    <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-gray-600 text-white rounded-lg">Cancel</button>
                                  </div>
                                </div>
                              `,window.updateQuery=(J,Z,se)=>{s({...t,sqlQueries:(t.sqlQueries||[]).map(ie=>ie.id===J?{...ie,title:Z,query:se}:ie)})},document.body.appendChild(H)},className:"text-blue-500 hover:text-blue-700 p-1",children:R.jsx(op,{size:14})}),R.jsx("button",{onClick:()=>s({...t,sqlQueries:(t.sqlQueries||[]).filter(H=>H.id!==L.id)}),className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(ip,{size:14})})]})]}),R.jsx("p",{className:"text-slate-600 text-xs font-mono truncate",children:L.query})]},L.id))})]})]}):R.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(P0,{size:20,className:"text-blue-600"}),"Chat Assistant Settings"]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"System Instructions (Persona)"}),R.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Define how the AI should behave, what it knows, and its tone."}),R.jsx("textarea",{value:t.systemInstruction,onChange:L=>s({...t,systemInstruction:L.target.value}),rows:6,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-mono text-sm"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Welcome Message"}),R.jsx("input",{type:"text",value:t.welcomeMessage,onChange:L=>s({...t,welcomeMessage:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[R.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[R.jsx(Dl,{size:20,className:"text-green-600"}),"Q&A Training"]}),R.jsxs("form",{onSubmit:async L=>{L.preventDefault();const H=new FormData(L.target),J=H.get("question"),Z=H.get("answer");if(J.trim()&&Z.trim()){const se={id:Date.now().toString(),question:J.trim(),answer:Z.trim()},ie={...t,qaTraining:[...t.qaTraining||[],se]};s(ie),await zp(ie),L.target.reset()}},className:"space-y-4 mb-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Question"}),R.jsx("input",{name:"question",type:"text",required:!0,placeholder:"e.g., What is your customer care number?",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Answer"}),R.jsx("textarea",{name:"answer",required:!0,rows:3,placeholder:"e.g., You can reach our customer care at +1-800-POLOSYS (765-6797)",className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]}),R.jsxs("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors flex items-center gap-2",children:[R.jsx(Dl,{size:16})," Add Q&A"]})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("h4",{className:"font-medium text-slate-800",children:["Trained Q&As (",(t.qaTraining||[]).length,")"]}),(t.qaTraining||[]).length===0?R.jsx("p",{className:"text-slate-500 text-sm",children:"No Q&A pairs added yet."}):(t.qaTraining||[]).map(L=>R.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[R.jsxs("div",{className:"flex justify-between items-start mb-2",children:[R.jsxs("p",{className:"font-medium text-slate-800",children:["Q: ",L.question]}),R.jsx("button",{onClick:async()=>{if(!confirm("Delete this Q&A?"))return;const H={...t,qaTraining:(t.qaTraining||[]).filter(J=>J.id!==L.id)};try{await zp(H),s(H),console.log("Q&A deleted successfully")}catch(J){console.error("Failed to delete Q&A:",J),alert("Failed to delete. Please try again.")}},className:"text-red-500 hover:text-red-700 p-1",children:R.jsx(ip,{size:14})})]}),R.jsxs("p",{className:"text-slate-600 text-sm",children:["A: ",L.answer]})]},L.id))]})]}),R.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800",children:R.jsxs("p",{children:[R.jsx("strong",{children:"Note:"})," Changes take effect for new chat sessions."]})})]})})]})};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let OP,RP;function PP(){return{geminiUrl:OP,vertexUrl:RP}}function DP(n,e,t,s){var i,l;if(!(n!=null&&n.baseUrl)){const c=PP();return e?(i=c.vertexUrl)!==null&&i!==void 0?i:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ds{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const l=e[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let v=0;v<m.length;v++){const b=m[v];h(b,e.slice(l+1),t[v])}else for(const v of m)h(v,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];h(m[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],i=n[s];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const i=e[s];if(i.endsWith("[]")){const l=i.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[i]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function MP(n,e){for(const[t,s]of Object.entries(e)){const i=t.split("."),l=s.split("."),c=new Set;let f=-1;for(let m=0;m<i.length;m++)if(i[m]==="*"){f=m;break}if(f!==-1&&l.length>f)for(let m=f;m<l.length;m++){const v=l[m];v!=="*"&&!v.endsWith("[]")&&!v.endsWith("[0]")&&c.add(v)}Gp(n,i,l,0,c)}}function Gp(n,e,t,s,i){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const m of f[c])Gp(m,e,t,s+1,i)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(v=>!v.startsWith("_")&&!i.has(v)),m={};for(const v of f)m[v]=c[v];for(const[v,b]of Object.entries(m)){const S=[];for(const T of t.slice(s))T==="*"?S.push(v):S.push(T);h(c,S,b)}for(const v of f)delete c[v]}}else{const c=n;l in c&&Gp(c[l],e,t,s+1,i)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function LP(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function UP(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],VP(c)),e}function FP(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],jP(c)),e}function VP(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>HP(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function jP(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>qP(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function HP(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],KP(t)),e}function qP(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],WP(t)),e}function zP(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function GP(n){const e={},t=d(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function $P(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],BP(c)),e}function BP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function iT(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],JP(c)),e}function JP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function KP(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],zm(s));const i=d(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function WP(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],zm(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var aw;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aw||(aw={}));var lw;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lw||(lw={}));var uw;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uw||(uw={}));var Zs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Zs||(Zs={}));var cw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cw||(cw={}));var dw;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dw||(dw={}));var hw;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(hw||(hw={}));var fw;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fw||(fw={}));var pw;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pw||(pw={}));var mw;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(mw||(mw={}));var gw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gw||(gw={}));var vw;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(vw||(vw={}));var yw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(yw||(yw={}));var bw;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bw||(bw={}));var ww;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ww||(ww={}));var Sw;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Sw||(Sw={}));var Ew;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ew||(Ew={}));var _w;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(_w||(_w={}));var Tw;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tw||(Tw={}));var xd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xd||(xd={}));var Iw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iw||(Iw={}));var Cw;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cw||(Cw={}));var kw;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kw||(kw={}));var $p;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($p||($p={}));var Aw;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Aw||(Aw={}));var Nw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Nw||(Nw={}));var xw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(xw||(xw={}));var Ow;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ow||(Ow={}));var Rw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Rw||(Rw={}));var Pw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Pw||(Pw={}));var Dw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Dw||(Dw={}));var Mw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Mw||(Mw={}));var Lw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Lw||(Lw={}));var Uw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Uw||(Uw={}));var Fw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fw||(Fw={}));var Vw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Vw||(Vw={}));var jw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jw||(jw={}));var Hw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Hw||(Hw={}));var qw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(qw||(qw={}));var zw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(zw||(zw={}));var Gw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Gw||(Gw={}));var $w;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})($w||($w={}));var Bw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Bw||(Bw={}));var Jw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Jw||(Jw={}));var Kw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Kw||(Kw={}));var Ww;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Ww||(Ww={}));var Yw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yw||(Yw={}));var Qw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Qw||(Qw={}));var Xw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xw||(Xw={}));var Zw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zw||(Zw={}));var eS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(eS||(eS={}));var tS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tS||(tS={}));var nS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nS||(nS={}));var rS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(rS||(rS={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class Bp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ml{get text(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let v="",b=!1;const S=[];for(const T of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,q]of Object.entries(T))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(q!==null||q!==void 0)&&S.push(N);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;b=!0,v+=T.text}}return S.length>0&&console.warn(`there are non-text parts ${S} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?v:void 0}get data(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let v="";const b=[];for(const S of(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[T,N]of Object.entries(S))T!=="inlineData"&&(N!==null||N!==void 0)&&b.push(T);S.inlineData&&typeof S.inlineData.data=="string"&&(v+=atob(S.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),v.length>0?btoa(v):void 0}get functionCalls(){var e,t,s,i,l,c,f,m;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const v=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return v}get executableCode(){var e,t,s,i,l,c,f,m,v;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(S=>S.executableCode).map(S=>S.executableCode).filter(S=>S!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.code}get codeExecutionResult(){var e,t,s,i,l,c,f,m,v;if(((i=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(m=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(S=>S.codeExecutionResult).map(S=>S.codeExecutionResult).filter(S=>S!==void 0);if((b==null?void 0:b.length)!==0)return(v=b==null?void 0:b[0])===null||v===void 0?void 0:v.output}}class sS{}class oS{}class YP{}class QP{}class XP{}class ZP{}class iS{}class aS{}class lS{}class e2{}class Od{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Od;let i;const l=e;return t?i=FP(l):i=UP(l),Object.assign(s,i),s}}class uS{}class cS{}class dS{}class t2{}class n2{}class r2{}class Gm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Gm,i=$P(e);return Object.assign(s,i),s}}class s2{}class o2{}class i2{}class hS{}class a2{get text(){var e,t,s;let i="",l=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,v]of Object.entries(f))m!=="text"&&m!=="thought"&&v!==null&&c.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,i+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?i:void 0}get data(){var e,t,s;let i="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(c))f!=="inlineData"&&m!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(i+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class l2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $m{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new $m,i=iT(e);return Object.assign(s,i),s}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aT(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function lT(n){return Array.isArray(n)?n.map(e=>Rd(e)):[Rd(n)]}function Rd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function uT(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cT(n){const e=Rd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function dT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>fS(e)):[fS(n)]}function Jp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function pS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function mS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Jp(n)?n:{role:"user",parts:dT(n)}}function Bm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(pS(n)||mS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Jp(n[0]);for(const i of n){const l=Jp(i);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(i);else{if(pS(i)||mS(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return s||e.push({role:"user",parts:dT(t)}),e}function u2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Zs).includes(t[0].toUpperCase())?t[0].toUpperCase():Zs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Zs).includes(s.toUpperCase())?s.toUpperCase():Zs.TYPE_UNSPECIFIED})}}function ia(n){const e={},t=["items"],s=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&u2(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Zs).includes(f.toUpperCase())?f.toUpperCase():Zs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ia(f);else if(s.includes(c)){const m=[];for(const v of f){if(v.type=="null"){e.nullable=!0;continue}m.push(ia(v))}e[c]=m}else if(i.includes(c)){const m={};for(const[v,b]of Object.entries(f))m[v]=ia(b);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Jm(n){return ia(n)}function Km(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Wm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ia(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ia(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ia(e.response));return n}function Ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function c2(n,e,t,s=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function hs(n,e){if(typeof e!="string")throw new Error("name must be a string");return c2(n,e,"cachedContents")}function hT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function po(n){return zm(n)}function d2(n){return n!=null&&typeof n=="object"&&"name"in n}function h2(n){return n!=null&&typeof n=="object"&&"video"in n}function f2(n){return n!=null&&typeof n=="object"&&"uri"in n}function fT(n){var e;let t;if(d2(n)&&(t=n.name),!(f2(n)&&(t=n.uri,t===void 0))&&!(h2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function pT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mT(n){for(const e of["models","tunedModels","publisherModels"])if(p2(n,e))return n[e];return[]}function p2(n,e){return n!==null&&typeof n=="object"&&e in n}function m2(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function g2(n,e={}){const t=[],s=new Set;for(const i of n){const l=i.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=m2(i,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function gT(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function v2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vT(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let i=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const c=l.response;if(!(typeof c!="object"||c===null)&&c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ka(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function y2(n){const e={},t=d(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>X2(c))),h(e,["inlinedResponses"],l)}const i=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function b2(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const i=d(n,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function w2(n){const e={},t=d(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const i=d(n,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ld(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["metadata","state"]);i!=null&&h(e,["state"],yT(i));const l=d(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const f=d(n,["metadata","updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&h(e,["model"],m);const v=d(n,["metadata","output"]);return v!=null&&h(e,["dest"],y2(vT(v))),e}function Kp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["state"]);i!=null&&h(e,["state"],yT(i));const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["createTime"]);c!=null&&h(e,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(e,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(e,["updateTime"],v);const b=d(n,["model"]);b!=null&&h(e,["model"],b);const S=d(n,["inputConfig"]);S!=null&&h(e,["src"],S2(S));const T=d(n,["outputConfig"]);T!=null&&h(e,["dest"],b2(vT(T)));const N=d(n,["completionStats"]);return N!=null&&h(e,["completionStats"],N),e}function S2(n){const e={},t=d(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const i=d(n,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function E2(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&h(t,["fileName"],s);const i=d(e,["inlinedRequests"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Q2(n,c))),h(t,["requests","requests"],l)}return t}function _2(n){const e={},t=d(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const i=d(n,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function T2(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function I2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function C2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function k2(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],A2(s));const i=d(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(N=>N)),h(e,["safetyRatings"],T)}const S=d(n,["urlContextMetadata"]);return S!=null&&h(e,["urlContextMetadata"],S),e}function A2(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["citations"],s)}return e}function bT(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>oD(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function N2(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function x2(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],w2(v2(i))),t}function gS(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["src"]);i!=null&&h(t,["batch","inputConfig"],E2(n,gT(n,i)));const l=d(e,["config"]);return l!=null&&N2(l,t),t}function O2(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],$e(n,s));const i=d(e,["src"]);i!=null&&h(t,["inputConfig"],_2(gT(n,i)));const l=d(e,["config"]);return l!=null&&x2(l,t),t}function R2(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function P2(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["src"]);i!=null&&h(t,["batch","inputConfig"],j2(n,i));const l=d(e,["config"]);return l!=null&&R2(l,t),t}function D2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function M2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function L2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function U2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function F2(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=Bm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const i=d(e,["config"]);return i!=null&&(h(t,["_self"],V2(i,t)),MP(t,{"requests[].*":"requests[].request.*"})),t}function V2(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function j2(n,e){const t={},s=d(e,["fileName"]);s!=null&&h(t,["file_name"],s);const i=d(e,["inlinedRequests"]);return i!=null&&h(t,["requests"],F2(n,i)),t}function H2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function q2(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z2(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function G2(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],bT(rn(i)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const S=d(e,["responseLogprobs"]);S!=null&&h(s,["responseLogprobs"],S);const T=d(e,["logprobs"]);T!=null&&h(s,["logprobs"],T);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const q=d(e,["frequencyPenalty"]);q!=null&&h(s,["frequencyPenalty"],q);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const H=d(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(O=>iD(O))),h(t,["safetySettings"],F)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let F=Ca(ie);Array.isArray(F)&&(F=F.map(O=>lD(Ia(O)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],aD(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&h(t,["cachedContent"],hs(n,re));const x=d(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const k=d(e,["mediaResolution"]);k!=null&&h(s,["mediaResolution"],k);const A=d(e,["speechConfig"]);if(A!=null&&h(s,["speechConfig"],Km(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],Y2(D)),s}function $2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>k2(v))),h(e,["candidates"],m)}const i=d(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function B2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function J2(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],ka(n,s)),t}function K2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function W2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function Y2(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Q2(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["request","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let f=jn(i);Array.isArray(f)&&(f=f.map(m=>bT(m))),h(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(e,["config"]);return c!=null&&h(t,["request","generationConfig"],G2(n,c,d(t,["request"],{}))),t}function X2(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],$2(t));const s=d(n,["error"]);return s!=null&&h(e,["error"],s),e}function Z2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function eD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const l=d(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function tD(n){const e={},t=d(n,["config"]);return t!=null&&Z2(t,e),e}function nD(n){const e={},t=d(n,["config"]);return t!=null&&eD(t,e),e}function rD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["operations"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ld(c))),h(e,["batchJobs"],l)}return e}function sD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["batchPredictionJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Kp(c))),h(e,["batchJobs"],l)}return e}function oD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],H2(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],q2(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],T2(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const S=d(n,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const T=d(n,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function iD(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function aD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],z2(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function lD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],K2(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],W2(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var us;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(us||(us={}));class oi{constructor(e,t,s,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,i)}init(e,t,s){var i,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class uD extends ds{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new oi(us.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=gS(this.apiClient,e),s=t._url,i=ce("{model}:batchGenerateContent",s),l=t.batch.inputConfig.requests,c=l.requests,f=[];for(const m of c){const v=Object.assign({},m);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const S=v.request;S.systemInstruction=b,v.request=S}f.push(v)}return l.requests=f,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},i=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${i}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${i}`;else if(c)s.dest=`${c}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=O2(this.apiClient,e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}else{const v=gS(this.apiClient,e);return f=ce("{model}:batchGenerateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async createEmbeddingsInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=P2(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>ld(m))}}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=J2(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Kp(b))}else{const v=B2(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>ld(b))}}async cancel(e){var t,s,i,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=C2(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=I2(this.apiClient,e);c=ce("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=nD(e);return f=ce("batchPredictionJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=sD(b),T=new hS;return Object.assign(T,S),T})}else{const v=tD(e);return f=ce("batches",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=rD(b),T=new hS;return Object.assign(T,S),T})}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=M2(this.apiClient,e);return f=ce("batchPredictionJobs/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>U2(b))}else{const v=D2(this.apiClient,e);return f=ce("batches/{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>L2(b))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function cD(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function vS(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>PD(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function dD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let b=jn(c);Array.isArray(b)&&(b=b.map(S=>vS(S))),h(e,["contents"],b)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],vS(rn(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let b=m;Array.isArray(b)&&(b=b.map(S=>MD(S))),h(e,["tools"],b)}const v=d(n,["toolConfig"]);if(e!==void 0&&v!=null&&h(e,["toolConfig"],DD(v)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const l=d(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let S=jn(c);Array.isArray(S)&&(S=S.map(T=>T)),h(e,["contents"],S)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&h(e,["systemInstruction"],rn(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let S=m;Array.isArray(S)&&(S=S.map(T=>LD(T))),h(e,["tools"],S)}const v=d(n,["toolConfig"]);e!==void 0&&v!=null&&h(e,["toolConfig"],v);const b=d(n,["kmsKeyName"]);return e!==void 0&&b!=null&&h(e,["encryption_spec","kmsKeyName"],b),t}function fD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aT(n,s));const i=d(e,["config"]);return i!=null&&dD(i,t),t}function pD(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["model"],aT(n,s));const i=d(e,["config"]);return i!=null&&hD(i,t),t}function mD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function gD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function vD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function yD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function bD(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function wD(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SD(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ED(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function _D(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function TD(n,e){const t={},s=d(e,["name"]);return s!=null&&h(t,["_url","name"],hs(n,s)),t}function ID(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function CD(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function kD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function AD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function ND(n){const e={},t=d(n,["config"]);return t!=null&&kD(t,e),e}function xD(n){const e={},t=d(n,["config"]);return t!=null&&AD(t,e),e}function OD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function RD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function PD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],bD(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],wD(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],cD(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const S=d(n,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const T=d(n,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function DD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],SD(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function MD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],ID(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],CD(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function LD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let S=t;Array.isArray(S)&&(S=S.map(T=>ED(T))),h(e,["functionDeclarations"],S)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function UD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function FD(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const i=d(n,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),t}function VD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const i=d(e,["config"]);return i!=null&&UD(i,t),t}function jD(n,e){const t={},s=d(e,["name"]);s!=null&&h(t,["_url","name"],hs(n,s));const i=d(e,["config"]);return i!=null&&FD(i,t),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class HD extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oi(us.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=pD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=fD(this.apiClient,e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=TD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=_D(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=gD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=yD(b),T=new cS;return Object.assign(T,S),T})}else{const v=mD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=vD(b),T=new cS;return Object.assign(T,S),T})}}async update(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=jD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>b)}else{const v=VD(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>b)}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=xD(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=RD(b),T=new dS;return Object.assign(T,S),T})}else{const v=ND(e);return f=ce("cachedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=OD(b),T=new dS;return Object.assign(T,S),T})}}}function yS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function aa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(N){return function(q){return Promise.resolve(q).then(N,S)}}function f(N,q){s[N]&&(i[N]=function(L){return new Promise(function(H,J){l.push([N,L,H,J])>1||m(N,L)})},q&&(i[N]=q(i[N])))}function m(N,q){try{v(s[N](q))}catch(L){T(l[0][3],L)}}function v(N){N.value instanceof at?Promise.resolve(N.value.v).then(b,S):T(l[0][2],N)}function b(N){m("next",N)}function S(N){m("throw",N)}function T(N,q){N(q),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Wl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yS=="function"?yS(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,m){c=n[l](c),i(f,m,c.done,c.value)})}}function i(l,c,f,m){Promise.resolve(m).then(function(v){l({value:v,done:f})},c)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function qD(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:wT(t)}function wT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function zD(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const i=[];let l=!0;for(;s<t&&n[s].role==="model";)i.push(n[s]),l&&!wT(n[s])&&(l=!1),s++;l?e.push(...i):e.pop()}return e}class GD{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new $D(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $D{constructor(e,t,s,i={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),zD(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const m=await i,v=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,b=m.automaticFunctionCallingHistory,S=this.getHistory(!0).length;let T=[];b!=null&&(T=(f=b.slice(S))!==null&&f!==void 0?f:[]);const N=v?[v]:[];this.recordHistory(s,N,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const l=await i;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?bS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,i;return aa(this,arguments,function*(){var l,c,f,m;const v=[];try{for(var b=!0,S=Wl(e),T;T=yield at(S.next()),l=T.done,!l;b=!0){m=T.value,b=!1;const N=m;if(qD(N)){const q=(i=(s=N.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content;q!==void 0&&v.push(q)}yield yield at(N)}}catch(N){c={error:N}}finally{try{!b&&!l&&(f=S.return)&&(yield at(f.call(S)))}finally{if(c)throw c.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let i=[];t.length>0&&t.every(l=>l.role!==void 0)?i=t:i.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...bS(s)):this.history.push(e),this.history.push(...i)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eh.prototype)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function BD(n){const e={},t=d(n,["file"]);return t!=null&&h(e,["file"],t),e}function JD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function KD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fT(t)),e}function WD(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function YD(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","file"],fT(t)),e}function QD(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function XD(n){const e={},t=d(n,["config"]);return t!=null&&QD(t,e),e}function ZD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class eM extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new oi(us.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XD(e);return l=ce("files",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=ZD(m),b=new s2;return Object.assign(b,v),b})}}async createInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=BD(e);return l=ce("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=JD(m),b=new o2;return Object.assign(b,v),b})}}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KD(e);return l=ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=WD(m),b=new i2;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function ud(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function tM(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>vM(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function nM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function rM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function oM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const i=d(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const S=d(n,["presencePenalty"]);S!=null&&h(e,["presencePenalty"],S);const T=d(n,["responseLogprobs"]);T!=null&&h(e,["responseLogprobs"],T);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const q=d(n,["responseModalities"]);q!=null&&h(e,["responseModalities"],q);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const H=d(n,["routingConfig"]);H!=null&&h(e,["routingConfig"],H);const J=d(n,["seed"]);J!=null&&h(e,["seed"],J);const Z=d(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],ST(Z));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const ie=d(n,["temperature"]);ie!=null&&h(e,["temperature"],ie);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const re=d(n,["topK"]);re!=null&&h(e,["topK"],re);const x=d(n,["topP"]);if(x!=null&&h(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function lM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const S=d(n,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],Wm(S));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&h(e,["setup","systemInstruction"],tM(rn(q)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Ca(L);Array.isArray(re)&&(re=re.map(x=>bM(Ia(x)))),h(e,["setup","tools"],re)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],yM(H));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function uM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],oM(s));const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const S=d(n,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],ST(Wm(S)));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&h(e,["setup","systemInstruction"],rn(q));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Ca(L);Array.isArray(re)&&(re=re.map(x=>wM(Ia(x)))),h(e,["setup","tools"],re)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],H);const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function cM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],lM(i,t)),t}function dM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],uM(i,t)),t}function hM(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function fM(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["weightedPrompts"],s)}return e}function pM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lT(t);Array.isArray(v)&&(v=v.map(b=>ud(b))),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],ud(cT(s)));const i=d(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const l=d(n,["video"]);l!=null&&h(e,["video"],ud(uT(l)));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function mM(n){const e={},t=d(n,["media"]);if(t!=null){let v=lT(t);Array.isArray(v)&&(v=v.map(b=>b)),h(e,["mediaChunks"],v)}const s=d(n,["audio"]);s!=null&&h(e,["audio"],cT(s));const i=d(n,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const l=d(n,["video"]);l!=null&&h(e,["video"],uT(l));const c=d(n,["text"]);c!=null&&h(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&h(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&h(e,["activityEnd"],m),e}function gM(n){const e={},t=d(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const i=d(n,["toolCall"]);i!=null&&h(e,["toolCall"],i);const l=d(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],SM(c));const f=d(n,["goAway"]);f!=null&&h(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);return m!=null&&h(e,["sessionResumptionUpdate"],m),e}function vM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],nM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],rM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],ud(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const S=d(n,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const T=d(n,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function yM(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ST(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function bM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],iM(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],aM(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function wM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let S=t;Array.isArray(S)&&(S=S.map(T=>sM(T))),h(e,["functionDeclarations"],S)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function SM(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const i=d(n,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const f=d(n,["totalTokenCount"]);f!=null&&h(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(q=>q)),h(e,["promptTokensDetails"],N)}const v=d(n,["cacheTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(q=>q)),h(e,["cacheTokensDetails"],N)}const b=d(n,["candidatesTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(q=>q)),h(e,["responseTokensDetails"],N)}const S=d(n,["toolUsePromptTokensDetails"]);if(S!=null){let N=S;Array.isArray(N)&&(N=N.map(q=>q)),h(e,["toolUsePromptTokensDetails"],N)}const T=d(n,["trafficType"]);return T!=null&&h(e,["trafficType"],T),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function EM(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _M(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],TM(s));const i=d(n,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const l=d(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const v=d(n,["logprobsResult"]);v!=null&&h(e,["logprobsResult"],v);const b=d(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(N=>N)),h(e,["safetyRatings"],T)}const S=d(n,["urlContextMetadata"]);return S!=null&&h(e,["urlContextMetadata"],S),e}function TM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>i)),h(e,["citations"],s)}return e}function IM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let l=jn(i);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function CM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(e,["tokensInfo"],i)}return e}function kM(n){const e={},t=d(n,["values"]);t!=null&&h(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&h(e,["statistics"],AM(s)),e}function AM(n){const e={},t=d(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function th(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>UL(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function NM(n){const e={},t=d(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function xM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function OM(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],rn(s));const i=d(n,["tools"]);if(e!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>CT(f))),h(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],EL(l)),t}function RM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let c=jn(i);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&xM(l),t}function PM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let c=jn(i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&OM(l,t),t}function DM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const i=d(n,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function MM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function LM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function UM(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function FM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function VM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function jM(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const S=d(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&h(e,["parameters","includeRaiReason"],T);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&h(e,["parameters","outputOptions","mimeType"],q);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const H=d(n,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const J=d(n,["labels"]);e!==void 0&&J!=null&&h(e,["labels"],J);const Z=d(n,["editMode"]);e!==void 0&&Z!=null&&h(e,["parameters","editMode"],Z);const se=d(n,["baseSteps"]);return e!==void 0&&se!=null&&h(e,["parameters","editConfig","baseSteps"],se),t}function HM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>zL(m))),h(t,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&jM(c,t),t}function qM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>nh(l))),h(e,["generatedImages"],i)}return e}function zM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function GM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const i=d(n,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&h(e,["parameters","autoTruncate"],f),t}function $M(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let f=Bm(n,i);Array.isArray(f)&&(f=f.map(m=>m)),h(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&zM(l,t);const c=d(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],$e(n,c)),t}function BM(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let c=Bm(n,i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&GM(l,t),t}function JM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const i=d(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function KM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kM(c))),h(e,["embeddings"],l)}const i=d(n,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function WM(n){const e={},t=d(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function YM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function QM(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XM(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const s=d(n,["name"]);s!=null&&h(e,["name"],s);const i=d(n,["parameters"]);i!=null&&h(e,["parameters"],i);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&h(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function eL(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],th(rn(i)));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const S=d(e,["responseLogprobs"]);S!=null&&h(s,["responseLogprobs"],S);const T=d(e,["logprobs"]);T!=null&&h(s,["logprobs"],T);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const q=d(e,["frequencyPenalty"]);q!=null&&h(s,["frequencyPenalty"],q);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const H=d(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const se=d(e,["safetySettings"]);if(t!==void 0&&se!=null){let F=se;Array.isArray(F)&&(F=F.map(O=>GL(O))),h(t,["safetySettings"],F)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let F=Ca(ie);Array.isArray(F)&&(F=F.map(O=>QL(Ia(O)))),h(t,["tools"],F)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&h(t,["toolConfig"],YL(pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=d(e,["cachedContent"]);t!==void 0&&re!=null&&h(t,["cachedContent"],hs(n,re));const x=d(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const k=d(e,["mediaResolution"]);k!=null&&h(s,["mediaResolution"],k);const A=d(e,["speechConfig"]);if(A!=null&&h(s,["speechConfig"],Km(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=d(e,["thinkingConfig"]);M!=null&&h(s,["thinkingConfig"],M);const D=d(e,["imageConfig"]);return D!=null&&h(s,["imageConfig"],kL(D)),s}function tL(n,e,t){const s={},i=d(e,["systemInstruction"]);t!==void 0&&i!=null&&h(t,["systemInstruction"],rn(i));const l=d(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&h(s,["topP"],c);const f=d(e,["topK"]);f!=null&&h(s,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&h(s,["candidateCount"],m);const v=d(e,["maxOutputTokens"]);v!=null&&h(s,["maxOutputTokens"],v);const b=d(e,["stopSequences"]);b!=null&&h(s,["stopSequences"],b);const S=d(e,["responseLogprobs"]);S!=null&&h(s,["responseLogprobs"],S);const T=d(e,["logprobs"]);T!=null&&h(s,["logprobs"],T);const N=d(e,["presencePenalty"]);N!=null&&h(s,["presencePenalty"],N);const q=d(e,["frequencyPenalty"]);q!=null&&h(s,["frequencyPenalty"],q);const L=d(e,["seed"]);L!=null&&h(s,["seed"],L);const H=d(e,["responseMimeType"]);H!=null&&h(s,["responseMimeType"],H);const J=d(e,["responseSchema"]);J!=null&&h(s,["responseSchema"],Jm(J));const Z=d(e,["responseJsonSchema"]);Z!=null&&h(s,["responseJsonSchema"],Z);const se=d(e,["routingConfig"]);se!=null&&h(s,["routingConfig"],se);const ie=d(e,["modelSelectionConfig"]);ie!=null&&h(s,["modelConfig"],ie);const pe=d(e,["safetySettings"]);if(t!==void 0&&pe!=null){let Y=pe;Array.isArray(Y)&&(Y=Y.map(le=>le)),h(t,["safetySettings"],Y)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let Y=Ca(re);Array.isArray(Y)&&(Y=Y.map(le=>CT(Ia(le)))),h(t,["tools"],Y)}const x=d(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const k=d(e,["labels"]);t!==void 0&&k!=null&&h(t,["labels"],k);const A=d(e,["cachedContent"]);t!==void 0&&A!=null&&h(t,["cachedContent"],hs(n,A));const M=d(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const F=d(e,["speechConfig"]);F!=null&&h(s,["speechConfig"],IT(Km(F)));const O=d(e,["audioTimestamp"]);O!=null&&h(s,["audioTimestamp"],O);const Be=d(e,["thinkingConfig"]);Be!=null&&h(s,["thinkingConfig"],Be);const pt=d(e,["imageConfig"]);return pt!=null&&h(s,["imageConfig"],AL(pt)),s}function wS(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let c=jn(i);Array.isArray(c)&&(c=c.map(f=>th(f))),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],eL(n,l,t)),t}function SS(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["contents"]);if(i!=null){let c=jn(i);Array.isArray(c)&&(c=c.map(f=>f)),h(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&h(t,["generationConfig"],tL(n,l,t)),t}function ES(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>_M(v))),h(e,["candidates"],m)}const i=d(n,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&h(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function _S(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>b)),h(e,["candidates"],v)}const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const l=d(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const f=d(n,["responseId"]);f!=null&&h(e,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&h(e,["usageMetadata"],m),e}function nL(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const v=d(n,["includeRaiReason"]);e!==void 0&&v!=null&&h(e,["parameters","includeRaiReason"],v);const b=d(n,["language"]);e!==void 0&&b!=null&&h(e,["parameters","language"],b);const S=d(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const T=d(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=d(n,["imageSize"]);if(e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function rL(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&h(e,["parameters","guidanceScale"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&h(e,["parameters","safetySetting"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const S=d(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&h(e,["parameters","includeSafetyAttributes"],S);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&h(e,["parameters","includeRaiReason"],T);const N=d(n,["language"]);e!==void 0&&N!=null&&h(e,["parameters","language"],N);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&h(e,["parameters","outputOptions","mimeType"],q);const L=d(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&h(e,["parameters","outputOptions","compressionQuality"],L);const H=d(n,["addWatermark"]);e!==void 0&&H!=null&&h(e,["parameters","addWatermark"],H);const J=d(n,["labels"]);e!==void 0&&J!=null&&h(e,["labels"],J);const Z=d(n,["imageSize"]);e!==void 0&&Z!=null&&h(e,["parameters","sampleImageSize"],Z);const se=d(n,["enhancePrompt"]);return e!==void 0&&se!=null&&h(e,["parameters","enhancePrompt"],se),t}function sL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["config"]);return l!=null&&nL(l,t),t}function oL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["config"]);return l!=null&&rL(l,t),t}function iL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>yL(c))),h(e,["generatedImages"],l)}const i=d(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],_T(i)),e}function aL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>nh(c))),h(e,["generatedImages"],l)}const i=d(n,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],TT(i)),e}function lL(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=d(n,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const v=d(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&h(e,["parameters","enhancePrompt"],v),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=d(n,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],rh(b));const S=d(n,["referenceImages"]);if(e!==void 0&&S!=null){let T=S;Array.isArray(T)&&(T=T.map(N=>c4(N))),h(e,["instances[0]","referenceImages"],T)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uL(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const l=d(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const v=d(n,["resolution"]);e!==void 0&&v!=null&&h(e,["parameters","resolution"],v);const b=d(n,["personGeneration"]);e!==void 0&&b!=null&&h(e,["parameters","personGeneration"],b);const S=d(n,["pubsubTopic"]);e!==void 0&&S!=null&&h(e,["parameters","pubsubTopic"],S);const T=d(n,["negativePrompt"]);e!==void 0&&T!=null&&h(e,["parameters","negativePrompt"],T);const N=d(n,["enhancePrompt"]);e!==void 0&&N!=null&&h(e,["parameters","enhancePrompt"],N);const q=d(n,["generateAudio"]);e!==void 0&&q!=null&&h(e,["parameters","generateAudio"],q);const L=d(n,["lastFrame"]);e!==void 0&&L!=null&&h(e,["instances[0]","lastFrame"],or(L));const H=d(n,["referenceImages"]);if(e!==void 0&&H!=null){let se=H;Array.isArray(se)&&(se=se.map(ie=>d4(ie))),h(e,["instances[0]","referenceImages"],se)}const J=d(n,["mask"]);e!==void 0&&J!=null&&h(e,["instances[0]","mask"],u4(J));const Z=d(n,["compressionQuality"]);return e!==void 0&&Z!=null&&h(e,["parameters","compressionQuality"],Z),t}function cL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],pL(c)),e}function dL(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],mL(c)),e}function hL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],rh(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],kT(c));const f=d(e,["source"]);f!=null&&gL(f,t);const m=d(e,["config"]);return m!=null&&lL(m,t),t}function fL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["prompt"]);i!=null&&h(t,["instances[0]","prompt"],i);const l=d(e,["image"]);l!=null&&h(t,["instances[0]","image"],or(l));const c=d(e,["video"]);c!=null&&h(t,["instances[0]","video"],AT(c));const f=d(e,["source"]);f!=null&&vL(f,t);const m=d(e,["config"]);return m!=null&&uL(m,t),t}function pL(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>wL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function mL(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>SL(c))),h(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const i=d(n,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function gL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],rh(i));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],kT(l)),t}function vL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],or(i));const l=d(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],AT(l)),t}function yL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],NL(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const i=d(n,["_self"]);return i!=null&&h(e,["safetyAttributes"],_T(i)),e}function nh(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],ET(t));const s=d(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const i=d(n,["_self"]);i!=null&&h(e,["safetyAttributes"],TT(i));const l=d(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function bL(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["mask"],ET(t));const s=d(n,["labels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(e,["labels"],i)}return e}function wL(n){const e={},t=d(n,["video"]);return t!=null&&h(e,["video"],a4(t)),e}function SL(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],l4(t)),e}function EL(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const i=d(n,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const l=d(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const f=d(n,["frequencyPenalty"]);f!=null&&h(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&h(e,["logprobs"],m);const v=d(n,["maxOutputTokens"]);v!=null&&h(e,["maxOutputTokens"],v);const b=d(n,["mediaResolution"]);b!=null&&h(e,["mediaResolution"],b);const S=d(n,["presencePenalty"]);S!=null&&h(e,["presencePenalty"],S);const T=d(n,["responseLogprobs"]);T!=null&&h(e,["responseLogprobs"],T);const N=d(n,["responseMimeType"]);N!=null&&h(e,["responseMimeType"],N);const q=d(n,["responseModalities"]);q!=null&&h(e,["responseModalities"],q);const L=d(n,["responseSchema"]);L!=null&&h(e,["responseSchema"],L);const H=d(n,["routingConfig"]);H!=null&&h(e,["routingConfig"],H);const J=d(n,["seed"]);J!=null&&h(e,["seed"],J);const Z=d(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],IT(Z));const se=d(n,["stopSequences"]);se!=null&&h(e,["stopSequences"],se);const ie=d(n,["temperature"]);ie!=null&&h(e,["temperature"],ie);const pe=d(n,["thinkingConfig"]);pe!=null&&h(e,["thinkingConfig"],pe);const re=d(n,["topK"]);re!=null&&h(e,["topK"],re);const x=d(n,["topP"]);if(x!=null&&h(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _L(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function TL(n,e){const t={},s=d(e,["model"]);return s!=null&&h(t,["_url","name"],$e(n,s)),t}function IL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function CL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function kL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=d(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const i=d(n,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const l=d(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function NL(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],po(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function ET(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function rh(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],po(t));const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function or(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function xL(n,e,t){const s={},i=d(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pT(n,f)),s}function OL(n,e,t){const s={},i=d(e,["pageSize"]);t!==void 0&&i!=null&&h(t,["_query","pageSize"],i);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&h(t,["_url","models_url"],pT(n,f)),s}function RL(n,e){const t={},s=d(e,["config"]);return s!=null&&xL(n,s,t),t}function PL(n,e){const t={},s=d(e,["config"]);return s!=null&&OL(n,s,t),t}function DL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["_self"]);if(i!=null){let l=mT(i);Array.isArray(l)&&(l=l.map(c=>Wp(c))),h(e,["models"],l)}return e}function ML(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["_self"]);if(i!=null){let l=mT(i);Array.isArray(l)&&(l=l.map(c=>Yp(c))),h(e,["models"],l)}return e}function LL(n){const e={},t=d(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const i=d(n,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function Wp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const l=d(n,["version"]);l!=null&&h(e,["version"],l);const c=d(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],XL(c));const f=d(n,["inputTokenLimit"]);f!=null&&h(e,["inputTokenLimit"],f);const m=d(n,["outputTokenLimit"]);m!=null&&h(e,["outputTokenLimit"],m);const v=d(n,["supportedGenerationMethods"]);v!=null&&h(e,["supportedActions"],v);const b=d(n,["temperature"]);b!=null&&h(e,["temperature"],b);const S=d(n,["maxTemperature"]);S!=null&&h(e,["maxTemperature"],S);const T=d(n,["topP"]);T!=null&&h(e,["topP"],T);const N=d(n,["topK"]);N!=null&&h(e,["topK"],N);const q=d(n,["thinking"]);return q!=null&&h(e,["thinking"],q),e}function Yp(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["displayName"]);s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const l=d(n,["versionId"]);l!=null&&h(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let S=c;Array.isArray(S)&&(S=S.map(T=>WM(T))),h(e,["endpoints"],S)}const f=d(n,["labels"]);f!=null&&h(e,["labels"],f);const m=d(n,["_self"]);m!=null&&h(e,["tunedModelInfo"],ZL(m));const v=d(n,["defaultCheckpointId"]);v!=null&&h(e,["defaultCheckpointId"],v);const b=d(n,["checkpoints"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(T=>T)),h(e,["checkpoints"],S)}return e}function UL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],YM(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],QM(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],EM(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const S=d(n,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const T=d(n,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function FL(n){const e={},t=d(n,["productImage"]);return t!=null&&h(e,["image"],or(t)),e}function VL(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const i=d(n,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&h(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const v=d(n,["addWatermark"]);e!==void 0&&v!=null&&h(e,["parameters","addWatermark"],v);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","mimeType"],b);const S=d(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S);const T=d(n,["enhancePrompt"]);e!==void 0&&T!=null&&h(e,["parameters","enhancePrompt"],T);const N=d(n,["labels"]);return e!==void 0&&N!=null&&h(e,["labels"],N),t}function jL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["source"]);i!=null&&qL(i,t);const l=d(e,["config"]);return l!=null&&VL(l,t),t}function HL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>nh(i))),h(e,["generatedImages"],s)}return e}function qL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],or(i));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>FL(f))),h(e,["instances[0]","productImages"],c)}return t}function zL(n){const e={},t=d(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],or(t));const s=d(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const i=d(n,["referenceType"]);i!=null&&h(e,["referenceType"],i);const l=d(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],LL(l));const c=d(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],NM(c));const f=d(n,["styleImageConfig"]);f!=null&&h(e,["styleImageConfig"],f);const m=d(n,["subjectImageConfig"]);return m!=null&&h(e,["subjectImageConfig"],m),e}function _T(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const i=d(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function TT(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const i=d(n,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function GL(n){const e={},t=d(n,["category"]);if(t!=null&&h(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function $L(n){const e={},t=d(n,["image"]);return t!=null&&h(e,["image"],or(t)),e}function BL(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const i=d(n,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&h(e,["parameters","binaryColorThreshold"],f);const m=d(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),t}function JL(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["source"]);i!=null&&WL(i,t);const l=d(e,["config"]);return l!=null&&BL(l,t),t}function KL(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(i=>bL(i))),h(e,["generatedMasks"],s)}return e}function WL(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const i=d(n,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],or(i));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],$L(l)),t}function IT(n){const e={},t=d(n,["languageCode"]);t!=null&&h(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&h(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function YL(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],XM(t));const s=d(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function QL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],IL(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],CL(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}function CT(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let S=t;Array.isArray(S)&&(S=S.map(T=>ZM(T))),h(e,["functionDeclarations"],S)}const s=d(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const i=d(n,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const l=d(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const f=d(n,["enterpriseWebSearch"]);f!=null&&h(e,["enterpriseWebSearch"],f);const m=d(n,["googleMaps"]);m!=null&&h(e,["googleMaps"],m);const v=d(n,["googleSearch"]);v!=null&&h(e,["googleSearch"],v);const b=d(n,["urlContext"]);return b!=null&&h(e,["urlContext"],b),e}function XL(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const i=d(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function ZL(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&h(e,["createTime"],s);const i=d(n,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function e4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function t4(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const i=d(n,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function n4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","name"],$e(n,s));const i=d(e,["config"]);return i!=null&&e4(i,t),t}function r4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["config"]);return i!=null&&t4(i,t),t}function s4(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const i=d(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=d(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const v=d(n,["enhanceInputImage"]);e!==void 0&&v!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],v);const b=d(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const S=d(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const T=d(n,["numberOfImages"]);e!==void 0&&T!=null&&h(e,["parameters","sampleCount"],T);const N=d(n,["mode"]);return e!==void 0&&N!=null&&h(e,["parameters","mode"],N),t}function o4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["_url","model"],$e(n,s));const i=d(e,["image"]);i!=null&&h(t,["instances[0]","image"],or(i));const l=d(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&s4(c,t),t}function i4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>nh(l))),h(e,["generatedImages"],i)}return e}function a4(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],po(s));const i=d(n,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function l4(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function u4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["_self"],or(t));const s=d(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function c4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],rh(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function d4(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],or(t));const s=d(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function kT(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function AT(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],po(s));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const h4="Content-Type",f4="X-Server-Timeout",p4="User-Agent",Qp="x-goog-api-client",m4="1.30.0",g4=`google-genai-sdk/${m4}`,v4="v1beta1",y4="v1beta",TS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class b4{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:v4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:y4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const i=[this.getRequestUrlInternal(t)];return s&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))i.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,i.toString(),e.abortSignal),this.unaryApiCall(i,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[i,l]of Object.entries(t))typeof l=="object"?s[i]=Object.assign(Object.assign({},s[i]),l):l!==void 0&&(s[i]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,s);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,i.toString(),e.abortSignal),this.streamApiCall(i,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,i){if(t&&t.timeout||i){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}i&&i.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&w4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await IS(i),new Bp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async i=>(await IS(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return aa(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield at(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(f,{stream:!0});try{const b=JSON.parse(m);if("error"in b){const S=JSON.parse(JSON.stringify(b.error)),T=S.status,N=S.code,q=`got status: ${T}. ${JSON.stringify(b)}`;if(N>=400&&N<600)throw new eh({message:q,status:N})}}catch(b){if(b.name==="ApiError")throw b}l+=m;let v=l.match(TS);for(;v;){const b=v[1];try{const S=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new Bp(S)),l=l.slice(v[0].length),v=l.match(TS)}catch(S){throw new Error(`exception parsing stream chunk ${b}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=g4+" "+this.clientOptions.userAgentExtra;return e[p4]=t,e[Qp]=t,e[h4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[i,l]of Object.entries(e.headers))s.append(i,l);e.timeout&&e.timeout>0&&s.append(f4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);i.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=f;const m={file:i},v=this.getFileName(e),b=ce("upload/v1beta/files",m._url),S=await this.fetchUploadUrl(b,i.sizeBytes,i.mimeType,v,m,t==null?void 0:t.httpOptions);return l.upload(e,S,this)}async uploadFileToFileSearchStore(e,t,s){var i;const l=this.clientOptions.uploader,c=await l.stat(t),f=String(c.size),m=(i=s==null?void 0:s.mimeType)!==null&&i!==void 0?i:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const v=`upload/v1beta/${e}:uploadToFileSearchStore`,b=this.getFileName(t),S={};s!=null&&s.customMetadata&&(S.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(S.chunkingConfig=s.chunkingConfig);const T=await this.fetchUploadUrl(v,f,m,b,S,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,i,l,c){var f;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},i?{"X-Goog-Upload-File-Name":i}:{})};const v=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!v||!(v!=null&&v.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(f=v==null?void 0:v.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function IS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(s);throw t>=400&&t<600?new eh({message:i,status:t}):new Error(i)}}function w4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const v=c[m],b=f[m];v&&typeof v=="object"&&!Array.isArray(v)&&b&&typeof b=="object"&&!Array.isArray(b)?f[m]=s(b,v):(b&&v&&typeof b!=typeof v&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof b}, New type: ${typeof v}. Overwriting.`),f[m]=v)}return f}const i=s(t,e);n.body=JSON.stringify(i)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const S4="mcp_used/unknown";let E4=!1;function NT(n){for(const e of n)if(_4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return E4}function xT(n){var e;const t=(e=n[Qp])!==null&&e!==void 0?e:"";n[Qp]=(t+` ${S4}`).trimStart()}function _4(n){return n!==null&&typeof n=="object"&&n instanceof Ym}function T4(n,e=100){return aa(this,arguments,function*(){let t,s=0;for(;s<e;){const i=yield at(n.listTools({cursor:t}));for(const l of i.tools)yield yield at(l),s++;if(!i.nextCursor)break;t=i.nextCursor}})}class Ym{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Ym(e,t)}async initialize(){var e,t,s,i;if(this.mcpTools.length>0)return;const l={},c=[];for(const b of this.mcpClients)try{for(var f=!0,m=(t=void 0,Wl(T4(b))),v;v=await m.next(),e=v.done,!e;f=!0){i=v.value,f=!1;const S=i;c.push(S);const T=S.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=b}}catch(S){t={error:S}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),g2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await i.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function I4(n,e,t){const s=new l2;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(s,i),e(s)}class C4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=N4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${i}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let v=()=>{};const b=new Promise(J=>{v=J}),S=e.callbacks,T=function(){v({})},N=this.apiClient,q={onopen:T,onmessage:J=>{I4(N,S.onmessage,J)},onerror:(t=S==null?void 0:S.onerror)!==null&&t!==void 0?t:function(J){},onclose:(s=S==null?void 0:S.onclose)!==null&&s!==void 0?s:function(J){}},L=this.webSocketFactory.create(m,A4(c),q);L.connect(),await b;const H={setup:{model:$e(this.apiClient,e.model)}};return L.send(JSON.stringify(H)),new k4(L,this.apiClient)}}class k4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function A4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function N4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const x4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function O4(n,e,t){const s=new a2;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const l=JSON.parse(i);if(n.isVertexAI()){const c=gM(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class R4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new C4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,i,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),v=this.apiClient.getApiVersion();let b;const S=this.apiClient.getHeaders();e.config&&e.config.tools&&NT(e.config.tools)&&xT(S);const T=L4(S);if(this.apiClient.isVertexAI())b=`${m}/ws/google.cloud.aiplatform.${v}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,b);else{const A=this.apiClient.getApiKey();let M="BidiGenerateContent",D="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),v!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",D="access_token"),b=`${m}/ws/google.ai.generativelanguage.${v}.GenerativeService.${M}?${D}=${A}`}let N=()=>{};const q=new Promise(A=>{N=A}),L=e.callbacks,H=function(){var A;(A=L==null?void 0:L.onopen)===null||A===void 0||A.call(L),N({})},J=this.apiClient,Z={onopen:H,onmessage:A=>{O4(J,L.onmessage,A)},onerror:(t=L==null?void 0:L.onerror)!==null&&t!==void 0?t:function(A){},onclose:(s=L==null?void 0:L.onclose)!==null&&s!==void 0?s:function(A){}},se=this.webSocketFactory.create(b,M4(T),Z);se.connect(),await q;let ie=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const A=this.apiClient.getProject(),M=this.apiClient.getLocation();ie=`projects/${A}/locations/${M}/`+ie}let pe={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xd.AUDIO]}:e.config.responseModalities=[xd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],x=[];for(const A of re)if(this.isCallableTool(A)){const M=A;x.push(await M.tool())}else x.push(A);x.length>0&&(e.config.tools=x);const k={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?pe=dM(this.apiClient,k):pe=cM(this.apiClient,k),delete pe.config,se.send(JSON.stringify(pe)),new D4(se,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const P4={turnComplete:!0};class D4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=jn(t.turns),e.isVertexAI()||(s=s.map(i=>th(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const i of s){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(x4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},P4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mM(e)}:t={realtimeInput:pM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function M4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function L4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const CS=10;function kS(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){i=!0;break}if(!i)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function U4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>la(i)))!==null&&s!==void 0?s:!1}function AS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,i)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(i)}),t}function NS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class F4 extends ds{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,i,l,c,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!U4(t)||kS(t.config))return await this.generateContentInternal(m);const v=AS(t);if(v.length>0){const L=v.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${L}.`)}let b,S;const T=jn(m.contents),N=(l=(i=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:CS;let q=0;for(;q<N&&(b=await this.generateContentInternal(m),!(!b.functionCalls||b.functionCalls.length===0));){const L=b.candidates[0].content,H=[];for(const J of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(la(J)){const Z=await J.callTool(b.functionCalls);H.push(...Z)}q++,S={role:"user",parts:H},m.contents=jn(m.contents),m.contents.push(L),m.contents.push(S),NS(m.config)&&(T.push(L),T.push(S))}return NS(m.config)&&(b.automaticFunctionCallingHistory=T),b},this.generateContentStream=async t=>{var s,i,l,c,f;if(this.maybeMoveToResponseJsonSchem(t),kS(t.config)){const S=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(S)}const m=AS(t);if(m.length>0){const S=m.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${S}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const v=(l=(i=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,b=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(v&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var i;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&m!=null&&m.safetyAttributes&&((i=m==null?void 0:m.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const i={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((s=i.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new oi(us.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(i),i)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var s,i,l,c,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&!((i=t.video)===null||i===void 0)&&i.videoBytes?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,i;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>la(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&NT(e.config.tools)){const m=(i=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&i!==void 0?i:{};let v=Object.assign({},m);Object.keys(v).length===0&&(v=this.apiClient.getDefaultHeaders()),xT(v),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:v})}return f}async initAfcToolsMap(e){var t,s,i;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const f=c,m=await f.tool();for(const v of(i=m.functionDeclarations)!==null&&i!==void 0?i:[]){if(!v.name)throw new Error("Function declaration name is required.");if(l.has(v.name))throw new Error(`Duplicate tool declaration name: ${v.name}`);l.set(v.name,f)}}return l}async processAfcStream(e){var t,s,i;const l=(i=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:CS;let c=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(v,b,S){var T,N;return aa(this,arguments,function*(){for(var q,L,H,J;f<l;){c&&(f++,c=!1);const pe=yield at(v.processParamsMaybeAddMcpUsage(S)),re=yield at(v.generateContentStreamInternal(pe)),x=[],k=[];try{for(var Z=!0,se=(L=void 0,Wl(re)),ie;ie=yield at(se.next()),q=ie.done,!q;Z=!0){J=ie.value,Z=!1;const A=J;if(yield yield at(A),A.candidates&&!((T=A.candidates[0])===null||T===void 0)&&T.content){k.push(A.candidates[0].content);for(const M of(N=A.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(f<l&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(M.functionCall.name)){const D=yield at(b.get(M.functionCall.name).callTool([M.functionCall]));x.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(A){L={error:A}}finally{try{!Z&&!q&&(H=se.return)&&(yield at(H.call(se)))}finally{if(L)throw L.error}}if(x.length>0){c=!0;const A=new Ml;A.candidates=[{content:{role:"user",parts:x}}],yield yield at(A);const M=[];M.push(...k),M.push({role:"user",parts:x});const D=jn(S.contents).concat(M);S.contents=D}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=SS(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=_S(b),T=new Ml;return Object.assign(T,S),T})}else{const v=wS(this.apiClient,e);return f=ce("{model}:generateContent",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=ES(b),T=new Ml;return Object.assign(T,S),T})}}async generateContentStreamInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=SS(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var S,T,N,q;try{for(var L=!0,H=Wl(b),J;J=yield at(H.next()),S=J.done,!S;L=!0){q=J.value,L=!1;const Z=q,se=_S(yield at(Z.json()));se.sdkHttpResponse={headers:Z.headers};const ie=new Ml;Object.assign(ie,se),yield yield at(ie)}}catch(Z){T={error:Z}}finally{try{!L&&!S&&(N=H.return)&&(yield at(N.call(H)))}finally{if(T)throw T.error}}})})}else{const v=wS(this.apiClient,e);return f=ce("{model}:streamGenerateContent?alt=sse",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return aa(this,arguments,function*(){var S,T,N,q;try{for(var L=!0,H=Wl(b),J;J=yield at(H.next()),S=J.done,!S;L=!0){q=J.value,L=!1;const Z=q,se=ES(yield at(Z.json()));se.sdkHttpResponse={headers:Z.headers};const ie=new Ml;Object.assign(ie,se),yield yield at(ie)}}catch(Z){T={error:Z}}finally{try{!L&&!S&&(N=H.return)&&(yield at(N.call(H)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=BM(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=KM(b),T=new sS;return Object.assign(T,S),T})}else{const v=$M(this.apiClient,e);return f=ce("{model}:batchEmbedContents",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=JM(b),T=new sS;return Object.assign(T,S),T})}}async generateImagesInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=oL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=aL(b),T=new oS;return Object.assign(T,S),T})}else{const v=sL(this.apiClient,e);return f=ce("{model}:predict",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=iL(b),T=new oS;return Object.assign(T,S),T})}}async editImageInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=HM(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=qM(m),b=new YP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=o4(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=i4(m),b=new QP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=jL(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=HL(m),b=new XP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=JL(this.apiClient,e);return l=ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=KL(m),b=new ZP;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=TL(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=_L(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Wp(b))}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=ML(b),T=new iS;return Object.assign(T,S),T})}else{const v=RL(this.apiClient,e);return f=ce("{models_url}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=DL(b),T=new iS;return Object.assign(T,S),T})}}async update(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=r4(this.apiClient,e);return f=ce("{model}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>Yp(b))}else{const v=n4(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>Wp(b))}}async delete(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=UM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=VM(b),T=new aS;return Object.assign(T,S),T})}else{const v=LM(this.apiClient,e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=FM(b),T=new aS;return Object.assign(T,S),T})}}async countTokens(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=PM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=MM(b),T=new lS;return Object.assign(T,S),T})}else{const v=RM(this.apiClient,e);return f=ce("{model}:countTokens",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=DM(b),T=new lS;return Object.assign(T,S),T})}}async computeTokens(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=IM(this.apiClient,e);return l=ce("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>{const v=CM(m),b=new e2;return Object.assign(b,v),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=fL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c.then(b=>{const S=dL(b),T=new Od;return Object.assign(T,S),T})}else{const v=hL(this.apiClient,e);return f=ce("{model}:predictLongRunning",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c.then(b=>{const S=cL(b),T=new Od;return Object.assign(T,S),T})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class V4 extends ds{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=GP(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),c}else{const v=zP(e);return f=ce("{operationName}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=LP(e);return l=ce("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function j4(n){const e={},t=d(n,["data"]);if(t!=null&&h(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function H4(n){const e={},t=d(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(l=>Y4(l))),h(e,["parts"],i)}const s=d(n,["role"]);return s!=null&&h(e,["role"],s),e}function q4(n,e,t){const s={},i=d(e,["expireTime"]);t!==void 0&&i!=null&&h(t,["expireTime"],i);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=d(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&h(t,["bidiGenerateContentSetup"],W4(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&h(t,["fieldMask"],m),s}function z4(n,e){const t={},s=d(e,["config"]);return s!=null&&h(t,["config"],q4(n,s,t)),t}function G4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function $4(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const s=d(n,["args"]);s!=null&&h(e,["args"],s);const i=d(n,["name"]);if(i!=null&&h(e,["name"],i),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function B4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function J4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function K4(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const i=d(n,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const l=d(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","maxOutputTokens"],m);const v=d(n,["mediaResolution"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","mediaResolution"],v);const b=d(n,["seed"]);e!==void 0&&b!=null&&h(e,["setup","generationConfig","seed"],b);const S=d(n,["speechConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","speechConfig"],Wm(S));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","thinkingConfig"],T);const N=d(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],N);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&h(e,["setup","systemInstruction"],H4(rn(q)));const L=d(n,["tools"]);if(e!==void 0&&L!=null){let re=Ca(L);Array.isArray(re)&&(re=re.map(x=>X4(Ia(x)))),h(e,["setup","tools"],re)}const H=d(n,["sessionResumption"]);e!==void 0&&H!=null&&h(e,["setup","sessionResumption"],Q4(H));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&h(e,["setup","inputAudioTranscription"],J);const Z=d(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const se=d(n,["realtimeInputConfig"]);e!==void 0&&se!=null&&h(e,["setup","realtimeInputConfig"],se);const ie=d(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&h(e,["setup","contextWindowCompression"],ie);const pe=d(n,["proactivity"]);return e!==void 0&&pe!=null&&h(e,["setup","proactivity"],pe),t}function W4(n,e){const t={},s=d(e,["model"]);s!=null&&h(t,["setup","model"],$e(n,s));const i=d(e,["config"]);return i!=null&&h(t,["config"],K4(i,t)),t}function Y4(n){const e={},t=d(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const i=d(n,["executableCode"]);i!=null&&h(e,["executableCode"],i);const l=d(n,["fileData"]);l!=null&&h(e,["fileData"],G4(l));const c=d(n,["functionCall"]);c!=null&&h(e,["functionCall"],$4(c));const f=d(n,["functionResponse"]);f!=null&&h(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&h(e,["inlineData"],j4(m));const v=d(n,["text"]);v!=null&&h(e,["text"],v);const b=d(n,["thought"]);b!=null&&h(e,["thought"],b);const S=d(n,["thoughtSignature"]);S!=null&&h(e,["thoughtSignature"],S);const T=d(n,["videoMetadata"]);return T!=null&&h(e,["videoMetadata"],T),e}function Q4(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X4(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(S=>S)),h(e,["functionDeclarations"],b)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const i=d(n,["computerUse"]);i!=null&&h(e,["computerUse"],i);const l=d(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&h(e,["googleMaps"],B4(f));const m=d(n,["googleSearch"]);m!=null&&h(e,["googleSearch"],J4(m));const v=d(n,["urlContext"]);return v!=null&&h(e,["urlContext"],v),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Z4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const i=Object.keys(s).map(l=>`${t}.${l}`);e.push(...i)}else e.push(t)}return e.join(",")}function eU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const l=Z4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];i.length>0&&(f=i.map(v=>c.includes(v)?`generationConfig.${v}`:v));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class tU extends ds{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=z4(this.apiClient,e);l=ce("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const m=eU(f,e.config);return i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),i.then(v=>v)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function nU(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function rU(n){const e={},t=d(n,["config"]);return t!=null&&nU(t,e),e}function sU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function oU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&sU(s,e),e}function iU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function aU(n,e){const t={},s=d(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const i=d(n,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),t}function lU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const s=d(n,["metadata"]);s!=null&&h(e,["metadata"],s);const i=d(n,["done"]);i!=null&&h(e,["done"],i);const l=d(n,["error"]);l!=null&&h(e,["error"],l);const c=d(n,["response"]);return c!=null&&h(e,["response"],cU(c)),e}function uU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["fileName"]);s!=null&&h(e,["fileName"],s);const i=d(n,["config"]);return i!=null&&aU(i,e),e}function cU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&h(e,["parent"],s);const i=d(n,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function dU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function hU(n){const e={},t=d(n,["config"]);return t!=null&&dU(t,e),e}function fU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["fileSearchStores"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function pU(n,e){const t={},s=d(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),h(e,["customMetadata"],f)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function mU(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=d(n,["config"]);return s!=null&&pU(s,e),e}function gU(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function vU(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function yU(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&vU(s,e),e}function bU(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function wU(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const i=d(n,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),t}function SU(n){const e={},t=d(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=d(n,["config"]);return s!=null&&wU(s,e),e}function EU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const i=d(n,["documents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class _U extends ds{constructor(e){super(),this.apiClient=e,this.list=async t=>new oi(us.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yU(e);i=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SU(e);return l=ce("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=EU(m),b=new t2;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class TU extends ds{constructor(e,t=new _U(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new oi(us.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async get(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iU(e);return l=ce("{name}",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>m)}}async delete(e){var t,s;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oU(e);i=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hU(e);return l=ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=fU(m),b=new n2;return Object.assign(b,v),b})}}async uploadToFileSearchStoreInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mU(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=gU(m),b=new r2;return Object.assign(b,v),b})}}async importFile(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uU(e);return l=ce("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),i.then(m=>{const v=lU(m),b=new Gm;return Object.assign(b,v),b})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function IU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function CU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function kU(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=d(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&h(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(n,["learningRate"]);if(e!==void 0&&m!=null&&h(e,["tuningTask","hyperparameters","learningRate"],m),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function AU(n,e,t){const s={};let i=d(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec"],xS(N))}else if(i==="PREFERENCE_TUNING"){const N=d(n,["validationDataset"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec"],xS(N))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(f==="PREFERENCE_TUNING"){const N=d(n,["epochCount"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(m==="PREFERENCE_TUNING"){const N=d(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(v==="PREFERENCE_TUNING"){const N=d(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let b=d(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(b==="PREFERENCE_TUNING"){const N=d(n,["adapterSize"]);e!==void 0&&N!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const S=d(n,["labels"]);e!==void 0&&S!=null&&h(e,["labels"],S);const T=d(n,["beta"]);return e!==void 0&&T!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function NU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const i=d(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const l=d(n,["trainingDataset"]);l!=null&&jU(l);const c=d(n,["config"]);return c!=null&&kU(c,t),t}function xU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const i=d(n,["preTunedModel"]);i!=null&&h(t,["preTunedModel"],i);const l=d(n,["trainingDataset"]);l!=null&&HU(l,t,e);const c=d(n,["config"]);return c!=null&&AU(c,t,e),t}function OU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function RU(n,e){const t={},s=d(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function PU(n,e,t){const s={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function DU(n,e,t){const s={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function MU(n,e){const t={},s=d(n,["config"]);return s!=null&&PU(s,t),t}function LU(n,e){const t={},s=d(n,["config"]);return s!=null&&DU(s,t),t}function UU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>OT(f))),h(t,["tuningJobs"],c)}return t}function FU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Xp(f))),h(t,["tuningJobs"],c)}return t}function VU(n,e){const t={},s=d(n,["name"]);s!=null&&h(t,["model"],s);const i=d(n,["name"]);return i!=null&&h(t,["endpoint"],i),t}function jU(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),h(t,["examples","examples"],i)}return t}function HU(n,e,t){const s={};let i=d(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(i==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function OT(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["state"]);l!=null&&h(t,["state"],hT(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["tuningTask","startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["tuningTask","completeTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["description"]);b!=null&&h(t,["description"],b);const S=d(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const T=d(n,["_self"]);return T!=null&&h(t,["tunedModel"],VU(T)),t}function Xp(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["state"]);l!=null&&h(t,["state"],hT(l));const c=d(n,["createTime"]);c!=null&&h(t,["createTime"],c);const f=d(n,["startTime"]);f!=null&&h(t,["startTime"],f);const m=d(n,["endTime"]);m!=null&&h(t,["endTime"],m);const v=d(n,["updateTime"]);v!=null&&h(t,["updateTime"],v);const b=d(n,["error"]);b!=null&&h(t,["error"],b);const S=d(n,["description"]);S!=null&&h(t,["description"],S);const T=d(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const N=d(n,["tunedModel"]);N!=null&&h(t,["tunedModel"],N);const q=d(n,["preTunedModel"]);q!=null&&h(t,["preTunedModel"],q);const L=d(n,["supervisedTuningSpec"]);L!=null&&h(t,["supervisedTuningSpec"],L);const H=d(n,["preferenceOptimizationSpec"]);H!=null&&h(t,["preferenceOptimizationSpec"],H);const J=d(n,["tuningDataStats"]);J!=null&&h(t,["tuningDataStats"],J);const Z=d(n,["encryptionSpec"]);Z!=null&&h(t,["encryptionSpec"],Z);const se=d(n,["partnerModelTuningSpec"]);se!=null&&h(t,["partnerModelTuningSpec"],se);const ie=d(n,["customBaseModel"]);ie!=null&&h(t,["customBaseModel"],ie);const pe=d(n,["experiment"]);pe!=null&&h(t,["experiment"],pe);const re=d(n,["labels"]);re!=null&&h(t,["labels"],re);const x=d(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const k=d(n,["pipelineJob"]);k!=null&&h(t,["pipelineJob"],k);const A=d(n,["serviceAccount"]);A!=null&&h(t,["serviceAccount"],A);const M=d(n,["tunedModelDisplayName"]);M!=null&&h(t,["tunedModelDisplayName"],M);const D=d(n,["veoTuningSpec"]);return D!=null&&h(t,["veoTuningSpec"],D),t}function qU(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const i=d(n,["name"]);i!=null&&h(t,["name"],i);const l=d(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=d(n,["done"]);c!=null&&h(t,["done"],c);const f=d(n,["error"]);return f!=null&&h(t,["error"],f),t}function xS(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const i=d(n,["vertexDatasetResource"]);return i!=null&&h(t,["validationDatasetUri"],i),t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class zU extends ds{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new oi(us.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:i});return l.baseModel=void 0,await this.tuneInternal(l)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),l=await this.tuneMldevInternal(i);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:$p.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=RU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>Xp(b))}else{const v=OU(e);return f=ce("{name}",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>OT(b))}}async listInternal(e){var t,s,i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const v=LU(e);return f=ce("tuningJobs",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=FU(b),T=new uS;return Object.assign(T,S),T})}else{const v=MU(e);return f=ce("tunedModels",v._url),m=v._query,delete v._url,delete v._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(S=>{const T=S;return T.sdkHttpResponse={headers:b.headers},T})),c.then(b=>{const S=UU(b),T=new uS;return Object.assign(T,S),T})}}async cancel(e){var t,s,i,l;let c="",f={};if(this.apiClient.isVertexAI()){const m=CU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=IU(e);c=ce("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI()){const f=xU(e,e);return l=ce("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>Xp(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NU(e);return l=ce("tunedModels",f._url),c=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:m.headers},b})),i.then(m=>qU(m))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class GU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $U=1024*1024*8,BU=3,JU=1e3,KU=2,Pd="x-goog-upload-status";async function WU(n,e,t){var s;const i=await RT(n,e,t),l=await(i==null?void 0:i.json());if(((s=i==null?void 0:i.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function YU(n,e,t){var s;const i=await RT(n,e,t),l=await(i==null?void 0:i.json());if(((s=i==null?void 0:i.headers)===null||s===void 0?void 0:s[Pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=iT(l),f=new $m;return Object.assign(f,c),f}async function RT(n,e,t){var s,i;let l=0,c=0,f=new Bp(new Response),m="upload";for(l=n.size;c<l;){const v=Math.min($U,l-c),b=n.slice(c,c+v);c+v>=l&&(m+=", finalize");let S=0,T=JU;for(;S<BU&&(f=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(v)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[Pd]));)S++,await XU(T),T=T*KU;if(c+=v,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Pd])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function QU(n){return{size:n.size,type:n.type}}function XU(n){return new Promise(e=>setTimeout(e,n))}class ZU{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WU(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QU(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class e6{create(e,t,s){return new t6(e,t,s)}}class t6{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const OS="x-goog-api-key";class n6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(OS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(OS,this.apiKey)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const r6="gl-node/";class s6{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=DP(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const i=new n6(this.apiKey);this.apiClient=new b4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:r6+"web",uploader:new ZU,downloader:new GU}),this.models=new F4(this.apiClient),this.live=new R4(this.apiClient,i,new e6),this.batches=new uD(this.apiClient),this.chats=new GD(this.models,this.apiClient),this.caches=new HD(this.apiClient),this.files=new eM(this.apiClient),this.operations=new V4(this.apiClient),this.authTokens=new tU(this.apiClient),this.tunings=new zU(this.apiClient),this.fileSearchStores=new TU(this.apiClient)}}const o6=()=>{const n="AIzaSyCSFyCeDbb17S9girfB9pZJJ7Sg8_nxAJs";return new s6({apiKey:n})},RS=(n,e,t)=>{const s=o6();if(!s)return null;let i=n.systemInstruction+`

IMPORTANT: Do not use markdown formatting like ** or * in your responses. Use plain text only.`;if(t&&t!=="en"){const l={es:"Responde siempre en espaol.",fr:"Rponds toujours en franais.",de:"Antworte immer auf Deutsch.",it:"Rispondi sempre in italiano.",pt:"Responda sempre em portugus.",ar:"   .",hi:"    ",ml:"   ."}[t];l&&(i=l+" "+i)}if(e&&e.length>0){const l=e.map(c=>`- "${c.title}": ${c.description}`).join(`
`);i+=`

Available video tutorials:
${l}

When users ask questions related to these topics, suggest the relevant video tutorial by title.`}return n.qaTraining&&n.qaTraining.length>0&&(i=`KNOWLEDGE BASE - Use this information to answer questions naturally:
${n.qaTraining.map(l=>`${l.question}: ${l.answer}`).join(`
`)}

When users ask about these topics, use the information above but respond conversationally, not in Q&A format.

`+i),s.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:i}})},i6=async(n,e)=>{try{return await n.sendMessageStream({message:e})}catch(t){throw console.error("Error sending message to Gemini:",t),t}},a6=({config:n,videos:e=[]})=>{const[t,s]=He.useState(!1),[i,l]=He.useState([]),[c,f]=He.useState(""),[m,v]=He.useState(!1),[b,S]=He.useState(null),[T,N]=He.useState("en"),[q,L]=He.useState(!1),H=He.useRef(null),J=He.useRef(null),Z=[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugus"},{code:"ar",name:""},{code:"hi",name:""},{code:"ml",name:""}];He.useEffect(()=>{if(t){const re=RS(n,e,T);S(re),i.length===0&&l([{id:"welcome",role:"model",text:n.welcomeMessage,timestamp:Date.now()}])}},[t,n,e]),He.useEffect(()=>{var re;(re=H.current)==null||re.scrollIntoView({behavior:"smooth"})},[i]);const se=async()=>{if(!c.trim()||!b)return;const re=c.trim();f("");const x={id:Date.now().toString(),role:"user",text:re,timestamp:Date.now()};l(k=>[...k,x]),v(!0);try{const k=await i6(b,re);let A="";const M=(Date.now()+1).toString();l(D=>[...D,{id:M,role:"model",text:"",timestamp:Date.now()}]);for await(const D of k){const F=D.text||"";A+=F,l(O=>O.map(Be=>Be.id===M?{...Be,text:A}:Be))}}catch(k){console.error(k),l(A=>[...A,{id:Date.now().toString(),role:"model",text:"I'm sorry, I'm having trouble connecting right now. Please try again later.",timestamp:Date.now()}])}finally{v(!1),setTimeout(()=>{var k;(k=J.current)==null||k.focus()},100)}},ie=re=>{re.key==="Enter"&&!re.shiftKey&&(re.preventDefault(),se())},pe=re=>{if("speechSynthesis"in window){const x=new SpeechSynthesisUtterance(re),k={en:"en-US",es:"es-ES",fr:"fr-FR",de:"de-DE",it:"it-IT",pt:"pt-BR",ar:"ar-SA",hi:"hi-IN",ml:"ml-IN"};x.lang=k[T]||"en-US",x.rate=.9,speechSynthesis.speak(x)}};return R.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end",children:[t&&R.jsxs("div",{className:`mb-4 bg-white shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-slide-up ${q?"fixed inset-4 rounded-lg z-50":"w-[350px] sm:w-[400px] h-[500px] rounded-2xl origin-bottom-right"}`,children:[R.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 flex justify-between items-center text-white",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:R.jsx(XC,{size:18})}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-semibold text-sm",children:"AI Support Assistant"}),R.jsx("p",{className:"text-xs text-blue-100",children:"Powered by Gemini"})]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("select",{value:T,onChange:re=>{N(re.target.value),S(null);const x=RS(n,e,re.target.value);S(x)},className:"px-2 py-1 text-xs bg-white/20 border border-white/30 rounded text-white focus:outline-none focus:bg-white/30",children:Z.map(re=>R.jsx("option",{value:re.code,className:"text-slate-800",children:re.name},re.code))}),R.jsx("button",{onClick:()=>L(!q),className:"p-1 hover:bg-white/20 rounded-full transition",title:q?"Exit fullscreen":"Fullscreen",children:q?"":""}),R.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded-full transition",children:R.jsx(em,{size:20})})]})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[i.map(re=>R.jsxs("div",{className:`flex gap-3 ${re.role==="user"?"flex-row-reverse":""}`,children:[R.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${re.role==="user"?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-600"}`,children:re.role==="user"?R.jsx(tk,{size:16}):R.jsx(AC,{size:16})}),R.jsx("div",{className:`max-w-[80%] rounded-2xl p-3 text-sm leading-relaxed ${re.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-white border border-slate-200 text-slate-700 rounded-tl-none shadow-sm"}`,children:R.jsxs("div",{className:"flex items-start justify-between gap-2",children:[R.jsx("div",{className:"flex-1",children:re.text||R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-75"}),R.jsx("span",{className:"w-1.5 h-1.5 bg-current rounded-full animate-bounce delay-150"})]})}),re.role==="model"&&re.text&&R.jsx("button",{onClick:()=>pe(re.text),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors flex-shrink-0",title:"Listen",children:R.jsx(ok,{size:14})})]})})]},re.id)),R.jsx("div",{ref:H})]}),R.jsxs("div",{className:"p-3 bg-white border-t border-slate-100",children:[R.jsxs("div",{className:"relative flex items-center gap-2",children:[R.jsx("input",{ref:J,type:"text",value:c,onChange:re=>f(re.target.value),onKeyDown:ie,placeholder:"Ask for help...",disabled:m,className:"flex-1 pl-4 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all text-sm"}),R.jsx("button",{onClick:se,disabled:!c.trim()||m,className:"absolute right-2 p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?R.jsx(MC,{size:16,className:"animate-spin"}):R.jsx(JC,{size:16})})]}),R.jsx("div",{className:"text-center mt-2",children:R.jsx("p",{className:"text-[10px] text-slate-400",children:"AI can make mistakes. Please verify important info."})})]})]}),R.jsxs("button",{onClick:()=>s(!t),className:`group p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-105 flex items-center gap-2 ${t?"bg-slate-700 rotate-90 opacity-0 pointer-events-none absolute":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white"}`,children:[R.jsx(VC,{size:28,className:"animate-pulse"}),R.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium pr-0 group-hover:pr-2",children:"Support Chat"})]})]})},l6=({videoId:n,onClose:e})=>(He.useEffect(()=>{const t=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e]),n?R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:e,children:R.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-xl overflow-hidden shadow-2xl animate-slide-up",onClick:t=>t.stopPropagation(),children:[R.jsx("div",{className:"absolute top-0 right-0 p-4 z-10",children:R.jsx("button",{onClick:e,className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:R.jsx(em,{size:24})})}),R.jsx("div",{className:"aspect-video w-full",children:R.jsx("iframe",{src:`https://www.youtube.com/embed/${n}?autoplay=1&rel=0`,title:"YouTube video player",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null),u6={systemInstruction:"You are a helpful customer support agent for 'Polosys Support'. You assist users with questions about accounting software, inventory management, and general troubleshooting. Be polite, concise, and professional. If you don't know the answer, advise them to contact human support at support@polosys.com or call our customer care number: +1-800-POLOSYS (765-6797). For urgent issues, recommend calling the customer care number.",welcomeMessage:"Hello! How can I help you with the system today?"},c6=()=>{const[n,e]=He.useState(()=>localStorage.getItem("adminLoggedIn")==="true"?Js.ADMIN:Js.CUSTOMER),[t,s]=He.useState(!1),[i,l]=He.useState([]),[c,f]=He.useState(u6),[m,v]=He.useState(!0),[b,S]=He.useState(null),[T,N]=He.useState(""),[q,L]=He.useState(!1),[H,J]=He.useState({email:"",password:""}),[Z,se]=He.useState(""),ie=()=>{L(!0),se("")},pe=async k=>{k.preventDefault();try{await cR(iw,H.email,H.password),localStorage.setItem("adminLoggedIn","true"),e(Js.ADMIN),L(!1),J({email:"",password:""})}catch{se("Invalid credentials")}},re=async()=>{await fR(iw),localStorage.removeItem("adminLoggedIn"),e(Js.CUSTOMER),s(!1)};He.useEffect(()=>{(async()=>{try{const[k,A]=await Promise.all([AP(),NP()]);l(k),A&&f(A)}catch(k){console.error("Error loading data:",k)}finally{v(!1)}})()},[]),He.useEffect(()=>{m||kP(i).catch(console.error)},[i,m]),He.useEffect(()=>{m||zp(c).catch(console.error)},[c,m]);const x=i.filter(k=>k.title.toLowerCase().includes(T.toLowerCase())||k.description.toLowerCase().includes(T.toLowerCase()));return R.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900",children:[R.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-30",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between h-16",children:[R.jsxs("div",{className:"flex items-center gap-3 cursor-pointer select-none",onDoubleClick:()=>s(!t),title:"Double click for admin options",children:[R.jsx("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:R.jsx(PC,{size:24})}),R.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-600",children:"Polosys Support"})]}),R.jsx("div",{className:"flex items-center gap-4",children:n===Js.CUSTOMER?t&&R.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-blue-600 hover:bg-slate-50 rounded-lg transition-colors animate-fade-in",children:[R.jsx(YC,{size:18}),R.jsx("span",{children:"Admin Access"})]}):R.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 rounded-lg transition-colors",children:[R.jsx(UC,{size:18}),R.jsx("span",{children:"Logout"})]})})]})})}),R.jsxs("main",{className:"relative",children:[m?R.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),R.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):n===Js.ADMIN?R.jsx(xP,{videos:i,setVideos:l,chatConfig:c,setChatConfig:f}):R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[R.jsxs("div",{className:"text-center mb-16 space-y-4",children:[R.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight",children:"How can we help you today?"}),R.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Browse our video library for quick tutorials or chat with our AI assistant for instant support."}),R.jsxs("div",{className:"max-w-xl mx-auto mt-8 relative group",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors",children:R.jsx($C,{size:20})}),R.jsx("input",{type:"text",placeholder:"Search for videos (e.g., 'invoice', 'setup')...",value:T,onChange:k=>N(k.target.value),className:"block w-full pl-11 pr-4 py-4 bg-white border border-slate-200 rounded-2xl shadow-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})]})]}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x.map(k=>R.jsxs("div",{onClick:()=>S(k.videoId),className:"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-100 cursor-pointer flex flex-col h-full",children:[R.jsxs("div",{className:"relative aspect-video overflow-hidden bg-slate-100",children:[R.jsx("img",{src:`https://img.youtube.com/vi/${k.videoId}/hqdefault.jpg`,alt:k.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),R.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:R.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center shadow-lg transform scale-90 group-hover:scale-110 transition-all duration-300",children:R.jsx(xC,{size:24,className:"text-blue-600 ml-1"})})}),R.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/70 rounded text-xs text-white font-medium",children:"Video"})]}),R.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[R.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors",children:k.title}),R.jsx("p",{className:"text-slate-600 text-sm leading-relaxed flex-1",children:k.description}),R.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center text-blue-600 font-medium text-sm",children:["Watch Tutorial ",R.jsx("span",{className:"ml-1 group-hover:translate-x-1 transition-transform",children:""})]})]})]},k.id))}),x.length===0&&R.jsxs("div",{className:"text-center py-20",children:[R.jsx("p",{className:"text-slate-500 text-lg",children:"No videos found matching your search."}),R.jsx("button",{onClick:()=>N(""),className:"mt-4 text-blue-600 font-medium hover:underline",children:"Clear search"})]})]}),n===Js.CUSTOMER&&R.jsx(a6,{config:c,videos:i})]}),R.jsx(l6,{videoId:b,onClose:()=>S(null)}),q&&R.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:R.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl w-96 max-w-[90vw]",children:[R.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Admin Login"}),R.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),R.jsx("input",{type:"email",required:!0,value:H.email,onChange:k=>J({...H,email:k.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),R.jsx("input",{type:"password",required:!0,value:H.password,onChange:k=>J({...H,password:k.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),Z&&R.jsx("p",{className:"text-red-500 text-sm text-center",children:Z}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx("button",{type:"button",onClick:()=>{L(!1),J({email:"",password:""}),se("")},className:"flex-1 py-2 px-4 border border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50",children:"Cancel"}),R.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Login"})]})]})]})})]})},PT=document.getElementById("root");if(!PT)throw new Error("Could not find root element to mount to");const d6=SC.createRoot(PT);d6.render(R.jsx(fC.StrictMode,{children:R.jsx(c6,{})}));
